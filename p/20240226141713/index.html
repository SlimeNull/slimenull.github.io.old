<!doctype html><html lang=zh-CN dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='ç±»ä¼¼äºç½‘é¡µä¸­è½®æ’­å›¾çš„, 2D ä¸ 3D çš„è½®è½¬å›¾, åŒ…å«æ‹–æ‹½çš„æƒ¯æ€§, æ‹–æ‹½ç»“æŸçš„è‡ªåŠ¨å›æ­£ä»¥åŠç‚¹å‡»é€‰æ‹©åŠŸèƒ½'><title>Unity è½®è½¬å›¾, æƒ¯æ€§, è‡ªåŠ¨å›æ­£, ç‚¹å‡»é€‰æ‹©</title>
<link rel=canonical href=https://slimenull.com/p/20240226141713/><link rel=stylesheet href=/scss/style.min.73438a911857e6d491e39369614d0dd0c0302dcacfb43e15034e0e48cac08c07.css><meta property='og:title' content='Unity è½®è½¬å›¾, æƒ¯æ€§, è‡ªåŠ¨å›æ­£, ç‚¹å‡»é€‰æ‹©'><meta property='og:description' content='ç±»ä¼¼äºç½‘é¡µä¸­è½®æ’­å›¾çš„, 2D ä¸ 3D çš„è½®è½¬å›¾, åŒ…å«æ‹–æ‹½çš„æƒ¯æ€§, æ‹–æ‹½ç»“æŸçš„è‡ªåŠ¨å›æ­£ä»¥åŠç‚¹å‡»é€‰æ‹©åŠŸèƒ½'><meta property='og:url' content='https://slimenull.com/p/20240226141713/'><meta property='og:site_name' content='SlimeNull Blogs'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='unity'><meta property='article:tag' content='note'><meta property='article:published_time' content='2024-02-26T14:17:13+08:00'><meta property='article:modified_time' content='2024-02-26T14:17:13+08:00'><meta name=twitter:title content="Unity è½®è½¬å›¾, æƒ¯æ€§, è‡ªåŠ¨å›æ­£, ç‚¹å‡»é€‰æ‹©"><meta name=twitter:description content="ç±»ä¼¼äºç½‘é¡µä¸­è½®æ’­å›¾çš„, 2D ä¸ 3D çš„è½®è½¬å›¾, åŒ…å«æ‹–æ‹½çš„æƒ¯æ€§, æ‹–æ‹½ç»“æŸçš„è‡ªåŠ¨å›æ­£ä»¥åŠç‚¹å‡»é€‰æ‹©åŠŸèƒ½"><link rel="shortcut icon" href=/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu11436448765783238083.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>SlimeNull Blogs</a></h1><h2 class=site-description>ä¸ºäº†æ›´å¥½çš„å¼€æºä¸–ç•Œ~</h2></div></header><ol class=social-menu><li><a href=https://github.com/SlimeNull target=_blank title=GitHub rel=me><!doctype html><svg t="1702542119184" class="icon" viewBox="0 0 1024 1024" p-id="4136" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M692.906667 938.666667A42.666667 42.666667.0 01650.24 896V785.066667A91.733333 91.733333.0 00627.2 714.24a42.666667 42.666667.0 0126.026667-71.253333c104.106666-12.373334 200.106666-45.653334 200.106666-226.133334a170.666667 170.666667.0 00-28.586666-94.72A117.333333 117.333333.0 01807.253333 234.24a158.293333 158.293333.0 000-60.16A326.4 326.4.0 00718.08 220.586667a42.666667 42.666667.0 01-35.84 6.4 433.066667 433.066667.0 00-235.52.0 42.666667 42.666667.0 01-35.84-6.4A315.733333 315.733333.0 00320.853333 174.08a150.186667 150.186667.0 000 60.16 121.173333 121.173333.0 01-18.346666 88.746667A173.653333 173.653333.0 00273.92 418.133333C273.92 584.106666 354.133333 628.48 474.453333 643.84A42.666667 42.666667.0 01509.44 672a42.666667 42.666667.0 01-8.96 42.666667 87.893333 87.893333.0 00-23.466667 66.56V896A42.666667 42.666667.0 01391.68 896v-24.32a256 256 0 01-224.853333-89.173333A166.4 166.4.0 00117.333333 744.96a42.666667 42.666667.0 1121.333334-82.773333A210.346667 210.346667.0 01224 720.213333c42.666667 42.666667 85.333333 80.213333 166.4 64.853334a165.973333 165.973333.0 019.813333-67.413334C312.32 695.466666 186.88 632.32 186.88 418.986667a256 256 0 0142.666667-142.08 36.266667 36.266667.0 005.546666-26.453334 242.773333 242.773333.0 0114.08-136.96 42.666667 42.666667.0 0126.88-24.32c14.506667-4.266667 66.56-12.8 165.12 51.2a518.826667 518.826667.0 01242.773334.0c98.56-64 150.613333-55.893333 164.693333-51.2a42.666667 42.666667.0 0126.88 24.32A243.626667 243.626667.0 01889.6 250.88a32 32 0 004.693333 24.32A256 256 0 01936.96 417.706667c0 216.32-124.586667 279.04-213.333333 298.666666a182.613333 182.613333.0 019.386666 71.253334V896a42.666667 42.666667.0 01-40.106666 42.666667z" fill="#666" p-id="4137"/></svg></a></li><li><a href=https://space.bilibili.com/441842015 target=_blank title=Bilibili rel=me><!doctype html><svg t="1702541966104" class="icon" viewBox="0 0 1024 1024" p-id="16981" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M306.005333 117.632 444.330667 256h135.296l138.368-138.325333A42.666667 42.666667.0 01778.368 178.048L700.330667 256H789.333333A149.333333 149.333333.0 01938.666667 405.333333v341.333334A149.333333 149.333333.0 01789.333333 896H234.666667A149.333333 149.333333.0 0185.333333 746.666667V405.333333A149.333333 149.333333.0 01234.666667 256h88.96L245.632 177.962667a42.666667 42.666667.0 0160.373333-60.373334zm483.328 223.701333H234.666667a64 64 0 00-63.701334 57.856L170.666667 405.333333v341.333334a64 64 0 0057.856 63.701333L234.666667 810.666667h554.666666a64 64 0 0063.701334-57.856L853.333333 746.666667V405.333333a64 64 0 00-64-64zm-448 128A42.666667 42.666667.0 01384 512v85.333333a42.666667 42.666667.0 01-85.333333.0V512a42.666667 42.666667.0 0142.666666-42.666667zm341.333334.0A42.666667 42.666667.0 01725.333333 512v85.333333a42.666667 42.666667.0 01-85.333333.0V512a42.666667 42.666667.0 0142.666667-42.666667z" fill="#666" p-id="16982"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>ä¸»é¡µ</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>å½’æ¡£</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>æœç´¢</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>é“¾æ¥</span></a></li><div class=menu-bottom-section><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://slimenull.com/ selected></option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#ä¸»è¦é€»è¾‘>ä¸»è¦é€»è¾‘</a><ol><li><a href=#åŸºç¡€æ—‹è½¬>åŸºç¡€æ—‹è½¬</a></li><li><a href=#è‡ªåŠ¨å›æ­£>è‡ªåŠ¨å›æ­£</a></li><li><a href=#è¿åŠ¨æƒ¯æ€§>è¿åŠ¨æƒ¯æ€§</a></li><li><a href=#ç‚¹å‡»é€‰æ‹©>ç‚¹å‡»é€‰æ‹©</a></li></ol></li><li><a href=#ç‰©ä½“ç”Ÿæˆ>ç‰©ä½“ç”Ÿæˆ</a><ol><li><a href=#åˆ›å»ºç‰©ä½“>åˆ›å»ºç‰©ä½“</a></li><li><a href=#ui-ç‰¹æœ‰æ›´æ–°>UI ç‰¹æœ‰æ›´æ–°</a></li></ol></li><li><a href=#å…¶ä»–>å…¶ä»–</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/unity/ style=background-color:#1f2933;color:#fff>Unity
</a><a href=/categories/tutorial/ style=background-color:#1ec3db;color:#fff>æ•™ç¨‹</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/20240226141713/>Unity è½®è½¬å›¾, æƒ¯æ€§, è‡ªåŠ¨å›æ­£, ç‚¹å‡»é€‰æ‹©</a></h2><h3 class=article-subtitle>ç±»ä¼¼äºç½‘é¡µä¸­è½®æ’­å›¾çš„, 2D ä¸ 3D çš„è½®è½¬å›¾, åŒ…å«æ‹–æ‹½çš„æƒ¯æ€§, æ‹–æ‹½ç»“æŸçš„è‡ªåŠ¨å›æ­£ä»¥åŠç‚¹å‡»é€‰æ‹©åŠŸèƒ½</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Feb 26, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 15 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><p>ç®€å•çš„å®ç° 2D ä»¥åŠ 3D çš„è½®è½¬å›¾, ç±»ä¼¼äº Web ä¸­æ— é™å¾ªç¯çš„è½®æ’­å›¾é‚£æ ·.</p><p><img src=/images/unity_carousel_2d.gif loading=lazy></p><p><img src=/images/unity_carousel_3d.gif loading=lazy></p><blockquote><p>æ–‡ä¸­æ‰€æœ‰ä»£ç å‡å·²åŒæ­¥è‡³ <a class=link href=https://github.com/SlimeNull/UnityTests target=_blank rel=noopener>github.com/SlimeNull/UnityTests</a></p><ul><li>3D è½®è½¬å›¾: <a class=link href=https://github.com/SlimeNull/UnityTests/blob/main/Assets/Scripts/Scenes/CarouselTestScene/Carousel.cs target=_blank rel=noopener>Assets/Scripts/Scenes/CarouselTestScene/Carousel.cs</a></li><li>2D è½®è½¬å›¾: <a class=link href=https://github.com/SlimeNull/UnityTests/blob/main/Assets/Scripts/Scenes/CarouselTestScene/UICarousel.cs target=_blank rel=noopener>Assets/Scripts/Scenes/CarouselTestScene/UICarousel.cs</a></li></ul></blockquote><br><h2 id=ä¸»è¦é€»è¾‘>ä¸»è¦é€»è¾‘</h2><p>æ ¹æ®æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœå¯çŸ¥, ä¸»è¦åŸç†å°±æ˜¯, å½“é¼ æ ‡æ‹–æ‹½æ—¶, æ›´æ–°å¯¹è±¡çš„ä½ç½®. æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨è„šæœ¬ä¸­ä¿å­˜ä¸€ä¸ª &ldquo;å½“å‰æ—‹è½¬é‡&rdquo; çš„å˜é‡, å½“é¼ æ ‡æ‹–æ‹½æ—¶, æ›´æ”¹å®ƒ. è€Œæ¯æ¬¡æ‹–æ‹½, éƒ½æ ¹æ®æ—‹è½¬é‡, è®¡ç®—æ¯ä¸€ä¸ªå¯¹è±¡çš„ä½ç½®. æ¥ä¸‹æ¥ä»¥ 3D è½®è½¬å›¾ä¸ºä¾‹, è®²è¿°ç¼–å†™æ€è·¯.</p><br><h3 id=åŸºç¡€æ—‹è½¬>åŸºç¡€æ—‹è½¬</h3><p>è®¾è®¡å¯¹è±¡å±‚çº§å…³ç³»:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>- çˆ¶å¯¹è±¡ (è„šæœ¬æŒ‚è½½åˆ°è¿™é‡Œ)
</span></span><span class=line><span class=cl>  |- å­å¯¹è±¡
</span></span><span class=line><span class=cl>  |- å­å¯¹è±¡
</span></span><span class=line><span class=cl>  |- å­å¯¹è±¡
</span></span><span class=line><span class=cl>  |- ...
</span></span><span class=line><span class=cl>  |- å­å¯¹è±¡
</span></span></code></pre></td></tr></table></div></div><p>è½®è½¬å›¾çš„å¤§æ¦‚é€»è¾‘æ¡†æ¶:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Carousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å½“å‰æ—‹è½¬åç§»é‡</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>_radianOffset</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>Start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// åœ¨å¼€å§‹æ—¶, æ›´æ–°ç‰©ä½“çŠ¶æ€</span>
</span></span><span class=line><span class=cl>        <span class=n>UpdateObjectStatus</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>UpdateObjectStatus</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// æ›´æ–°å­ç‰©ä½“çŠ¶æ€, è®¡ç®—æ—‹è½¬, è®¾ç½®ä½ç½®ç­‰</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IDragHandler</span><span class=p>.</span><span class=n>OnDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>mouseOffset</span> <span class=p>=</span> <span class=err>è·å–é¼ æ ‡æ‹–æ‹½åç§»é‡çš„é€»è¾‘</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	    <span class=kt>var</span> <span class=n>radianChange</span> <span class=p>=</span> <span class=err>å°†é¼ æ ‡åç§»é‡è½¬æ¢ä¸ºæ—‹è½¬é‡çš„é€»è¾‘</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	    
</span></span><span class=line><span class=cl>        <span class=n>_radianOffset</span> <span class=p>+=</span> <span class=n>radianChange</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>UpdateObjectStatus</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ç¼–å†™ä»æ—‹è½¬è§’åº¦, æ›´æ–°ç‰©ä½“çŠ¶æ€çš„é€»è¾‘. è¿™é‡Œ, æˆ‘ä»¬å°†ä¸€æ•´ä¸ªåœ†å¹³å‡åˆ†ä¸ºæˆå‘˜æ•°é‡ä»½, å¹¶è®©å®ƒä»¬å¹³å‡åˆ†å¸ƒ. åŠå¾„çš„è¯, æˆ‘ä»¬å…è®¸ç”¨æˆ·åœ¨æ£€è§†å™¨ä¸­è‡ªå®šä¹‰, æ‰€ä»¥åœ¨è¿™é‡Œå‘å¤–æš´éœ²å­—æ®µå³å¯.</p><p>éœ€è¦æ³¨æ„çš„æ˜¯, åœ¨æ•°å­¦ä¹ æƒ¯ä¸‰è§’å‡½æ•°ä¸­, è§’çš„èµ·å§‹ä¸º x æ­£æ–¹å‘, ä¹Ÿå°±æ˜¯ &ldquo;å³æ–¹&rdquo;, ä¸ºäº†ä½¿ç¬¬ä¸€ä¸ªå­ç‰©ä½“, ä¹Ÿå°±æ˜¯æ—‹è½¬é‡ä¸º 0 çš„å­ç‰©ä½“åœ¨æœ€å‰æ–¹, æˆ‘ä»¬åœ¨å®é™…è®¡ç®—è§’åº¦æ—¶, éœ€è¦æ•´ä½“å‡å»åŠä¸ª PI, ä¹Ÿå°±æ˜¯ 90 åº¦.</p><p><img src=/images/circle_radian_rotation.gif loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Carousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>_radianOffset</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>	<span class=cs>/// å¤§å°</span>
</span></span><span class=line><span class=cl>	<span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=na>	[field: SerializeField]</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>float</span> <span class=n>Size</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=m>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>Start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>UpdateObjectStatus</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// æ›´æ–°ç‰©ä½“çŠ¶æ€</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>UpdateObjectStatus</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=kt>var</span> <span class=n>radius</span> <span class=p>=</span> <span class=n>Size</span> <span class=p>/</span> <span class=m>2</span><span class=p>;</span>                        <span class=c1>// åŠå¾„</span>
</span></span><span class=line><span class=cl>		<span class=kt>var</span> <span class=n>childCount</span> <span class=p>=</span> <span class=n>transform</span><span class=p>.</span><span class=n>childCount</span><span class=p>;</span>        <span class=c1>// æˆå‘˜æ•°é‡</span>
</span></span><span class=line><span class=cl>		<span class=kt>var</span> <span class=n>radianGap</span> <span class=p>=</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>PI</span> <span class=p>*</span> <span class=m>2</span> <span class=p>/</span> <span class=n>childCount</span><span class=p>;</span>    <span class=c1>// æ—‹è½¬å¼§åº¦é—´éš”</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span> <span class=n>i</span> <span class=p>&lt;</span> <span class=n>childCount</span><span class=p>;</span> <span class=n>i</span><span class=p>++)</span>
</span></span><span class=line><span class=cl>		<span class=p>{</span>
</span></span><span class=line><span class=cl>		    <span class=c1>// è·å–å½“å‰è§’åº¦, ä»¥åŠå½“å‰æ¸¸æˆå¯¹è±¡</span>
</span></span><span class=line><span class=cl>			<span class=kt>var</span> <span class=n>radian</span> <span class=p>=</span> <span class=n>radianGap</span> <span class=p>*</span> <span class=n>i</span> <span class=p>+</span> <span class=n>_radianOffset</span> <span class=p>-</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>PI</span> <span class=p>/</span> <span class=m>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=kt>var</span> <span class=n>child</span> <span class=p>=</span> <span class=n>transform</span><span class=p>.</span><span class=n>GetChild</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// è®¡ç®—ä½™å¼¦æ­£å¼¦å€¼</span>
</span></span><span class=line><span class=cl>			<span class=kt>var</span> <span class=n>cos</span> <span class=p>=</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>Cos</span><span class=p>(</span><span class=n>radian</span><span class=p>);</span>
</span></span><span class=line><span class=cl>			<span class=kt>var</span> <span class=n>sin</span> <span class=p>=</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>Sin</span><span class=p>(</span><span class=n>radian</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// è®¡ç®—åæ ‡</span>
</span></span><span class=line><span class=cl>			<span class=kt>var</span> <span class=n>x</span> <span class=p>=</span> <span class=n>cos</span> <span class=p>*</span> <span class=n>radius</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=kt>var</span> <span class=n>z</span> <span class=p>=</span> <span class=n>sin</span> <span class=p>*</span> <span class=n>radius</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// è®¾ç½®ä½ç½®</span>
</span></span><span class=line><span class=cl>			<span class=n>child</span><span class=p>.</span><span class=n>localPosition</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Vector3</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=m>0</span><span class=p>,</span> <span class=n>z</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IDragHandler</span><span class=p>.</span><span class=n>OnDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// æ‹–æ‹½é€»è¾‘</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ¥ä¸‹æ¥å®ç°è·å–é¼ æ ‡æ‹–æ‹½åç§»é‡, ç”±äº 3D ç©ºé—´ä¸­çš„å¯¹è±¡, è·ç¦»ç›¸æœºè¿œè¿‘ä¸ç¡®å®š, æ‰€ä»¥æœ€ç»ˆçš„é¼ æ ‡åç§»é‡æˆ‘ä»¬ä»¥é¼ æ ‡ä½ç½®è½¬æ¢ä¸ºä¸–ç•Œåæ ‡çš„ç»“æœä¸ºå‡†. åœ¨å¼€å§‹æ‹–æ‹½çš„æ—¶å€™, è®°å½•ä¸‹å½“å‰è·ç¦»ç›¸æœºçš„ä½ç½®ä¸é¼ æ ‡çš„ä¸–ç•Œåæ ‡, å¹¶åœ¨æ¥ä¸‹æ¥çš„æ¯ä¸€æ¬¡æ‹–æ‹½è§¦å‘æ—¶éƒ½é‡æ–°è®¡ç®—é¼ æ ‡çš„ä¸–ç•Œåæ ‡, å¹¶å¾—å‡ºé¼ æ ‡åœ¨ä¸–ç•Œä¸­çš„åç§»é‡.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Carousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span><span class=p>,</span> <span class=n>IBeginDragHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>_radianOffset</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>_cameraDistance</span><span class=p>;</span>              <span class=c1>// ç›¸æœºè·ç¦»</span>
</span></span><span class=line><span class=cl>    <span class=n>Vector3</span> <span class=n>_lastMouseWorldPosition</span><span class=p>;</span>    <span class=c1>// ä¸Šæ¬¡çš„é¼ æ ‡ä¸–ç•Œåæ ‡</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>	<span class=cs>/// å¤§å°</span>
</span></span><span class=line><span class=cl>	<span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=na>	[field: SerializeField]</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>float</span> <span class=n>Size</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=m>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>Start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>UpdateObjectStatus</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// æ›´æ–°ç‰©ä½“çŠ¶æ€</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>UpdateObjectStatus</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// ä½ç½®æ›´æ–°é€»è¾‘</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IDragHandler</span><span class=p>.</span><span class=n>OnDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>radius</span> <span class=p>=</span> <span class=n>Size</span> <span class=p>/</span> <span class=m>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æ±‚å½“å‰é¼ æ ‡åæ ‡, è®¡ç®—é¼ æ ‡çš„åç§»é‡</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>mousePosition</span> <span class=p>=</span> <span class=n>Input</span><span class=p>.</span><span class=n>mousePosition</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>mousePosition</span><span class=p>.</span><span class=n>z</span> <span class=p>=</span> <span class=n>_cameraDistance</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>newMouseWorldPosition</span> <span class=p>=</span> <span class=n>Camera</span><span class=p>.</span><span class=n>main</span><span class=p>.</span><span class=n>ScreenToWorldPoint</span><span class=p>(</span><span class=n>mousePosition</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>mouseWorldOffset</span> <span class=p>=</span> <span class=n>newMouseWorldPosition</span> <span class=p>-</span> <span class=n>_lastMouseWorldPosition</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// ä¿å­˜æ–°çš„é¼ æ ‡ä½ç½®</span>
</span></span><span class=line><span class=cl>        <span class=n>_lastMouseWorldPosition</span> <span class=p>=</span> <span class=n>newMouseWorldPosition</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// å°†é¼ æ ‡åç§»é‡è½¬æ¢ä¸ºæ—‹è½¬é‡</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>radianChange</span> <span class=p>=</span> <span class=n>mouseWorldOffset</span><span class=p>.</span><span class=n>x</span> <span class=p>/</span> <span class=n>radius</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// å¢åŠ æ—‹è½¬</span>
</span></span><span class=line><span class=cl>        <span class=n>_radianOffset</span> <span class=p>+=</span> <span class=n>radianChange</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æ›´æ–°ç‰©ä½“çŠ¶æ€</span>
</span></span><span class=line><span class=cl>        <span class=n>UpdateObjectStatus</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IBeginDragHandler</span><span class=p>.</span><span class=n>OnBeginDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// é€šè¿‡è‡ªå·±çš„å±å¹•åæ ‡, å– z å€¼å¾—åˆ°ç›¸æœºè·ç¦»</span>
</span></span><span class=line><span class=cl>        <span class=c1>// å½“ç„¶, è¿™é‡Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å‘é‡æŠ•å½±æ¥ç›´æ¥è·å–å½“å‰å¯¹è±¡ä¸ç›¸æœºçš„è·ç¦»</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>selfScreenPosition</span> <span class=p>=</span> <span class=n>Camera</span><span class=p>.</span><span class=n>main</span><span class=p>.</span><span class=n>WorldToScreenPoint</span><span class=p>(</span><span class=n>transform</span><span class=p>.</span><span class=n>position</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>_cameraDistance</span> <span class=p>=</span> <span class=n>selfScreenPosition</span><span class=p>.</span><span class=n>z</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æ±‚é¼ æ ‡çš„ä¸–ç•Œåæ ‡</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>mousePosition</span> <span class=p>=</span> <span class=n>Input</span><span class=p>.</span><span class=n>mousePosition</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>mousePosition</span><span class=p>.</span><span class=n>z</span> <span class=p>=</span> <span class=n>_cameraDistance</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>_lastMouseWorldPosition</span> <span class=p>=</span> <span class=n>Camera</span><span class=p>.</span><span class=n>main</span><span class=p>.</span><span class=n>ScreenToWorldPoint</span><span class=p>(</span><span class=n>mousePosition</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­, æˆ‘ä»¬çš„æ—‹è½¬é‡æ˜¯ç›´æ¥å°†é¼ æ ‡åç§»é‡é™¤ä»¥åŠå¾„å¾—æ¥çš„. å› ä¸ºåœ†çš„å‘¨é•¿ç­‰äºå¼§ä¹˜åŠå¾„, åä¹‹, å¦‚æœæƒ³è¦æ ¹æ®åœ†ä¸Šé•¿åº¦æ±‚è§’å¤§å°, ç›´æ¥æ‹¿è¿™ä¸ªé•¿åº¦é™¤ä»¥åŠå¾„å³å¯. è€Œæˆ‘ä»¬è¿™é‡Œçš„æ€è·¯, æ­£æ˜¯å°†é¼ æ ‡çš„åç§»é‡, è§†ä½œåœ†ä¸Šä¸€ç‚¹çš„æ—‹è½¬è·ç¦».</p><p><img src=/images/circle_length_equals_lr.png loading=lazy></p><p>å½“ç„¶, ä½ ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡åˆ«çš„ç®—æ³•æ¥å°†é¼ æ ‡åç§»é‡è½¬æ¢ä¸ºæ—‹è½¬é‡, è¿™å–å†³äºä½ çš„éœ€æ±‚. ç”šè‡³ä½ ä¹Ÿå¯ä»¥ç›´æ¥æš´åŠ›çš„å°†é¼ æ ‡çš„åæ ‡åç§»ä¹˜æˆ–é™¤ä»¥ä¸€ä¸ªå›ºå®šçš„æ•°æ¥ä½œä¸ºæ—‹è½¬é‡ä½¿ç”¨.</p><p>æœ€å, æ£€æŸ¥ä¸€ä¸‹ä½ çš„ä»£ç , å®ƒä»¬å¤§æ¦‚æ˜¯è¿™æ ·çš„:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Carousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span><span class=p>,</span> <span class=n>IBeginDragHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>_radianOffset</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>_cameraDistance</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>Vector3</span> <span class=n>_lastMouseWorldPosition</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>float</span> <span class=n>Size</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=m>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>Start</span><span class=p>()</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>UpdateObjectStatus</span><span class=p>()</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IDragHandler</span><span class=p>.</span><span class=n>OnDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span> <span class=p>{</span> <span class=p>..</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IBeginDragHandler</span><span class=p>.</span><span class=n>OnBeginDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ç¼–å†™å®ŒåŸºç¡€ä»£ç ä¹‹å, æˆ‘ä»¬çš„æ•ˆæœå¤§æ¦‚å¦‚ä¸‹:</p><p><img src=/images/basic_carousel_3d.gif loading=lazy></p><blockquote><p>æ³¨æ„, ä¸ºäº†è®© 3D åœºæ™¯ä¸­çš„ç‰©ä½“èƒ½å¤Ÿæ¥æ”¶æŒ‡é’ˆæ‹–æ‹½çš„äº‹ä»¶, ä½ çš„åœºæ™¯ä¸­éœ€è¦æœ‰ä¸€ä¸ª &ldquo;EventSystem&rdquo; ç»„ä»¶, å¹¶ä¸”ä¸»ç›¸æœºéœ€è¦æŒ‚è½½ &ldquo;GraphicsRaycaster&rdquo; ç»„ä»¶.</p></blockquote><br><h3 id=è‡ªåŠ¨å›æ­£>è‡ªåŠ¨å›æ­£</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬è¿˜éœ€è¦ç»§ç»­ç¼–å†™è‡ªåŠ¨å›æ­£çš„åŠŸèƒ½, ä½¿æœ€è¿‘çš„ç‰©ä½“æ—‹è½¬åˆ°å‰æ–¹. å¤§æ¦‚æ€è·¯å°±æ˜¯, ä¿å­˜å½“å‰æœ€é è¿‘å‰æ–¹çš„ç‰©ä½“ç´¢å¼•, å¹¶è®¡ç®—å…¶åœ¨æœ€å‰æ–¹çš„æ—‹è½¬åç§»é‡, æœ€åä½¿ç”¨ DOTween æ‰§è¡Œç¼“åŠ¨.</p><p>å› ä¸ºæˆ‘ä»¬ä½¿ç”¨æ­£å¼¦å€¼ä¹˜åŠå¾„ä½œä¸ºç‰©ä½“çš„ z åæ ‡, æ‰€ä»¥å¯¹äºè·å–å½“å‰æœ€å‰æ–¹çš„ç‰©ä½“, æˆ‘ä»¬åªéœ€è¦çœ‹å“ªä¸ªç‰©ä½“æ—‹è½¬é‡æ­£å¼¦å€¼æœ€å°å³å¯.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Carousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span><span class=p>,</span> <span class=n>IBeginDragHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–å­—æ®µå’Œå±æ€§</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// å·²é€‰æ‹©çš„ç´¢å¼•</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>SelectedIndex</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=kd>private</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// æ›´æ–°ç‰©ä½“çŠ¶æ€</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>UpdateObjectStatus</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=kt>var</span> <span class=n>radius</span> <span class=p>=</span> <span class=n>Size</span> <span class=p>/</span> <span class=m>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=kt>var</span> <span class=n>childCount</span> <span class=p>=</span> <span class=n>transform</span><span class=p>.</span><span class=n>childCount</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=kt>var</span> <span class=n>radianGap</span> <span class=p>=</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>PI</span> <span class=p>*</span> <span class=m>2</span> <span class=p>/</span> <span class=n>childCount</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>minSin</span> <span class=p>=</span> <span class=m>2f</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>selectedIndex</span> <span class=p>=</span> <span class=p>-</span><span class=m>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span> <span class=n>i</span> <span class=p>&lt;</span> <span class=n>childCount</span><span class=p>;</span> <span class=n>i</span><span class=p>++)</span>
</span></span><span class=line><span class=cl>		<span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=kt>var</span> <span class=n>radian</span> <span class=p>=</span> <span class=n>radianGap</span> <span class=p>*</span> <span class=n>i</span> <span class=p>+</span> <span class=n>_radianOffset</span> <span class=p>-</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>PI</span> <span class=p>/</span> <span class=m>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=kt>var</span> <span class=n>child</span> <span class=p>=</span> <span class=n>transform</span><span class=p>.</span><span class=n>GetChild</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>			<span class=kt>var</span> <span class=n>cos</span> <span class=p>=</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>Cos</span><span class=p>(</span><span class=n>radian</span><span class=p>);</span>
</span></span><span class=line><span class=cl>			<span class=kt>var</span> <span class=n>sin</span> <span class=p>=</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>Sin</span><span class=p>(</span><span class=n>radian</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>			<span class=kt>var</span> <span class=n>x</span> <span class=p>=</span> <span class=n>cos</span> <span class=p>*</span> <span class=n>radius</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=kt>var</span> <span class=n>z</span> <span class=p>=</span> <span class=n>sin</span> <span class=p>*</span> <span class=n>radius</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>			<span class=n>child</span><span class=p>.</span><span class=n>localPosition</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Vector3</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=m>0</span><span class=p>,</span> <span class=n>z</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// å¦‚æœå½“å‰æ­£å¼¦å€¼å°äºå·²ä¿å­˜çš„æœ€å°æ­£å¼¦å€¼</span>
</span></span><span class=line><span class=cl>            <span class=c1>// åˆ™æ›´æ–°æœ€å°æ­£å¼¦å€¼ä»¥åŠå·²é€‰ä¸­ç´¢å¼•</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>sin</span> <span class=p>&lt;=</span> <span class=n>minSin</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>minSin</span> <span class=p>=</span> <span class=n>sin</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>selectedIndex</span> <span class=p>=</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æ›´æ–°å±æ€§</span>
</span></span><span class=line><span class=cl>        <span class=n>SelectedIndex</span> <span class=p>=</span> <span class=n>selectedIndex</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–é€»è¾‘</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>è¦è·å–æŸä¸ªå­å¯¹è±¡å¯¹åº”çš„æ—‹è½¬è§’åº¦, ç›´æ¥æ‹¿æ—‹è½¬é—´éš”, ä¹˜å…¶ç´¢å¼•, å†è½¬ä¸ºè´Ÿæ•°å³å¯. å› ä¸ºä»ç¬¬ä¸€ä¸ªå…ƒç´ æ—‹è½¬åˆ°ç¬¬äºŒä¸ªå…ƒç´ æ—¶, æ—‹è½¬è§’åº¦æ˜¯å‡å°‘çš„.</p><p><img src=/images/unity_carousel_rotation2.gif loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Carousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span><span class=p>,</span> <span class=n>IBeginDragHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>   
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–å­—æ®µå’Œå±æ€§</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// ä»ç´¢å¼•è·å–æ—‹è½¬é‡</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;param name=&#34;index&#34;&gt;&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;returns&gt;&lt;/returns&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>float</span> <span class=n>GetRadianFromItemIndex</span><span class=p>(</span><span class=kt>int</span> <span class=n>index</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>childCount</span> <span class=p>=</span> <span class=n>transform</span><span class=p>.</span><span class=n>childCount</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>radianGap</span> <span class=p>=</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>PI</span> <span class=p>*</span> <span class=m>2</span> <span class=p>/</span> <span class=n>childCount</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>-</span><span class=n>radianGap</span> <span class=p>*</span> <span class=n>index</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–é€»è¾‘</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>é‚£ä¹ˆ, é€‰ä¸­æŸä¸ªå…ƒç´ , å°†å…¶ç§»åŠ¨åˆ°æœ€å‰æ–¹çš„é€»è¾‘, å¤§æ¦‚å°±æ˜¯è¿™æ ·äº†, ä½¿ç”¨ DOTween åšè¿‡æ¸¡å°±å¯ä»¥:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Carousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span><span class=p>,</span> <span class=n>IBeginDragHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>_radianOffset</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–å­—æ®µ</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// è¿‡æ¸¡æ—¶é—´</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=na>    [field: SerializeField]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>float</span> <span class=n>TransitionTime</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=m>0.2f</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–å­—æ®µå’Œå±æ€§</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// æ›´æ–°ç‰©ä½“çŠ¶æ€</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>UpdateObjectStatus</span><span class=p>()</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// ä»ç´¢å¼•è·å–æ—‹è½¬è§’åº¦</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>float</span> <span class=n>GetRadianFromItemIndex</span><span class=p>(</span><span class=kt>int</span> <span class=n>index</span><span class=p>)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=k>void</span> <span class=n>Select</span><span class=p>(</span><span class=kt>int</span> <span class=n>index</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>originRadian</span> <span class=p>=</span> <span class=n>_radianOffset</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>targetRadian</span> <span class=p>=</span> <span class=n>GetRadianFromItemIndex</span><span class=p>(</span><span class=n>index</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>DOTween</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=n>To</span><span class=p>(</span><span class=n>radian</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// è®¾ç½®æ—‹è½¬é‡å¹¶æ›´æ–°ç‰©ä½“çŠ¶æ€</span>
</span></span><span class=line><span class=cl>                <span class=n>_radianOffset</span> <span class=p>=</span> <span class=n>radian</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>UpdateObjectStatus</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span> <span class=n>originRadian</span><span class=p>,</span> <span class=n>targetRadian</span><span class=p>,</span> <span class=n>TransitionTime</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–é€»è¾‘</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸è¿‡æˆ‘ä»¬æ¥ä¸‹æ¥è¿˜éœ€è¦è€ƒè™‘ä¸¤ä»¶äº‹.</p><ol><li>å¦‚æœæˆ‘å½“å‰æ—‹è½¬é‡æ˜¯ä¸€åœˆå¤š, è¿‡æ¸¡ä¼šå‡ºé—®é¢˜.
ä¸¾ä¸ªä¾‹å­, å½“æ—‹è½¬é‡æ˜¯ä¸¤åœˆåŠæ—¶, ä¹Ÿå°±æ˜¯ 5 ä¸ª PI, å½“æˆ‘è°ƒç”¨ Select(0) çš„æ—¶å€™, å®ƒä¼šç›´æ¥ä» 5 ä¸ª PI è¿‡æ¸¡åˆ° 0, åœ¨è§†è§‰ä¸Šå°±æ˜¯, è¿™ä¸ªè½®è½¬å›¾è½¬äº†ä¸¤åœˆåŠ, å›åˆ°åŸç‚¹.</li><li>å¦‚æœå½“å‰æ—‹è½¬åˆ°ç›®æ ‡æ—‹è½¬é‡å¤§äºåŠä¸ªåœ†, è§†è§‰ä¸Šä¸å¥½çœ‹.
ä¸¾ä¸ªä¾‹å­, æˆ‘éœ€è¦ä» 180 åº¦æ—‹è½¬åˆ° 370 åº¦, å¦‚æœç›´æ¥è¿™ä¹ˆè½¬, è§†è§‰ä¸Šçœ‹èµ·æ¥æ˜¯å®ƒç»•äº†è¿œè·¯, å› ä¸ºä» 180 è½¬åˆ° 10 åº¦ç»è¿‡çš„ 170 å½“ç„¶æ˜¯æ¯” è½¬åˆ° 370 ç»è¿‡çš„ 190 åº¦è¦çŸ­çš„.</li></ol><p>æ‰€ä»¥, æˆ‘ä»¬éœ€è¦åšä¸¤ç‚¹ä¿®æ”¹:</p><ol><li>ä½¿å½“å‰æ—‹è½¬é‡ä¸èƒ½å¤§äºä¸€åœˆ.</li><li>åœ¨è¿›è¡Œæ—‹è½¬å‰, å°†ç›®æ ‡æ—‹è½¬å€¼æ”¹ä¸ºæœ€çŸ­çš„ç›®æ ‡å€¼.</li></ol><p>å…¶ä¸­ç¬¬ä¸€ç‚¹éå¸¸ç®€å•, åªéœ€è¦åœ¨æ¯ä¸€æ¬¡æ›´æ–°ç‰©ä½“çŠ¶æ€å‰, å¯¹å½“å‰æ—‹è½¬é‡ <code>_radianOffset</code> å¯¹ <code>PI * 2</code> è¿›è¡Œæ±‚ä½™å³å¯.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Carousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span><span class=p>,</span> <span class=n>IBeginDragHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>   
</span></span><span class=line><span class=cl>    <span class=c1>// å­—æ®µå’Œå±æ€§</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// æ›´æ–°ç‰©ä½“çŠ¶æ€</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>UpdateObjectStatus</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// å˜é‡åˆå§‹åŒ–</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// åœ¨æ‰§è¡Œæ“ä½œå‰, ä¿è¯ _radianOffset ä¸å¤§äºä¸€åœˆ</span>
</span></span><span class=line><span class=cl>        <span class=n>_radianOffset</span> <span class=p>%=</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>PI</span> <span class=p>*</span> <span class=m>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span> <span class=n>i</span> <span class=p>&lt;</span> <span class=n>childCount</span><span class=p>;</span> <span class=n>i</span><span class=p>++)</span>
</span></span><span class=line><span class=cl>		<span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// æ›´æ–°ç‰©ä½“ä½ç½®ä»¥åŠå…¶ä»–çš„å…·ä½“é€»è¾‘</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æ›´æ–°å±æ€§</span>
</span></span><span class=line><span class=cl>        <span class=n>SelectedIndex</span> <span class=p>=</span> <span class=n>selectedIndex</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–é€»è¾‘</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ç¬¬äºŒç‚¹, æˆ‘ä»¬åªéœ€è¦åˆ¤æ–­æ—‹è½¬å·®å€¼, å¦‚æœå¤§äºåŠåœ†, é‚£ä¹ˆåŠ ä¸Šæˆ–è€…å‡å»ä¸€æ•´ä¸ªåœ†å³å¯.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Carousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span><span class=p>,</span> <span class=n>IBeginDragHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>   
</span></span><span class=line><span class=cl>    <span class=c1>// å­—æ®µå’Œå±æ€§</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// çŸ«æ­£æ—‹è½¬ç›®æ ‡</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>CorrectRotationTarget</span><span class=p>(</span><span class=kt>float</span> <span class=n>origin</span><span class=p>,</span> <span class=k>ref</span> <span class=kt>float</span> <span class=n>target</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>const</span> <span class=kt>float</span> <span class=n>DoublePI</span> <span class=p>=</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>PI</span> <span class=p>*</span> <span class=m>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æ—‹è½¬å·®å€¼</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>diff</span> <span class=p>=</span> <span class=p>(</span><span class=n>target</span> <span class=p>-</span> <span class=n>origin</span><span class=p>)</span> <span class=p>%</span> <span class=n>DoublePI</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>diff</span> <span class=p>&gt;</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>PI</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>diff</span> <span class=p>-=</span> <span class=n>DoublePI</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>diff</span> <span class=p>&lt;</span> <span class=p>-</span><span class=n>Mathf</span><span class=p>.</span><span class=n>PI</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>diff</span> <span class=p>+=</span> <span class=n>DoublePI</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>        <span class=n>target</span> <span class=p>=</span> <span class=n>origin</span> <span class=p>+</span> <span class=n>diff</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–é€»è¾‘</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æœ€å, æˆ‘ä»¬åœ¨æ¾å¼€é¼ æ ‡, ä¹Ÿå°±æ˜¯ç»“æŸæ‹–æ‹½çš„æ—¶å€™, è°ƒç”¨ <code>Select</code> æ–¹æ³•, é€‰æ‹©å½“å‰æœ€å‰æ–¹ç‰©ä½“å³å¯.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Carousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span><span class=p>,</span> <span class=n>IBeginDragHandler</span><span class=p>,</span> <span class=n>IEndDragHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>   
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–å­—æ®µå’Œå±æ€§</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// å¯ç”¨è‡ªåŠ¨å›æ­£</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=na>    [field: SerializeField]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>bool</span> <span class=n>EnableAutoCorrection</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// é€‰æ‹©</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=k>void</span> <span class=n>Select</span><span class=p>(</span><span class=kt>int</span> <span class=n>index</span><span class=p>)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IEndDragHandler</span><span class=p>.</span><span class=n>OnEndDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>EnableAutoCorrection</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Select</span><span class=p>(</span><span class=n>SelectedIndex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–é€»è¾‘</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æœ€å, æ£€æŸ¥ä½ çš„ä»£ç , å®ƒä»¬å¤§æ¦‚æ˜¯è¿™æ ·çš„:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Carousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span><span class=p>,</span> <span class=n>IBeginDragHandler</span><span class=p>,</span> <span class=n>IEndDragHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>_radianOffset</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>_cameraDistance</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>Vector3</span> <span class=n>_lastMouseWorldPosition</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>float</span> <span class=n>Size</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=m>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>bool</span> <span class=n>EnableAutoCorrection</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>float</span> <span class=n>TransitionTime</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=m>0.2f</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=n>SelectedIndex</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=kd>private</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>Start</span><span class=p>()</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>UpdateObjectStatus</span><span class=p>()</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>CorrectRotationTarget</span><span class=p>(</span><span class=kt>float</span> <span class=n>origin</span><span class=p>,</span> <span class=k>ref</span> <span class=kt>float</span> <span class=n>target</span><span class=p>)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>float</span> <span class=n>GetRadianFromItemIndex</span><span class=p>(</span><span class=kt>int</span> <span class=n>index</span><span class=p>)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=k>void</span> <span class=n>Select</span><span class=p>(</span><span class=kt>int</span> <span class=n>index</span><span class=p>)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IDragHandler</span><span class=p>.</span><span class=n>OnDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span> <span class=p>{</span> <span class=p>..</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IBeginDragHandler</span><span class=p>.</span><span class=n>OnBeginDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IEndDragHandler</span><span class=p>.</span><span class=n>OnEndDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨åšå®Œä¸Šé¢ä¸€åˆ‡å·¥ä½œä¹‹å, æˆ‘ä»¬æœ€ç»ˆä¼šæœ‰ä¸€ä¸ªå¸¦è‡ªåŠ¨å›æ­£çš„è½®è½¬å›¾. æ•ˆæœå¦‚ä¸‹:</p><p><img src=/images/unity_basic_carousel_auto_correction.gif loading=lazy></p><br><h3 id=è¿åŠ¨æƒ¯æ€§>è¿åŠ¨æƒ¯æ€§</h3><p>æƒ¯æ€§çš„å®ç°ä¹Ÿæ˜¯å¾ˆç®€å•çš„, æˆ‘ä»¬åªéœ€è¦ä¿å­˜æ‹–æ‹½æ—¶çš„é€Ÿåº¦, åœ¨æ¾å¼€æ—¶ä½¿å…¶ä»ç„¶ç»§ç»­è¿åŠ¨, å¹¶ä¸æ–­å‡å°é€Ÿåº¦å°±å¯ä»¥.</p><p>æˆ‘ä»¬çš„å¤§æ¦‚æ€è·¯å¦‚ä¸‹:</p><ol><li>ä½¿ç”¨ä¸€ä¸ªå­—æ®µä¿å­˜é€Ÿåº¦, ä¸€ä¸ªå­—æ®µä¿å­˜å½“å‰æ˜¯å¦æ­£åœ¨è¢«ç”¨æˆ·æ‹–æ‹½. å‘å¤–å…¬å¼€ &ldquo;æ—‹è½¬é˜»åŠ›&rdquo; ä»¥å…è®¸åœ¨æ£€è§†å™¨ä¸­è°ƒæ•´é˜»åŠ›.</li><li>åœ¨ Update ä¸­, å¦‚æœå¯ç”¨äº†æƒ¯æ€§, æ²¡æœ‰è¢«ç”¨æˆ·æ‹–æ‹½, å¹¶ä¸”é€Ÿåº¦ä¸ä¸º 0, åˆ™é€šè¿‡é€Ÿåº¦å¯¹æ—‹è½¬é‡è¿›è¡Œå¢åŠ , å¹¶æ›´æ–°ç‰©ä½“çŠ¶æ€. å¦‚æœåœ¨ä¸€æ¬¡æ›´æ–°ä¸­, é€Ÿåº¦æœ€ç»ˆè¡°å‡åˆ°äº† 0, é‚£ä¹ˆåˆ™æ‰§è¡Œè‡ªåŠ¨å›æ­£çš„é€»è¾‘.</li><li>åœ¨ Drag ä¸­, æ ¹æ®å½“å‰æ‹–æ‹½çš„æ—‹è½¬å¢é‡ä»¥åŠæ—¶é—´å·®, è®¡ç®—å¹¶ä¿å­˜æ—‹è½¬é€Ÿåº¦.</li><li>åœ¨ EndDrag ä¸­, åŸæœ¬ç›´æ¥è°ƒç”¨è‡ªåŠ¨å›æ­£çš„é€»è¾‘, ä»…åœ¨ä¸å¯ç”¨æƒ¯æ€§çš„æ—¶å€™ç›´æ¥æ‰§è¡Œ. å› ä¸ºå¦‚æœå¯åŠ¨äº†æƒ¯æ€§, åœ¨ Update ä¸­ä¼šæ‰§è¡Œè‡ªåŠ¨å›æ­£, ä¸éœ€è¦åœ¨ç»“æŸæ‹–æ‹½æ—¶æ‰§è¡Œ.</li></ol><p>æœ€ç»ˆ, ä»£ç çš„æ¡†æ¶å¤§è‡´å¦‚ä¸‹:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Carousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span><span class=p>,</span> <span class=n>IBeginDragHandler</span><span class=p>,</span> <span class=n>IEndDragHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–å­—æ®µä¸å±æ€§</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>_radianVelocity</span><span class=p>;</span>   <span class=c1>// æ—‹è½¬é€Ÿåº¦</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=n>_dragging</span><span class=p>;</span>          <span class=c1>// æ˜¯å¦æ­£åœ¨è¢«æ‹–æ‹½</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// æ—‹è½¬é˜»åŠ›</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=na>    [field: SerializeField]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>float</span> <span class=n>RadianDrag</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=m>10</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// å¯ç”¨æƒ¯æ€§</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=na>    [field: SerializeField]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>bool</span> <span class=n>EnableInertia</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>Update</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>EnableInertia</span> <span class=p>&amp;&amp;</span> <span class=p>!</span><span class=n>_dragging</span> <span class=p>&amp;&amp;</span> <span class=n>_radianVelocity</span> <span class=p>==</span> <span class=m>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>_radianOffset</span> <span class=p>+=</span> <span class=n>_radianVelocity</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>UpdateObjectStatus</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// ä½¿é€Ÿåº¦è¡°å‡çš„é€»è¾‘ (ç¨åè¿›è¡Œè¯¦ç»†çš„ç¼–å†™)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// è‡ªåŠ¨å›æ­£</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>EnableAutoCorrection</span> <span class=p>&amp;&amp;</span> <span class=n>_radianVelocity</span> <span class=p>==</span> <span class=m>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>Select</span><span class=p>(</span><span class=n>SelectedIndex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IDragHandler</span><span class=p>.</span><span class=n>OnDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>radius</span> <span class=p>=</span> <span class=n>Size</span> <span class=p>/</span> <span class=m>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>mousePosition</span> <span class=p>=</span> <span class=n>Input</span><span class=p>.</span><span class=n>mousePosition</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>mousePosition</span><span class=p>.</span><span class=n>z</span> <span class=p>=</span> <span class=n>_cameraDistance</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>newMouseWorldPosition</span> <span class=p>=</span> <span class=n>Camera</span><span class=p>.</span><span class=n>main</span><span class=p>.</span><span class=n>ScreenToWorldPoint</span><span class=p>(</span><span class=n>mousePosition</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>mouseWorldOffset</span> <span class=p>=</span> <span class=n>newMouseWorldPosition</span> <span class=p>-</span> <span class=n>_lastMouseWorldPosition</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>_lastMouseWorldPosition</span> <span class=p>=</span> <span class=n>newMouseWorldPosition</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>radianChange</span> <span class=p>=</span> <span class=n>mouseWorldOffset</span><span class=p>.</span><span class=n>x</span> <span class=p>/</span> <span class=n>radius</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// ç›´æ¥ä»¥ radianChange é™¤ä»¥ Time.deltaTime å¾—åˆ°é€Ÿåº¦</span>
</span></span><span class=line><span class=cl>        <span class=n>_radianVelocity</span> <span class=p>=</span> <span class=n>radianChange</span> <span class=p>/</span> <span class=n>Time</span><span class=p>.</span><span class=n>deltaTime</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>_radianOffset</span> <span class=p>+=</span> <span class=n>radianChange</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>UpdateObjectStatus</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IBeginDragHandler</span><span class=p>.</span><span class=n>OnBeginDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// å…¶ä»–é€»è¾‘</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>        <span class=n>_dragging</span> <span class=p>=</span> <span class=kc>true</span><span class=p>;</span>    <span class=c1>// è®¾ç½®æ‹–æ‹½çŠ¶æ€</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IEndDragHandler</span><span class=p>.</span><span class=n>OnEndDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>_dragging</span> <span class=p>=</span> <span class=kc>false</span><span class=p>;</span>   <span class=c1>// è®¾ç½®æ‹–æ‹½çŠ¶æ€</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>EnableAutoCorrection</span> <span class=p>&amp;&amp;</span> <span class=p>!</span><span class=n>EnableInertia</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// è‡ªåŠ¨å›æ­£</span>
</span></span><span class=line><span class=cl>            <span class=n>Select</span><span class=p>(</span><span class=n>SelectedIndex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–é€»è¾‘</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>é€Ÿåº¦çš„è¡°å‡, æˆ‘ä»¬è¿™é‡Œé€šè¿‡å°†é€Ÿåº¦æ‹†è§£æˆä¸¤ä¸ªé‡æ¥åšå¤„ç†, &ldquo;æ–¹å‘&rdquo; å’Œ &ldquo;å¤§å°&rdquo;. ç„¶åå¯¹å¤§å°åšå‡æ³•, æœ€åå†é‡æ–°æ‹¼æ¥.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Carousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span><span class=p>,</span> <span class=n>IBeginDragHandler</span><span class=p>,</span> <span class=n>IEndDragHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å­—æ®µä¸å±æ€§</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>Update</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>EnableInertia</span> <span class=p>&amp;&amp;</span> <span class=p>!</span><span class=n>_dragging</span> <span class=p>&amp;&amp;</span> <span class=n>_radianVelocity</span> <span class=p>!=</span> <span class=m>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>_radianOffset</span> <span class=p>+=</span> <span class=n>_radianVelocity</span> <span class=p>*</span> <span class=n>Time</span><span class=p>.</span><span class=n>deltaTime</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>UpdateObjectStatus</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// æ‹†è§£</span>
</span></span><span class=line><span class=cl>            <span class=kt>var</span> <span class=n>radianVelocitySign</span> <span class=p>=</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>Sign</span><span class=p>(</span><span class=n>_radianVelocity</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=kt>var</span> <span class=n>radianVelocitySize</span> <span class=p>=</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>Abs</span><span class=p>(</span><span class=n>_radianVelocity</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// å‡å°é€Ÿåº¦</span>
</span></span><span class=line><span class=cl>            <span class=n>radianVelocitySize</span> <span class=p>-=</span> <span class=n>RadianDrag</span> <span class=p>*</span> <span class=n>Time</span><span class=p>.</span><span class=n>deltaTime</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>radianVelocitySize</span> <span class=p>&lt;</span> <span class=m>0</span><span class=p>)</span>   <span class=c1>// é€Ÿåº¦å¤§å°ä¸èƒ½ä¸ºè´Ÿå€¼</span>
</span></span><span class=line><span class=cl>                <span class=n>radianVelocitySize</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// é‡æ–°æ‹¼æ¥</span>
</span></span><span class=line><span class=cl>            <span class=n>_radianVelocity</span> <span class=p>=</span> <span class=n>radianVelocitySign</span> <span class=p>*</span> <span class=n>radianVelocitySize</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// è‡ªåŠ¨å›æ­£</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>EnableAutoCorrection</span> <span class=p>&amp;&amp;</span> <span class=n>_radianVelocity</span> <span class=p>==</span> <span class=m>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>Select</span><span class=p>(</span><span class=n>SelectedIndex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–é€»è¾‘</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>äºæ˜¯, æˆ‘ä»¬æˆåŠŸä¸ºè½®è½¬å›¾æ·»åŠ äº†æƒ¯æ€§åŠŸèƒ½. æœ€åæ£€æŸ¥ä»£ç , å®ƒä»¬å¤§æ¦‚æ˜¯è¿™æ ·çš„:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Carousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span><span class=p>,</span> <span class=n>IBeginDragHandler</span><span class=p>,</span> <span class=n>IEndDragHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>_radianOffset</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>_radianVelocity</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>_cameraDistance</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>Vector3</span> <span class=n>_lastMouseWorldPosition</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>float</span> <span class=n>Size</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=m>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>float</span> <span class=n>RadianDrag</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=m>10</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>bool</span> <span class=n>EnableInertia</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>bool</span> <span class=n>EnableAutoCorrection</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>float</span> <span class=n>TransitionTime</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=m>0.2f</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=n>SelectedIndex</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=kd>private</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>Start</span><span class=p>()</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>Update</span><span class=p>()</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>UpdateObjectStatus</span><span class=p>()</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>CorrectRotationTarget</span><span class=p>(</span><span class=kt>float</span> <span class=n>origin</span><span class=p>,</span> <span class=k>ref</span> <span class=kt>float</span> <span class=n>target</span><span class=p>)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>float</span> <span class=n>GetRadianFromItemIndex</span><span class=p>(</span><span class=kt>int</span> <span class=n>index</span><span class=p>)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=k>void</span> <span class=n>Select</span><span class=p>(</span><span class=kt>int</span> <span class=n>index</span><span class=p>)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IDragHandler</span><span class=p>.</span><span class=n>OnDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span> <span class=p>{</span> <span class=p>..</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IBeginDragHandler</span><span class=p>.</span><span class=n>OnBeginDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IEndDragHandler</span><span class=p>.</span><span class=n>OnEndDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>äºæ˜¯, ä½ å°±å¯ä»¥å¾—åˆ°åœ¨æ–‡ç« æœ€å¼€å§‹å±•ç¤ºçš„, å®Œæ•´è½®è½¬å›¾çš„æ•ˆæœäº†:</p><p><img src=/images/unity_carousel_3d.gif loading=lazy></p><br><h3 id=ç‚¹å‡»é€‰æ‹©>ç‚¹å‡»é€‰æ‹©</h3><p>æœ€å, æˆ‘ä»¬å¸Œæœ›ä¸ºè½®è½¬å›¾æ·»åŠ é¼ æ ‡å•å‡»é€‰æ‹©çš„åŠŸèƒ½, å®ç°èµ·æ¥å¾ˆæ–¹ä¾¿, å› ä¸ºæˆ‘ä»¬å·²ç»ç¼–å†™å¥½é€‰æ‹©æŸå…ƒç´ çš„æ–¹æ³• <code>Select</code> äº†. é‚£ä¹ˆ, åªéœ€è¦å®ç° <code>IPointerClickHandler</code>, å¹¶åˆ¤æ–­æ˜¯å¦ç‚¹å‡»äº†æŸä¸ªå­å…ƒç´ , ç„¶åè°ƒç”¨ <code>Select</code> æ–¹æ³•å³å¯.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Carousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span><span class=p>,</span> <span class=n>IBeginDragHandler</span><span class=p>,</span> <span class=n>IEndDragHandler</span><span class=p>,</span> <span class=n>IPointerClickHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å­—æ®µä¸å±æ€§</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// å…è®¸ç‚¹å‡»é€‰æ‹©</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=na>    [field: SerializeField]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>bool</span> <span class=n>AllowClickSelection</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IPointerClickHandler</span><span class=p>.</span><span class=n>OnPointerClick</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(!</span><span class=n>AllowClickSelection</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>childCount</span> <span class=p>=</span> <span class=n>transform</span><span class=p>.</span><span class=n>childCount</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span> <span class=n>i</span> <span class=p>&lt;</span> <span class=n>childCount</span><span class=p>;</span> <span class=n>i</span><span class=p>++)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>var</span> <span class=n>renderer</span> <span class=p>=</span> <span class=n>transform</span><span class=p>.</span><span class=n>GetChild</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>eventData</span><span class=p>.</span><span class=n>pointerPressRaycast</span><span class=p>.</span><span class=n>gameObject</span> <span class=p>==</span> <span class=n>renderer</span><span class=p>.</span><span class=n>gameObject</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>Select</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–é€»è¾‘</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ·»åŠ å®Œä¸Šè¿°ä»£ç ä¹‹å, æˆ‘ä»¬å°±å¾—åˆ°äº†å¯ä»¥å•å‡»é€‰æ‹©çš„è½®è½¬å›¾äº†.</p><p><img src=/images/unity_carousel_click_selection.gif loading=lazy></p><br><h2 id=ç‰©ä½“ç”Ÿæˆ>ç‰©ä½“ç”Ÿæˆ</h2><p>å¯¹äº UI ä¸Šçš„è½®è½¬å›¾, æˆ‘ä»¬ä»¥å±•ç¤º Sprite ä¸ºä¾‹, ä¸ºäº†æ–¹ä¾¿, æˆ‘ä»¬ä¸éœ€è¦åƒåŸæœ¬é‚£æ ·å®ç°åœ¨çˆ¶ç‰©ä½“ä¸‹æ”¾ç½®å¥½ç‰©ä½“, è€Œæ˜¯æ ¹æ®ç”¨æˆ·æŒ‡å®šçš„ Sprite, è‡ªåŠ¨ç”Ÿæˆæ¸¸æˆå¯¹è±¡, è‡ªåŠ¨æŒ‚è½½æ‰€éœ€ç»„ä»¶, è®¾ç½®å±æ€§.</p><br><h3 id=åˆ›å»ºç‰©ä½“>åˆ›å»ºç‰©ä½“</h3><p>æˆ‘ä»¬æ‰“ç®—è®©è„šæœ¬å‘å¤–æš´éœ²å‡ºä¸€ä¸ª <code>Sprite[]</code> ä¾›è®¾ç½®è¦å±•ç¤ºçš„å›¾ç‰‡, é‚£ä¹ˆåœ¨æ¥ä¸‹æ¥çš„é€»è¾‘ä¸­, å°±éœ€è¦å®ç°:</p><ol><li>åˆå§‹åŒ–æ—¶, åˆ›å»ºæ‰€éœ€çš„æ¸¸æˆå¯¹è±¡, æŒ‚è½½ Image ç»„ä»¶ä»¥ä¾›æ˜¾ç¤ºå›¾ç‰‡</li><li>å½“å¤–éƒ¨å¯¹å›¾ç‰‡æ•°ç»„è¿›è¡Œèµ‹å€¼æ—¶, é‡æ–°æ›´æ–°çŠ¶æ€, ä½¿æ˜¾ç¤ºæ˜¯æ­£ç¡®çš„</li><li>ç”±äº Canvas åœ¨ Screen Space - Overlay æ¨¡å¼ä¸‹ä¸å­˜åœ¨è¿‘å¤§è¿œå°, æ‰€ä»¥æˆ‘ä»¬éœ€è¦æä¾›æ ¹æ®å‰åé¡ºåº, è‡ªåŠ¨è¿›è¡Œç¼©æ”¾çš„åŠŸèƒ½</li></ol><p>é‚£ä¹ˆ, æˆ‘ä»¬éœ€è¦åšçš„æ·»åŠ å’Œå˜æ›´çš„æœ‰è¿™äº›:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span><span class=lnt>88
</span><span class=lnt>89
</span><span class=lnt>90
</span><span class=lnt>91
</span><span class=lnt>92
</span><span class=lnt>93
</span><span class=lnt>94
</span><span class=lnt>95
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>UICarousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span><span class=p>,</span> <span class=n>IBeginDragHandler</span><span class=p>,</span> <span class=n>IEndDragHandler</span><span class=p>,</span> <span class=n>IPointerClickHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–å­—æ®µå’Œå±æ€§</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [SerializeField]</span>
</span></span><span class=line><span class=cl>    <span class=n>Sprite</span><span class=p>[]</span> <span class=n>_images</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [SerializeField]</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>bool</span> <span class=n>_scaleImages</span> <span class=p>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [SerializeField]</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>float</span> <span class=n>_minScale</span> <span class=p>=</span> <span class=m>0.3f</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>List</span><span class=p>&lt;</span><span class=n>UnityEngine</span><span class=p>.</span><span class=n>UI</span><span class=p>.</span><span class=n>Image</span><span class=p>&gt;</span> <span class=n>_imageComponents</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// æ‡’åŠ è½½çš„, ç”¨äºè·å– RectTransform çš„å±æ€§</span>
</span></span><span class=line><span class=cl>    <span class=n>RectTransform</span> <span class=n>_selfRectTransform</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>RectTransform</span> <span class=n>SelfRectTransform</span> <span class=p>=&gt;</span> <span class=n>_selfRectTransform</span> <span class=p>??=</span> <span class=n>GetComponent</span><span class=p>&lt;</span><span class=n>RectTransform</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// è¦å±•ç¤ºçš„å›¾ç‰‡</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Sprite</span><span class=p>[]</span> <span class=n>Images</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>get</span> <span class=p>=&gt;</span> <span class=n>_images</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>        <span class=k>set</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>_images</span> <span class=p>=</span> <span class=k>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>UpdateImagesStatus</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// å›¾ç‰‡å°ºå¯¸ (ç”¨äºç”Ÿæˆ Image ç‰©ä½“è®¾ç½®å¤§å°)</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=na>    [field: SerializeField]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Vector2</span> <span class=n>ImageSize</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Vector2</span><span class=p>(</span><span class=m>100</span><span class=p>,</span> <span class=m>100</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>///æ˜¯å¦æ ¹æ®å›¾åƒçš„å‰åå…³ç³»è°ƒæ•´å›¾åƒå¤§å°  &lt;br/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// å¦‚æœæ˜¯ Overlay, ä¸å­˜åœ¨è¿‘å¤§è¿œå°, åˆ™éœ€è¦å¼€å¯è¿™ä¸ª, ä½†æ˜¯å¦‚æœæ˜¯ WorldSpace çš„ Canvas å¹¶ä¸”è®¾ç½®äº†ç¼©æ”¾ä½¿å…¶åœ¨åœºæ™¯å†…, åˆ™ä¸éœ€è¦å¯ç”¨è¿™ä¸ª</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>bool</span> <span class=n>ScaleImages</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>get</span> <span class=p>=&gt;</span> <span class=n>_scaleImages</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>set</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>_scaleImages</span> <span class=p>=</span> <span class=k>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>UpdateImagesStatus</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// æœ€å°ç¼©æ”¾æ¯”ä¾‹ (æœ€åæ–¹çš„å›¾åƒçš„ç¼©æ”¾ç³»æ•°ä¼šæ˜¯è¿™ä¸ªå€¼)</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>float</span> <span class=n>MinScale</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>get</span> <span class=p>=&gt;</span> <span class=n>_minScale</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>        <span class=k>set</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>_minScale</span> <span class=p>=</span> <span class=k>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>UpdateImagesStatus</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>Awake</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// åˆå§‹åŒ–</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>_images</span> <span class=k>is</span> <span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>_images</span> <span class=p>=</span> <span class=n>Array</span><span class=p>.</span><span class=n>Empty</span><span class=p>&lt;</span><span class=n>Sprite</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>UpdateRenderers</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// æ ¹æ®å›¾åƒåˆ›å»º Image å¯¹è±¡, å¹¶è‡ªåŠ¨è®¾ç½®å±æ€§</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;param name=&#34;image&#34;&gt;&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;returns&gt;&lt;/returns&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>UnityEngine</span><span class=p>.</span><span class=n>UI</span><span class=p>.</span><span class=n>Image</span> <span class=n>CreateRendererFor</span><span class=p>(</span><span class=n>Sprite</span> <span class=n>image</span><span class=p>)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// æ›´æ–° Sprite çš„æ¸²æŸ“å™¨</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>UpdateRenderers</span><span class=p>()</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// æ—‹è½¬ä¸»é€»è¾‘</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// æ ¹æ® &#34;æ—‹è½¬åç§»é‡&#34; è®¾ç½®æ‰€æœ‰å›¾åƒçš„ä½ç½®, å¤§å°, ä»¥åŠå‰åå…³ç³»</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>UpdateObjectStatus</span><span class=p>()</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–é€»è¾‘</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ ¹æ® Sprite åˆ›å»º Image çš„é€»è¾‘:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>UICarousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span><span class=p>,</span> <span class=n>IBeginDragHandler</span><span class=p>,</span> <span class=n>IEndDragHandler</span><span class=p>,</span> <span class=n>IPointerClickHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å­—æ®µå’Œå±æ€§</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// æ ¹æ®å›¾åƒåˆ›å»º Image å¯¹è±¡, å¹¶è‡ªåŠ¨è®¾ç½®å±æ€§</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;param name=&#34;image&#34;&gt;&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;returns&gt;&lt;/returns&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>UnityEngine</span><span class=p>.</span><span class=n>UI</span><span class=p>.</span><span class=n>Image</span> <span class=n>CreateRendererFor</span><span class=p>(</span><span class=n>Sprite</span> <span class=n>image</span><span class=p>)</span> 
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>GameObject</span> <span class=n>gameObject</span> <span class=p>=</span> <span class=k>new</span><span class=p>(</span><span class=s>&#34;Image&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>gameObject</span><span class=p>.</span><span class=n>transform</span><span class=p>.</span><span class=n>SetParent</span><span class=p>(</span><span class=n>transform</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>rectTransform</span> <span class=p>=</span> <span class=n>gameObject</span><span class=p>.</span><span class=n>AddComponent</span><span class=p>&lt;</span><span class=n>RectTransform</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>renderer</span> <span class=p>=</span> <span class=n>gameObject</span><span class=p>.</span><span class=n>AddComponent</span><span class=p>&lt;</span><span class=n>UnityEngine</span><span class=p>.</span><span class=n>UI</span><span class=p>.</span><span class=n>Image</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// è®¾ç½®</span>
</span></span><span class=line><span class=cl>        <span class=n>rectTransform</span><span class=p>.</span><span class=n>SetSizeWithCurrentAnchors</span><span class=p>(</span><span class=n>RectTransform</span><span class=p>.</span><span class=n>Axis</span><span class=p>.</span><span class=n>Horizontal</span><span class=p>,</span> <span class=n>ImageSize</span><span class=p>.</span><span class=n>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>rectTransform</span><span class=p>.</span><span class=n>SetSizeWithCurrentAnchors</span><span class=p>(</span><span class=n>RectTransform</span><span class=p>.</span><span class=n>Axis</span><span class=p>.</span><span class=n>Vertical</span><span class=p>,</span> <span class=n>ImageSize</span><span class=p>.</span><span class=n>y</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>renderer</span><span class=p>.</span><span class=n>sprite</span> <span class=p>=</span> <span class=n>image</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>renderer</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–é€»è¾‘</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ›´æ–° Sprite æ¸²æŸ“å™¨çš„é€»è¾‘(åˆ é™¤æˆ–åˆ›å»º Image):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>UICarousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span><span class=p>,</span> <span class=n>IBeginDragHandler</span><span class=p>,</span> <span class=n>IEndDragHandler</span><span class=p>,</span> <span class=n>IPointerClickHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å­—æ®µå’Œå±æ€§</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// æ›´æ–° Sprite çš„æ¸²æŸ“å™¨</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>UpdateRenderers</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>_imageComponents</span> <span class=k>is</span> <span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>_imageComponents</span> <span class=p>=</span> <span class=k>new</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>UnityEngine</span><span class=p>.</span><span class=n>UI</span><span class=p>.</span><span class=n>Image</span><span class=p>&gt;(</span><span class=n>GetComponentsInChildren</span><span class=p>&lt;</span><span class=n>UnityEngine</span><span class=p>.</span><span class=n>UI</span><span class=p>.</span><span class=n>Image</span><span class=p>&gt;());</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>_imageComponents</span><span class=p>.</span><span class=n>Count</span> <span class=p>&lt;</span> <span class=n>_images</span><span class=p>.</span><span class=n>Length</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span> <span class=n>i</span> <span class=p>&lt;</span> <span class=n>_imageComponents</span><span class=p>.</span><span class=n>Count</span><span class=p>;</span> <span class=n>i</span><span class=p>++)</span>
</span></span><span class=line><span class=cl>                <span class=n>_imageComponents</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>sprite</span> <span class=p>=</span> <span class=n>_images</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=p>(</span><span class=n>_imageComponents</span><span class=p>.</span><span class=n>Count</span> <span class=p>&lt;</span> <span class=n>_images</span><span class=p>.</span><span class=n>Length</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>_imageComponents</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>CreateRendererFor</span><span class=p>(</span><span class=n>_images</span><span class=p>[</span><span class=n>_imageComponents</span><span class=p>.</span><span class=n>Count</span><span class=p>]));</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span> <span class=n>i</span> <span class=p>&lt;</span> <span class=n>_images</span><span class=p>.</span><span class=n>Length</span><span class=p>;</span> <span class=n>i</span><span class=p>++)</span>
</span></span><span class=line><span class=cl>                <span class=n>_imageComponents</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>sprite</span> <span class=p>=</span> <span class=n>_images</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=p>(</span><span class=n>_imageComponents</span><span class=p>.</span><span class=n>Count</span> <span class=p>&gt;</span> <span class=n>_images</span><span class=p>.</span><span class=n>Length</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kt>int</span> <span class=n>lastIndex</span> <span class=p>=</span> <span class=n>_imageComponents</span><span class=p>.</span><span class=n>Count</span> <span class=p>-</span> <span class=m>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>                <span class=c1>// destroy the last</span>
</span></span><span class=line><span class=cl>                <span class=n>Destroy</span><span class=p>(</span><span class=n>_imageComponents</span><span class=p>[</span><span class=n>lastIndex</span><span class=p>].</span><span class=n>gameObject</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>                <span class=c1>// remove the last</span>
</span></span><span class=line><span class=cl>                <span class=n>_imageComponents</span><span class=p>.</span><span class=n>RemoveAt</span><span class=p>(</span><span class=n>lastIndex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–é€»è¾‘</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><br><h3 id=ui-ç‰¹æœ‰æ›´æ–°>UI ç‰¹æœ‰æ›´æ–°</h3><p>æ›´æ–°ç‰©ä½“çŠ¶æ€çš„ä¸»é€»è¾‘(ç§»åŠ¨å›¾ç‰‡, ç¼©æ”¾å›¾ç‰‡, è°ƒæ•´å›¾ç‰‡å±‚çº§å…³ç³»):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>UICarousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span><span class=p>,</span> <span class=n>IBeginDragHandler</span><span class=p>,</span> <span class=n>IEndDragHandler</span><span class=p>,</span> <span class=n>IPointerClickHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å­—æ®µå’Œå±æ€§</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// æ—‹è½¬ä¸»é€»è¾‘</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// æ ¹æ® &#34;æ—‹è½¬åç§»é‡&#34; è®¾ç½®æ‰€æœ‰å›¾åƒçš„ä½ç½®, å¤§å°, ä»¥åŠå‰åå…³ç³»</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>UpdateObjectStatus</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>UpdateRenderers</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>scaleGap</span> <span class=p>=</span> <span class=m>1</span> <span class=p>-</span> <span class=n>MinScale</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>radianGap</span> <span class=p>=</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>PI</span> <span class=p>*</span> <span class=m>2</span> <span class=p>/</span> <span class=n>_images</span><span class=p>.</span><span class=n>Length</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>selfSizeDelta</span> <span class=p>=</span> <span class=n>SelfRectTransform</span><span class=p>.</span><span class=n>sizeDelta</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>radius</span> <span class=p>=</span> <span class=n>selfSizeDelta</span><span class=p>.</span><span class=n>x</span> <span class=p>/</span> <span class=m>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>imageCount</span> <span class=p>=</span> <span class=n>_images</span><span class=p>.</span><span class=n>Length</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>halfPi</span> <span class=p>=</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>PI</span> <span class=p>/</span> <span class=m>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>minSin</span> <span class=p>=</span> <span class=m>1f</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>selectedImageIndex</span> <span class=p>=</span> <span class=p>-</span><span class=m>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>_radianOffset</span> <span class=p>%=</span> <span class=p>(</span><span class=n>Mathf</span><span class=p>.</span><span class=n>PI</span> <span class=p>*</span> <span class=m>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span> <span class=n>i</span> <span class=p>&lt;</span> <span class=n>imageCount</span><span class=p>;</span> <span class=n>i</span><span class=p>++)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>var</span> <span class=n>scaleShrink</span> <span class=p>=</span> <span class=n>scaleGap</span> <span class=p>*</span> <span class=n>i</span> <span class=p>/</span> <span class=p>(</span><span class=n>imageCount</span> <span class=p>-</span> <span class=m>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=kt>var</span> <span class=n>renderer</span> <span class=p>=</span> <span class=n>_imageComponents</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=kt>float</span> <span class=n>cos</span> <span class=p>=</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>Cos</span><span class=p>(</span><span class=n>radianGap</span> <span class=p>*</span> <span class=n>i</span> <span class=p>+</span> <span class=n>_radianOffset</span> <span class=p>-</span> <span class=n>halfPi</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=kt>float</span> <span class=n>sin</span> <span class=p>=</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>Sin</span><span class=p>(</span><span class=n>radianGap</span> <span class=p>*</span> <span class=n>i</span> <span class=p>+</span> <span class=n>_radianOffset</span> <span class=p>-</span> <span class=n>halfPi</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=kt>var</span> <span class=n>x</span> <span class=p>=</span> <span class=n>cos</span> <span class=p>*</span> <span class=n>radius</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kt>var</span> <span class=n>z</span> <span class=p>=</span> <span class=n>sin</span> <span class=p>*</span> <span class=n>radius</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>sin</span> <span class=p>&lt;=</span> <span class=n>minSin</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>selectedImageIndex</span> <span class=p>=</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>minSin</span> <span class=p>=</span> <span class=n>sin</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>renderer</span><span class=p>.</span><span class=n>transform</span><span class=p>.</span><span class=n>localPosition</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Vector3</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=m>0</span><span class=p>,</span> <span class=n>z</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>ScaleImages</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kt>var</span> <span class=n>scale</span> <span class=p>=</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>Lerp</span><span class=p>(</span><span class=n>MinScale</span><span class=p>,</span> <span class=m>1</span><span class=p>,</span> <span class=p>((-</span><span class=n>sin</span><span class=p>)</span> <span class=p>+</span> <span class=m>1</span><span class=p>)</span> <span class=p>/</span> <span class=m>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>renderer</span><span class=p>.</span><span class=n>transform</span><span class=p>.</span><span class=n>localScale</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Vector3</span><span class=p>(</span><span class=n>scale</span><span class=p>,</span> <span class=n>scale</span><span class=p>,</span> <span class=n>scale</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>renderer</span><span class=p>.</span><span class=n>transform</span><span class=p>.</span><span class=n>localScale</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Vector3</span><span class=p>(</span><span class=m>1</span><span class=p>,</span> <span class=m>1</span><span class=p>,</span> <span class=m>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æ ¹æ®å¤§å°, è°ƒæ•´é¡ºåº, å› ä¸ºå°çš„åœ¨åé¢, æ‰€ä»¥ç›´æ¥æ ¹æ®å¤§å°, è°ƒç”¨è°ƒæ•´é¡ºåºæ–¹æ³•</span>
</span></span><span class=line><span class=cl>        <span class=k>foreach</span> <span class=p>(</span><span class=kt>var</span> <span class=n>com</span> <span class=k>in</span> <span class=n>_imageComponents</span><span class=p>.</span><span class=n>OrderBy</span><span class=p>(</span><span class=n>com</span> <span class=p>=&gt;</span> <span class=n>com</span><span class=p>.</span><span class=n>rectTransform</span><span class=p>.</span><span class=n>localScale</span><span class=p>.</span><span class=n>x</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=n>com</span><span class=p>.</span><span class=n>transform</span><span class=p>.</span><span class=n>SetAsLastSibling</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// è®°å½•å½“å‰é€‰æ‹©ç´¢å¼•ä»¥åŠå›¾åƒ</span>
</span></span><span class=line><span class=cl>        <span class=n>SelectedIndex</span> <span class=p>=</span> <span class=n>selectedImageIndex</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–é€»è¾‘</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å…¶ä¸­, ç¼©æ”¾å›¾ç‰‡ä¸­ç”¨åˆ°äº† <code>Mathf.Lerp</code> å‡½æ•°, åœ¨ &ldquo;æ¯”ä¾‹&rdquo; å‚æ•°ä¸­, ä¼ å…¥äº† <code>(-sin + 1) / 2</code> è¿™æ ·çš„å€¼. è¿™æ˜¯å› ä¸º, æ­£å¼¦åœ¨æˆ‘ä»¬çš„ç®—æ³•ä¸­æœ¬æ¥å°±å…³ç³»åˆ°ç‰©ä½“çš„å‰åå…³ç³», æ‰€ä»¥ç›´æ¥å¯¹æ­£å¼¦å€¼åšå¤„ç†, å°±èƒ½å¾—åˆ°æœ€ç»ˆå€¼åŸŸä¸º 0 åˆ° 1, å¯ç”¨äº Lerp çš„å‚æ•°äº†.</p><ol><li><code>sin</code>: ä»è¿œåˆ°è¿‘, å€¼ä» 1 åˆ° -1</li><li><code>-sin</code>: ä»è¿œåˆ°è¿‘, å€¼ä» -1 åˆ° 1</li><li><code>-sin + 1</code>: ä»è¿œåˆ°è¿‘, å€¼ä» 0 åˆ° 2</li><li><code>(-sin + 1) / 2</code>: ä»è¿œåˆ°è¿‘, å€¼ä» 0 åˆ° 1</li><li><code>Mathf.Lerp(MinScale, 1, (-sin + 1) / 2)</code>: ä»è¿œåˆ°è¿‘, å€¼ä» <code>MinScale</code> åˆ° 1</li></ol><p>è€Œä¹‹æ‰€ä»¥éœ€è¦è°ƒæ•´é¡ºåº, ä¹Ÿæ˜¯å› ä¸ºåœ¨ UI ä¸­, é®æŒ¡å…³ç³»ä¸ç”± Z è½´å†³å®š, è€Œæ˜¯ç”± UI å±‚çº§ä»¥åŠå®ƒä»¬åœ¨é¢æ¿ä¸­çš„å…ˆåå…³ç³»å†³å®šçš„.</p><p>å¦å¤–, æˆ‘ä»¬ä¹Ÿåº”è¯¥åˆ å»å¯¹é¼ æ ‡çš„åæ ‡è½¬æ¢ä¹‹ç±»çš„ä¸œè¥¿, å› ä¸ºæ˜¯ UI å±‚ä¸Šçš„æ‹–æ‹½, æ‰€ä»¥åœ¨ Drag ä¸­åªéœ€è¦ä½¿ç”¨äº‹ä»¶æ•°æ®çš„é¼ æ ‡ç§»åŠ¨é‡å°±å¯ä»¥äº†:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>UICarousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span><span class=p>,</span> <span class=n>IBeginDragHandler</span><span class=p>,</span> <span class=n>IEndDragHandler</span><span class=p>,</span> <span class=n>IPointerClickHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å­—æ®µå’Œå±æ€§</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// åˆ å» _cameraDistance å’Œ _lastMouseWorldPosition</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// æ‹–æ‹½æ—¶, è®¡ç®—å®é™…è§’åº¦åç§»é‡, å¹¶æ›´æ–°å›¾åƒçŠ¶æ€</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;param name=&#34;eventData&#34;&gt;&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IDragHandler</span><span class=p>.</span><span class=n>OnDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>selfSizeDelta</span> <span class=p>=</span> <span class=n>SelfRectTransform</span><span class=p>.</span><span class=n>sizeDelta</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>normalizedOffset</span> <span class=p>=</span> <span class=n>eventData</span><span class=p>.</span><span class=n>delta</span><span class=p>.</span><span class=n>x</span> <span class=p>/</span> <span class=p>(</span><span class=n>selfSizeDelta</span><span class=p>.</span><span class=n>x</span> <span class=p>/</span> <span class=m>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>radianChange</span> <span class=p>=</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>Asin</span><span class=p>(</span><span class=n>normalizedOffset</span> <span class=p>%</span> <span class=m>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>_radianOffset</span> <span class=p>+=</span> <span class=n>radianChange</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>_radianVelocity</span> <span class=p>=</span> <span class=n>radianChange</span> <span class=p>/</span> <span class=n>Time</span><span class=p>.</span><span class=n>deltaTime</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>UpdateObjectStatus</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IBeginDragHandler</span><span class=p>.</span><span class=n>OnBeginDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// åˆ å»äº†åæ ‡è½¬æ¢é€»è¾‘</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>_dragging</span> <span class=p>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å…¶ä»–é€»è¾‘</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æœ€å, æ£€æŸ¥ä»£ç , å®ƒä»¬åº”è¯¥æ˜¯å¤§æ¦‚è¿™æ ·çš„:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=na>[RequireComponent(typeof(RectTransform))]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>UICarousel</span> <span class=p>:</span> <span class=n>MonoBehavior</span><span class=p>,</span> <span class=n>IDragHandler</span><span class=p>,</span> <span class=n>IBeginDragHandler</span><span class=p>,</span> <span class=n>IEndDragHandler</span><span class=p>,</span> <span class=n>IPointerClickHandler</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>RectTransform</span> <span class=n>_selfRectTransform</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>_radianOffset</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>float</span> <span class=n>_radianVelocity</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=n>_dragging</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [SerializeField]</span>
</span></span><span class=line><span class=cl>    <span class=n>Sprite</span><span class=p>[]</span> <span class=n>_images</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [SerializeField]</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>bool</span> <span class=n>_scaleImages</span> <span class=p>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [SerializeField]</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>float</span> <span class=n>_minScale</span> <span class=p>=</span> <span class=m>0.3f</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>List</span><span class=p>&lt;</span><span class=n>UnityEngine</span><span class=p>.</span><span class=n>UI</span><span class=p>.</span><span class=n>Image</span><span class=p>&gt;</span> <span class=n>_imageComponents</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>RectTransform</span> <span class=n>SelfRectTransform</span> <span class=p>=&gt;</span> <span class=n>_selfRectTransform</span> <span class=p>??=</span> <span class=n>GetComponent</span><span class=p>&lt;</span><span class=n>RectTransform</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Sprite</span><span class=p>[]</span> <span class=n>Images</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Vector2</span> <span class=n>ImageSize</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Vector2</span><span class=p>(</span><span class=m>100</span><span class=p>,</span> <span class=m>100</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>float</span> <span class=n>RadianDrag</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=m>10</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>bool</span> <span class=n>ScaleImages</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>float</span> <span class=n>MinScale</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>bool</span> <span class=n>AllowClickSelection</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>bool</span> <span class=n>EnableInertia</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>bool</span> <span class=n>EnableAutoCorrection</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>float</span> <span class=n>TransitionTime</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=m>0.2f</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=n>SelectedIndex</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=kd>private</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>Awake</span><span class=p>()</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>Start</span><span class=p>()</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>Update</span><span class=p>()</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>UnityEngine</span><span class=p>.</span><span class=n>UI</span><span class=p>.</span><span class=n>Image</span> <span class=n>CreateRendererFor</span><span class=p>(</span><span class=n>Sprite</span> <span class=n>image</span><span class=p>)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>UpdateRenderers</span><span class=p>()</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>UpdateObjectStatus</span><span class=p>()</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>CorrectRotationTarget</span><span class=p>(</span><span class=kt>float</span> <span class=n>origin</span><span class=p>,</span> <span class=k>ref</span> <span class=kt>float</span> <span class=n>target</span><span class=p>)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>float</span> <span class=n>GetRadianOffsetFromIndex</span><span class=p>(</span><span class=kt>int</span> <span class=n>index</span><span class=p>)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=k>void</span> <span class=n>Select</span><span class=p>(</span><span class=kt>int</span> <span class=n>index</span><span class=p>)</span> <span class=p>{</span> <span class=p>....</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IDragHandler</span><span class=p>.</span><span class=n>OnDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span> <span class=p>{</span> <span class=p>..</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IBeginDragHandler</span><span class=p>.</span><span class=n>OnBeginDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IEndDragHandler</span><span class=p>.</span><span class=n>OnEndDrag</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>IPointerClickHandler</span><span class=p>.</span><span class=n>OnPointerClick</span><span class=p>(</span><span class=n>PointerEventData</span> <span class=n>eventData</span><span class=p>)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>äºæ˜¯, æœ€ç»ˆæˆ‘ä»¬å°±èƒ½å¾—åˆ°ä¸€ä¸ªå¯ç‚¹é€‰, å¸¦æƒ¯æ€§, å¸¦è‡ªåŠ¨å›æ­£çš„ 2D è½®è½¬å›¾äº†.</p><p><img src=/images/unity_carousel_2d_click_selection.gif loading=lazy></p><br><h2 id=å…¶ä»–>å…¶ä»–</h2><p>ä»æ•ˆæœä¸Šæ¥çœ‹, æˆ‘ä»¬ç¼–å†™çš„è½®è½¬å›¾å·²ç»å®Œç¾äº†, ä½†ä»”ç»†çœ‹çš„è¯, è¿˜æ˜¯æœ‰ä¸€äº›é€»è¾‘ç‘•ç–µçš„.</p><ol><li>å³ä½¿æˆ‘æ‹–æ‹½è½®è½¬å›¾å¹¶åœæ­¢, æ—‹è½¬é€Ÿåº¦çš„å€¼ä¹Ÿæœ‰å¯èƒ½ä¸ä¸º 0
è¿™å°±å¯¼è‡´å½“å¼€å¯æƒ¯æ€§çš„æ—¶å€™, æ— è®ºå¦‚ä½•, åœ¨æ¾å¼€é¼ æ ‡çš„æ—¶å€™, å®ƒéƒ½ä¼š &ldquo;åŠ¨&rdquo; ä¸€ä¸‹.</li><li>å½“é¼ æ ‡æ‹–æ‹½åˆ°å±å¹•è¾¹ç¼˜çš„æ—¶å€™, é¼ æ ‡åœ¨ç§»åŠ¨, ä½†æ˜¯å±å¹•ä¸Šé¼ æ ‡çš„ä½ç½®ä¸æ”¹å˜
è¿™ä¼šå¯¼è‡´æ—‹è½¬é€Ÿåº¦è¢«è®¾ä¸º 0, è¿›è€Œå¯¼è‡´, è™½ç„¶æ¾å¼€äº†é¼ æ ‡, ä½†æ˜¯å› ä¸ºæ²¡æœ‰è§¦å‘æƒ¯æ€§, å› è€Œæ²¡æœ‰æ‰§è¡Œè‡ªåŠ¨å›æ­£çš„é€»è¾‘. å› ä¸ºå¯ç”¨æƒ¯æ€§æ—¶, åªæœ‰é€Ÿåº¦ä»ä¸€ä¸ªé 0 å€¼å˜æˆ 0 å€¼, æ‰ä¼šæ‰§è¡Œè‡ªåŠ¨å›æ­£.</li></ol><p>è¿™ä¸Šé¢çš„é—®é¢˜, æˆ‘æ‡’å¾—æ”¹äº†, æ”¹èµ·æ¥çš„æ€è·¯çš„è¯, ä¹Ÿå¾ˆç®€å•, å¦‚ä¸‹:</p><ol><li>å°†é€Ÿåº¦è®¡ç®—çš„é€»è¾‘æ‰” Update é‡Œé¢, å¹¶è®¡ç®—ç›¸å¯¹ä¸Šä¸€å¸§çš„æ—‹è½¬é‡, å³å¯è§£å†³é—®é¢˜ 1</li><li>åœ¨ç»“æŸæ‹–æ‹½æ—¶, åŒæ—¶åˆ¤æ–­é€Ÿåº¦æ˜¯å¦ä¸º 0, å¦‚æœä¸º 0 å°±æ„å‘³ç€æƒ¯æ€§é€»è¾‘ä¸æ‰§è¡Œ, é‚£ä¹ˆè¿™æ—¶, ç›´æ¥æ‰§è¡Œè‡ªåŠ¨å›æ­£é€»è¾‘å³å¯.</li></ol><p>æœ€å, å…³äºæœ¬æ–‡ç« ä¸­è„šæœ¬çš„æºä»£ç , ç›´æ¥åœ¨ <a class=link href=https://github.com/SlimeNull/UnityTests target=_blank rel=noopener>github.com/SlimeNull/UnityTests</a> ä¸­ä¸‹è½½å³å¯. æ–‡ç« ä¸­å› ä¸ºæ¶‰åŠåˆ°é€æ­¥éª¤ä»¥åŠæ€è·¯çš„è®²è§£, æ‰€ä»¥ä»£ç å¹¶ä¸å®Œæ•´. ä¸è¿‡ä½ è·Ÿç€åšçš„è¯, ä¹Ÿæ˜¯èƒ½å†™å‡ºæ¥å®Œæ•´çš„ä»£ç çš„.</p><p>ä½¿ç”¨æ–¹å¼çš„è¯, 3D è½®è½¬å›¾æ˜¯ç›´æ¥æŒ‚çˆ¶å¯¹è±¡ä¸Š, ç„¶åæ‰‹åŠ¨åˆ›å»ºå­å¯¹è±¡. åœ¨è¿è¡Œæ—¶ä¼šè‡ªåŠ¨è®¾ç½®å­å¯¹è±¡ä½ç½®. 2D è½®è½¬å›¾çš„è¯, ä¸éœ€è¦æ‰‹åŠ¨åˆ›å»ºå­å¯¹è±¡, ç›´æ¥åœ¨ &ldquo;æ£€è§†å™¨&rdquo; ä¸­è®¾ç½®è¦å±•ç¤ºçš„å›¾ç‰‡, åœ¨å¯åŠ¨æ—¶ä¾¿ä¼šè‡ªåŠ¨åˆ›å»ºå¯¹è±¡.</p><hr><p>æ–‡ç« åŸå§‹é“¾æ¥: <a class=link href=https://slimenull.com/p/20240226141713 target=_blank rel=noopener>https://slimenull.com/p/20240226141713</a></p></section><footer class=article-footer><section class=article-tags><a href=/tags/unity/>Unity</a>
<a href=/tags/note/>Note</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/20240306132352/><div class=article-details><h2 class=article-title>Unity å°åœ°å›¾, å®æ—¶ä¸é™æ€, åœ°å›¾æ ‡è®°, ç‚¹å‡»å¯¼èˆª, è·¯çº¿æ˜¾ç¤º, é£æ ¼åŒ–</h2></div></a></article><article><a href=/p/20231213153716/><div class=article-details><h2 class=article-title>[Unity] åŸºäºè¿­ä»£å™¨çš„åç¨‹åº•å±‚åŸç†è¯¦è§£</h2></div></a></article><article><a href=/p/20231031081556/><div class=article-details><h2 class=article-title>[Unity] ä¸ªäººç¼–ç è§„èŒƒä¸å‘½åå‡†åˆ™å‚è€ƒ</h2></div></a></article><article><a href=/p/20230831150236/><div class=article-details><h2 class=article-title>[Unity, ç¬”è®°] åœ¨ Inspector ä¸­æ˜¾ç¤ºç»“æ„ä½“, ç»“æ„ä½“çš„åºåˆ—åŒ–</h2></div></a></article><article><a href=/p/20230828202236/><div class=article-details><h2 class=article-title>[Unity] å•ä¾‹è®¾è®¡æ¨¡å¼, å¯ä¾›ç»§æ‰¿çš„å•ä¾‹ç»„ä»¶æ¨¡æ¿ç±»</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=SlimeNull/slimenull.github.io issue-term=pathname label=BlogComment crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>let utterancesLoaded=!1;function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;utterancesLoaded=!0,setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{if(!utterancesLoaded)return;setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2023 -
2024 SlimeNull Blogs</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.21.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>