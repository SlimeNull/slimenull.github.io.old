[{"content":" ä½ å¥½~ è¿™é‡Œæ˜¯ SlimeNull, ä½ å¯ä»¥å«æˆ‘è¯ºå°”. çˆ±å¥½æœ‰å¾ˆå¤š, å¬æ­Œ, çœ‹å°è¯´, ä¸è¿‡æœ€å–œæ¬¢çš„å½“ç„¶è¿˜æ˜¯å†™ä»£ç ~\nğŸŒ± å–œæ¬¢çš„è¯­è¨€: C#, Rust, Golang (è™½ç„¶å¹³å¸¸åªç”¨C#) ğŸ”­ æ­£åœ¨å­¦ä¹ çš„: å•ç‰‡æœº, ç‰¹æ•ˆ ğŸ‘¯ å¸Œæœ›å’Œæ›´å¤šå–„è‰¯çš„äººäº¤æœ‹å‹ ğŸ’¬ æˆ–è®¸æˆ‘ä»¬å¯ä»¥èŠäº›æœ‰è¶£ä½†æ²¡å•¥ç”¨çš„å¥‡å¦™å°ç¨‹åº ğŸ“« ä½ å¯ä»¥ç›´æ¥åœ¨è¿™ä¸ªä¸ªäººä»‹ç»ä»“åº“é‡Œé¢å¼€ä¸€ä¸ª Discussion æ¥èŠå¤© (æ¯•ç«Ÿæˆ‘ç¤¾æ) ğŸ¤” è¦æ˜¯æœ‰äººèƒ½æ•™æˆ‘å†™ä»£ç é‚£å°±æ›´å¥½äº† ğŸ’• å¦‚æœæ›´å¤šäººå–œæ¬¢æˆ‘å†™çš„é¡¹ç›®, æˆ‘ä¼šå¾ˆå¼€å¿ƒçš„ ","date":"0001-01-01T00:00:00Z","image":"https://slimenull.com/p/welcome/cover_hu7993621377482819756.jpg","permalink":"https://slimenull.com/p/welcome/","title":"æ¬¢è¿æ¥åˆ°è¯ºå°”çš„åšå®¢ç«™!"},{"content":"å°è£…ä¸€ä¸ªç®€å•çš„ PcmBuilder, ä»¥ IEnumerable\u0026lt;float\u0026gt; çš„å½¢å¼æä¾›é‡‡æ ·å€¼:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 public class PcmBuilder { private PcmBuilder() { } public float SampleRate { get; set; } = 44100; public float Frequency { get; set; } = 4000; public float Amplitude { get; set; } = 1; public PcmBuilder WithSampleRate(long sampleRate) { SampleRate = sampleRate; return this; } public PcmBuilder WithFrequency(float frequency) { Frequency = frequency; return this; } public PcmBuilder WithAmplitude(float amplitude) { Amplitude = amplitude; return this; } public IEnumerable\u0026lt;float\u0026gt; Build() { float current = 0; while (true) { yield return MathF.Sin(current / SampleRate * Frequency) * Amplitude; current++; } } public static PcmBuilder CreateNew() =\u0026gt; new PcmBuilder(); } ä½¿ç”¨å®ƒæ„å»ºå‡º 44100Hz é‡‡æ ·ç‡, 8000Hz çš„æ­£å¼¦æ³¢:\n1 2 3 4 var pcm = PcmBuilder.CreateNew() .WithSampleRate(44100) .WithFrequency(8000) .Build(); WAV æ–‡ä»¶çš„å¤´æ ¼å¼:\nWAV æ–‡ä»¶çš„å¤´ç»“æ„ä½“å®šä¹‰:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 public unsafe struct WaveHeader { private fixed byte _chunkId[4]; private uint _chunkSize; private fixed byte _format[4]; private fixed byte _subChunk1Id[4]; private uint _subChunk1Size; private WaveAudioFormat _audioFormat; private ushort _numChannels; private uint _sampleRate; private uint _byteRate; private ushort _blockAlign; private ushort _bitsPerSample; private fixed byte _subChunk2Id[4]; private uint _subChunk2Size; public unsafe string ChunkId { get { fixed (byte* ptr = _chunkId) { return CreateString(ptr, 4); } } set { fixed (byte* ptr = _chunkId) { FillString(ptr, value, 4); } } } public uint ChunkSize { get =\u0026gt; _chunkSize; set =\u0026gt; _chunkSize = value; } public string Format { get { fixed (byte* ptr = _format) { return CreateString(ptr, 4); } } set { fixed (byte* ptr = _format) { FillString(ptr, value, 4); } } } public string SubChunk1Id { get { fixed (byte* ptr = _subChunk1Id) { return CreateString(ptr, 4); } } set { fixed (byte* ptr = _subChunk1Id) { FillString(ptr, value, 4); } } } public uint SubChunk1Size { get =\u0026gt; _subChunk1Size; set =\u0026gt; _subChunk1Size = value; } public WaveAudioFormat AudioFormat { get =\u0026gt; _audioFormat; set =\u0026gt; _audioFormat = value; } public ushort ChannelCount { get =\u0026gt; _numChannels; set =\u0026gt; _numChannels = value; } public uint SampleRate { get =\u0026gt; _sampleRate; set =\u0026gt; _sampleRate = value; } public uint ByteRate { get =\u0026gt; _byteRate; set =\u0026gt; _byteRate = value; } public ushort BlockAlign { get =\u0026gt; _blockAlign; set =\u0026gt; _blockAlign = value; } public ushort BitsPerSample { get =\u0026gt; _bitsPerSample; set =\u0026gt; _bitsPerSample = value; } public string SubChunk2Id { get { fixed (byte* ptr = _subChunk2Id) { return CreateString(ptr, 4); } } set { fixed (byte* ptr = _subChunk2Id) { FillString(ptr, value, 4); } } } public uint SubChunk2Size { get =\u0026gt; _subChunk2Size; set =\u0026gt; _subChunk2Size = value; } public unsafe static WaveHeader Create(WaveAudioFormat audioFormat, ushort channelCount, uint sampleRate, ushort bitsPerSample, uint pcmDataSize) { return new WaveHeader() { ChunkId = \u0026#34;RIFF\u0026#34;, ChunkSize = (uint)(pcmDataSize + (sizeof(WaveHeader) - 8)), Format = \u0026#34;WAVE\u0026#34;, SubChunk1Id = \u0026#34;fmt \u0026#34;, SubChunk1Size = 16, AudioFormat = audioFormat, ChannelCount = channelCount, SampleRate = sampleRate, ByteRate = sampleRate * channelCount * bitsPerSample / 8, BlockAlign = (ushort)(channelCount * bitsPerSample / 8), BitsPerSample = bitsPerSample, SubChunk2Id = \u0026#34;data\u0026#34;, SubChunk2Size = pcmDataSize }; } private static void FillString(byte* ptr, string value, int maxLength) { if (value.Length \u0026gt; maxLength) { throw new ArgumentException(nameof(value)); } fixed (char* textPtr = value) { for (int i = 0; i \u0026lt; value.Length \u0026amp;\u0026amp; i \u0026lt; maxLength; i++) { ptr[i] = (byte)textPtr[i]; } } } private static string CreateString(byte* ptr, int maxLength) { StringBuilder sb = new StringBuilder(maxLength); for (int i = 0; i \u0026lt; maxLength; i++) { if (ptr[i] == 0) { break; } sb.Append((char)ptr[i]); } return sb.ToString(); } } public enum WaveAudioFormat : ushort { None = 0, PCM = 1, } ä½¿ç”¨å®ƒæ„å»º PCM æ ¼å¼, å•å£°é“, 44100Hz é‡‡æ ·ç‡, 32ä½æ·±, 30 ç§’çš„éŸ³é¢‘ WAV å¤´:\n1 var header = WaveHeader.Create(WaveAudioFormat.PCM, 1, 44100, 32, 44100 * 4 * 30); åˆ›å»ºæ–‡ä»¶, å¹¶å†™å…¥ WAV å¤´å’Œ PCM å†…å®¹:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 using var output = File.Create(\u0026#34;output.wav\u0026#34;); using var outputWriter = new BinaryWriter(output); var pcm = PcmBuilder.CreateNew() .WithSampleRate(44100) .WithFrequency(8000) .Build(); var header = WaveHeader.Create(WaveAudioFormat.PCM, 1, 44100, 32, 44100 * 4 * 30); // å†™å…¥ Header unsafe { var headerByteSpan = new Span\u0026lt;byte\u0026gt;((byte*)\u0026amp;header, sizeof(WaveHeader)); outputWriter.Write(headerByteSpan); } // è·å– PCM æ•°æ®è¿­ä»£å™¨ var pcmEnumerator = pcm.GetEnumerator(); // å‘æ–‡ä»¶å†™å…¥ PCM for (int i = 0; i \u0026lt; 44100 * 30; i++) { pcmEnumerator.MoveNext(); outputWriter.Write(pcmEnumerator.Current); } ","date":"2024-08-19T12:27:26+08:00","permalink":"https://slimenull.com/p/202408191228/","title":"[C#] ä»»æ„é¢‘ç‡ PCM æ­£å¼¦æ³¢ç”Ÿæˆä¸ WAV æ ¼å¼æ–‡ä»¶ä¿å­˜"},{"content":" é‡‡æ ·æ ¼å¼ åˆ°è¾¾æ»¡éŸ³é‡æ‰€éœ€è¦çš„æ•°æ®æ³¢åŠ¨å¹…åº¦ 32ä½æµ®ç‚¹æ•° -1 åˆ° 1, ä¹Ÿå°±æ˜¯ 2 å¸¦ç¬¦å· 16 ä½æ•´æ•° -32768 åˆ° 32767, ä¹Ÿå°±æ˜¯ 65535 ","date":"2024-06-05T20:10:13+08:00","permalink":"https://slimenull.com/p/20240605201013/","title":"[ç¬”è®°] å…³äºå„éŸ³é¢‘ç¼–ç æ ¼å¼çš„æ•°æ®æ³¢åŠ¨å¹…åº¦ä¸éŸ³é‡çš„å¯¹ç…§å…³ç³»"},{"content":"ä¼—æ‰€å‘¨çŸ¥, åœ¨ Windows10 ä¸­äºšå…‹åŠ›(Acrylic)æ•ˆæœè¢«æ·»åŠ , åœ¨ Windows11 ä¸­äº‘æ¯(Mica)æ•ˆæœè¢«æ·»åŠ . å…¶ä¸­äºšå…‹åŠ›æ•ˆæœç®€å•æ¥è®²å°±æ˜¯å¯¹çª—ä½“åçš„å…ƒç´ æ¨¡ç³Šå†åŠ å™ªç‚¹. Mica åˆ™æ˜¯å¯¹å£çº¸è¿›è¡Œæ¨¡ç³Šå†åŠ å™ªç‚¹.\nåç§° å®ç° æ•ˆæœ æ€§èƒ½ æ¨èç”¨äº æ¯›ç»ç’ƒ/Aero é€æ˜+æ¨¡ç³Š å¥½ æœ€å·® æˆ‘ä¸çŸ¥é“æ–°ç‰ˆæœ¬æ“ä½œç³»ç»Ÿæ€ä¹ˆå¯ç”¨ Aero äºšå…‹åŠ›/Acrylic é€æ˜+æ¨¡ç³Š+å™ªç‚¹ å¥½ è¾ƒå·® ä¸´æ—¶çª—å£, ä¾‹å¦‚å³é”®èœå•, å·¥å…·æç¤ºç­‰ äº‘æ¯/Mica å£çº¸é‡‡æ ·+æ¨¡ç³Š+å™ªç‚¹ è¾ƒå¥½ æœ€å¥½ ä¸»çª—å£ äº‘æ¯æ•ˆæœçš„æ€§èƒ½ä¹‹æ‰€ä»¥å¥½, æ˜¯å› ä¸ºå®ƒä¸ä¼šå¯¹å£çº¸è¿›è¡Œé‡å¤é‡‡æ ·, è€Œæ˜¯åªé‡‡æ ·ä¸€æ¬¡, ç”Ÿæˆå¯¹åº”äº‘æ¯æ•ˆæœè´´å›¾, æœ€ååªéœ€è¦å°†å®ƒåº”ç”¨åˆ°çª—å£ä¸Šå°±å¯ä»¥. å¯ä»¥è¯´, åŸºæœ¬ä¸Šæ²¡æœ‰ä»»ä½•æ¶ˆè€—.\nä½†è¿™ä¹Ÿå¸¦æ¥äº†ä¸€äº›å¼Šç«¯, å‡å¦‚ä½ ä½¿ç”¨äº†æŸç§åŠ¨æ€å£çº¸è½¯ä»¶, é‚£ä¹ˆäº‘æ¯æ•ˆæœå’Œä½ çš„å£çº¸æ˜¯å®Œå…¨ä¸åŒ¹é…çš„, è¿™ç¨ç¨å½±å“äº†ç¾è§‚.\nåœ¨é˜…è¯»æœ¬æ–‡ç« ä¹‹å‰, è¯·ç¡®ä¿ä½ æœ‰è¿›è¡Œ .NET è°ƒç”¨éæ‰˜ç®¡åŠ¨æ€é“¾æ¥åº“å‡½æ•°çš„ç»éªŒ, å¤§è‡´çŸ¥é“ WindowChrome ç±»çš„ä½œç”¨, çŸ¥é“çª—å£å¥æŸ„æ˜¯ä»€ä¹ˆä¸œè¥¿. é˜…è¯»æ—¶è¯·ä»å¼€å§‹åˆ°ç»“æŸæŒ‰é¡ºåºçœ‹, å¦åˆ™å¯èƒ½ä¼šçœ‹æ¼æŸäº›ç»†èŠ‚ä¸Šçš„ä¸œè¥¿.\nèƒŒæ™¯æ¨¡ç³Š API åœ¨ Windows ä¸­, æœ‰ä¸¤ä¸ª API å¯ä»¥ç”¨æ¥å®ç°èƒŒæ™¯æ¨¡ç³Š:\nDwmSetWindowAttribute SetWindowCompositionAttribute å¯ä»¥å®ç°çš„åŠŸèƒ½ äº®æš—è‰²æ¨¡å¼çš„äº‘æ¯ä¸äºšå…‹åŠ›æ•ˆæœ æ”¯æŒè‡ªå®šä¹‰æ··åˆé¢œè‰²çš„äºšå…‹åŠ›æ•ˆæœ, æ¨¡ç³Šé€æ˜æ•ˆæœ æ¨¡ç³ŠåŒºåŸŸ èƒ½å¤Ÿåº”ç”¨åˆ°æ•´ä¸ªçª—å£, åŒ…æ‹¬æ ‡é¢˜æ ä»¥åŠçª—å£å†…å®¹ åªèƒ½å¯¹çª—å£å†…å®¹è¿›è¡Œæ¨¡ç³Š ç³»ç»Ÿè¦æ±‚ API éœ€è¦ Windows Vista åŠä»¥ä¸Šç‰ˆæœ¬, äº®æš—è‰²ä¸»é¢˜, äº‘æ¯å’Œäºšå…‹åŠ›æ•ˆæœåˆ™åªèƒ½åœ¨ Windows11 ä¸Šç”¨, å…¶ä¸­äº®æš—è‰²éœ€è¦ç‰ˆæœ¬ 22000, æ¨¡ç³ŠèƒŒæ™¯éœ€è¦ç‰ˆæœ¬ 22621 API åœ¨ Windows 7 åŠä»¥ä¸Šç‰ˆæœ¬å¯ç”¨, äºšå…‹åŠ›ä¸æ¨¡ç³ŠèƒŒæ™¯æ•ˆæœåˆ™åªèƒ½åœ¨ Windows10 ä¸Šå¯ç”¨, å…·ä½“ç‰ˆæœ¬æœªçŸ¥, å› ä¸ºè¿™æ˜¯æœªåœ¨å¾®è½¯æ–‡æ¡£ä¸­å…·ä½“å†™æ˜çš„ API å…¶ä»–è¦æ±‚ åªæœ‰åœ¨ \u0026ldquo;çª—å£æ¡†æ¶\u0026rdquo; æ‹“å±•åˆ°çª—å£å·¥ä½œåŒºå†…æ—¶, æ‹“å±•çš„åšåº¦æ‰ä¼šå¸¦æœ‰å¯¹åº”æ¨¡ç³Šæ•ˆæœ. åªæœ‰åœ¨ \u0026ldquo;çª—å£æ¡†æ¶\u0026rdquo; ä¸æ‹“å±•åˆ°çª—å£å·¥ä½œåŒºå†…æ—¶æœ‰æ•ˆ. ä¼˜ç‚¹ é€šè¿‡è®¾ç½®é¢œè‰²ä¸»é¢˜å³å¯ç›´æ¥è‡ªåŠ¨æ¢æ‰äº‘æ¯æˆ–äºšå…‹åŠ›èƒŒæ™¯çš„é¢œè‰² åœ¨çª—å£å¤±å»ç„¦ç‚¹æ—¶, æ¨¡ç³Šä»ç„¶æœ‰æ•ˆ, å¹¶ä¸”å¯ä»¥è‡ªå®šä¹‰æ··åˆé¢œè‰² ç¼ºç‚¹ å½“çª—ä½“å¤±å»ç„¦ç‚¹çš„æ—¶å€™, æ¨¡ç³Šæ•ˆæœä¼šæ¶ˆå¤± æ²¡æœ‰äº‘æ¯æ•ˆæœ ä¸¤ API åœ¨ C# çš„å£°æ˜åˆ†åˆ«å¦‚ä¸‹:\n1 2 [DllImport(\u0026#34;DWMAPI\u0026#34;)] public static extern nint DwmSetWindowAttribute(nint hwnd, DwmWindowAttribute attribute, nint dataPointer, uint dataSize); 1 2 [DllImport(\u0026#34;User32\u0026#34;)] public static extern bool SetWindowCompositionAttribute(nint hwnd, ref WindowCompositionAttributeData data); å®ƒä»¬ä¾èµ–çš„, ç”¨äºè®¾ç½® \u0026ldquo;çª—å£æ¡†æ¶\u0026rdquo; æ‹“å±•åšåº¦çš„ API å£°æ˜å¦‚ä¸‹:\n1 2 [DllImport(\u0026#34;DWMAPI\u0026#34;)] public static extern nint DwmExtendFrameIntoClientArea(nint hwnd, ref Margins margins); ç»“æ„ä½“ä¸æšä¸¾å£°æ˜å¦‚ä¸‹:\nDWM å±æ€§æšä¸¾\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 public enum DwmWindowAttribute { NCRENDERING_ENABLED, NCRENDERING_POLICY, TRANSITIONS_FORCEDISABLED, ALLOW_NCPAINT, CAPTION_BUTTON_BOUNDS, NONCLIENT_RTL_LAYOUT, FORCE_ICONIC_REPRESENTATION, FLIP3D_POLICY, EXTENDED_FRAME_BOUNDS, HAS_ICONIC_BITMAP, DISALLOW_PEEK, EXCLUDED_FROM_PEEK, CLOAK, CLOAKED, FREEZE_REPRESENTATION, PASSIVE_UPDATE_MODE, USE_HOSTBACKDROPBRUSH, // è¡¨ç¤ºæ˜¯å¦ä½¿ç”¨æš—è‰²æ¨¡å¼, å®ƒä¼šå°†çª—ä½“çš„æ¨¡ç³ŠèƒŒæ™¯è°ƒæ•´ä¸ºæš—è‰² USE_IMMERSIVE_DARK_MODE = 20, WINDOW_CORNER_PREFERENCE = 33, BORDER_COLOR, CAPTION_COLOR, TEXT_COLOR, VISIBLE_FRAME_BORDER_THICKNESS, // èƒŒæ™¯ç±»å‹, å€¼å¯ä»¥æ˜¯: è‡ªåŠ¨, æ— , äº‘æ¯, æˆ–è€…äºšå…‹åŠ› SYSTEMBACKDROP_TYPE, LAST } èƒŒæ™¯ç±»å‹æšä¸¾:\n1 2 3 4 5 6 7 8 public enum WindowBackdrop { Auto = 0, None = 1, MainWindow = 2, TransientWindow = 3, TabbedWindow = 4 } è®¾ç½® SetWindowCompositionAttribute æ‰€ç”¨çš„æ•°æ®ç»“æ„\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 [StructLayout(LayoutKind.Sequential)] public struct WindowCompositionAttributeData { /// \u0026lt;summary\u0026gt; /// A flag describing which value to get or set, specified as a value of the \u0026lt;see cref=\u0026#34;WindowCompositionAttribute\u0026#34;/\u0026gt; enumeration. /// This parameter specifies which attribute to get or set, and the pvData member points to an object containing the attribute value. /// \u0026lt;/summary\u0026gt; public WindowCompositionAttribute Attribute; /// \u0026lt;summary\u0026gt; /// When used with the GetWindowCompositionAttribute function, this member contains a pointer to a variable that will hold the value of the requested attribute when the function returns. \u0026lt;br/\u0026gt; /// When used with the SetWindowCompositionAttribute function, it points an object containing the attribute value to set. \u0026lt;br/\u0026gt; /// The type of the value set depends on the value of the Attrib member. /// \u0026lt;/summary\u0026gt; public nint DataPointer; /// \u0026lt;summary\u0026gt; /// The size of the object pointed to by the pvData member, in bytes. /// \u0026lt;/summary\u0026gt; public uint DataSize; } ä½¿ç”¨ SetWindowCompositionAttribute è®¾ç½®èƒŒæ™¯æ¨¡ç³Šæ—¶æ‰€éœ€è¦ç”¨åˆ°çš„å±æ€§æšä¸¾\n1 2 3 4 5 6 public enum WindowCompositionAttribute { // çœç•¥å…¶ä»–æœªä½¿ç”¨çš„å­—æ®µ WcaAccentPolicy = 19, // çœç•¥å…¶ä»–æœªä½¿ç”¨çš„å­—æ®µ } ä½¿ç”¨ SetWindowCompositionAttribute è®¾ç½®èƒŒæ™¯æ¨¡ç³Šéœ€è¦å®é™…ä¼ å…¥çš„æ•°æ®\n1 2 3 4 5 6 7 8 [StructLayout(LayoutKind.Sequential)] public struct AccentPolicy { public AccentState AccentState; public AccentFlags AccentFlags; public int GradientColor; public int AnimationId; } Accent state, å³åœ¨çª—å£ä¸Šè¦ä½¿ç”¨åˆ°çš„æ•ˆæœ:\n1 2 3 4 5 6 7 8 9 10 public enum AccentState { Disabled, EnableGradient = 1, // æ¸å˜ (å®æµ‹æ²¡ä»€ä¹ˆç”¨) EnableTransparent = 2, // é€æ˜ (å®æµ‹æ²¡ä»€ä¹ˆç”¨) EnableBlurBehind = 3, // èƒŒæ™¯æ¨¡ç³Š (æœ‰ç”¨) EnableAcrylicBlurBehind = 4, // èƒŒæ™¯äºšå…‹åŠ›æ¨¡ç³Š (æœ‰ç”¨) EnableHostBackdrop = 5, // æ²¡å•¥ç”¨ InvalidState = 6, } Accent flags, æ§åˆ¶æŸäº›è¡Œä¸º, ç”±äºæ²¡æœ‰æ–‡æ¡£, ä¸‹é¢çš„å€¼éƒ½æ˜¯æµ‹è¯•å‡ºæ¥çš„:\n1 2 3 4 5 6 7 8 9 10 11 12 13 [Flags] public enum AccentFlags { None = 0, ExtendSize = 0x4, // å¯ç”¨æ­¤ flag ä¼šå¯¼è‡´çª—ä½“å¤§å°æ‹“å±•è‡³å±å¹•å¤§å° LeftBorder = 0x20, // å¯ç”¨çª—å£å·¦ä¾§è¾¹æ¡† (å½“ WindowStyle ä¸º None æ—¶å¯ä»¥çœ‹å‡ºæ¥) TopBorder = 0x40, // å¯ç”¨çª—å£é¡¶éƒ¨è¾¹æ¡† (åŒä¸Š) RightBorder = 0x80, // å¯ç”¨çª—å£å³ä¾§è¾¹æ¡† (åŒä¸Š) BottomBorder = 0x100, // å¯ç”¨çª—å£åº•éƒ¨è¾¹æ¡† // åˆèµ·æ¥, å¯ç”¨çª—å£æ‰€æœ‰è¾¹æ¡† AllBorder = LeftBorder | TopBorder | RightBorder | BottomBorder, } è®¾ç½® \u0026ldquo;çª—å£æ‹“å±•\u0026rdquo; éœ€è¦ç”¨åˆ°çš„è¡¨ç¤ºæ‹“å±•å¤§å°çš„ç»“æ„. å½“å€¼ä¸º -1 æ—¶è¡¨ç¤ºæ— ç©·å¤§.\n1 2 3 4 5 6 7 8 [StructLayout(LayoutKind.Sequential)] public struct Margins { public int LeftWidth; public int RightWidth; public int TopHeight; public int BottomHeight; } åº”ç”¨äº‘æ¯æè´¨ è¦å¯¹ WPF çš„çª—å£è¿›è¡Œæ“ä½œ, æˆ‘ä»¬éœ€è¦æ‹¿åˆ°çª—å£çš„å¥æŸ„, ç„¶åè°ƒç”¨åˆšåˆšæåˆ°çš„ API è¿›è¡Œæ“ä½œ.\nä¸è¿‡åœ¨è¿™ä¹‹å‰, æˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“ä¸€ä»¶äº‹. WPF è¦åº”ç”¨èƒŒæ™¯é€æ˜æ¨¡ç³Šæ•ˆæœ, è¿˜éœ€è¦è®¾ç½®çª—å£å¯¹åº” HwndSource çš„ CompositionTarget çš„ BackgroundColor ä¸º Transparent æ‰èƒ½æ­£ç¡®çš„çœ‹åˆ°é€æ˜èƒŒæ™¯. é™¤æ­¤ä¹‹å¤–, ä½ ä¹Ÿéœ€è¦ç¡®è®¤çª—å£çš„ Background ä¹Ÿæ˜¯ Transparent, å¦åˆ™çª—å£é¢œè‰²é®æŒ¡èƒŒæ™¯, ä½ å°±çœ‹ä¸åˆ°äº†.\nç”±äºåœ¨ WPF ç¨‹åºä¸­, ä¸€åˆ‡éƒ½æŠ½è±¡æˆäº† WPF çš„å¯¹è±¡, è€Œå¯¹äºçª—å£è¿™ä¸€ç±»å‹æ¥è®², åœ¨å®ƒè¢«è°ƒç”¨ Show æ–¹æ³•ä¹‹å‰, æ˜¯ä¸ä¼šåˆ›å»º Win32 çª—å£çš„. è¦ä¿è¯æˆ‘ä»¬èƒ½å¤ŸæŒæœ‰çª—å£å¥æŸ„, æœ‰ä¸¤ç§æ–¹æ¡ˆ:\nä½¿ç”¨ WindowsInteropHelper çš„ EnsureHandle æ–¹æ³•, ç¡®ä¿çª—å£å¯¹è±¡åˆ›å»ºäº† Win32 çª—å£å¹¶å¯ä»¥ä½¿ç”¨å¥æŸ„. è®¢é˜…çª—å£çš„ SourceInitialized äº‹ä»¶, è¯¥äº‹ä»¶ä¼šåœ¨çª—å£çš„ Win32 çª—å£è¢«åˆ›å»ºä¹‹åå¼•å‘. ä¸‹é¢æˆ‘ä»¬ä»¥ SourceInitialized äº‹ä»¶çš„äº‹ä»¶å¤„ç†å™¨ä¸­ç¼–å†™é€»è¾‘ä¸¾ä¾‹, è®²è¿°å¦‚ä½•æ­£ç¡®çš„åœ¨ WPF ä¸­åº”ç”¨äº‘æ¯æ•ˆæœ.\né¦–å…ˆ, ç¡®ä¿æˆ‘ä»¬çš„çª—å£èƒŒæ™¯é¢œè‰²ä¸º Transparent, ä½ çš„ XAML ä»£ç åº”è¯¥åƒè¿™æ ·:\n1 2 3 4 \u0026lt;Window ... Background=\u0026#34;Transparent\u0026#34;\u0026gt; ... \u0026lt;/Window\u0026gt; å¦‚æœä½ çš„è®¾ç½®æ— è¯¯, é‚£ä¹ˆä½ çš„çª—å£ç°åœ¨çš„ \u0026ldquo;é€æ˜\u0026rdquo; çœ‹èµ·æ¥åº”è¯¥æ˜¯ \u0026ldquo;é»‘è‰²\u0026rdquo;:\nç„¶å, å®ç° HwndSource çš„ CompositionTarget è®¾ç½®å’Œ \u0026ldquo;çª—å£æ¡†æ¶\u0026rdquo;, æœ€ç®€å•çš„æ–¹å¼æ˜¯ç›´æ¥ä¸ºçª—å£è®¾ç½® WindowChrome, é€šè¿‡å¯¹ WindowChrome ç±»ä¸­åä¸º WindowChrome çš„é™„åŠ å±æ€§è¿›è¡Œèµ‹å€¼å³å¯, æœ€ååªéœ€è¦è®¾ç½® GlassFrameThickness ä¸º -1 å°±å®Œæˆäº†, åœ¨ XAML ä¸­è¿™æ ·ç¼–å†™:\n1 2 3 4 5 6 7 \u0026lt;Window ... Background=\u0026#34;Transparent\u0026#34;\u0026gt; \u0026lt;WindowChrome.WindowChrome\u0026gt; \u0026lt;WindowChrome GlassFrameThickness=\u0026#34;-1\u0026#34;/\u0026gt; \u0026lt;/WindowChrome.WindowChrome\u0026gt; ... \u0026lt;/Window\u0026gt; çª—å£è¾¹æ¡†æ‹“å±•å¤§å° æ§åˆ¶äº†çª—å£è®¾ç½®çš„æ¨¡ç³ŠèƒŒæ™¯å»¶ä¼¸åˆ°çª—å£å†…éƒ¨çš„å¤§å°. ä¹Ÿå°±æ˜¯è¯´, å¦‚æœä½ å°† GlassFrameThickness è®¾ç½®ä¸º 10, é‚£ä¹ˆçª—å£è¾¹ç¼˜çš„ 10 åƒç´ ä¼šåº”ç”¨ä¸ŠæŒ‡å®šçš„èƒŒæ™¯. è€Œ -1 åœ¨è¿™é‡Œåˆ™è¡¨ç¤ºæ— é™å¤§.\nè¿™æ ·æ“ä½œä¹‹å, WindowChrome ä¼šå¸®æˆ‘ä»¬è®¾ç½®å¥½æ‰€éœ€çš„å±æ€§, å¦‚æœä½ çš„è®¾ç½®æ— è¯¯, ç°åœ¨çª—å£åº”è¯¥ä¼šæ¢å¤åˆ°åŸæ¥çš„ \u0026ldquo;ç™½è‰²\u0026rdquo;, å¹¶ä¸”çª—å£çš„æ ‡é¢˜æ ä¼š \u0026ldquo;æ¶ˆå¤±\u0026rdquo;, åªç•™ä¸‹ä¸‰ä¸ªçª—å£æŒ‰é’®:\næœ€å, æˆ‘ä»¬è®¢é˜…çª—å£çš„ SourceInitialized äº‹ä»¶:\n1 2 3 4 5 6 7 8 \u0026lt;Window ... Background=\u0026#34;Transparent\u0026#34; SourceInitialized=\u0026#34;Window_SourceInitialized\u0026#34;\u0026gt; \u0026lt;WindowChrome.WindowChrome\u0026gt; \u0026lt;WindowChrome GlassFrameThickness=\u0026#34;-1\u0026#34;/\u0026gt; \u0026lt;/WindowChrome.WindowChrome\u0026gt; ... \u0026lt;/Window\u0026gt; å¹¶æ·»åŠ ä»¥ä¸‹å¤„ç†:\n1 2 3 4 5 6 7 private unsafe void Window_SourceInitialized(object sender, EventArgs e) { var hwndSource = (HwndSource)PresentationSource.FromVisual(this); var backdropType = (int)2; // 0 åˆ° 4 åˆ†åˆ«æ˜¯ \u0026#39;è‡ªåŠ¨\u0026#39;, \u0026#39;æ— \u0026#39;, \u0026#39;äº‘æ¯(Mica)æ•ˆæœ\u0026#39;, \u0026#39;äºšå…‹åŠ›(Acrylic)æ•ˆæœ\u0026#39;, \u0026#39;äº‘æ¯å¤‡é€‰(Mica Alt)æ•ˆæœ\u0026#39; DwmSetWindowAttribute(hwndSource.Handle, DwmWindowAttribute.SYSTEMBACKDROP_TYPE, (nint)(void*)\u0026amp;backdropType, sizeof(int)); } æ³¨æ„, åœ¨è¿™é‡Œä½¿ç”¨åˆ°äº†ä¸å®‰å…¨ä»£ç å—, ä½ éœ€è¦åœ¨ä½ çš„é¡¹ç›®æ–‡ä»¶ä¸­å¯ç”¨ \u0026ldquo;å…è®¸ä¸å®‰å…¨ä»£ç å—\u0026rdquo; æ‰èƒ½ä½¿ç”¨æ­¤åŠŸèƒ½.\næœ€åå¯åŠ¨çª—å£, æ“ä½œæ— è¯¯çš„è¯, ä½ æœ€ç»ˆçš„çª—å£, å·²ç»èƒ½å¤Ÿå‘ˆç°å‡ºäº‘æ¯æ•ˆæœäº†.\nåº”ç”¨äºšå…‹åŠ›æè´¨ åœ¨ä¸Šé¢, æˆ‘ä»¬å·²ç»æˆåŠŸå°†äº‘æ¯æè´¨åº”ç”¨åˆ°äº†çª—å£ä¸Š, å¦‚æœè¦æ¢æˆäºšå…‹åŠ›æ•ˆæœ, ä¹Ÿéå¸¸ç®€å•, åªéœ€è¦å°†è¡¨ç¤ºäº‘æ¯èƒŒæ™¯çš„ \u0026ldquo;2\u0026rdquo; æ¢æˆè¡¨ç¤ºäºšå…‹åŠ›çš„ \u0026ldquo;3\u0026rdquo; å³å¯, ä»£ç å¦‚ä¸‹:\n1 2 3 4 5 6 7 private unsafe void Window_SourceInitialized(object sender, EventArgs e) { var hwndSource = (HwndSource)PresentationSource.FromVisual(this); var backdropType = (int)3; // 0 åˆ° 4 åˆ†åˆ«æ˜¯ \u0026#39;è‡ªåŠ¨\u0026#39;, \u0026#39;æ— \u0026#39;, \u0026#39;äº‘æ¯(Mica)æ•ˆæœ\u0026#39;, \u0026#39;äºšå…‹åŠ›(Acrylic)æ•ˆæœ\u0026#39;, \u0026#39;äº‘æ¯å¤‡é€‰(Mica Alt)æ•ˆæœ\u0026#39; DwmSetWindowAttribute(hwndSource.Handle, DwmWindowAttribute.SYSTEMBACKDROP_TYPE, (nint)(void*)\u0026amp;backdropType, sizeof(int)); } é‚£ä¹ˆ, æœ€ç»ˆçš„æ•ˆæœæ˜¯è¿™æ ·, å¯ä»¥çœ‹åˆ°çª—å£çš„èƒŒæ™¯æ˜¯å‚è€ƒäº†å…¶åæ–¹çª—å£å†…å®¹çš„:\nåˆ‡æ¢çª—å£äº®æš—è‰²ä¸»é¢˜ åœ¨ Windows11 çš„ 22000 ç‰ˆæœ¬ä¸­, DwmSetWindowAttribute æ”¯æŒäº†è¡¨ç¤ºçª—å£æ˜¯å¦ä½¿ç”¨æš—è‰²æ¨¡å¼çš„ DWMWA_USE_IMMERSIVE_DARK_MODE å±æ€§.\nå½“æˆ‘ä»¬ä½¿ç”¨è¯¥ API è®¾ç½®è¯¥å±æ€§ä¸º 1 çš„æ—¶å€™, æ ‡é¢˜æ , ä»¥åŠäº‘æ¯ä¸äºšå…‹åŠ›ææ–™ä¼šåˆ‡æ¢åˆ°å¯¹åº”çš„æš—è‰². ä¸‹é¢, æˆ‘ä»¬å‘ä»£ç ä¸­æ·»åŠ å°†çª—å£è®¾ç½®ä¸ºæš—è‰²æ¨¡å¼çš„é€»è¾‘:\n1 2 3 4 5 6 7 8 9 private unsafe void Window_SourceInitialized(object sender, EventArgs e) { var hwndSource = (HwndSource)PresentationSource.FromVisual(this); var backdropType = (int)3; // 0 åˆ° 3 åˆ†åˆ«æ˜¯ \u0026#39;è‡ªåŠ¨\u0026#39;, \u0026#39;æ— \u0026#39;, \u0026#39;äº‘æ¯(Mica)æ•ˆæœ\u0026#39;, \u0026#39;äºšå…‹åŠ›(Acrylic)æ•ˆæœ\u0026#39; var isDarkMode = (int)1; DwmSetWindowAttribute(hwndSource.Handle, DwmWindowAttribute.SYSTEMBACKDROP_TYPE, (nint)(void*)\u0026amp;backdropType, sizeof(int)); DwmSetWindowAttribute(hwndSource.Handle, DwmWindowAttribute.USE_IMMERSIVE_DARK_MODE, (nint)(void*)\u0026amp;isDarkMode, sizeof(int)); } ç°åœ¨æˆ‘ä»¬çš„äºšå…‹åŠ›çª—å£èƒŒæ™¯çœ‹èµ·æ¥æ¯”ä»¥å‰æš—äº†è®¸å¤š.\nå¦‚æœå®ƒçš„èƒŒæ™¯æ›´æš—ä¸€äº›, çª—å£çœ‹èµ·æ¥ä¹Ÿä¼šæ›´æš—:\næˆ‘ä»¬å†å°†äºšå…‹åŠ›æè´¨æ¢æˆäº‘æ¯, å®ƒçš„æš—è‰²æ¨¡å¼çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„, å› ä¸ºå®ƒä¸å‚è€ƒçª—å£åçš„å†…å®¹, åªå‚è€ƒå£çº¸, æ‰€ä»¥æ— è®ºçª—å£åœ¨å“ª, å®ƒéƒ½æ˜¯è¿™å‰¯æ¨¡æ ·:\nåœ¨è°ƒæ•´çª—å£å†…å®¹å…ƒç´ å‰æ™¯ä¸èƒŒæ™¯è‰²åˆ°å¤§è‡´åˆé€‚çš„å€¼ä¹‹å, å®ƒçœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:\nè‡ªå®šä¹‰æ··åˆé¢œè‰²äºšå…‹åŠ› åœ¨ä¸Šé¢, æˆ‘ä»¬ä½¿ç”¨ DwmSetWindowAttribute å®ç°äº†çª—å£çš„äº‘æ¯ä¸äºšå…‹åŠ›èƒŒæ™¯, è€Œå®ƒä»¬å…·ä½“çš„é¢œè‰², åˆ™æ˜¯é€šè¿‡è®¾ç½®çª—å£æ˜¯å¦æ˜¯æš—è‰²å®ç°æ¥åˆ‡æ¢çš„. å¦‚æœæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰å åŠ çš„æ··åˆé¢œè‰², é‚£è¿™ä¸ª API å°±ä¸èƒ½å®ç°äº†.\næˆ‘ä»¬éœ€è¦ä½¿ç”¨ SetWindowCompositionAttribute è¿™ä¸ª API æ¥å®ç°äº†. å½“ç„¶, åœ¨æœ€å¼€å§‹æˆ‘ä»¬ä¹Ÿäº†è§£è¿‡è¿™ä¸ª API çš„å¼Šç«¯äº†, æ‰€ä»¥, é™¤éä½ çœŸçš„æœ‰è¿™æ–¹é¢çš„éœ€æ±‚, å¦åˆ™å°½é‡ä½¿ç”¨æ–°çš„ API æ¯”è¾ƒå¥½.\nåŒæ ·, åœ¨è°ƒç”¨ API ä¹‹å‰, éœ€è¦ç¡®ä¿æˆ‘ä»¬çš„çª—å£è®¾ç½®äº†æ­£ç¡®çš„å±æ€§, ç¬¬ä¸€ä¸ªæ˜¯èƒŒæ™¯é¢œè‰²éœ€è¦è®¾ä¸ºé€æ˜:\n1 2 3 4 \u0026lt;Window ... Background=\u0026#34;Transparent\u0026#34;\u0026gt; ... \u0026lt;/Window\u0026gt; ç„¶å, éœ€è¦ç¡®ä¿ \u0026ldquo;çª—å£æ¡†æ¶\u0026rdquo; çš„æ‹“å±•å¤§å°æ˜¯ 0, ä¹Ÿå°±æ˜¯è¯´, Window å¿…é¡»ä¸è®¾ç½® WindowChrome, æˆ–è€… WindowChrome çš„ GlassFrameThickness å€¼éœ€è¦ä¸º 0. ä»¥ä¸‹ä¸¤ç§è®¾ç½®æ–¹å¼å‡å¯:\n1 2 3 4 5 \u0026lt;Window ... Background=\u0026#34;Transparent\u0026#34;\u0026gt; \u0026lt;!-- è¿™é‡Œæ²¡æœ‰è®¾ç½®çª—å£çš„ WindowChrome --\u0026gt; ... \u0026lt;/Window\u0026gt; æˆ–è€…è®¾ç½® WindowChrome, ä½†æ˜¯ GlassFrameThickness ä¸º 0:\n1 2 3 4 5 6 7 \u0026lt;Window ... Background=\u0026#34;Transparent\u0026#34;\u0026gt; \u0026lt;WindowChrome.WindowChrome\u0026gt; \u0026lt;WindowChrome GlassFrameThickness=\u0026#34;0\u0026#34;/\u0026gt; \u0026lt;/WindowChrome.WindowChrome\u0026gt; ... \u0026lt;/Window\u0026gt; æœ€å, ç¡®ä¿ HwndSource.CompositionTarget.BackgroundColor ä¸ºé€æ˜, æœ€æš´åŠ›çš„æ–¹å¼æ˜¯ç›´æ¥å°†çª—å£çš„ AllowsTransparency è®¾ä¸º true. åˆå› ä¸ºåªæœ‰ WindowStyle ä¸º None æ˜¯, çª—å£æ‰èƒ½è®¾ç½® AllowsTransparency ä¸º true, æ‰€ä»¥æœ€ç»ˆä½ çš„ XAML åƒæ˜¯è¿™æ ·:\n1 2 3 4 5 6 7 8 9 10 \u0026lt;Window ... Background=\u0026#34;Transparent\u0026#34; WindowStyle=\u0026#34;None\u0026#34; AllowsTransparency=\u0026#34;True\u0026#34; SourceInitialized=\u0026#34;Window_SourceInitialized\u0026#34;\u0026gt; \u0026lt;WindowChrome.WindowChrome\u0026gt; \u0026lt;WindowChrome GlassFrameThickness=\u0026#34;0\u0026#34;/\u0026gt; \u0026lt;/WindowChrome.WindowChrome\u0026gt; ... \u0026lt;/Window\u0026gt; å°±æ­¤, æˆ‘ä»¬çš„å‡†å¤‡é˜¶æ®µå®Œæ¯•, æœ€åå°† SourceInitialized äº‹ä»¶å¤„ç†é€»è¾‘æ›´æ”¹ä¸ºä»¥ä¸‹ä»£ç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 private unsafe void Window_SourceInitialized(object sender, EventArgs e) { var hwndSource = (HwndSource)PresentationSource.FromVisual(this); var accentPolicy = new AccentPolicy() { AccentState = AccentState.EnableAcrylicBlurBehind, AccentFlags = AccentFlags.None, // æ³¨æ„, è¿™é‡Œä»é«˜ä½åˆ°ä½ä½åˆ†åˆ«æ˜¯ Alpha, Blue, Green, Red // æ¯ä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªé€šé“é¢œè‰²å€¼ GradientColor = 0x338888FF, }; var data = new WindowCompositionAttributeData() { Attribute = WindowCompositionAttribute.WcaAccentPolicy, DataPointer = (nint)(void*)\u0026amp;accentPolicy, DataSize = (uint)sizeof(AccentPolicy), }; SetWindowCompositionAttribute(hwndSource.Handle, ref data); } è¿è¡Œå, å®ƒçš„æ•ˆæœæ˜¯åçº¢è‰²çš„äºšå…‹åŠ›çª—å£.\nç›¸ä¿¡ä½ ä¹Ÿä¸€å®šå‘ç°äº†ä¸€äº›é—®é¢˜, ç»è¿‡ä¸€ç•ªè®¾ç½®ä¹‹å, æˆ‘ä»¬çš„çª—å£:\nç”±äºè®¾ç½®äº† AllowsTransparency ä¸º True, çª—å£ä¸­çš„ \u0026ldquo;é€æ˜\u0026rdquo; éƒ¨åˆ†, é¼ æ ‡äº‹ä»¶ä¼šç©¿é€å®ƒ, ä»è€Œç‚¹å‡»åˆ°çª—ä½“åæ–¹çš„å†…å®¹. ç”±äºè®¾ç½®äº† WindowStyle ä¸º None, çª—å£æ ‡é¢˜æ æ²¡æœ‰äº†, æŒ‰é’®æ²¡æœ‰äº†, åœ†è§’æ²¡æœ‰äº†, æœ€å°åŒ–æœ€å¤§åŒ–ä¸å…³é—­çš„åŠ¨ç”»æ²¡æœ‰äº†. å…³äºç¬¬ä¸€ç‚¹, å¯ä»¥é€šè¿‡ä¸€ç§ç®€å•æš´åŠ›çš„æ–¹å¼æ¥è§£å†³, åªéœ€è¦ç»™çª—å£çš„ä¸é€æ˜åº¦ä¸€ä¸ªå¾ˆå°çš„å€¼, å³å¯:\n1 2 3 4 5 6 7 8 9 10 \u0026lt;Window ... Background=\u0026#34;#01000000\u0026#34; WindowStyle=\u0026#34;None\u0026#34; AllowsTransparency=\u0026#34;True\u0026#34; SourceInitialized=\u0026#34;Window_SourceInitialized\u0026#34;\u0026gt; \u0026lt;WindowChrome.WindowChrome\u0026gt; \u0026lt;WindowChrome GlassFrameThickness=\u0026#34;0\u0026#34;/\u0026gt; \u0026lt;/WindowChrome.WindowChrome\u0026gt; ... \u0026lt;/Window\u0026gt; è€Œç¬¬äºŒç‚¹, æœ¬è´¨ä¸Šæ˜¯å› ä¸ºæˆ‘ä»¬é€šè¿‡è®¾ç½® WindowStyle ä»¥æ»¡è¶³è°ƒç”¨æ¡ä»¶å¯¼è‡´çš„, åªéœ€è¦æˆ‘ä»¬ä¸å»è®¾ç½® WindowStyle, ä»åº•å±‚ä¸Šè‡ªå·±æ»¡è¶³è°ƒç”¨æ¡ä»¶, å°±å¯ä»¥è§£å†³. å…·ä½“çš„æ“ä½œæ–¹å¼, è¯·ç»§ç»­å¾€ä¸‹çœ‹.\nä»åº•å±‚ä¸Šæ»¡è¶³è°ƒç”¨æ¡ä»¶ åœ¨ä¸Šé¢çš„ä»£ç ä¸­, ä¸ºäº†æ»¡è¶³ DwmSetWindowAttribute å’Œ SetWindowCompositionAttribute çš„è°ƒç”¨æ¡ä»¶, æˆ‘ä»¬ä½¿ç”¨äº† WindowChrome.WindowChrome, WindowStyle, AllowsTransparency å±æ€§. è€Œå®ƒä»¬ä¹Ÿéƒ½æœ‰è‡ªå·±çš„å‰¯ä½œç”¨:\nWindowChrome ä¼šå»é™¤çª—å£è‡ªå¸¦çš„æ ‡é¢˜æ , ä½ è¿˜éœ€è¦æ‰‹åŠ¨ç”¨ WPF è‡ªå·±åšä¸€ä¸ªæ ‡é¢˜æ  WindowStyle è®¾ä¸º None ä¼šå¯¼è‡´çª—å£çš„è¾¹æ¡†æ¶ˆå¤±, çª—å£æ“ä½œæŒ‰é’®æ¶ˆå¤±, åŠ¨ç”»æ¶ˆå¤±, åœ†è§’æ¶ˆå¤±. AllowsTransparency è®¾ä¸º True ä¼šå¯¼è‡´é€æ˜éƒ¨åˆ†ç©¿é€é¼ æ ‡äº‹ä»¶ å®é™…ä¸Š, æœ€ç»ˆæˆ‘ä»¬éœ€è¦æ»¡è¶³çš„æ¡ä»¶ä¹Ÿåªæœ‰:\nçª—å£çš„èƒŒæ™¯è®¾ä¸ºé€æ˜, ä»¥èƒ½å¤ŸæŸ¥çœ‹åˆ°è®¾ç½®çš„çª—å£èƒŒæ™¯æ ·å¼ HwndSource.CompositionTarget.BackgroundColor è®¾ä¸ºé€æ˜ å½“ä½¿ç”¨ DwmSetWindowAttribute æ—¶, \u0026ldquo;çª—å£æ¡†æ¶\u0026rdquo; çš„æ‹“å±•åšåº¦è®¾ç½®åˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„å€¼, å½“ä½¿ç”¨ SetWindowCompositionAttribute æ—¶, \u0026ldquo;çª—å£æ¡†æ¶\u0026rdquo; çš„æ‹“å±•åšåº¦éœ€è¦è®¾ç½®ä¸º 0 é‚£ä¹ˆç°åœ¨, æˆ‘ä»¬å°†å¤šä½™çš„å±æ€§åˆ å», ä»…ä¿ç•™çª—ä½“çš„ä»¥ä¸‹å±æ€§:\n1 2 3 4 5 \u0026lt;Window ... Background=\u0026#34;Transparent\u0026#34; SourceInitialized=\u0026#34;Window_SourceInitialized\u0026#34;\u0026gt; ... \u0026lt;/Window\u0026gt; ç„¶ååœ¨ SourceInitialized æ”¹ä¸ºä»¥ä¸‹é€»è¾‘, æ¥å®ç°æ‰‹åŠ¨æ»¡è¶³æ¡ä»¶çš„äº‘æ¯æ•ˆæœ:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 private unsafe void Window_SourceInitialized(object sender, EventArgs e) { // å–å¾—çª—å£å¥æŸ„ var hwndSource = (HwndSource)PresentationSource.FromVisual(this); // è®¾ç½® HwndSource.CompositionTarget.BackgroundColor ä¸ºé€æ˜ hwndSource.CompositionTarget.BackgroundColor = Colors.Transparent; // è®¾ç½®è¾¹æ¡† var margins = new Margins() { LeftWidth = -1, TopHeight = -1, RightWidth = -1, BottomHeight = -1 }; DwmExtendFrameIntoClientArea(hwndSource.Handle, ref margins); // è®¾ç½®èƒŒæ™¯ var backdrop = (int)2; DwmSetWindowAttribute(hwndSource.Handle, DwmWindowAttribute.SYSTEMBACKDROP_TYPE, (nint)(void*)\u0026amp;backdrop, sizeof(int)); } æœ€åæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ª, å¸¦æœ‰çª—å£æ­£å¸¸æ ‡é¢˜æ ä¸äº‘æ¯èƒŒæ™¯çš„çª—å£:\nåŒç†, æˆ‘ä»¬æ‰‹åŠ¨å¤„ç† SetWindowCompositionAttribute çš„è°ƒç”¨æ¡ä»¶, XAML ä¸éœ€è¦æ›´æ”¹, åªéœ€è¦å°†é€»è¾‘æ”¹ä¸ºä¸‹é¢çš„ä»£ç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 private unsafe void Window_SourceInitialized(object sender, EventArgs e) { // å–å¾—çª—å£å¥æŸ„ var hwndSource = (HwndSource)PresentationSource.FromVisual(this); // è®¾ç½® HwndSource.CompositionTarget.BackgroundColor ä¸ºé€æ˜ hwndSource.CompositionTarget.BackgroundColor = Colors.Transparent; // è®¾ç½®è¾¹æ¡† var margins = new Margins() { LeftWidth = 0, TopHeight = 0, RightWidth = 0, BottomHeight = 0 }; DwmExtendFrameIntoClientArea(hwndSource.Handle, ref margins); // è®¾ç½®èƒŒæ™¯ var accentPolicy = new AccentPolicy() { AccentState = AccentState.EnableAcrylicBlurBehind, AccentFlags = AccentFlags.None, // æ³¨æ„, è¿™é‡Œä»é«˜ä½åˆ°ä½ä½åˆ†åˆ«æ˜¯ Alpha, Blue, Green, Red // æ¯ä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªé€šé“é¢œè‰²å€¼ GradientColor = 0x338888FF, }; var data = new WindowCompositionAttributeData() { Attribute = WindowCompositionAttribute.WcaAccentPolicy, DataPointer = (nint)(void*)\u0026amp;accentPolicy, DataSize = (uint)sizeof(AccentPolicy), }; SetWindowCompositionAttribute(hwndSource.Handle, ref data); } äºæ˜¯æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªå¸¦æœ‰ä¸é€æ˜æ ‡é¢˜æ ä¸è‡ªå®šä¹‰æ··åˆé¢œè‰²äºšå…‹åŠ›èƒŒæ™¯çš„çª—å£:\né”™è¯¯å‚è€ƒ ä¸‹é¢æ˜¯ä¸€äº›å±æ€§æ²¡æœ‰æ­£ç¡®è®¾ç½®ä¼šå¯¼è‡´çš„ç»“æœ:\nçª—å£é¢œè‰²è¿‡æ›, æ²¡æœ‰å°† HwndSource.CompositionTarget.BackgroundColor è®¾ç½®ä¸ºé€æ˜å¯¼è‡´.\nçª—å£é»‘äº†, \u0026ldquo;çª—å£è¾¹æ¡†\u0026rdquo; æ‹“å±•å¤§å°äº API æ‰€éœ€å¤§å°ä¸åŒ¹é…å¯¼è‡´.\næ€»ç»“ å¯ä»¥ä½¿ç”¨ DwmSetWindowAttribute ä¸ SetWindowCompositionAttribute è®¾ç½®çª—å£çš„èƒŒæ™¯, å…¶ä¸­å‰è€…åªèƒ½ç”¨äº Windows11 ä¸Šè®¾ç½®äº®æš—çš„äº‘æ¯ä¸äºšå…‹åŠ›æè´¨, åè€…èƒ½å¤Ÿè®¾ç½®è‡ªå®šä¹‰æ··åˆé¢œè‰²çš„äºšå…‹åŠ›æè´¨. å‰è€…èƒ½å¤Ÿå°†æè´¨åº”ç”¨åˆ°æ ‡é¢˜æ ä¸å†…å®¹, è€Œåè€…åªèƒ½å°†ææ–™åº”ç”¨åˆ°å†…å®¹ä¸­.\nè¿™ä¸¤ä¸ª API å‡æœ‰è‡ªå·±çš„ \u0026ldquo;æ¡ä»¶\u0026rdquo;, åªæœ‰æ¡ä»¶æ»¡è¶³, æ‰€æŒ‡å®šçš„èƒŒæ™¯æ‰èƒ½å¤Ÿè¢«ç”¨æˆ·çœ‹åˆ°. å¦åˆ™è¦ä¹ˆæ— ä½œç”¨, è¦ä¹ˆçª—å£çš„å†…å®¹å˜å¾—å¾ˆå¥‡æ€ª.\nä½¿ç”¨ WindowChrome, WindowStyle ä¸ AllowsTransparency çš„æ ¹æœ¬ç›®çš„æ˜¯æ»¡è¶³æ˜¾ç¤ºæŒ‡å®šèƒŒæ™¯, æˆ‘ä»¬å®Œå…¨å¯ä»¥è‡ªå·±å®Œæ•´è¿™ä¸€æ“ä½œ. è¿™æ ·å°±ä¸éœ€è¦æ‰¿æ‹…é‚£ä¸‰ä¸ªå±æ€§ä¼šå¯¼è‡´çš„å‰¯ä½œç”¨.\nå¼•ç”¨ æ–‡ç« å‚è€ƒ:\nWPFåœ¨win10/11ä¸Šå¯ç”¨æ¨¡ç³Šç‰¹æ•ˆ é€‚é…Dark/Light Mode - TwilightLemon) åœ¨ Windows 10 ä¸Šä¸º WPF çª—å£æ·»åŠ æ¨¡ç³Šç‰¹æ•ˆï¼ˆå°±åƒå¼€å§‹èœå•å’Œæ“ä½œä¸­å¿ƒé‚£æ ·ï¼‰ - walterlv åœ¨ WPF ç¨‹åºä¸­åº”ç”¨ Windows 10 çœŸâ€¢äºšå…‹åŠ›æ•ˆæœ - walterlv ä½¿ç”¨ SetWindowCompositionAttribute æ¥æ§åˆ¶ç¨‹åºçš„çª—å£è¾¹æ¡†å’ŒèƒŒæ™¯ï¼ˆå¯ä»¥åš Acrylic äºšå…‹åŠ›æ•ˆæœã€æ¨¡ç³Šæ•ˆæœã€ä¸»é¢˜è‰²æ•ˆæœç­‰ï¼‰ - walterlv ä»£ç å‚è€ƒ:\nTwilightLemon/MyToolBar: ä¸ºSurface Proè€Œç”Ÿçš„é¡¶éƒ¨å·¥å…·æ  æ”¯æŒè§¦æ§å’Œç¬”å¿«æ·æ–¹å¼ (github.com) sourcechord/FluentWPF: Fluent Design System for WPF. (github.com) æ³¨: ä¸Šé¢æåˆ°çš„æ–‡ç« å‚è€ƒå¯èƒ½åªä»‹ç»åˆ°äº† \u0026ldquo;æŸä¸€éƒ¨åˆ†\u0026rdquo; å†…å®¹, å¯èƒ½ä¼šé€ æˆè¯¯å¯¼, æ³¨æ„çœ‹å®Œæœ¬ç¯‡æ–‡ç« åè‡ªè¡ŒéªŒè¯\n","date":"2024-05-30T10:48:46+08:00","permalink":"https://slimenull.com/p/20240530104846/","title":"[.NET,WPF] çª—ä½“äº‘æ¯, äºšå…‹åŠ›, é€æ˜, æ··åˆé¢œè‰², æ¨¡ç³ŠèƒŒæ™¯, äº®æš—è‰²ä¸»é¢˜å…¨è®²"},{"content":"ç›¸ä¿¡å„ä½æœ‹å‹åœ¨æ WPF å¼€å‘çš„æ—¶å€™ï¼Œä¸å¯é¿å…çš„ä¼šé‡å¤çš„å†™åˆ°å¾ˆå¤šé‡å¤çš„ä»£ç ï¼Œä»¥ç»™WPFæ“¦å±è‚¡ã€‚ä¾‹å¦‚WPFä¸­æ²¡æœ‰CornerRadiusAnimationï¼Œæ²¡æœ‰æ”¯æŒè‡ªå®šä¹‰çš„è´å¡å°”æ›²çº¿è¿‡æ¸¡å‡½æ•°ï¼Œå†…ç½®çš„å€¼è½¬æ¢å™¨å¤ªå°‘ï¼Œæ§ä»¶æ— æ³•è®¾ç½®åœ†è§’ï¼Œå®¹å™¨ä¸èƒ½ç›´æ¥é€šè¿‡è‡ªå·±çš„å±æ€§è®¾ç½®å…ƒç´ é—´è·ç­‰è¯¸å¤šé—®é¢˜ã€‚\näºæ˜¯ï¼Œæˆ‘å†™äº†ä¸ªåº“ï¼Œç”¨äºè¡¥å…¨æˆ‘è®¤ä¸º WPF ä¸­åº”è¯¥æœ‰ï¼Œä½†æ˜¯ç¼ºå¤±äº†çš„ä¸€äº›åŠŸèƒ½ã€‚\nEleCho.WpfSuite WPF å¸ƒå±€é¢æ¿ï¼Œæ§ä»¶ï¼Œå€¼è½¬æ¢å™¨ï¼Œæ ‡è®°æ‹“å±•ï¼Œè¿‡æ¸¡ä»¥åŠå®ç”¨å·¥å…·ã€‚\nä½ å¯ä»¥åœ¨ Releases ä¸­ä¸‹è½½ SampleApp çœ‹çœ‹è¿™ä¸ªåº“å¤§æ¦‚æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚ https://github.com/OrgEleCho/EleCho.WpfSuite/releases\nå®‰è£…ä¸ä½¿ç”¨ åœ¨ nuget ä¸­ç›´æ¥å®‰è£… EleCho.WpfSuite å³å¯ã€‚å‘½åç©ºé—´å£°æ˜å¦‚ä¸‹ï¼š\n1 xmlns:ws=\u0026#34;https://github.com/OrgEleCho/EleCho.WpfSuite\u0026#34; åº“çš„æ‰€æœ‰åŠŸèƒ½å‡åœ¨è¿™ä¸ªå‘½åç©ºé—´ä¸‹ã€‚\nå¸ƒå±€é¢æ¿ WpfSuite ä¸­é‡å†™äº† StackPanel ä»¥åŠ WrapPanelï¼Œå®ƒä»¬ç°åœ¨å‡æ”¯æŒä½¿ç”¨ â€œSpacingâ€ å±æ€§æ¥ç›´æ¥è°ƒæ•´å…ƒç´ ä¹‹é—´çš„é—´è·ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®å…ƒç´  Marginã€‚WrapPanel çš„é—´è·æ˜¯å…è®¸è‡ªå®šä¹‰æ°´å¹³ä»¥åŠå‚ç›´ä¸¤ä¸ªæ–¹å‘ä¸Šçš„ã€‚\né™¤æ­¤ä¹‹å¤–ï¼ŒWpfSuite è¿˜æä¾›äº† FlexPanelï¼ˆå¼¹æ€§é¢æ¿ï¼‰ï¼ŒMasonryPanelï¼ˆç€‘å¸ƒæµé¢æ¿ï¼‰è¿™ä¸¤ä¸ªå¸ƒå±€å®¹å™¨ã€‚å…¶ä¸­ FlexPanel åŸºæœ¬æ”¯æŒ CSS ä¸­ flex å¸ƒå±€çš„æ‰€æœ‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬ Growï¼ŒShrink ä»¥åŠå„ç§å¯¹é½ã€‚MasonryPanel åˆ™æ˜¯å¾ˆç›´è§‚çš„ç€‘å¸ƒæµå¸ƒå±€ï¼Œå’Œ StackPanel ä¸€æ ·ï¼Œä½ å¯ä»¥æŒ‡å®šè¯¥å®¹å™¨çš„æ–¹å‘ã€‚è€Œä¸”è¿™äº›å¸ƒå±€æ§ä»¶éƒ½æ˜¯æ”¯æŒä½¿ç”¨ â€œSpacingâ€ å±æ€§æ¥ç›´æ¥æŒ‡å®šå…ƒç´ é—´è·çš„ã€‚\næ§ä»¶ WpfSuite é‡å†™äº†å¤§éƒ¨åˆ†å¸¸ç”¨ WPF æ§ä»¶ï¼Œä¸ºå®ƒä»¬ç›´æ¥æ·»åŠ äº† CornerRadius å±æ€§ï¼Œä»¥åŠå…¶ä»–å…³äºæ§ä»¶çŠ¶æ€çš„ç›¸å…³å±æ€§ï¼Œä¾‹å¦‚ â€œDisabledBackgroundâ€ å±æ€§ï¼Œå½“ä¸ºå…¶åˆ¶å®šå€¼æ—¶ï¼Œå¦‚æœæ§ä»¶è¢«ç¦ç”¨ï¼Œé‚£ä¹ˆæ§ä»¶çš„èƒŒæ™¯é¢œè‰²å°±ä¼šåˆ‡æ¢åˆ°è®¾ç½®çš„é¢œè‰²ã€‚å…¶ä»–çš„çŠ¶æ€è¿˜åŒ…å« Hoverï¼ŒPressedï¼ŒSelectedï¼ŒSelected Inactiveï¼Œè¿™æ ·æˆ‘ä»¬ä¸éœ€è¦æ›´æ”¹æ§ä»¶çš„æ¨¡æ¿ï¼Œå°±èƒ½ç›´æ¥æ›´æ”¹å®ƒåœ¨ä¸åŒçŠ¶æ€ä¸‹çš„é¢œè‰²ï¼Œè¾¹æ¡†ã€‚\nå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¼šé‡åˆ° â€œæ§ä»¶â€ çš„å†…å®¹è¶…å‡ºå¸¦åœ†è§’çš„ â€œBorderâ€ èŒƒå›´çš„æƒ…å†µï¼Œæˆ‘ä»¬å¸Œæœ›æ§ä»¶çš„å†…å®¹è¢«è£å‰ªåˆ° Border å†…éƒ¨ï¼Œç°åœ¨è¿™ä¸ªéœ€æ±‚å¯ä»¥éå¸¸ç®€å•çš„å®ç°ã€‚WpfSuite é‡å†™äº† Border çš„å®ç°ï¼Œå¹¶æä¾›äº†ä¸€ä¸ª â€œContentClipâ€ å±æ€§ï¼Œåªéœ€è¦æŠŠ Border çš„å†…å®¹çš„ Clip å±æ€§ç»‘å®šåˆ° Border çš„ ContentClip ä¸Šï¼Œå°±å¯ä»¥å®Œæˆè‡ªåŠ¨è£å‰ªäº†ï¼\nè€Œä¸”ï¼Œæ‰€æœ‰ WpfSuite æä¾›çš„æ§ä»¶å‡ä¸å½±å“åŸæœ‰ WPF æ§ä»¶ï¼Œå®ƒä¸ä¼šå¯¹åŸæœ‰ WPF æ§ä»¶åšä»»ä½•æ›´æ”¹ï¼Œæ‰€ä»¥å¦‚æœä½ æ‹…å¿ƒæŸäº›æ§ä»¶çš„æ‹“å±•åŠŸèƒ½ä¼šé€ æˆæ€§èƒ½é—®é¢˜ï¼Œä½ ä¹Ÿå¯ä»¥å®Œå…¨ä¸ä½¿ç”¨å®ƒã€‚\nå€¼è½¬æ¢å™¨ WpfSuite è¿˜æä¾›äº†å¸¸ç”¨çš„è¯¸å¤šå€¼è½¬æ¢å™¨ï¼Œä¾‹å¦‚ç”¨äºå°†ä»»æ„å¯¹è±¡å€¼åˆ¤ç©ºå¹¶è¿”å› bool çš„è½¬æ¢å™¨ï¼Œå°†æ•°å­—ä¸æŒ‡å®šæ•°å­—åšå¯¹æ¯”å¹¶è¿”å› bool çš„è½¬æ¢å™¨ï¼Œåšä¸€äº›ç®€å•çš„æ•°å­¦è®¡ç®—å¹¶è¿”å›ç»“æœçš„ bool è½¬æ¢å™¨ï¼Œä»¥åŠèƒ½å¤Ÿå°†å€¼è½¬æ¢å™¨ä¸²èµ·æ¥çš„ â€œå€¼è½¬æ¢å™¨ç»„â€ã€‚\nå®ƒä»¬èƒ½å¤Ÿåšçš„ä¸œè¥¿å½“ç„¶è¶…çº§å¤šï¼Œä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªå±æ€§æ˜¯é›†åˆç±»å‹çš„ï¼Œé‚£ä¹ˆä½ å®Œå…¨å¯ä»¥å°†ç•Œé¢ä¸ŠæŸå…ƒç´ çš„ Visibility ç»‘å®šåˆ°è¿™ä¸ªå±æ€§çš„ Count å±æ€§ä¸Šï¼Œç„¶åæŒ‡å®šè½¬æ¢å™¨ä¸º â€œæ•°å­—é0åˆ¤æ–­â€ ä»¥åŠ Bool è½¬ Visibility ç»„åˆæˆçš„ä¸€ä¸ª ValueConverterGroupï¼Œäºæ˜¯ï¼Œè¿™ä¸ªæ§ä»¶å°±ä»…åœ¨é›†åˆä¸ä¸ºç©ºçš„æ—¶å€™ä¼šæ˜¾ç¤ºå‡ºæ¥äº†ï¼è¿™å¾ˆ MVVMï¼Œè¿™å¾ˆé…·ï¼\n1 2 3 4 \u0026lt;ws:ValueConverterGroup x:Key=\u0026#34;CollectionIsNotEmptyToVisibilityConverter\u0026#34;\u0026gt; \u0026lt;ws:CollectionIsNotNullOrEmptyConverter/\u0026gt; \u0026lt;ws:BooleanToVisibilityConverter/\u0026gt; \u0026lt;/ws:ValueConverterGroup\u0026gt; æ ‡è®°æ‹“å±• æ ‡è®°æ‹“å±•åº”è¯¥æ˜¯ WpfSuite æœ€ç®€å•çš„éƒ¨åˆ†äº†ï¼Œå®ƒåªæ˜¯æä¾›äº† MarkupExtension ä»¥è®©ä½ èƒ½åœ¨ XAML ä¸­ç›´æ¥å†™å‡ºæ¥è¡¨ç¤ºå…·ä½“ç±»å‹çš„å€¼ã€‚\nä¾‹å¦‚ï¼Œä½ æœ‰ä¸€ä¸ªæ§ä»¶ï¼Œè¯¥æ§ä»¶æœ‰ä¸€ä¸ªå±æ€§æ˜¯ Object ç±»å‹çš„ï¼Œä½ å¸Œæœ›å¾€é‡Œé¢ä¼ å…¥ä¸€ä¸ªé•¿æ•´å‹ï¼Œå¦‚æœä½ åœ¨ XAML ä¸­ç›´æ¥å†™ â€œ114514â€ è¿™æ ·çš„æ•°å­—ï¼Œå®ƒè‚¯å®šä¸ä¼šå¸®ä½ è½¬æˆä½ æƒ³è¦çš„ç±»å‹å¹¶ä¼ å…¥çš„ï¼Œå®ƒä¼šæŠŠä½ çš„å­—ç¬¦ä¸²åŸå°ä¸åŠ¨çš„ä¼ è¿‡å»â€¦ è¿™ä¸ªæ—¶å€™ï¼Œæ ‡è®°æ‹“å±•å°±æ´¾ä¸Šç”¨åœºäº†ï¼ä½ ç›´æ¥ä½¿ç”¨ {ws:Int64 114514} å°±èƒ½ç›´æ¥è¡¨ç¤ºä¸€ä¸ªç²¾ç¡®çš„é•¿æ•´å‹çš„å€¼ã€‚\nè¿˜æœ‰ä¸€äº›ä½¿ç”¨åœºæ™¯ï¼Œå°±æ˜¯ DataTriggerï¼Œä¾‹å¦‚ä½ å¸Œæœ›ä½ çš„æŸäº›æ•°æ®è§¦å‘å™¨ï¼Œå½“æ•°æ®ç­‰äºæŸä¸ªç¡®åˆ‡å€¼å¾—æ—¶å€™è§¦å‘ï¼Œä½†å¾ˆé—æ†¾ï¼Œ DataTrigger çš„ Value å±æ€§æ­£å¥½æ˜¯ Object ç±»å‹çš„ï¼Œè€Œæœ‰äº›æ—¶å€™å®ƒå¹¶ä¸èƒ½è¯†åˆ«åˆ°ä½ è¿™ä¸ªæ•°æ®çš„ç±»å‹ï¼Œä¹Ÿå½“ç„¶æ²¡åŠæ³•å¯¹ä½ åœ¨ XAML ä¸­å†™çš„å­—ç¬¦ä¸²åšæ­£ç¡®çš„è½¬å‹ï¼Œè¿™ä¸ªæ—¶å€™ç”¨èƒ½å¤Ÿåˆ¶å®šç¡®åˆ‡ç±»å‹çš„æ ‡è®°æ‹“å±•å†åˆé€‚ä¸è¿‡äº†ã€‚\nè¿‡æ¸¡ è¿‡æ¸¡åœ¨åº”ç”¨ç¨‹åºä¸­ç”¨çš„åº”è¯¥æ˜¯ç‰¹åˆ«å¤šçš„ï¼Œæˆ‘ä»¬å¾ˆéš¾æƒ³è±¡ï¼ŒWPF æä¾›äº†å®Œæ•´çš„åŠ¨ç”»ç³»ç»Ÿï¼Œä½†æ˜¯å±…ç„¶æ²¡æœ‰æä¾›å°è£…å¥½çš„è¿‡æ¸¡åŠ¨ç”»ï¼\næœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›æŸä¸ªå†…å®¹è¢«æ›´æ”¹çš„æ—¶å€™ï¼Œå®ƒèƒ½å¤Ÿæ‰§è¡Œä¸€äº›åŠ¨ç”»ï¼Œä¾‹å¦‚æ·¡å…¥æ·¡å‡ºï¼Œåˆ’å‡ºåˆ’å…¥ï¼Œæˆ–è€…æ˜¯ç¼©æ”¾ï¼Œç”šè‡³æ—‹è½¬ï¼Œæˆ–æŠŠè¿™äº›ç»“åˆèµ·æ¥ä¹‹ç±»çš„ï¼Œè¿™ä¸ªæ—¶å€™ï¼ŒWpfSuite æä¾›çš„ TransitioningContentControl èƒ½å¤Ÿè½»æ¾çš„å¸®ä½ è§£å†³è¿™ä¸ªé—®é¢˜ï¼\nç†Ÿæ‚‰ Avalonia çš„æœ‹å‹è‚¯å®šè¦è¯´äº†ï¼Œè¿™ä¸å°± Avalonia è‡ªå¸¦çš„ä¸œè¥¿å˜›ï¼æ²¡é”™ï¼æˆ‘å°±æ˜¯çœ‹åˆ° Avalonia æœ‰è¿™ä¸œè¥¿ï¼Œä½†æ˜¯ WPF æ²¡æœ‰ï¼Œç„¶åæˆ‘çœ¼çº¢ï¼Œå°±ç§»æ¤è¿‡æ¥äº†ï¼\nå¯¹ TransitioningContentControl æŒ‡å®šä½ æƒ³è¦çš„è¿‡æ¸¡æ•ˆæœï¼Œå®ƒå°±å¯ä»¥åœ¨å†…å®¹å˜æ›´æ—¶è‡ªåŠ¨æ‰§è¡Œè¿™ä¸ªæ•ˆæœã€‚å†…ç½®çš„æœ‰ Slideï¼ˆæ»‘åŠ¨ï¼‰ï¼ŒFadeï¼ˆæ·¡å…¥æ·¡å‡ºï¼‰ï¼ŒScaleï¼ˆç¼©æ”¾ï¼‰ä»¥åŠç»“åˆ Slide å’Œ Fade çš„ SlideFadeï¼ˆæ»‘åŠ¨çš„åŒæ—¶ï¼Œæ·¡å…¥æ·¡å‡ºï¼‰ã€‚\nè€Œä¸”æˆ‘ä»¬å¯¹ Frame æ§ä»¶ä¹Ÿæ”¯æŒäº†è¿‡æ¸¡åŠ¨ç”»ï¼Œåˆå› ä¸ºåŠ¨ç”»ä¹Ÿæ˜¯æœ‰æ­£å‘ä¸åå‘ä¹‹åˆ†çš„ï¼Œæ‰€ä»¥å½“ä½ ä½¿ç”¨ Frame çš„ â€GoBackâ€œ æ–¹æ³•æ—¶ï¼ŒåŠ¨ç”»çš„æ‰§è¡Œä¹Ÿæ˜¯åå‘çš„ã€‚\nåŒæ—¶ï¼Œä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨å°†åŠ¨ç”»çš„ Reverse è®¾ä¸º trueï¼Œè¿™æ ·å®ƒçš„æ–¹å‘å°±è¢«ç½®æ¢äº†ã€‚æœ€ç»å…¸çš„ä¸€ä¸ªåº”ç”¨å°±æ˜¯ï¼Œå·¦ä¾§å¯¼èˆªé¡¹ä¸å³ä¾§å¸¦æ»‘åŠ¨åŠ¨ç”»çš„ Frameï¼Œå½“ç‚¹å‡»å½“å‰é¡¹åé¢çš„é¡¹æ—¶ï¼Œæ­£å‘æ‰§è¡ŒåŠ¨ç”»ï¼Œå½“ç‚¹å‡»å½“å‰é¡¹å‰é¢çš„é¡¹æ—¶ï¼Œåå‘æ‰§è¡ŒåŠ¨ç”»ï¼Œè¿™æ ·ä½ å°±åšåˆ°äº†ä¸€ä¸ªéå¸¸ä¸é”™çš„é¡µé¢æ»‘åŠ¨æ•ˆæœï¼\né™¤æ­¤ä¹‹å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨å®ƒæ¥åš Banner å›¾åƒçš„åˆ‡æ¢åŠ¨ç”»ï¼Œä¾‹å¦‚ç”¨æˆ·ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œæ›´æ¢å›¾ç‰‡ï¼Œè€Œå›¾ç‰‡ç”± TransitioningContentControl å®¹çº³ï¼Œæ‰€ä»¥ä¹Ÿå¯ä¸ç”¨å®ƒæ¥åšè¿™ä¸ªåŠ¨ç”»ï¼Œç‚¹å‡»å·¦è¾¹çš„æŒ‰é’®åˆ™ä»å·¦æ–¹æ»‘å…¥æ–°å›¾ç‰‡ï¼Œç‚¹å‡»å³è¾¹çš„æŒ‰é’®åˆ™ä»å³æ–¹æ»‘å…¥æ–°å›¾ç‰‡ï¼Œå¬èµ·æ¥å°±å¾ˆä¸é”™ã€‚\nå®ç”¨å·¥å…· åœ¨è¿™éƒ¨åˆ†ä¸­ï¼Œæœ€æœ‰ç”¨çš„å°±å±ç»‘å®šä»£ç†äº†ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘éœ€è¦åšä¸€ä¸ªåˆ—è¡¨é¡¹çš„å³é”®èœå•ï¼Œå¹¶ä¸”èœå•ä½¿ç”¨ MVVMï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé€»è¾‘ä½¿ç”¨æŒ‡ä»¤å®ç°ï¼Œå‚æ•°é€šè¿‡ç»‘å®šä¼ å…¥ã€‚ä½†æ˜¯å³é”®èœå•çš„å¯è§†åŒ–æ ‘å’Œåˆ—è¡¨ä¸æ˜¯åŒä¸€ä¸ªï¼Œä½ åœ¨ Menu ä¸Šä½¿ç”¨ Binding ä¼šå› ä¸ºæ‰¾ä¸åˆ° DataContext è€Œå¤±è´¥ã€‚\nä½¿ç”¨ç»‘å®šä»£ç†åˆ™å¯ä»¥è½»æ¾è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å› ä¸ºé™æ€èµ„æºæ˜¯æ­£å¸¸ä½¿ç”¨çš„ï¼Œæ‰€ä»¥ä½ åªéœ€è¦æŠŠç»‘å®šä»£ç†ä½œä¸ºé™æ€èµ„æºå®šä¹‰åœ¨çª—å£ä¸­ï¼Œå¹¶æŒ‡å®š Data=\u0026quot;{Binding}\u0026quot;ï¼Œç„¶ååœ¨ä½ çš„ Menu ä¸­æŠŠ Binding çš„ DataSource æŒ‡å®šä¸ºåˆšåˆšå®šä¹‰çš„é™æ€èµ„æºï¼Œå°±èƒ½å¤ŸæˆåŠŸåœ¨èœå•ä¸­å¼•ç”¨åˆ°æ­£å¸¸çš„ DataContext äº†ã€‚\nè¯¥æ–¹æ¡ˆé€‚ç”¨äºä»»ä½•å›  VisualTree è€Œå¯¼è‡´ DataContext æ‰¾ä¸åˆ°ï¼Œè¿›è€Œå¯¼è‡´ç»‘å®šå¤±è´¥çš„æ‰€æœ‰é—®é¢˜ã€‚\né™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å°å·¥å…·ï¼Œä¾‹å¦‚ ValidationUtilsï¼Œç”¨äºè‡ªå®šä¹‰ä¾èµ–å±æ€§çš„å±æ€§éªŒè¯ï¼Œæˆ–è€… ColorUtilsï¼Œç”¨äºè®¡ç®— HSV ä¸ RGB çš„è½¬æ¢ã€‚\n","date":"2024-05-23T16:23:51+08:00","permalink":"https://slimenull.com/p/20240523162351/","title":"[WPF] EleCho.WpfSuite, æ§ä»¶, å¸ƒå±€å®¹å™¨, è¿‡æ¸¡åŠ¨ç”», æ ‡è®°æ‹“å±•ä»¥åŠå®ç”¨å·¥å…·"},{"content":"\nå¦‚ä¸Šå›¾, è¿™äº›åœ°å›¾åˆ†åˆ«æ˜¯:\nä½ç½®å’Œæ–¹å‘å‡è·Ÿéšç©å®¶, å¹¶ä¸”å¸¦æœ‰åœ°å›¾æ ‡è®°çš„åœ°å›¾ ä½ç½®å’Œæ–¹å‘å›ºå®š, å¸¦æœ‰åœ°å›¾æ ‡è®°çš„åœ°å›¾ ä½ç½®è·Ÿéšç©å®¶, å¸¦æœ‰åœ°å›¾æ ‡è®°çš„åœ°å›¾ ä½ç½®è·Ÿéšç©å®¶, å¸¦æœ‰éƒ¨åˆ†åœ°å›¾æ ‡è®°, èƒ½å¤Ÿæ˜¾ç¤ºå¯¼èˆªè·¯çº¿çš„åœ°å›¾ ä½ç½®è·Ÿéšç©å®¶, å¸¦æœ‰éƒ¨åˆ†åœ°å›¾æ ‡è®°, èƒ½å¤Ÿæ˜¾ç¤ºå¯¼èˆªè·¯çº¿ä¸”é£æ ¼åŒ–çš„åœ°å›¾. å®æ—¶åœ°å›¾ åœ¨ Unity ä¸­, ç›¸æœºæ¸²æŸ“çš„ç»“æœèƒ½å¤Ÿç›´æ¥ä¿å­˜åˆ° \u0026ldquo;æ¸²æŸ“è´´å›¾\u0026rdquo; ä¸­, è€Œè´´å›¾å¯ä»¥å‘ˆç°åœ¨ UI ç•Œé¢ä¸Š, é€šè¿‡è¿™ä¸€æ–¹å¼, æˆ‘ä»¬å¯ä»¥åˆ›å»ºæœ€ç®€å•çš„å®æ—¶åœ°å›¾.\né¦–å…ˆ, åœ¨é¡¹ç›®é¢æ¿ä¸­, æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç”¨äºå­˜å‚¨ç›¸æœºæ¸²æŸ“è¾“å‡ºçš„ \u0026ldquo;æ¸²æŸ“è´´å›¾\u0026rdquo;, å³å‡»é¼ æ ‡, é€‰æ‹© \u0026ldquo;åˆ›å»º -\u0026gt; æ¸²æŸ“è´´å›¾(Render texture)\u0026rdquo;\nç„¶å, åœ¨åˆ›å»ºä¸­åˆ›å»ºä¸€ä¸ªå‚ç›´å‘ä¸‹çœ‹çš„ç›¸æœº, å¹¶å°†æŠ•å½±æ¨¡å¼æ”¹ä¸º \u0026ldquo;æ­£äº¤(Orthographic)\u0026rdquo;:\nç„¶å, å°†ç›¸æœºçš„ \u0026ldquo;ç›®æ ‡è´´å›¾\u0026rdquo; è®¾ç½®ä¸ºæˆ‘ä»¬åˆšåˆšåˆ›å»ºå¥½çš„æ¸²æŸ“è´´å›¾:\nåšå®Œè¿™äº›æ“ä½œä¹‹å, ä½ ä¼šå¾—åˆ°è¿™æ ·çš„ç»“æœ:\næœ€å, æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ä»»æ„æ–¹å¼, å°†è´´å›¾å±•ç¤ºåœ¨å±å¹•ä¸Šå°±å¯ä»¥äº†. æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ç›´æ¥ä½¿ç”¨ UI ä¸­çš„ \u0026ldquo;RawImage\u0026rdquo; è¿›è¡Œæ˜¾ç¤º.\nåœ¨åœºæ™¯ä¸­åˆ›å»º RawImage, ç„¶åå°†å…¶è¦æ˜¾ç¤ºçš„çº¹ç†è®¾ç½®ä¸ºæˆ‘ä»¬åˆ›å»ºå¥½çš„æ¸²æŸ“çº¹ç†, æœ€åä½ ä¼šçœ‹åˆ°, UI ä¸Šçš„å›¾ç‰‡æ˜¾ç¤ºç€ç›¸æœºæ‹æ‘„åˆ°çš„å†…å®¹.\nè‡³æ­¤, æœ€ç®€å•çš„å®æ—¶å°åœ°å›¾, æˆ‘ä»¬å°±åšå¥½äº†. å…³äºä¸€äº›ç®€å•çš„æ‹“å±•çš„å†…å®¹, å¤§æ¦‚å¦‚ä¸‹:\nå¦‚æœè¦è·Ÿéšç©å®¶, é‚£ä¹ˆç›´æ¥æ‰‹å†™è„šæœ¬, ä½¿ç›¸æœºè·Ÿéšç©å®¶å³å¯ å¦‚æœè¦éšç©å®¶æ—‹è½¬, ç›´æ¥æ‰‹å†™è„šæœ¬, è·Ÿéšç©å®¶, å¹¶ä¸”è·Ÿéšç©å®¶æ—‹è½¬. å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥å°†å…¶è®¾ç½®ä¸ºç©å®¶çš„å­å¯¹è±¡, è¿™æ ·ç©å®¶ç§»åŠ¨å’Œæ—‹è½¬çš„æ—¶å€™, ç›¸æœºä¹Ÿä¼šç§»åŠ¨å’Œæ—‹è½¬. é™æ€åœ°å›¾ é™æ€åœ°å›¾å°±æ˜¯æå‰å¯¹åœºæ™¯è¿›è¡Œæ‹æ‘„, æ‹¿åˆ°è´´å›¾ä¹‹åæ”¾åˆ° UI ä¸Š, ç„¶ååœ¨å®é™…æ˜¾ç¤ºæ—¶, æ ¹æ®æ¯”ä¾‹ç³»æ•°, ç§»åŠ¨è¿™å¼ å›¾ç‰‡.\nåœ¨ Unity ä¸­æˆªå›¾è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„, å»ºè®®æ˜¯å†™ä¸ªç¼–è¾‘å™¨è„šæœ¬, ç‚¹å‡»æŒ‰é’®, åŠ¨æ€çš„åˆ›å»ºç›¸æœº, ç„¶åä½¿ç”¨æ­£äº¤ç›¸æœº, æ¸²æŸ“åˆ° RenderTexture, å†å°† RenderTexture ä¿å­˜åˆ°æœ¬åœ°, ä¸‹é¢æ˜¯ä¾›å‚è€ƒçš„ä»£ç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 public class MinimapTextureTool : EditorWindow { [MenuItem(\u0026#34;Tools/MinimapTextureTool\u0026#34;)] static void Open() { var window = EditorWindow.GetWindow\u0026lt;MinimapTextureTool\u0026gt;(); window.Show(); } string _textureSizeStr = \u0026#34;1024\u0026#34;; string _cameraHeightStr = \u0026#34;5\u0026#34;; string _minimapAreaSizeStr = \u0026#34;50\u0026#34;; int _minimapLayers = ~0; void OnGUI() { GUILayout.Label(\u0026#34;çº¹ç†å·¥å…·\u0026#34;); GUILayout.Label(\u0026#34;çº¹ç†å¤§å°: \u0026#34;); _textureSizeStr = GUILayout.TextField(_textureSizeStr); GUILayout.Label(\u0026#34;ç›¸æœºé«˜åº¦: \u0026#34;); _cameraHeightStr = GUILayout.TextField(_cameraHeightStr); GUILayout.Label(\u0026#34;å°åœ°å›¾åŒºåŸŸå¤§å°: \u0026#34;); _minimapAreaSizeStr = GUILayout.TextField(_minimapAreaSizeStr); GUILayout.Label(\u0026#34;å°åœ°å›¾å±‚çº§é®ç½©: \u0026#34;); LayerMask tempMask = EditorGUILayout.MaskField( InternalEditorUtility.LayerMaskToConcatenatedLayersMask(_minimapLayers), InternalEditorUtility.layers); _minimapLayers = InternalEditorUtility.ConcatenatedLayersMaskToLayerMask(tempMask); GUILayout.Space(10); if (!int.TryParse(_textureSizeStr, out var textureSize) || !float.TryParse(_cameraHeightStr, out var cameraHeight) || !float.TryParse(_minimapAreaSizeStr, out var minimapAreaSize)) { GUILayout.Label(\u0026#34;è¾“å…¥æœ‰è¯¯!\u0026#34;); return; } if (GUILayout.Button(\u0026#34;ç”Ÿæˆå°åœ°å›¾çº¹ç†\u0026#34;)) { string filename = EditorUtility.SaveFilePanel(\u0026#34;ä¿å­˜çº¹ç†\u0026#34;, Application.dataPath, \u0026#34;å°åœ°å›¾\u0026#34;, \u0026#34;png\u0026#34;); // åˆ›å»ºæ¸²æŸ“çº¹ç† RenderTexture rt = new RenderTexture(textureSize, textureSize, 32); // åˆ›å»ºç›¸æœº GameObject cameraGameObject = new GameObject(); Camera camera = cameraGameObject.AddComponent\u0026lt;Camera\u0026gt;(); cameraGameObject.transform.eulerAngles = new Vector3(90, 0, 0); cameraGameObject.transform.position = new Vector3(0, cameraHeight, 0); // è®¾ç½®ç›¸æœºå±æ€§ camera.cullingMask = _minimapLayers; camera.clearFlags = CameraClearFlags.SolidColor; camera.backgroundColor = new Color(0, 0, 0, 0); camera.orthographic = true; camera.orthographicSize = minimapAreaSize / 2; // æ¸²æŸ“ camera.targetTexture = rt; camera.Render(); // ä¿å­˜å½“å‰æ¿€æ´»çš„æ¸²æŸ“çº¹ç†, ç„¶åæ¿€æ´»åˆšåˆ›å»ºçš„æ¸²æŸ“çº¹ç† var activeRenderTextureBefore = RenderTexture.active; RenderTexture.active = rt; // åˆ›å»º 2D çº¹ç†, å¹¶ä»æ¸²æŸ“çº¹ç†ä¸­è¯»å…¥æ•°æ® Texture2D png = new Texture2D(textureSize, textureSize); png.ReadPixels(new Rect(0, 0, textureSize, textureSize), 0, 0); png.Apply(); // æ¢å¤ä¹‹å‰æ¿€æ´»çš„æ¸²æŸ“çº¹ç† RenderTexture.active = activeRenderTextureBefore; // ç¼–ç  PNG, å¹¶ä¿å­˜ var bytes = png.EncodeToPNG(); System.IO.File.WriteAllBytes(filename, bytes); // æ¸…ç†ä¸´æ—¶åˆ›å»ºçš„å¯¹è±¡ DestroyImmediate(cameraGameObject); DestroyImmediate(rt); DestroyImmediate(png); } } } å¦‚æœè¦æ‰‹åŠ¨æˆªå›¾çš„è¯, å¯ä»¥å°†çª—å£ä¸Šçš„è¿™ä¸¤ä¸ªå…³é—­, éšè—å¤©ç©ºç›’ä»¥åŠè¾…åŠ©çº¿ä¹‹ç±»çš„.\nè¿™é‡Œä»¥ä¸€ä¸ªå‡†å¤‡å¥½çš„åœ°å›¾åšç¤ºä¾‹.\nç„¶å, æˆ‘ä»¬ç»§ç»­å†™ä¸€ä¸ªç®€å•çš„è„šæœ¬ç”¨æ¥å±•ç¤ºåœ°å›¾, é€šè¿‡æ”¹å˜é¡¶ç‚¹ UV, å®ç°ç§»åŠ¨åœ°å›¾å†…å®¹.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 public class SimpleTextureMinimap : MaskableGraphic { public Texture MinimapTexture; public Vector2 Pivot = new Vector2(.5f, .5f); public float MinimapAreaSize = 50; public float DisplayAreaSize = 10; public float ImageSize = 100; public Transform FollowTarget; private void Update() { if (FollowTarget != null) SetVerticesDirty(); } public override Texture mainTexture =\u0026gt; MinimapTexture; protected override void OnPopulateMesh(VertexHelper vh) { vh.Clear(); var radius = ImageSize / 2; var uvRadius = DisplayAreaSize / MinimapAreaSize / 2; var uvOffset = new Vector2(); if (FollowTarget != null) uvOffset = new Vector2(FollowTarget.position.x, FollowTarget.position.z) / MinimapAreaSize; vh.AddVert(new Vector3(-radius, -radius), color, Pivot + uvOffset + new Vector2(-uvRadius, -uvRadius)); vh.AddVert(new Vector3(-radius, radius), color, Pivot + uvOffset + new Vector2(-uvRadius, uvRadius)); vh.AddVert(new Vector3(radius, radius), color, Pivot + uvOffset + new Vector2(uvRadius, uvRadius)); vh.AddVert(new Vector3(radius, -radius), color, Pivot + uvOffset + new Vector2(uvRadius, -uvRadius)); vh.AddTriangle(0, 1, 2); vh.AddTriangle(0, 2, 3); } } åœ¨ä¸Šé¢çš„ä»£ç ä¸­, æˆ‘ä»¬åªä½¿ç”¨è·Ÿéšç›®æ ‡çš„ä½ç½®è®¡ç®— UV åç§»é‡, æ²¡æœ‰è€ƒè™‘åˆ°å½“ç©å®¶æ—‹è½¬æ—¶, åœ°å›¾ä¹Ÿæ—‹è½¬çš„è¿™ç§éœ€æ±‚, æ‰€ä»¥è®¡ç®—å°±å˜å¾—ç®€å•äº†è®¸å¤š.\nåœ°å›¾æ ‡è®° è¦å°†åœºæ™¯ä¸­çš„æŸäº›ç‰©ä½“åœ¨åœ°å›¾ä¸Šæ ‡è®°å‡ºæ¥, æ–¹å¼æœ‰å¾ˆå¤š. å¯¹äºåŸºäºæ¸²æŸ“ç›¸æœºçš„å°åœ°å›¾, å…¶ä¸­æœ€ç®€å•çš„æ–¹å¼æ˜¯ç›´æ¥åœ¨ç‰©ä½“ä¸Šåˆ›å»ºä¸€ä¸ªä¸–ç•Œåæ ‡ç©ºé—´çš„ Canvas, å¹¶åœ¨ä¸Šé¢æ”¾ä¸€å¼ å›¾ç‰‡, ç„¶åè®©å°åœ°å›¾ç›¸æœºæ‹æ‘„åˆ°.\nå°±åƒè¿™æ ·, è°ƒæ•´ Canvas çš„ä½ç½®, æ—‹è½¬, ç¼©æ”¾ä½¿å…¶é¢æœä¸Šæ–¹ä»¥è¢«ç›¸æœºåœ°å›¾æ‹æ‘„åˆ°, ç„¶åè®¾ç½®å•ç‹¬çš„å±‚çº§, å¹¶ä¸”ä½¿ä¸»ç›¸æœºä¸æ¸²æŸ“è¯¥å±‚çº§, è€Œå°åœ°å›¾ç›¸æœºæ¸²æŸ“å®ƒ.\næœ€åçš„æ•ˆæœ, å°±æ˜¯è¿™æ ·çš„:\nå¯¹äºé™æ€åœ°å›¾, ä¹Ÿå°±æ˜¯åœ°å›¾ç”±è´´å›¾æ„æˆ, æˆ‘ä»¬éœ€è¦åšä¸–ç•Œåæ ‡åˆ°åœ°å›¾åæ ‡çš„åæ ‡è½¬æ¢, ç„¶ååœ¨åœ°å›¾ä¸Šå®ä¾‹åŒ– Sprite, å¹¶è®¾ç½®å…¶ä½ç½®.\nåœ°å›¾æ ‡è®°å½“ç„¶ä¸æ­¢è¿™ä¸€ç§å®ç°æ–¹å¼, ä¸å¦‚è¯´, ç›´æ¥ç”¨ UI åœ¨å°åœ°å›¾ä¸Šæ”¾ä¸€ä¸ªå›¾ç‰‡æ˜¯æ›´å¥½çš„è§£å†³æ–¹æ¡ˆ\nå°åœ°å›¾åŒ… å¯¹äºæ›´å¤šåŠŸèƒ½, æˆ‘å°†å®ƒå°è£…æˆä¸€ä¸ª Unity åŒ…äº†. å…¶ä¸­å°±åŒ…å«å®æ—¶å°åœ°å›¾, é™æ€å°åœ°å›¾, æ ‡è®°, ç‚¹å‡»å¯¼èˆªä»¥åŠè·¯çº¿æ˜¾ç¤º.\nè¦å®‰è£…è¿™ä¸ªåŒ…, é¦–å…ˆç¡®ä¿ä½ çš„ç”µè„‘ä¸­æœ‰å®‰è£… \u0026lsquo;git\u0026rsquo;, ç„¶ååœ¨ Unity åŒ…ç®¡ç†å™¨ä¸­, å•å‡»å·¦ä¸Šè§’çš„ \u0026lsquo;æ·»åŠ åŒ…\u0026rsquo; æŒ‰é’®, ç„¶åå•å‡» \u0026lsquo;ä» git URL æ·»åŠ åŒ…\u0026rsquo;, ç„¶åè¾“å…¥ https://github.com/SlimeNull/UnityMinimaps.git å¹¶ç¡®è®¤.\nä¸å‡ºæ„å¤–çš„è¯, åä¸º \u0026ldquo;SlimeNull.UnityMinimaps\u0026rdquo; çš„åŒ…ä¼šè¢«å®‰è£…åˆ°ä½ çš„é¡¹ç›®ä¸­:\nç°åœ¨, æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨åœºæ™¯ä¸­åˆ›å»ºå°åœ°å›¾äº†. åœ¨ Unity èœå•æ ä¸­, æ‰¾åˆ° Tools æŒ‰é’®, å•å‡»å…¶ä¸­çš„ Minimap å³å¯æ‰“å¼€å°åœ°å›¾åˆ›å»ºå·¥å…·.\nå¦‚æœè¦åœ¨åœºæ™¯ä¸­åˆ›å»ºä¸€ä¸ªåŸºäºç›¸æœºä¸æ¸²æŸ“çº¹ç†çš„å®æ—¶åœ°å›¾, éœ€è¦ä»¥ä¸‹å‡†å¤‡:\nä¸€ä¸ªæ¸²æŸ“çº¹ç† ä¸€ä¸ªåœ°å›¾ç›¸æœº, å¹¶ä¸”æœ‰èµ‹å€¼ä¸Šé¢æ‰€è¯´çš„æ¸²æŸ“çº¹ç†, åŒæ—¶è¯¥ç›¸æœºå¿…é¡»æ­£å‘å‚ç›´å‘ä¸‹ç…§å°„(Xæ—‹è½¬90åº¦, Y å’Œ Z ä¸æ—‹è½¬) ç„¶å, å°†å°åœ°å›¾ç±»å‹è°ƒæ•´ä¸º \u0026ldquo;Render texture\u0026rdquo;, æ‹–æ‹½å°åœ°å›¾ç›¸æœºåˆ°çª—å£ä¸­, æœ€ååœ¨åœºæ™¯å±‚çº§ä¸­é€‰æ‹©ä½ è¦æ”¾ç½®å°åœ°å›¾çš„ä½ç½®(è¿™é‡Œæ˜¯ Canvas èŠ‚ç‚¹), ç„¶åç‚¹å‡» \u0026ldquo;åˆ›å»º\u0026rdquo; å³å¯.\nå¦‚æœä½ åœ¨åœºæ™¯å±‚çº§ä¸­é€‰æ‹©å¯¹è±¡, å®ƒä¼šæç¤ºä½  \u0026ldquo;é€‰æ‹©ä¸€ä¸ªåœ¨ Canvas ä¹‹ä¸‹çš„ GameObject ä»¥åˆ›å»ºå°åœ°å›¾\u0026rdquo;, åªæœ‰å½“ä½ é€‰æ‹©ä¹‹å, æ‰ä¼šæœ‰ \u0026ldquo;åˆ›å»º\u0026rdquo; æŒ‰é’®.\nåœ¨åšå®Œä¸Šè¿°æ­¥éª¤ä¹‹å, Canvas ä¸‹å°±ä¼šè‡ªåŠ¨åˆ›å»ºå¥½ä¸€ä¸ªå°åœ°å›¾, å…¶ä¸­æ˜¾ç¤ºçš„å†…å®¹æ˜¯ç›¸æœºæ‰€ç…§å°„åˆ°çš„å†…å®¹. é€šè¿‡è¿™ä¸€æ–¹å¼å°±èƒ½å®ç°å®æ—¶å°åœ°å›¾äº†.\nå¦‚æœä½ è¦è°ƒæ•´å°åœ°å›¾çš„æ˜¾ç¤ºå¤§å°, åˆ™éœ€è¦è®¾ç½® Minimap ç»„ä»¶ä¸­çš„ Size.\næ“ä½œ é€šè¿‡æ›´æ”¹ Minimap ç»„ä»¶ä¸­çš„ AreaSize, å¯ä»¥æŒ‡å®šå½“å‰å°åœ°å›¾æ˜¾ç¤ºçš„åŒºåŸŸå¤§å°. ä¸è¿‡, æ³¨æ„ä¸è¦è¶…è¿‡å°åœ°å›¾ç›¸æœºçš„ç…§å°„èŒƒå›´, å› ä¸ºèŒƒå›´ä¹‹å¤–æ˜¯æ˜¾ç¤ºä¸åˆ°çš„.\nè‡ªå¸¦çš„ MinimapModifier ç»„ä»¶æ˜¯å®ç°ç”¨æˆ·é¼ æ ‡æ»šè½®ç¼©æ”¾å°åœ°å›¾çš„åŠŸèƒ½çš„. Factor ç”¨æ¥æŒ‡å®šç¼©æ”¾çš„é€Ÿåº¦å€æ•°, MinSize å’Œ MaxSize åˆ™æ˜¯æœ€å°ä¸æœ€å¤§çš„å¤§å°. å¦‚æœä½ ä¸å¸Œæœ›ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡é¼ æ ‡æ»šè½®è°ƒæ•´å¤§å°, ç§»é™¤è¿™ä¸ªç»„ä»¶å°±å¯ä»¥äº†.\näººç‰©è·Ÿéš è¦å®ç°äººç‰©è·Ÿéš, åªéœ€è¦å°†è¦è·Ÿéšçš„ç‰©ä½“è®¾ç½®åˆ° Minimap ç»„ä»¶çš„ Origin ä¸Šå³å¯. å¹¶ä¸”, å½“è·Ÿéšçš„ç‰©ä½“æ—‹è½¬æ—¶, å°åœ°å›¾ä¹Ÿä¼šè·Ÿç€æ—‹è½¬, ä¿è¯ç©å®¶çš„å‰æ–¹å§‹ç»ˆæ˜¯åœ°å›¾ä¸Šæ–¹.\nä¸è¿‡, éœ€è¦æ³¨æ„çš„æ˜¯, å¦‚æœä½ çš„å°åœ°å›¾ç›¸æœºä¸ä¼šç§»åŠ¨, é‚£ä¹ˆå½“ç©å®¶è¶…å‡ºå°åœ°å›¾ç…§å°„èŒƒå›´çš„æ—¶å€™, é‚£ä¹ˆå°åœ°å›¾çš„å†…å®¹ä¹Ÿä¼šå˜æˆç©º, å› ä¸ºå°åœ°å›¾æ¸²æŸ“å™¨è·å–ä¸åˆ°ç©å®¶å‘¨å›´çš„åœ°å›¾ä¿¡æ¯äº†.\næ‰€ä»¥ä¸€èˆ¬çš„, å¦‚æœä½ éœ€è¦å§‹ç»ˆèƒ½å¤Ÿæ­£ç¡®æ˜¾ç¤ºå°åœ°å›¾, ä½ è¿˜éœ€è¦ä¿è¯å°åœ°å›¾è·Ÿéšç©å®¶, ä»¥ä¿è¯å°åœ°å›¾ç»„ä»¶èƒ½å¤Ÿè·å–åˆ°ç©å®¶å‘¨å›´çš„åœ°å›¾ä¿¡æ¯. æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç®€å•çš„ç‰©ä½“è·Ÿéšè„šæœ¬æ¥ä½¿ç›¸æœºå§‹ç»ˆè·Ÿéšç©å®¶.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 using UnityEngine; [ExecuteAlways] public class FollowObject : MonoBehaviour { public Transform Target; public Vector3 Offset; private void LateUpdate() { if (Target != null) { transform.position = Target.position + Offset; } } } ç„¶åæŒ‚è½½åˆ°å°åœ°å›¾ç›¸æœºä¸Š, è¿™æ ·å°åœ°å›¾å°±å§‹ç»ˆè·Ÿéšç©å®¶äº†.\næ³¨æ„, ä¸è¦ç›´æ¥å°†å°åœ°å›¾ç›¸æœºæŒ‚è½½åˆ°ç©å®¶ä¸‹, å› ä¸ºè¿™æ ·, ç©å®¶çš„æ—‹è½¬ä¼šå½±å“åˆ°åœ°å›¾, ä»è€Œå¯¼è‡´åœ°å›¾é”™ä¹±, ä»¥ä¸‹çš„åšæ³•æ˜¯ é”™è¯¯ çš„!\nå¤šè¾¹å½¢åœ°å›¾ é»˜è®¤å°åœ°å›¾çš„æ˜¾ç¤ºæ˜¯ \u0026ldquo;æ–¹å½¢\u0026rdquo; çš„, å¦‚æœä½ éœ€è¦æ¢æˆå¤šè¾¹å½¢çš„å°åœ°å›¾, åªéœ€è¦å°†å°åœ°å›¾ä¸­çš„ \u0026ldquo;MinimapRenderer\u0026rdquo; ç»„ä»¶æ¢æˆ \u0026ldquo;MinimapPolygonRenderer\u0026rdquo; å³å¯.\né€šè¿‡å¢åŠ  \u0026ldquo;é¡¶ç‚¹æ•°\u0026rdquo; ä½ ä¹Ÿå¯ä»¥å°†å®ƒåšæˆè¿‘ä¼¼ \u0026ldquo;åœ†å½¢\u0026rdquo; çš„å°åœ°å›¾.\nå½“ç„¶, å¦‚æœä½ éœ€è¦æ›´å¤šå¥‡å¥‡æ€ªæ€ªå½¢çŠ¶çš„å°åœ°å›¾, ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ UI ä¸Šçš„é®ç½©, æ¯•ç«Ÿå°åœ°å›¾çš„æ¸²æŸ“å™¨ä¹Ÿæ˜¯ä¸€ä¸ª MaskableGraphics.\næ ‡è®° ä¸Šé¢æˆ‘ä»¬è®²äº†ç›´æ¥é€šè¿‡è®©æ¸²æŸ“è´´å›¾ç…§å°„åˆ°ä¸€ä¸ª UI å›¾åƒæ¥å®ç°çš„å°åœ°å›¾, ä½†åœ¨è¿™é‡Œçš„å°åœ°å›¾åŒ…ä¸­, ç›´æ¥æä¾›äº†åœ¨å°åœ°å›¾ UI ä¸Šæ˜¾ç¤ºæ ‡è®°çš„åŠŸèƒ½.\né¦–å…ˆæˆ‘ä»¬éœ€è¦æŠŠæˆ‘ä»¬çš„ \u0026ldquo;æ ‡è®°\u0026rdquo; åšæˆé¢„åˆ¶ä½“, è¿™é€šå¸¸æ˜¯ä¸€ä¸ª \u0026ldquo;Image\u0026rdquo; å›¾ç‰‡.\nç„¶ååœ¨å°åœ°å›¾çš„ \u0026ldquo;MinimapIndicator\u0026rdquo; ç»„ä»¶ä¸­æ·»åŠ ä¸€ä¸ªæ–°é¡¹, å¹¶æŒ‡å®šè¦æ ‡è®°çš„ç‰©ä½“, ä»¥åŠå›¾æ ‡çš„é¢„åˆ¶ä½“å³å¯.\nåœ¨è¿è¡Œæ—¶, å°åœ°å›¾æ ‡è®°å°±ä¼šå®ä¾‹åŒ–åˆ°å°åœ°å›¾ä¸­, ç„¶åæ˜¾ç¤ºå‡ºæ¥, å¹¶è·Ÿéšç›®æ ‡ç‰©ä½“.\nå¯¼èˆª è¿™ä¸ªå°åœ°å›¾åŒ…è¿˜æ”¯æŒç”¨æˆ·ç‚¹å‡»å°åœ°å›¾æ—¶, è°ƒç”¨ä¸»è§’çš„ NavMeshAgent è¿›è¡Œå¯¼èˆª. åªéœ€è¦å°†ç©å®¶çš„ NavMeshAgent èµ‹å€¼åˆ°å°åœ°å›¾ä¸‹çš„ MinimapNavigator ç»„ä»¶çš„ NavMeshAgent ä¸Š, ç„¶åè®¾ç½®èƒ½å¤Ÿå¯¼èˆªçš„å±‚çº§é®ç½©å³å¯.\nç°åœ¨, åœ¨åœ°å›¾ä¸Šç‚¹å‡», å°åœ°å›¾çš„å¯¼èˆªå™¨å°±ä¼šè‡ªåŠ¨åšå°„çº¿æ£€æµ‹, æ‰¾åˆ°ç›®æ ‡ç‚¹, å¹¶è®¾ç½®ç©å®¶çš„ NavMeshAgent çš„ç›®æ ‡ç‚¹.\nå¦‚æœä½ è¿˜æƒ³è¦åœ¨åœ°å›¾ä¸Šæ˜¾ç¤ºå¯¼èˆªè·¯å¾„, å¯ä»¥ç”¨å°åœ°å›¾ä¸‹é¢çš„ NavigationPathRenderer, é»˜è®¤åˆ›å»ºçš„å°åœ°å›¾ä¼šåŒ…å«ä¸€ä¸ª, å°†éœ€è¦æ˜¾ç¤ºå¯¼èˆªè·¯å¾„çš„ NavMeshAgent èµ‹å€¼ä¸Šå»å°±å¯ä»¥äº†.\né£æ ¼åŒ– é£æ ¼åŒ–åœ¨è¿™é‡Œå®ç°çš„åŸç†å°±æ˜¯ç›´æ¥åšå¥½åœºæ™¯çš„ä¸€ä¸ªåœ°å›¾å›¾ç‰‡, ç„¶åå°åœ°å›¾åœ¨æ¸²æŸ“æ—¶, å°±åŸºäºè¿™ä¸ªå°åœ°å›¾çš„å†…å®¹è¿›è¡Œæ¸²æŸ“. å’Œå®æ—¶å°åœ°å›¾ä¸€æ ·, ä½ ä¸éœ€è¦è‡ªå·±ç¼–å†™ä»»ä½•é€»è¾‘, åªéœ€è¦è·Ÿéšå‘å¯¼, æ‹æ‘„ä¸€ä¸ªåœ°å›¾å›¾ç‰‡, ç„¶åç”¨ç¾æœ¯è½¯ä»¶å¯¹å…¶è¿›è¡Œå¤„ç†, æœ€åè®¾ç½®å¥½ç›¸å…³å±æ€§å°±å¯ä»¥äº†.\nä½¿ç”¨å°åœ°å›¾å·¥å…·ä¸­çš„ \u0026ldquo;çº¹ç†å·¥å…·\u0026rdquo; å¯ä»¥ç›´æ¥æ‹æ‘„ä¸€å¼ å½“å‰åœºæ™¯çš„åœ°å›¾å›¾ç‰‡, è®¾å®šå¥½ä½ æƒ³è¦çš„çº¹ç†å¤§å°, ç”¨äºæ‹æ‘„çš„ç›¸æœºé«˜åº¦, å°åœ°å›¾çš„åŒºåŸŸå¤§å°(ç›´å¾„), ä»¥åŠè¦æ‹æ‘„çš„å±‚çº§, æœ€åç‚¹å‡» \u0026ldquo;ç”Ÿæˆå°åœ°å›¾çº¹ç†\u0026rdquo; å³å¯.\næœ€åä½¿ç”¨ç¼–è¾‘å¥½çš„åœ°å›¾è´´å›¾åˆ›å»ºä¸€ä¸ªé™æ€åœ°å›¾å°±å¯ä»¥äº†.\nå¾®è°ƒè®¾ç½®, æœ€åçš„æ•ˆæœå¤§è‡´å¦‚æ­¤. å¯ä»¥çœ‹åˆ°åœ¨é™æ€çš„å°åœ°å›¾ä¸Š, æœ‰æˆ‘ä»¬é€šè¿‡ç»˜å›¾å·¥å…·ç»˜åˆ¶çš„ä¸€äº›çº¿æ¡.\néœ€è¦æ³¨æ„çš„æ˜¯, åœ¨åˆ›å»ºé™æ€å°åœ°å›¾æ—¶, çº¹ç†çš„åŒºåŸŸå¤§å°å¿…é¡»è®¾ç½®æ­£ç¡®, å¦åˆ™å°åœ°å›¾çš„æ˜¾ç¤ºå°±å‡ºé—®é¢˜äº†. æ‰€ä»¥å»ºè®®å¯¹äºå°åœ°å›¾çº¹ç†çš„å‘½åä¸­åŒ…å«å°åœ°å›¾çš„å¤§å°, è¿™æ ·å°±ä¸ä¼šå¿˜è®°åœ°å›¾å¤§å°äº†.\nå¦å¤–, ç”±äºé™æ€å°åœ°å›¾çš„æ¸²æŸ“åŸºäºé™æ­¢çš„å›¾ç‰‡, æ‰€ä»¥åœºæ™¯ä¸­è¿åŠ¨çš„ç‰©ä½“, ä½ å°±æ²¡åŠæ³•å®æ—¶çš„æ˜¾ç¤ºå‡ºæ¥å®ƒäº†, è€Œæ˜¯åº”è¯¥ä½¿ç”¨ \u0026ldquo;åœ°å›¾æ ‡è®°\u0026rdquo; æ¥è¡¨ç¤ºå®ƒçš„ä½ç½®ä¸æ–¹å‘.\n","date":"2024-03-06T13:23:52+08:00","permalink":"https://slimenull.com/p/20240306132352/","title":"Unity å°åœ°å›¾, å®æ—¶ä¸é™æ€, åœ°å›¾æ ‡è®°, ç‚¹å‡»å¯¼èˆª, è·¯çº¿æ˜¾ç¤º, é£æ ¼åŒ–"},{"content":"ç®€å•çš„å®ç° 2D ä»¥åŠ 3D çš„è½®è½¬å›¾, ç±»ä¼¼äº Web ä¸­æ— é™å¾ªç¯çš„è½®æ’­å›¾é‚£æ ·.\næ–‡ä¸­æ‰€æœ‰ä»£ç å‡å·²åŒæ­¥è‡³ github.com/SlimeNull/UnityTests\n3D è½®è½¬å›¾: Assets/Scripts/Scenes/CarouselTestScene/Carousel.cs 2D è½®è½¬å›¾: Assets/Scripts/Scenes/CarouselTestScene/UICarousel.cs ä¸»è¦é€»è¾‘ æ ¹æ®æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœå¯çŸ¥, ä¸»è¦åŸç†å°±æ˜¯, å½“é¼ æ ‡æ‹–æ‹½æ—¶, æ›´æ–°å¯¹è±¡çš„ä½ç½®. æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨è„šæœ¬ä¸­ä¿å­˜ä¸€ä¸ª \u0026ldquo;å½“å‰æ—‹è½¬é‡\u0026rdquo; çš„å˜é‡, å½“é¼ æ ‡æ‹–æ‹½æ—¶, æ›´æ”¹å®ƒ. è€Œæ¯æ¬¡æ‹–æ‹½, éƒ½æ ¹æ®æ—‹è½¬é‡, è®¡ç®—æ¯ä¸€ä¸ªå¯¹è±¡çš„ä½ç½®. æ¥ä¸‹æ¥ä»¥ 3D è½®è½¬å›¾ä¸ºä¾‹, è®²è¿°ç¼–å†™æ€è·¯.\nåŸºç¡€æ—‹è½¬ è®¾è®¡å¯¹è±¡å±‚çº§å…³ç³»:\n1 2 3 4 5 6 - çˆ¶å¯¹è±¡ (è„šæœ¬æŒ‚è½½åˆ°è¿™é‡Œ) |- å­å¯¹è±¡ |- å­å¯¹è±¡ |- å­å¯¹è±¡ |- ... |- å­å¯¹è±¡ è½®è½¬å›¾çš„å¤§æ¦‚é€»è¾‘æ¡†æ¶:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 public class Carousel : MonoBehavior, IDragHandler { // å½“å‰æ—‹è½¬åç§»é‡ float _radianOffset; void Start() { // åœ¨å¼€å§‹æ—¶, æ›´æ–°ç‰©ä½“çŠ¶æ€ UpdateObjectStatus(); } private void UpdateObjectStatus() { // æ›´æ–°å­ç‰©ä½“çŠ¶æ€, è®¡ç®—æ—‹è½¬, è®¾ç½®ä½ç½®ç­‰ } void IDragHandler.OnDrag(PointerEventData eventData) { var mouseOffset = è·å–é¼ æ ‡æ‹–æ‹½åç§»é‡çš„é€»è¾‘; var radianChange = å°†é¼ æ ‡åç§»é‡è½¬æ¢ä¸ºæ—‹è½¬é‡çš„é€»è¾‘; _radianOffset += radianChange; UpdateObjectStatus(); } } ç¼–å†™ä»æ—‹è½¬è§’åº¦, æ›´æ–°ç‰©ä½“çŠ¶æ€çš„é€»è¾‘. è¿™é‡Œ, æˆ‘ä»¬å°†ä¸€æ•´ä¸ªåœ†å¹³å‡åˆ†ä¸ºæˆå‘˜æ•°é‡ä»½, å¹¶è®©å®ƒä»¬å¹³å‡åˆ†å¸ƒ. åŠå¾„çš„è¯, æˆ‘ä»¬å…è®¸ç”¨æˆ·åœ¨æ£€è§†å™¨ä¸­è‡ªå®šä¹‰, æ‰€ä»¥åœ¨è¿™é‡Œå‘å¤–æš´éœ²å­—æ®µå³å¯.\néœ€è¦æ³¨æ„çš„æ˜¯, åœ¨æ•°å­¦ä¹ æƒ¯ä¸‰è§’å‡½æ•°ä¸­, è§’çš„èµ·å§‹ä¸º x æ­£æ–¹å‘, ä¹Ÿå°±æ˜¯ \u0026ldquo;å³æ–¹\u0026rdquo;, ä¸ºäº†ä½¿ç¬¬ä¸€ä¸ªå­ç‰©ä½“, ä¹Ÿå°±æ˜¯æ—‹è½¬é‡ä¸º 0 çš„å­ç‰©ä½“åœ¨æœ€å‰æ–¹, æˆ‘ä»¬åœ¨å®é™…è®¡ç®—è§’åº¦æ—¶, éœ€è¦æ•´ä½“å‡å»åŠä¸ª PI, ä¹Ÿå°±æ˜¯ 90 åº¦.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 public class Carousel : MonoBehavior, IDragHandler { float _radianOffset; /// \u0026lt;summary\u0026gt; /// å¤§å° /// \u0026lt;/summary\u0026gt; [field: SerializeField] public float Size { get; set; } = 5; void Start() { UpdateObjectStatus(); } // æ›´æ–°ç‰©ä½“çŠ¶æ€ private void UpdateObjectStatus() { var radius = Size / 2; // åŠå¾„ var childCount = transform.childCount; // æˆå‘˜æ•°é‡ var radianGap = Mathf.PI * 2 / childCount; // æ—‹è½¬å¼§åº¦é—´éš” for (int i = 0; i \u0026lt; childCount; i++) { // è·å–å½“å‰è§’åº¦, ä»¥åŠå½“å‰æ¸¸æˆå¯¹è±¡ var radian = radianGap * i + _radianOffset - Mathf.PI / 2; var child = transform.GetChild(i); // è®¡ç®—ä½™å¼¦æ­£å¼¦å€¼ var cos = Mathf.Cos(radian); var sin = Mathf.Sin(radian); // è®¡ç®—åæ ‡ var x = cos * radius; var z = sin * radius; // è®¾ç½®ä½ç½® child.localPosition = new Vector3(x, 0, z); } } void IDragHandler.OnDrag(PointerEventData eventData) { // æ‹–æ‹½é€»è¾‘ } } æ¥ä¸‹æ¥å®ç°è·å–é¼ æ ‡æ‹–æ‹½åç§»é‡, ç”±äº 3D ç©ºé—´ä¸­çš„å¯¹è±¡, è·ç¦»ç›¸æœºè¿œè¿‘ä¸ç¡®å®š, æ‰€ä»¥æœ€ç»ˆçš„é¼ æ ‡åç§»é‡æˆ‘ä»¬ä»¥é¼ æ ‡ä½ç½®è½¬æ¢ä¸ºä¸–ç•Œåæ ‡çš„ç»“æœä¸ºå‡†. åœ¨å¼€å§‹æ‹–æ‹½çš„æ—¶å€™, è®°å½•ä¸‹å½“å‰è·ç¦»ç›¸æœºçš„ä½ç½®ä¸é¼ æ ‡çš„ä¸–ç•Œåæ ‡, å¹¶åœ¨æ¥ä¸‹æ¥çš„æ¯ä¸€æ¬¡æ‹–æ‹½è§¦å‘æ—¶éƒ½é‡æ–°è®¡ç®—é¼ æ ‡çš„ä¸–ç•Œåæ ‡, å¹¶å¾—å‡ºé¼ æ ‡åœ¨ä¸–ç•Œä¸­çš„åç§»é‡.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 public class Carousel : MonoBehavior, IDragHandler, IBeginDragHandler { float _radianOffset; float _cameraDistance; // ç›¸æœºè·ç¦» Vector3 _lastMouseWorldPosition; // ä¸Šæ¬¡çš„é¼ æ ‡ä¸–ç•Œåæ ‡ /// \u0026lt;summary\u0026gt; /// å¤§å° /// \u0026lt;/summary\u0026gt; [field: SerializeField] public float Size { get; set; } = 5; void Start() { UpdateObjectStatus(); } // æ›´æ–°ç‰©ä½“çŠ¶æ€ private void UpdateObjectStatus() { // ä½ç½®æ›´æ–°é€»è¾‘ } void IDragHandler.OnDrag(PointerEventData eventData) { var radius = Size / 2; // æ±‚å½“å‰é¼ æ ‡åæ ‡, è®¡ç®—é¼ æ ‡çš„åç§»é‡ var mousePosition = Input.mousePosition; mousePosition.z = _cameraDistance; var newMouseWorldPosition = Camera.main.ScreenToWorldPoint(mousePosition); var mouseWorldOffset = newMouseWorldPosition - _lastMouseWorldPosition; // ä¿å­˜æ–°çš„é¼ æ ‡ä½ç½® _lastMouseWorldPosition = newMouseWorldPosition; // å°†é¼ æ ‡åç§»é‡è½¬æ¢ä¸ºæ—‹è½¬é‡ var radianChange = mouseWorldOffset.x / radius; // å¢åŠ æ—‹è½¬ _radianOffset += radianChange; // æ›´æ–°ç‰©ä½“çŠ¶æ€ UpdateObjectStatus(); } void IBeginDragHandler.OnBeginDrag(PointerEventData eventData) { // é€šè¿‡è‡ªå·±çš„å±å¹•åæ ‡, å– z å€¼å¾—åˆ°ç›¸æœºè·ç¦» // å½“ç„¶, è¿™é‡Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å‘é‡æŠ•å½±æ¥ç›´æ¥è·å–å½“å‰å¯¹è±¡ä¸ç›¸æœºçš„è·ç¦» var selfScreenPosition = Camera.main.WorldToScreenPoint(transform.position); _cameraDistance = selfScreenPosition.z; // æ±‚é¼ æ ‡çš„ä¸–ç•Œåæ ‡ var mousePosition = Input.mousePosition; mousePosition.z = _cameraDistance; _lastMouseWorldPosition = Camera.main.ScreenToWorldPoint(mousePosition); } } åœ¨ä¸Šé¢çš„ä»£ç ä¸­, æˆ‘ä»¬çš„æ—‹è½¬é‡æ˜¯ç›´æ¥å°†é¼ æ ‡åç§»é‡é™¤ä»¥åŠå¾„å¾—æ¥çš„. å› ä¸ºåœ†çš„å‘¨é•¿ç­‰äºå¼§ä¹˜åŠå¾„, åä¹‹, å¦‚æœæƒ³è¦æ ¹æ®åœ†ä¸Šé•¿åº¦æ±‚è§’å¤§å°, ç›´æ¥æ‹¿è¿™ä¸ªé•¿åº¦é™¤ä»¥åŠå¾„å³å¯. è€Œæˆ‘ä»¬è¿™é‡Œçš„æ€è·¯, æ­£æ˜¯å°†é¼ æ ‡çš„åç§»é‡, è§†ä½œåœ†ä¸Šä¸€ç‚¹çš„æ—‹è½¬è·ç¦».\nå½“ç„¶, ä½ ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡åˆ«çš„ç®—æ³•æ¥å°†é¼ æ ‡åç§»é‡è½¬æ¢ä¸ºæ—‹è½¬é‡, è¿™å–å†³äºä½ çš„éœ€æ±‚. ç”šè‡³ä½ ä¹Ÿå¯ä»¥ç›´æ¥æš´åŠ›çš„å°†é¼ æ ‡çš„åæ ‡åç§»ä¹˜æˆ–é™¤ä»¥ä¸€ä¸ªå›ºå®šçš„æ•°æ¥ä½œä¸ºæ—‹è½¬é‡ä½¿ç”¨.\næœ€å, æ£€æŸ¥ä¸€ä¸‹ä½ çš„ä»£ç , å®ƒä»¬å¤§æ¦‚æ˜¯è¿™æ ·çš„:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 public class Carousel : MonoBehavior, IDragHandler, IBeginDragHandler { float _radianOffset; float _cameraDistance; Vector3 _lastMouseWorldPosition; public float Size { get; set; } = 5; void Start() { ... } private void UpdateObjectStatus() { ... } void IDragHandler.OnDrag(PointerEventData eventData) { .. } void IBeginDragHandler.OnBeginDrag(PointerEventData eventData) { ... } } åœ¨ç¼–å†™å®ŒåŸºç¡€ä»£ç ä¹‹å, æˆ‘ä»¬çš„æ•ˆæœå¤§æ¦‚å¦‚ä¸‹:\næ³¨æ„, ä¸ºäº†è®© 3D åœºæ™¯ä¸­çš„ç‰©ä½“èƒ½å¤Ÿæ¥æ”¶æŒ‡é’ˆæ‹–æ‹½çš„äº‹ä»¶, ä½ çš„åœºæ™¯ä¸­éœ€è¦æœ‰ä¸€ä¸ª \u0026ldquo;EventSystem\u0026rdquo; ç»„ä»¶, å¹¶ä¸”ä¸»ç›¸æœºéœ€è¦æŒ‚è½½ \u0026ldquo;GraphicsRaycaster\u0026rdquo; ç»„ä»¶.\nè‡ªåŠ¨å›æ­£ æ¥ä¸‹æ¥æˆ‘ä»¬è¿˜éœ€è¦ç»§ç»­ç¼–å†™è‡ªåŠ¨å›æ­£çš„åŠŸèƒ½, ä½¿æœ€è¿‘çš„ç‰©ä½“æ—‹è½¬åˆ°å‰æ–¹. å¤§æ¦‚æ€è·¯å°±æ˜¯, ä¿å­˜å½“å‰æœ€é è¿‘å‰æ–¹çš„ç‰©ä½“ç´¢å¼•, å¹¶è®¡ç®—å…¶åœ¨æœ€å‰æ–¹çš„æ—‹è½¬åç§»é‡, æœ€åä½¿ç”¨ DOTween æ‰§è¡Œç¼“åŠ¨.\nå› ä¸ºæˆ‘ä»¬ä½¿ç”¨æ­£å¼¦å€¼ä¹˜åŠå¾„ä½œä¸ºç‰©ä½“çš„ z åæ ‡, æ‰€ä»¥å¯¹äºè·å–å½“å‰æœ€å‰æ–¹çš„ç‰©ä½“, æˆ‘ä»¬åªéœ€è¦çœ‹å“ªä¸ªç‰©ä½“æ—‹è½¬é‡æ­£å¼¦å€¼æœ€å°å³å¯.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 public class Carousel : MonoBehavior, IDragHandler, IBeginDragHandler { // å…¶ä»–å­—æ®µå’Œå±æ€§ /// \u0026lt;summary\u0026gt; /// å·²é€‰æ‹©çš„ç´¢å¼• /// \u0026lt;/summary\u0026gt; public SelectedIndex { get; private set; } // æ›´æ–°ç‰©ä½“çŠ¶æ€ private void UpdateObjectStatus() { var radius = Size / 2; var childCount = transform.childCount; var radianGap = Mathf.PI * 2 / childCount; var minSin = 2f; var selectedIndex = -1; for (int i = 0; i \u0026lt; childCount; i++) { var radian = radianGap * i + _radianOffset - Mathf.PI / 2; var child = transform.GetChild(i); var cos = Mathf.Cos(radian); var sin = Mathf.Sin(radian); var x = cos * radius; var z = sin * radius; child.localPosition = new Vector3(x, 0, z); // å¦‚æœå½“å‰æ­£å¼¦å€¼å°äºå·²ä¿å­˜çš„æœ€å°æ­£å¼¦å€¼ // åˆ™æ›´æ–°æœ€å°æ­£å¼¦å€¼ä»¥åŠå·²é€‰ä¸­ç´¢å¼• if (sin \u0026lt;= minSin) { minSin = sin; selectedIndex = i; } } // æ›´æ–°å±æ€§ SelectedIndex = selectedIndex; } // å…¶ä»–é€»è¾‘ } è¦è·å–æŸä¸ªå­å¯¹è±¡å¯¹åº”çš„æ—‹è½¬è§’åº¦, ç›´æ¥æ‹¿æ—‹è½¬é—´éš”, ä¹˜å…¶ç´¢å¼•, å†è½¬ä¸ºè´Ÿæ•°å³å¯. å› ä¸ºä»ç¬¬ä¸€ä¸ªå…ƒç´ æ—‹è½¬åˆ°ç¬¬äºŒä¸ªå…ƒç´ æ—¶, æ—‹è½¬è§’åº¦æ˜¯å‡å°‘çš„.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 public class Carousel : MonoBehavior, IDragHandler, IBeginDragHandler { // å…¶ä»–å­—æ®µå’Œå±æ€§ /// \u0026lt;summary\u0026gt; /// ä»ç´¢å¼•è·å–æ—‹è½¬é‡ /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;index\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt; private float GetRadianFromItemIndex(int index) { var childCount = transform.childCount; var radianGap = Mathf.PI * 2 / childCount; return -radianGap * index; } // å…¶ä»–é€»è¾‘ } é‚£ä¹ˆ, é€‰ä¸­æŸä¸ªå…ƒç´ , å°†å…¶ç§»åŠ¨åˆ°æœ€å‰æ–¹çš„é€»è¾‘, å¤§æ¦‚å°±æ˜¯è¿™æ ·äº†, ä½¿ç”¨ DOTween åšè¿‡æ¸¡å°±å¯ä»¥:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 public class Carousel : MonoBehavior, IDragHandler, IBeginDragHandler { float _radianOffset; // å…¶ä»–å­—æ®µ /// \u0026lt;summary\u0026gt; /// è¿‡æ¸¡æ—¶é—´ /// \u0026lt;/summary\u0026gt; [field: SerializeField] public float TransitionTime { get; set; } = 0.2f; // å…¶ä»–å­—æ®µå’Œå±æ€§ // æ›´æ–°ç‰©ä½“çŠ¶æ€ private void UpdateObjectStatus() { ... } // ä»ç´¢å¼•è·å–æ—‹è½¬è§’åº¦ private float GetRadianFromItemIndex(int index) { ... } public void Select(int index) { var originRadian = _radianOffset; var targetRadian = GetRadianFromItemIndex(index); DOTween .To(radian =\u0026gt; { // è®¾ç½®æ—‹è½¬é‡å¹¶æ›´æ–°ç‰©ä½“çŠ¶æ€ _radianOffset = radian; UpdateObjectStatus(); }, originRadian, targetRadian, TransitionTime); } // å…¶ä»–é€»è¾‘ } ä¸è¿‡æˆ‘ä»¬æ¥ä¸‹æ¥è¿˜éœ€è¦è€ƒè™‘ä¸¤ä»¶äº‹.\nå¦‚æœæˆ‘å½“å‰æ—‹è½¬é‡æ˜¯ä¸€åœˆå¤š, è¿‡æ¸¡ä¼šå‡ºé—®é¢˜. ä¸¾ä¸ªä¾‹å­, å½“æ—‹è½¬é‡æ˜¯ä¸¤åœˆåŠæ—¶, ä¹Ÿå°±æ˜¯ 5 ä¸ª PI, å½“æˆ‘è°ƒç”¨ Select(0) çš„æ—¶å€™, å®ƒä¼šç›´æ¥ä» 5 ä¸ª PI è¿‡æ¸¡åˆ° 0, åœ¨è§†è§‰ä¸Šå°±æ˜¯, è¿™ä¸ªè½®è½¬å›¾è½¬äº†ä¸¤åœˆåŠ, å›åˆ°åŸç‚¹. å¦‚æœå½“å‰æ—‹è½¬åˆ°ç›®æ ‡æ—‹è½¬é‡å¤§äºåŠä¸ªåœ†, è§†è§‰ä¸Šä¸å¥½çœ‹. ä¸¾ä¸ªä¾‹å­, æˆ‘éœ€è¦ä» 180 åº¦æ—‹è½¬åˆ° 370 åº¦, å¦‚æœç›´æ¥è¿™ä¹ˆè½¬, è§†è§‰ä¸Šçœ‹èµ·æ¥æ˜¯å®ƒç»•äº†è¿œè·¯, å› ä¸ºä» 180 è½¬åˆ° 10 åº¦ç»è¿‡çš„ 170 å½“ç„¶æ˜¯æ¯” è½¬åˆ° 370 ç»è¿‡çš„ 190 åº¦è¦çŸ­çš„. æ‰€ä»¥, æˆ‘ä»¬éœ€è¦åšä¸¤ç‚¹ä¿®æ”¹:\nä½¿å½“å‰æ—‹è½¬é‡ä¸èƒ½å¤§äºä¸€åœˆ. åœ¨è¿›è¡Œæ—‹è½¬å‰, å°†ç›®æ ‡æ—‹è½¬å€¼æ”¹ä¸ºæœ€çŸ­çš„ç›®æ ‡å€¼. å…¶ä¸­ç¬¬ä¸€ç‚¹éå¸¸ç®€å•, åªéœ€è¦åœ¨æ¯ä¸€æ¬¡æ›´æ–°ç‰©ä½“çŠ¶æ€å‰, å¯¹å½“å‰æ—‹è½¬é‡ _radianOffset å¯¹ PI * 2 è¿›è¡Œæ±‚ä½™å³å¯.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 public class Carousel : MonoBehavior, IDragHandler, IBeginDragHandler { // å­—æ®µå’Œå±æ€§ // æ›´æ–°ç‰©ä½“çŠ¶æ€ private void UpdateObjectStatus() { // å˜é‡åˆå§‹åŒ– // åœ¨æ‰§è¡Œæ“ä½œå‰, ä¿è¯ _radianOffset ä¸å¤§äºä¸€åœˆ _radianOffset %= Mathf.PI * 2; for (int i = 0; i \u0026lt; childCount; i++) { // æ›´æ–°ç‰©ä½“ä½ç½®ä»¥åŠå…¶ä»–çš„å…·ä½“é€»è¾‘ } // æ›´æ–°å±æ€§ SelectedIndex = selectedIndex; } // å…¶ä»–é€»è¾‘ } ç¬¬äºŒç‚¹, æˆ‘ä»¬åªéœ€è¦åˆ¤æ–­æ—‹è½¬å·®å€¼, å¦‚æœå¤§äºåŠåœ†, é‚£ä¹ˆåŠ ä¸Šæˆ–è€…å‡å»ä¸€æ•´ä¸ªåœ†å³å¯.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 public class Carousel : MonoBehavior, IDragHandler, IBeginDragHandler { // å­—æ®µå’Œå±æ€§ // çŸ«æ­£æ—‹è½¬ç›®æ ‡ private void CorrectRotationTarget(float origin, ref float target) { const float DoublePI = Mathf.PI * 2; // æ—‹è½¬å·®å€¼ float diff = (target - origin) % DoublePI; if (diff \u0026gt; Mathf.PI) diff -= DoublePI; else if (diff \u0026lt; -Mathf.PI) diff += DoublePI; target = origin + diff; } // å…¶ä»–é€»è¾‘ } æœ€å, æˆ‘ä»¬åœ¨æ¾å¼€é¼ æ ‡, ä¹Ÿå°±æ˜¯ç»“æŸæ‹–æ‹½çš„æ—¶å€™, è°ƒç”¨ Select æ–¹æ³•, é€‰æ‹©å½“å‰æœ€å‰æ–¹ç‰©ä½“å³å¯.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 public class Carousel : MonoBehavior, IDragHandler, IBeginDragHandler, IEndDragHandler { // å…¶ä»–å­—æ®µå’Œå±æ€§ /// \u0026lt;summary\u0026gt; /// å¯ç”¨è‡ªåŠ¨å›æ­£ /// \u0026lt;/summary\u0026gt; [field: SerializeField] public bool EnableAutoCorrection { get; set; } = true; // é€‰æ‹© public void Select(int index) { ... } void IEndDragHandler.OnEndDrag(PointerEventData eventData) { if (EnableAutoCorrection) { Select(SelectedIndex); } } // å…¶ä»–é€»è¾‘ } æœ€å, æ£€æŸ¥ä½ çš„ä»£ç , å®ƒä»¬å¤§æ¦‚æ˜¯è¿™æ ·çš„:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 public class Carousel : MonoBehavior, IDragHandler, IBeginDragHandler, IEndDragHandler { float _radianOffset; float _cameraDistance; Vector3 _lastMouseWorldPosition; public float Size { get; set; } = 5; public bool EnableAutoCorrection { get; set; } = true; public float TransitionTime { get; set; } = 0.2f; public int SelectedIndex { get; private set; } void Start() { ... } private void UpdateObjectStatus() { ... } private void CorrectRotationTarget(float origin, ref float target) { ... } private float GetRadianFromItemIndex(int index) { ... } public void Select(int index) { ... } void IDragHandler.OnDrag(PointerEventData eventData) { .. } void IBeginDragHandler.OnBeginDrag(PointerEventData eventData) { ... } void IEndDragHandler.OnEndDrag(PointerEventData eventData) { ... } } åœ¨åšå®Œä¸Šé¢ä¸€åˆ‡å·¥ä½œä¹‹å, æˆ‘ä»¬æœ€ç»ˆä¼šæœ‰ä¸€ä¸ªå¸¦è‡ªåŠ¨å›æ­£çš„è½®è½¬å›¾. æ•ˆæœå¦‚ä¸‹:\nè¿åŠ¨æƒ¯æ€§ æƒ¯æ€§çš„å®ç°ä¹Ÿæ˜¯å¾ˆç®€å•çš„, æˆ‘ä»¬åªéœ€è¦ä¿å­˜æ‹–æ‹½æ—¶çš„é€Ÿåº¦, åœ¨æ¾å¼€æ—¶ä½¿å…¶ä»ç„¶ç»§ç»­è¿åŠ¨, å¹¶ä¸æ–­å‡å°é€Ÿåº¦å°±å¯ä»¥.\næˆ‘ä»¬çš„å¤§æ¦‚æ€è·¯å¦‚ä¸‹:\nä½¿ç”¨ä¸€ä¸ªå­—æ®µä¿å­˜é€Ÿåº¦, ä¸€ä¸ªå­—æ®µä¿å­˜å½“å‰æ˜¯å¦æ­£åœ¨è¢«ç”¨æˆ·æ‹–æ‹½. å‘å¤–å…¬å¼€ \u0026ldquo;æ—‹è½¬é˜»åŠ›\u0026rdquo; ä»¥å…è®¸åœ¨æ£€è§†å™¨ä¸­è°ƒæ•´é˜»åŠ›. åœ¨ Update ä¸­, å¦‚æœå¯ç”¨äº†æƒ¯æ€§, æ²¡æœ‰è¢«ç”¨æˆ·æ‹–æ‹½, å¹¶ä¸”é€Ÿåº¦ä¸ä¸º 0, åˆ™é€šè¿‡é€Ÿåº¦å¯¹æ—‹è½¬é‡è¿›è¡Œå¢åŠ , å¹¶æ›´æ–°ç‰©ä½“çŠ¶æ€. å¦‚æœåœ¨ä¸€æ¬¡æ›´æ–°ä¸­, é€Ÿåº¦æœ€ç»ˆè¡°å‡åˆ°äº† 0, é‚£ä¹ˆåˆ™æ‰§è¡Œè‡ªåŠ¨å›æ­£çš„é€»è¾‘. åœ¨ Drag ä¸­, æ ¹æ®å½“å‰æ‹–æ‹½çš„æ—‹è½¬å¢é‡ä»¥åŠæ—¶é—´å·®, è®¡ç®—å¹¶ä¿å­˜æ—‹è½¬é€Ÿåº¦. åœ¨ EndDrag ä¸­, åŸæœ¬ç›´æ¥è°ƒç”¨è‡ªåŠ¨å›æ­£çš„é€»è¾‘, ä»…åœ¨ä¸å¯ç”¨æƒ¯æ€§çš„æ—¶å€™ç›´æ¥æ‰§è¡Œ. å› ä¸ºå¦‚æœå¯åŠ¨äº†æƒ¯æ€§, åœ¨ Update ä¸­ä¼šæ‰§è¡Œè‡ªåŠ¨å›æ­£, ä¸éœ€è¦åœ¨ç»“æŸæ‹–æ‹½æ—¶æ‰§è¡Œ. æœ€ç»ˆ, ä»£ç çš„æ¡†æ¶å¤§è‡´å¦‚ä¸‹:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 public class Carousel : MonoBehavior, IDragHandler, IBeginDragHandler, IEndDragHandler { // å…¶ä»–å­—æ®µä¸å±æ€§ float _radianVelocity; // æ—‹è½¬é€Ÿåº¦ bool _dragging; // æ˜¯å¦æ­£åœ¨è¢«æ‹–æ‹½ /// \u0026lt;summary\u0026gt; /// æ—‹è½¬é˜»åŠ› /// \u0026lt;/summary\u0026gt; [field: SerializeField] public float RadianDrag { get; set; } = 10; /// \u0026lt;summary\u0026gt; /// å¯ç”¨æƒ¯æ€§ /// \u0026lt;/summary\u0026gt; [field: SerializeField] public bool EnableInertia { get; set; } = true; void Update() { if (EnableInertia \u0026amp;\u0026amp; !_dragging \u0026amp;\u0026amp; _radianVelocity == 0) { _radianOffset += _radianVelocity; UpdateObjectStatus(); // ä½¿é€Ÿåº¦è¡°å‡çš„é€»è¾‘ (ç¨åè¿›è¡Œè¯¦ç»†çš„ç¼–å†™) // è‡ªåŠ¨å›æ­£ if (EnableAutoCorrection \u0026amp;\u0026amp; _radianVelocity == 0) { Select(SelectedIndex); } } } void IDragHandler.OnDrag(PointerEventData eventData) { var radius = Size / 2; var mousePosition = Input.mousePosition; mousePosition.z = _cameraDistance; var newMouseWorldPosition = Camera.main.ScreenToWorldPoint(mousePosition); var mouseWorldOffset = newMouseWorldPosition - _lastMouseWorldPosition; _lastMouseWorldPosition = newMouseWorldPosition; var radianChange = mouseWorldOffset.x / radius; // ç›´æ¥ä»¥ radianChange é™¤ä»¥ Time.deltaTime å¾—åˆ°é€Ÿåº¦ _radianVelocity = radianChange / Time.deltaTime; _radianOffset += radianChange; UpdateObjectStatus(); } void IBeginDragHandler.OnBeginDrag(PointerEventData eventData) { // å…¶ä»–é€»è¾‘ _dragging = true; // è®¾ç½®æ‹–æ‹½çŠ¶æ€ } void IEndDragHandler.OnEndDrag(PointerEventData eventData) { _dragging = false; // è®¾ç½®æ‹–æ‹½çŠ¶æ€ if (EnableAutoCorrection \u0026amp;\u0026amp; !EnableInertia) { // è‡ªåŠ¨å›æ­£ Select(SelectedIndex); } } // å…¶ä»–é€»è¾‘ } é€Ÿåº¦çš„è¡°å‡, æˆ‘ä»¬è¿™é‡Œé€šè¿‡å°†é€Ÿåº¦æ‹†è§£æˆä¸¤ä¸ªé‡æ¥åšå¤„ç†, \u0026ldquo;æ–¹å‘\u0026rdquo; å’Œ \u0026ldquo;å¤§å°\u0026rdquo;. ç„¶åå¯¹å¤§å°åšå‡æ³•, æœ€åå†é‡æ–°æ‹¼æ¥.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 public class Carousel : MonoBehavior, IDragHandler, IBeginDragHandler, IEndDragHandler { // å­—æ®µä¸å±æ€§ void Update() { if (EnableInertia \u0026amp;\u0026amp; !_dragging \u0026amp;\u0026amp; _radianVelocity != 0) { _radianOffset += _radianVelocity * Time.deltaTime; UpdateObjectStatus(); // æ‹†è§£ var radianVelocitySign = Mathf.Sign(_radianVelocity); var radianVelocitySize = Mathf.Abs(_radianVelocity); // å‡å°é€Ÿåº¦ radianVelocitySize -= RadianDrag * Time.deltaTime; if (radianVelocitySize \u0026lt; 0) // é€Ÿåº¦å¤§å°ä¸èƒ½ä¸ºè´Ÿå€¼ radianVelocitySize = 0; // é‡æ–°æ‹¼æ¥ _radianVelocity = radianVelocitySign * radianVelocitySize; // è‡ªåŠ¨å›æ­£ if (EnableAutoCorrection \u0026amp;\u0026amp; _radianVelocity == 0) { Select(SelectedIndex); } } } // å…¶ä»–é€»è¾‘ } äºæ˜¯, æˆ‘ä»¬æˆåŠŸä¸ºè½®è½¬å›¾æ·»åŠ äº†æƒ¯æ€§åŠŸèƒ½. æœ€åæ£€æŸ¥ä»£ç , å®ƒä»¬å¤§æ¦‚æ˜¯è¿™æ ·çš„:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 public class Carousel : MonoBehavior, IDragHandler, IBeginDragHandler, IEndDragHandler { float _radianOffset; float _radianVelocity; float _cameraDistance; Vector3 _lastMouseWorldPosition; public float Size { get; set; } = 5; public float RadianDrag { get; set; } = 10; public bool EnableInertia { get; set; } = true; public bool EnableAutoCorrection { get; set; } = true; public float TransitionTime { get; set; } = 0.2f; public int SelectedIndex { get; private set; } void Start() { ... } void Update() { ... } private void UpdateObjectStatus() { ... } private void CorrectRotationTarget(float origin, ref float target) { ... } private float GetRadianFromItemIndex(int index) { ... } public void Select(int index) { ... } void IDragHandler.OnDrag(PointerEventData eventData) { .. } void IBeginDragHandler.OnBeginDrag(PointerEventData eventData) { ... } void IEndDragHandler.OnEndDrag(PointerEventData eventData) { ... } } äºæ˜¯, ä½ å°±å¯ä»¥å¾—åˆ°åœ¨æ–‡ç« æœ€å¼€å§‹å±•ç¤ºçš„, å®Œæ•´è½®è½¬å›¾çš„æ•ˆæœäº†:\nç‚¹å‡»é€‰æ‹© æœ€å, æˆ‘ä»¬å¸Œæœ›ä¸ºè½®è½¬å›¾æ·»åŠ é¼ æ ‡å•å‡»é€‰æ‹©çš„åŠŸèƒ½, å®ç°èµ·æ¥å¾ˆæ–¹ä¾¿, å› ä¸ºæˆ‘ä»¬å·²ç»ç¼–å†™å¥½é€‰æ‹©æŸå…ƒç´ çš„æ–¹æ³• Select äº†. é‚£ä¹ˆ, åªéœ€è¦å®ç° IPointerClickHandler, å¹¶åˆ¤æ–­æ˜¯å¦ç‚¹å‡»äº†æŸä¸ªå­å…ƒç´ , ç„¶åè°ƒç”¨ Select æ–¹æ³•å³å¯.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 public class Carousel : MonoBehavior, IDragHandler, IBeginDragHandler, IEndDragHandler, IPointerClickHandler { // å­—æ®µä¸å±æ€§ /// \u0026lt;summary\u0026gt; /// å…è®¸ç‚¹å‡»é€‰æ‹© /// \u0026lt;/summary\u0026gt; [field: SerializeField] public bool AllowClickSelection { get; set; } = false; void IPointerClickHandler.OnPointerClick(PointerEventData eventData) { if (!AllowClickSelection) return; var childCount = transform.childCount; for (int i = 0; i \u0026lt; childCount; i++) { var renderer = transform.GetChild(i); if (eventData.pointerPressRaycast.gameObject == renderer.gameObject) { Select(i); break; } } } // å…¶ä»–é€»è¾‘ } æ·»åŠ å®Œä¸Šè¿°ä»£ç ä¹‹å, æˆ‘ä»¬å°±å¾—åˆ°äº†å¯ä»¥å•å‡»é€‰æ‹©çš„è½®è½¬å›¾äº†.\nç‰©ä½“ç”Ÿæˆ å¯¹äº UI ä¸Šçš„è½®è½¬å›¾, æˆ‘ä»¬ä»¥å±•ç¤º Sprite ä¸ºä¾‹, ä¸ºäº†æ–¹ä¾¿, æˆ‘ä»¬ä¸éœ€è¦åƒåŸæœ¬é‚£æ ·å®ç°åœ¨çˆ¶ç‰©ä½“ä¸‹æ”¾ç½®å¥½ç‰©ä½“, è€Œæ˜¯æ ¹æ®ç”¨æˆ·æŒ‡å®šçš„ Sprite, è‡ªåŠ¨ç”Ÿæˆæ¸¸æˆå¯¹è±¡, è‡ªåŠ¨æŒ‚è½½æ‰€éœ€ç»„ä»¶, è®¾ç½®å±æ€§.\nåˆ›å»ºç‰©ä½“ æˆ‘ä»¬æ‰“ç®—è®©è„šæœ¬å‘å¤–æš´éœ²å‡ºä¸€ä¸ª Sprite[] ä¾›è®¾ç½®è¦å±•ç¤ºçš„å›¾ç‰‡, é‚£ä¹ˆåœ¨æ¥ä¸‹æ¥çš„é€»è¾‘ä¸­, å°±éœ€è¦å®ç°:\nåˆå§‹åŒ–æ—¶, åˆ›å»ºæ‰€éœ€çš„æ¸¸æˆå¯¹è±¡, æŒ‚è½½ Image ç»„ä»¶ä»¥ä¾›æ˜¾ç¤ºå›¾ç‰‡ å½“å¤–éƒ¨å¯¹å›¾ç‰‡æ•°ç»„è¿›è¡Œèµ‹å€¼æ—¶, é‡æ–°æ›´æ–°çŠ¶æ€, ä½¿æ˜¾ç¤ºæ˜¯æ­£ç¡®çš„ ç”±äº Canvas åœ¨ Screen Space - Overlay æ¨¡å¼ä¸‹ä¸å­˜åœ¨è¿‘å¤§è¿œå°, æ‰€ä»¥æˆ‘ä»¬éœ€è¦æä¾›æ ¹æ®å‰åé¡ºåº, è‡ªåŠ¨è¿›è¡Œç¼©æ”¾çš„åŠŸèƒ½ é‚£ä¹ˆ, æˆ‘ä»¬éœ€è¦åšçš„æ·»åŠ å’Œå˜æ›´çš„æœ‰è¿™äº›:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 public class UICarousel : MonoBehavior, IDragHandler, IBeginDragHandler, IEndDragHandler, IPointerClickHandler { // å…¶ä»–å­—æ®µå’Œå±æ€§ [SerializeField] Sprite[] _images; [SerializeField] private bool _scaleImages = true; [SerializeField] private float _minScale = 0.3f; List\u0026lt;UnityEngine.UI.Image\u0026gt; _imageComponents; // æ‡’åŠ è½½çš„, ç”¨äºè·å– RectTransform çš„å±æ€§ RectTransform _selfRectTransform; RectTransform SelfRectTransform =\u0026gt; _selfRectTransform ??= GetComponent\u0026lt;RectTransform\u0026gt;(); /// \u0026lt;summary\u0026gt; /// è¦å±•ç¤ºçš„å›¾ç‰‡ /// \u0026lt;/summary\u0026gt; public Sprite[] Images { get =\u0026gt; _images; set { _images = value; UpdateImagesStatus(); } } /// \u0026lt;summary\u0026gt; /// å›¾ç‰‡å°ºå¯¸ (ç”¨äºç”Ÿæˆ Image ç‰©ä½“è®¾ç½®å¤§å°) /// \u0026lt;/summary\u0026gt; [field: SerializeField] public Vector2 ImageSize { get; set; } = new Vector2(100, 100); /// \u0026lt;summary\u0026gt; ///æ˜¯å¦æ ¹æ®å›¾åƒçš„å‰åå…³ç³»è°ƒæ•´å›¾åƒå¤§å° \u0026lt;br/\u0026gt; /// å¦‚æœæ˜¯ Overlay, ä¸å­˜åœ¨è¿‘å¤§è¿œå°, åˆ™éœ€è¦å¼€å¯è¿™ä¸ª, ä½†æ˜¯å¦‚æœæ˜¯ WorldSpace çš„ Canvas å¹¶ä¸”è®¾ç½®äº†ç¼©æ”¾ä½¿å…¶åœ¨åœºæ™¯å†…, åˆ™ä¸éœ€è¦å¯ç”¨è¿™ä¸ª /// \u0026lt;/summary\u0026gt; public bool ScaleImages { get =\u0026gt; _scaleImages; set { _scaleImages = value; UpdateImagesStatus(); } } /// \u0026lt;summary\u0026gt; /// æœ€å°ç¼©æ”¾æ¯”ä¾‹ (æœ€åæ–¹çš„å›¾åƒçš„ç¼©æ”¾ç³»æ•°ä¼šæ˜¯è¿™ä¸ªå€¼) /// \u0026lt;/summary\u0026gt; public float MinScale { get =\u0026gt; _minScale; set { _minScale = value; UpdateImagesStatus(); } } void Awake() { // åˆå§‹åŒ– if (_images is null) _images = Array.Empty\u0026lt;Sprite\u0026gt;(); UpdateRenderers(); } /// \u0026lt;summary\u0026gt; /// æ ¹æ®å›¾åƒåˆ›å»º Image å¯¹è±¡, å¹¶è‡ªåŠ¨è®¾ç½®å±æ€§ /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;image\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt; private UnityEngine.UI.Image CreateRendererFor(Sprite image) { ... } /// \u0026lt;summary\u0026gt; /// æ›´æ–° Sprite çš„æ¸²æŸ“å™¨ /// \u0026lt;/summary\u0026gt; private void UpdateRenderers() { ... } /// \u0026lt;summary\u0026gt; /// æ—‹è½¬ä¸»é€»è¾‘ /// æ ¹æ® \u0026#34;æ—‹è½¬åç§»é‡\u0026#34; è®¾ç½®æ‰€æœ‰å›¾åƒçš„ä½ç½®, å¤§å°, ä»¥åŠå‰åå…³ç³» /// \u0026lt;/summary\u0026gt; private void UpdateObjectStatus() { ... } // å…¶ä»–é€»è¾‘ } æ ¹æ® Sprite åˆ›å»º Image çš„é€»è¾‘:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 public class UICarousel : MonoBehavior, IDragHandler, IBeginDragHandler, IEndDragHandler, IPointerClickHandler { // å­—æ®µå’Œå±æ€§ /// \u0026lt;summary\u0026gt; /// æ ¹æ®å›¾åƒåˆ›å»º Image å¯¹è±¡, å¹¶è‡ªåŠ¨è®¾ç½®å±æ€§ /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;image\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt; private UnityEngine.UI.Image CreateRendererFor(Sprite image) { GameObject gameObject = new(\u0026#34;Image\u0026#34;); gameObject.transform.SetParent(transform); var rectTransform = gameObject.AddComponent\u0026lt;RectTransform\u0026gt;(); var renderer = gameObject.AddComponent\u0026lt;UnityEngine.UI.Image\u0026gt;(); // è®¾ç½® rectTransform.SetSizeWithCurrentAnchors(RectTransform.Axis.Horizontal, ImageSize.x); rectTransform.SetSizeWithCurrentAnchors(RectTransform.Axis.Vertical, ImageSize.y); renderer.sprite = image; return renderer; } // å…¶ä»–é€»è¾‘ } æ›´æ–° Sprite æ¸²æŸ“å™¨çš„é€»è¾‘(åˆ é™¤æˆ–åˆ›å»º Image):\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 public class UICarousel : MonoBehavior, IDragHandler, IBeginDragHandler, IEndDragHandler, IPointerClickHandler { // å­—æ®µå’Œå±æ€§ /// \u0026lt;summary\u0026gt; /// æ›´æ–° Sprite çš„æ¸²æŸ“å™¨ /// \u0026lt;/summary\u0026gt; private void UpdateRenderers() { if (_imageComponents is null) _imageComponents = new List\u0026lt;UnityEngine.UI.Image\u0026gt;(GetComponentsInChildren\u0026lt;UnityEngine.UI.Image\u0026gt;()); if (_imageComponents.Count \u0026lt; _images.Length) { for (int i = 0; i \u0026lt; _imageComponents.Count; i++) _imageComponents[i].sprite = _images[i]; while (_imageComponents.Count \u0026lt; _images.Length) _imageComponents.Add(CreateRendererFor(_images[_imageComponents.Count])); } else { for (int i = 0; i \u0026lt; _images.Length; i++) _imageComponents[i].sprite = _images[i]; while (_imageComponents.Count \u0026gt; _images.Length) { int lastIndex = _imageComponents.Count - 1; // destroy the last Destroy(_imageComponents[lastIndex].gameObject); // remove the last _imageComponents.RemoveAt(lastIndex); } } } // å…¶ä»–é€»è¾‘ } UI ç‰¹æœ‰æ›´æ–° æ›´æ–°ç‰©ä½“çŠ¶æ€çš„ä¸»é€»è¾‘(ç§»åŠ¨å›¾ç‰‡, ç¼©æ”¾å›¾ç‰‡, è°ƒæ•´å›¾ç‰‡å±‚çº§å…³ç³»):\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 public class UICarousel : MonoBehavior, IDragHandler, IBeginDragHandler, IEndDragHandler, IPointerClickHandler { // å­—æ®µå’Œå±æ€§ /// \u0026lt;summary\u0026gt; /// æ—‹è½¬ä¸»é€»è¾‘ /// æ ¹æ® \u0026#34;æ—‹è½¬åç§»é‡\u0026#34; è®¾ç½®æ‰€æœ‰å›¾åƒçš„ä½ç½®, å¤§å°, ä»¥åŠå‰åå…³ç³» /// \u0026lt;/summary\u0026gt; private void UpdateObjectStatus() { UpdateRenderers(); var scaleGap = 1 - MinScale; var radianGap = Mathf.PI * 2 / _images.Length; var selfSizeDelta = SelfRectTransform.sizeDelta; var radius = selfSizeDelta.x / 2; var imageCount = _images.Length; var halfPi = Mathf.PI / 2; var minSin = 1f; var selectedImageIndex = -1; _radianOffset %= (Mathf.PI * 2); for (int i = 0; i \u0026lt; imageCount; i++) { var scaleShrink = scaleGap * i / (imageCount - 1); var renderer = _imageComponents[i]; float cos = Mathf.Cos(radianGap * i + _radianOffset - halfPi); float sin = Mathf.Sin(radianGap * i + _radianOffset - halfPi); var x = cos * radius; var z = sin * radius; if (sin \u0026lt;= minSin) { selectedImageIndex = i; minSin = sin; } renderer.transform.localPosition = new Vector3(x, 0, z); if (ScaleImages) { var scale = Mathf.Lerp(MinScale, 1, ((-sin) + 1) / 2); renderer.transform.localScale = new Vector3(scale, scale, scale); } else { renderer.transform.localScale = new Vector3(1, 1, 1); } } // æ ¹æ®å¤§å°, è°ƒæ•´é¡ºåº, å› ä¸ºå°çš„åœ¨åé¢, æ‰€ä»¥ç›´æ¥æ ¹æ®å¤§å°, è°ƒç”¨è°ƒæ•´é¡ºåºæ–¹æ³• foreach (var com in _imageComponents.OrderBy(com =\u0026gt; com.rectTransform.localScale.x)) com.transform.SetAsLastSibling(); // è®°å½•å½“å‰é€‰æ‹©ç´¢å¼•ä»¥åŠå›¾åƒ SelectedIndex = selectedImageIndex; } // å…¶ä»–é€»è¾‘ } å…¶ä¸­, ç¼©æ”¾å›¾ç‰‡ä¸­ç”¨åˆ°äº† Mathf.Lerp å‡½æ•°, åœ¨ \u0026ldquo;æ¯”ä¾‹\u0026rdquo; å‚æ•°ä¸­, ä¼ å…¥äº† (-sin + 1) / 2 è¿™æ ·çš„å€¼. è¿™æ˜¯å› ä¸º, æ­£å¼¦åœ¨æˆ‘ä»¬çš„ç®—æ³•ä¸­æœ¬æ¥å°±å…³ç³»åˆ°ç‰©ä½“çš„å‰åå…³ç³», æ‰€ä»¥ç›´æ¥å¯¹æ­£å¼¦å€¼åšå¤„ç†, å°±èƒ½å¾—åˆ°æœ€ç»ˆå€¼åŸŸä¸º 0 åˆ° 1, å¯ç”¨äº Lerp çš„å‚æ•°äº†.\nsin: ä»è¿œåˆ°è¿‘, å€¼ä» 1 åˆ° -1 -sin: ä»è¿œåˆ°è¿‘, å€¼ä» -1 åˆ° 1 -sin + 1: ä»è¿œåˆ°è¿‘, å€¼ä» 0 åˆ° 2 (-sin + 1) / 2: ä»è¿œåˆ°è¿‘, å€¼ä» 0 åˆ° 1 Mathf.Lerp(MinScale, 1, (-sin + 1) / 2): ä»è¿œåˆ°è¿‘, å€¼ä» MinScale åˆ° 1 è€Œä¹‹æ‰€ä»¥éœ€è¦è°ƒæ•´é¡ºåº, ä¹Ÿæ˜¯å› ä¸ºåœ¨ UI ä¸­, é®æŒ¡å…³ç³»ä¸ç”± Z è½´å†³å®š, è€Œæ˜¯ç”± UI å±‚çº§ä»¥åŠå®ƒä»¬åœ¨é¢æ¿ä¸­çš„å…ˆåå…³ç³»å†³å®šçš„.\nå¦å¤–, æˆ‘ä»¬ä¹Ÿåº”è¯¥åˆ å»å¯¹é¼ æ ‡çš„åæ ‡è½¬æ¢ä¹‹ç±»çš„ä¸œè¥¿, å› ä¸ºæ˜¯ UI å±‚ä¸Šçš„æ‹–æ‹½, æ‰€ä»¥åœ¨ Drag ä¸­åªéœ€è¦ä½¿ç”¨äº‹ä»¶æ•°æ®çš„é¼ æ ‡ç§»åŠ¨é‡å°±å¯ä»¥äº†:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 public class UICarousel : MonoBehavior, IDragHandler, IBeginDragHandler, IEndDragHandler, IPointerClickHandler { // å­—æ®µå’Œå±æ€§ // åˆ å» _cameraDistance å’Œ _lastMouseWorldPosition /// \u0026lt;summary\u0026gt; /// æ‹–æ‹½æ—¶, è®¡ç®—å®é™…è§’åº¦åç§»é‡, å¹¶æ›´æ–°å›¾åƒçŠ¶æ€ /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;eventData\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; void IDragHandler.OnDrag(PointerEventData eventData) { var selfSizeDelta = SelfRectTransform.sizeDelta; float normalizedOffset = eventData.delta.x / (selfSizeDelta.x / 2); float radianChange = Mathf.Asin(normalizedOffset % 1); _radianOffset += radianChange; _radianVelocity = radianChange / Time.deltaTime; UpdateObjectStatus(); } void IBeginDragHandler.OnBeginDrag(PointerEventData eventData) { // åˆ å»äº†åæ ‡è½¬æ¢é€»è¾‘ _dragging = true; } // å…¶ä»–é€»è¾‘ } æœ€å, æ£€æŸ¥ä»£ç , å®ƒä»¬åº”è¯¥æ˜¯å¤§æ¦‚è¿™æ ·çš„:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 [RequireComponent(typeof(RectTransform))] public class UICarousel : MonoBehavior, IDragHandler, IBeginDragHandler, IEndDragHandler, IPointerClickHandler { RectTransform _selfRectTransform; float _radianOffset; float _radianVelocity; bool _dragging; [SerializeField] Sprite[] _images; [SerializeField] private bool _scaleImages = true; [SerializeField] private float _minScale = 0.3f; List\u0026lt;UnityEngine.UI.Image\u0026gt; _imageComponents; RectTransform SelfRectTransform =\u0026gt; _selfRectTransform ??= GetComponent\u0026lt;RectTransform\u0026gt;(); public Sprite[] Images { ... } public Vector2 ImageSize { get; set; } = new Vector2(100, 100); public float RadianDrag { get; set; } = 10; public bool ScaleImages { ... } public float MinScale { ... } public bool AllowClickSelection { get; set; } = false; public bool EnableInertia { get; set; } = true; public bool EnableAutoCorrection { get; set; } = true; public float TransitionTime { get; set; } = 0.2f; public int SelectedIndex { get; private set; } void Awake() { ... } void Start() { ... } void Update() { ... } private UnityEngine.UI.Image CreateRendererFor(Sprite image) { ... } private void UpdateRenderers() { ... } private void UpdateObjectStatus() { ... } private void CorrectRotationTarget(float origin, ref float target) { ... } private float GetRadianOffsetFromIndex(int index) { ... } public void Select(int index) { .... } void IDragHandler.OnDrag(PointerEventData eventData) { .. } void IBeginDragHandler.OnBeginDrag(PointerEventData eventData) { ... } void IEndDragHandler.OnEndDrag(PointerEventData eventData) { ... } void IPointerClickHandler.OnPointerClick(PointerEventData eventData) { ... } } äºæ˜¯, æœ€ç»ˆæˆ‘ä»¬å°±èƒ½å¾—åˆ°ä¸€ä¸ªå¯ç‚¹é€‰, å¸¦æƒ¯æ€§, å¸¦è‡ªåŠ¨å›æ­£çš„ 2D è½®è½¬å›¾äº†.\nå…¶ä»– ä»æ•ˆæœä¸Šæ¥çœ‹, æˆ‘ä»¬ç¼–å†™çš„è½®è½¬å›¾å·²ç»å®Œç¾äº†, ä½†ä»”ç»†çœ‹çš„è¯, è¿˜æ˜¯æœ‰ä¸€äº›é€»è¾‘ç‘•ç–µçš„.\nå³ä½¿æˆ‘æ‹–æ‹½è½®è½¬å›¾å¹¶åœæ­¢, æ—‹è½¬é€Ÿåº¦çš„å€¼ä¹Ÿæœ‰å¯èƒ½ä¸ä¸º 0 è¿™å°±å¯¼è‡´å½“å¼€å¯æƒ¯æ€§çš„æ—¶å€™, æ— è®ºå¦‚ä½•, åœ¨æ¾å¼€é¼ æ ‡çš„æ—¶å€™, å®ƒéƒ½ä¼š \u0026ldquo;åŠ¨\u0026rdquo; ä¸€ä¸‹. å½“é¼ æ ‡æ‹–æ‹½åˆ°å±å¹•è¾¹ç¼˜çš„æ—¶å€™, é¼ æ ‡åœ¨ç§»åŠ¨, ä½†æ˜¯å±å¹•ä¸Šé¼ æ ‡çš„ä½ç½®ä¸æ”¹å˜ è¿™ä¼šå¯¼è‡´æ—‹è½¬é€Ÿåº¦è¢«è®¾ä¸º 0, è¿›è€Œå¯¼è‡´, è™½ç„¶æ¾å¼€äº†é¼ æ ‡, ä½†æ˜¯å› ä¸ºæ²¡æœ‰è§¦å‘æƒ¯æ€§, å› è€Œæ²¡æœ‰æ‰§è¡Œè‡ªåŠ¨å›æ­£çš„é€»è¾‘. å› ä¸ºå¯ç”¨æƒ¯æ€§æ—¶, åªæœ‰é€Ÿåº¦ä»ä¸€ä¸ªé 0 å€¼å˜æˆ 0 å€¼, æ‰ä¼šæ‰§è¡Œè‡ªåŠ¨å›æ­£. è¿™ä¸Šé¢çš„é—®é¢˜, æˆ‘æ‡’å¾—æ”¹äº†, æ”¹èµ·æ¥çš„æ€è·¯çš„è¯, ä¹Ÿå¾ˆç®€å•, å¦‚ä¸‹:\nå°†é€Ÿåº¦è®¡ç®—çš„é€»è¾‘æ‰” Update é‡Œé¢, å¹¶è®¡ç®—ç›¸å¯¹ä¸Šä¸€å¸§çš„æ—‹è½¬é‡, å³å¯è§£å†³é—®é¢˜ 1 åœ¨ç»“æŸæ‹–æ‹½æ—¶, åŒæ—¶åˆ¤æ–­é€Ÿåº¦æ˜¯å¦ä¸º 0, å¦‚æœä¸º 0 å°±æ„å‘³ç€æƒ¯æ€§é€»è¾‘ä¸æ‰§è¡Œ, é‚£ä¹ˆè¿™æ—¶, ç›´æ¥æ‰§è¡Œè‡ªåŠ¨å›æ­£é€»è¾‘å³å¯. æœ€å, å…³äºæœ¬æ–‡ç« ä¸­è„šæœ¬çš„æºä»£ç , ç›´æ¥åœ¨ github.com/SlimeNull/UnityTests ä¸­ä¸‹è½½å³å¯. æ–‡ç« ä¸­å› ä¸ºæ¶‰åŠåˆ°é€æ­¥éª¤ä»¥åŠæ€è·¯çš„è®²è§£, æ‰€ä»¥ä»£ç å¹¶ä¸å®Œæ•´. ä¸è¿‡ä½ è·Ÿç€åšçš„è¯, ä¹Ÿæ˜¯èƒ½å†™å‡ºæ¥å®Œæ•´çš„ä»£ç çš„.\nä½¿ç”¨æ–¹å¼çš„è¯, 3D è½®è½¬å›¾æ˜¯ç›´æ¥æŒ‚çˆ¶å¯¹è±¡ä¸Š, ç„¶åæ‰‹åŠ¨åˆ›å»ºå­å¯¹è±¡. åœ¨è¿è¡Œæ—¶ä¼šè‡ªåŠ¨è®¾ç½®å­å¯¹è±¡ä½ç½®. 2D è½®è½¬å›¾çš„è¯, ä¸éœ€è¦æ‰‹åŠ¨åˆ›å»ºå­å¯¹è±¡, ç›´æ¥åœ¨ \u0026ldquo;æ£€è§†å™¨\u0026rdquo; ä¸­è®¾ç½®è¦å±•ç¤ºçš„å›¾ç‰‡, åœ¨å¯åŠ¨æ—¶ä¾¿ä¼šè‡ªåŠ¨åˆ›å»ºå¯¹è±¡.\næ–‡ç« åŸå§‹é“¾æ¥: https://slimenull.com/p/20240226141713\n","date":"2024-02-26T14:17:13+08:00","permalink":"https://slimenull.com/p/20240226141713/","title":"Unity è½®è½¬å›¾, æƒ¯æ€§, è‡ªåŠ¨å›æ­£, ç‚¹å‡»é€‰æ‹©"},{"content":"å¦‚ä»Š HTTPS å·²å‡ ä¹å®Œå…¨å–ä»£ HTTP, å¤§éƒ¨åˆ†çš„ç½‘ç»œé€šä¿¡ä¹Ÿéƒ½æœ‰ä½¿ç”¨åŠ å¯†å±‚, é‚£ä¹ˆå¯¹äºéå¯¹ç§°åŠ å¯†ä»¥åŠæ•°å­—è¯ä¹¦çš„å­¦ä¹ ä¹Ÿå°±ä¸å¯é¿å…äº†.\næ‘˜è¦ æ‘˜è¦æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„æ¦‚å¿µ, å¯ä»¥ç±»æ¯”äººç±»çš„æŒ‡çº¹.\næ‘˜è¦æ˜¯ç”±æ•°æ®è®¡ç®—è€Œæ¥çš„, å½“æ•°æ®å˜æ›´çš„æ—¶å€™, å®ƒçš„æ‘˜è¦ä¹Ÿéšä¹‹å˜æ›´. å¯¹æ¯”ç°å®å°±æ˜¯, åªè¦æ˜¯ä¸åŒçš„äºº, å°±åŸºæœ¬æ‹¥æœ‰ä¸åŒçš„æŒ‡çº¹. è€Œä¸”æ‘˜è¦å½“ç„¶ä¹Ÿæ˜¯å¾ˆå°çš„, ä¸€èˆ¬åªæœ‰å‡ åä¸ªå­—èŠ‚çš„å¤§å°.\nå¦‚æœè¦éªŒè¯ä¸€ä¸ªäººæ˜¯å¦ç¡®å®æ˜¯æŸä¸ªäºº, å¯¹æ¯”è¿™ä¸ªäººçš„æ‰€æœ‰èº«ä»½ä¿¡æ¯æ˜¾ç„¶æ˜¯è¿‡äºç¹çäº†. ç„¶è€Œå¯¹æ¯”æŒ‡çº¹å°±ç®€å•å¿«é€Ÿå¤šäº†. åœ¨è®¡ç®—æœºä¸­ä¹Ÿæ˜¯å¦‚æ­¤.\nå½“ä½ ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™, ä¸€èˆ¬è¿˜ä¼šä¸‹è½½åˆ°ä¸€ä¸ª \u0026ldquo;æ‘˜è¦æ–‡ä»¶\u0026rdquo;, åœ¨ä¸‹è½½å®Œæ¯•ä¹‹å, ä½ åªéœ€è¦è®¡ç®—ä¸€ä¸‹ä¸‹è½½åˆ°çš„æ–‡ä»¶çš„æ‘˜è¦, å†å’Œæ–‡ä»¶æä¾›æ–¹æä¾›çš„æ‘˜è¦æ–‡ä»¶å¯¹æ¯”. å¦‚æœæ‘˜è¦æ˜¯ç›¸åŒçš„, é‚£ä¹ˆè¯´æ˜æˆ‘ä»¬ä¸‹è½½åˆ°çš„æ–‡ä»¶æ˜¯æ— è¯¯çš„. å¦‚æœå¯¹æ¯”æœ‰è¯¯, é‚£ä¹ˆåˆ™è¯´æ˜æˆ‘ä»¬ä¸‹è½½åˆ°çš„æ–‡ä»¶æŸäº›å†…å®¹ä¸æ­£ç¡®, æˆ–è€…ä¸‹è½½çš„æ‘˜è¦ä¸æ­£ç¡®. è¿™æ—¶æˆ‘ä»¬å°±éœ€è¦è€ƒè™‘æ˜¯å¦éœ€è¦é‡æ–°ä¸‹è½½äº†.\næ‘˜è¦å¯ä»¥è§†ä½œä¸€ç§æ˜ å°„, å°†å¤§å°ä¸ä¸€å®šçš„æ•°æ®, æ˜ å°„åˆ°å›ºå®šå¤§å°çš„æ•°æ®ä¸­. ä»¥ SHA256 ä¸ºä¾‹, æ‘˜è¦çš„å¤§å°ä¸º 256 ä½, ä¹Ÿå°±æ˜¯ 32 å­—èŠ‚. ç”±äºæºæ•°æ®çš„å¯èƒ½æ€§æ˜¯æ— é™çš„, è€Œæ‘˜è¦çš„å¯èƒ½æ€§æœ‰é™, æ‰€ä»¥æ‘˜è¦ç®—æ³•ä¸å¯é¿å…çš„ä¼šæœ‰å†²çªé—®é¢˜, å³ä¸¤ä¸ªä¸åŒçš„æ•°æ®è®¡ç®—å‡ºæ¥çš„æ‘˜è¦ç›¸åŒ.\nè¿™å°±åƒç°å®ä¸­çš„, ä¸‰ç™¾å…­åå…­ä¸ªäººä¸­, å¿…ç„¶æœ‰è‡³å°‘ä¸¤ä¸ªäººçš„ç”Ÿæ—¥æ˜¯ç›¸åŒçš„. æ‰€ä»¥ä¼˜ç§€çš„æ‘˜è¦ç®—æ³•, åº”è¯¥ä½¿æ•°æ®è®¡ç®—å‡ºæ¥çš„æ‘˜è¦, å¹³å‡çš„åˆ†å¸ƒ, ä»¥å‡å°‘å†²çª.\nå¸¸è§çš„æ‘˜è¦ç®—æ³•\nåŠ å¯† åŠ å¯†åœ¨è®¡ç®—ä¸­æ˜¯ä¿æŠ¤ä¿¡æ¯å®‰å…¨çš„å…³é”®. æ— è®ºæ˜¯å®‰å…¨çš„é€šä¿¡, æˆ–è€…æ ¡éªŒä½ è·å¾—çš„æ•°æ®æ˜¯å¦å®‰å…¨, éƒ½ç¦»ä¸å¼€åŠ å¯†ç®—æ³•.\nå¯¹ç§°åŠ å¯† å¯¹ç§°åŠ å¯†æ˜¯æœ€ç¬¦åˆç›´è§‰çš„åŠ å¯†æ–¹å¼. å®ƒå°±åƒç°å®ä¸­çš„é”ä¸€æ ·, åªèƒ½ä½¿ç”¨å”¯ä¸€ä¸€æŠŠé’¥åŒ™æ‰“å¼€. å¯¹ç§°åŠ å¯†å°±æ˜¯è¿™æ ·çš„.\nå½“åŠ å¯†ä¸€ä»½æ•°æ®çš„æ—¶å€™, å‡†å¤‡å¥½ä¸€ä»½å¯†é’¥, åœ¨è§£å¯†çš„æ—¶å€™, ä¹Ÿåªèƒ½ä½¿ç”¨ç›¸åŒçš„å¯†é’¥è¿›è¡Œè§£å¯†.\næœ€æœ€ç®€å•çš„åŠ å¯†å¯¹ç§°åŠ å¯†æ–¹å¼, å°±æ˜¯ \u0026ldquo;å¼‚æˆ–\u0026rdquo; åŠ å¯†äº†. å¾—ç›Šäºå¼‚æˆ–ç®—æ³•çš„å¯é€†æ€§, å¯¹ä¸€ä¸ªæ•°æ®æ‰§è¡Œä¸¤æ¬¡ç›¸åŒçš„å¼‚æˆ–æ“ä½œ, ä¼šå¾—åˆ°åŸæ–‡.\nä¸‹é¢æ˜¯ä½¿ç”¨ C# å®ç°çš„ç®€å•å¼‚æˆ–åŠ å¯†æ–¹æ³•:\n1 2 3 4 5 6 7 8 9 10 11 public static byte[] XorEncrypt(byte[] data, byte[] key) { byte[] encryptedData = new byte[data.Length]; for (int i = 0; i \u0026lt; data.Length; i++) { encryptedData[i] = (byte)(data[i] ^ key[i % key.Length]); } return encryptedData; } å½“ç„¶, å®é™…å·²æŠ•å…¥ä½¿ç”¨çš„åŠ å¯†ç®—æ³•è‚¯å®šæ˜¯è¦æ¯”å¼‚æˆ–åŠ å¯†å¤æ‚å¾ˆå¤šçš„.\néå¯¹ç§°åŠ å¯† éå¯¹ç§°åŠ å¯†çš„è¯, åŠ å¯†ä¸è§£å¯†çš„è¿‡ç¨‹, æ˜¯æœ‰ä¸¤ä»½å¯†é’¥çš„. æˆ‘ä»¬æš‚ä¸”ç§°ä¹‹ä¸ºå¯†é’¥ A å’Œå¯†é’¥ B.\nå¦‚æœä½ ä½¿ç”¨å¯†é’¥ A åŠ å¯†, é‚£ä¹ˆåŠ å¯†åçš„å¯†æ–‡åªèƒ½é€šè¿‡å¯†é’¥ B æ¥è§£å¯†. åä¹‹, ç”±å¯†é’¥ B åŠ å¯†çš„å¯†æ–‡, åªèƒ½ä½¿ç”¨å¯†é’¥ A æ¥è§£å¯†.\næ³¨æ„, ç”± A åŠ å¯†åçš„å¯†æ–‡, åªèƒ½ç”± B è§£å¯†. ä½¿ç”¨ A æ˜¯æ— æ³•è§£å¯†ç”± A åŠ å¯†çš„å¯†æ–‡çš„. åä¹‹äº¦ç„¶.\néå¯¹ç§°åŠ å¯†çš„å¯†é’¥ä¸åƒå¯¹ç§°åŠ å¯†ä¸€æ ·å¯ä»¥éšæ„ç”±ç”¨æˆ·æŒ‡å®š, ç”±äºéå¯¹ç§°åŠ å¯†ç®—æ³•åŸºäºå¤æ‚çš„æ•°å­¦éš¾é¢˜, è¿™å¯¹å¯†é’¥ä¹Ÿåªèƒ½é€šè¿‡ç‰¹å®šç®—æ³•æ¥ç”Ÿæˆ.\nåœ¨å®é™…çš„ä½¿ç”¨ä¸­, è¿™å¯¹å¯†é’¥é€šå¸¸ä¸€ä¸ªç§æœ‰, ä¸€ä¸ªå¯¹å¤–å…¬å¼€, æ‰€ä»¥, è¿™å¯¹å¯†é’¥è¢«ç§°ä½œç§é’¥å’Œå…¬é’¥.\nä¸¾ä¸€ä¸ªå®é™…ä½¿ç”¨çš„ç¤ºä¾‹, å‡å¦‚ä½ ä¸ A è¿›è¡Œé€šä¿¡, A æœ‰ä¸€å¯¹éå¯¹ç§°å¯†é’¥å¯¹, å…¶ä¸­å…¬é’¥å‘å¤–å…¬å¼€, å¦‚æœ A å‘å¸ƒä¸€äº›ä¿¡æ¯, é€šè¿‡ A çš„ç§é’¥è¿›è¡ŒåŠ å¯†, é‚£ä¹ˆå…¶ä»–äººå°±å¯ä»¥é€šè¿‡å…¬å¼€çš„å¯†é’¥è¿›è¡Œè§£å¯†. å¦‚æœè§£å¯†æˆåŠŸ, åˆ™è¯´æ˜è¿™æ®µä¿¡æ¯ç¡®å®æ˜¯ç”± A å‘å¸ƒçš„, è€Œä¸æ˜¯å…¶ä»–äºº. å› ä¸ºå…¶ä»–äººä¸æŒæœ‰ç§é’¥, ä»–ä»¬æ²¡æœ‰åŠæ³•ä¼ªé€ ä¿¡æ¯.\næ•°å­—è¯ä¹¦ æ•°å­—è¯ä¹¦ä¹Ÿå¯ä»¥ç†è§£ä¸ºç°å®ä¸­çš„è¯ä¹¦, å¯ä»¥ç”¨æ¥è¯æ˜ä¸€äº›ä¸œè¥¿. ä¸€èˆ¬çš„, æ•°å­—è¯ä¹¦ä¸­åŒ…å«ä»¥ä¸‹é¡¹:\næŒæœ‰è€…ä¿¡æ¯ é¢å¸ƒè€…ä¿¡æ¯ é¢å¸ƒæ—¶é—´ æœ‰æ•ˆæœŸé™ æ•°å­—ç­¾å å…¬é’¥ è¯ä¹¦ä¸­éå¯¹ç§°å¯†é’¥å¯¹çš„ç§é’¥ç”±è¯ä¹¦æŒæœ‰è€…æ‹¥æœ‰, ä¸ä¼šå…¬å¼€.\nå…¶ä¸­, æ•°å­—ç­¾åæ˜¯ç”¨æ¥æ ¡éªŒå½“å‰çš„æ•°å­—è¯ä¹¦æ˜¯å¦æœ‰æ•ˆçš„.\næ•°å­—è¯ä¹¦æ˜¯æœ‰ç»§æ‰¿å…³ç³»çš„. ç”µè„‘ä¸­ä¼šå†…ç½®ä¸€äº›å…¨çƒå…¬ç”¨çš„ \u0026ldquo;æ ¹è¯ä¹¦\u0026rdquo;, å…¶ä»–è¯ä¹¦åˆ™æ˜¯è¿™äº›æ ¹è¯ä¹¦çš„å­è¯ä¹¦, æˆ–è€…è¯´, è¿™äº›è¯ä¹¦çš„é¢å¸ƒè€…å°±æ˜¯è¿™äº› \u0026ldquo;æ ¹è¯ä¹¦æœºæ„\u0026rdquo;.\nå½“æ ¡éªŒå…¶ä»–è¯ä¹¦çš„æ—¶å€™, ä¼šé€šè¿‡è¿™ä¸ªè¯ä¹¦çš„çˆ¶è¯ä¹¦æä¾›çš„å…¬é’¥, å¯¹å½“å‰è¯ä¹¦æ•°å­—ç­¾åè¿›è¡Œæ ¡éªŒ. å½“ç„¶, åœ¨ä½¿ç”¨çˆ¶è¯ä¹¦ä¹‹å‰, ä¹Ÿéœ€è¦å¯¹çˆ¶è¯ä¹¦è¿›è¡Œæ ¡éªŒ. å½“ç„¶, å¦‚æœå®ƒçš„çˆ¶è¯ä¹¦æ˜¯å†…ç½®åœ¨è®¡ç®—æœºå†…çš„, åˆ™è§†ä¸ºæœ‰æ•ˆ. å› ä¸ºè®¡ç®—æœºå†…ç½®çš„æ ¹è¯ä¹¦æ˜¯å§‹ç»ˆè¢«è§†ä¸ºæœ‰æ•ˆçš„.\nç”±æ­¤è¡ç”Ÿå‡ºæ¥ä¸€ä¸ªæœ‰æ„æ€çš„ç°è±¡, å½“ä½ ä½¿ç”¨å¾ˆæ—§çš„æ“ä½œç³»ç»Ÿå’Œæµè§ˆå™¨æ—¶, è®¿é—®æŸäº›ç½‘ç«™, ä¼šæç¤ºè¯¥ç½‘ç«™å±é™©, ä½†ä½¿ç”¨æ–°çš„æµè§ˆå™¨å°±ä¸ä¼š. é€ æˆè¿™ä¸ªç°è±¡çš„åŸå› å°±æ˜¯, è¯¥ç½‘ç«™çš„æ•°å­—è¯ä¹¦æ— æ³•è¢«æ ¡éªŒ, æ—§çš„æ“ä½œç³»ç»Ÿä¸­ç¼ºå¤±äº†ä¸€äº›å¿…è¦çš„æ ¹è¯ä¹¦, äºæ˜¯ç¼ºå¤±çš„è¯ä¹¦ä»¥åŠå…¶ä¸‹æ‰€å±æ‰€æœ‰å­è¯ä¹¦éƒ½æ— æ³•è¢«æ ¡éªŒ.\nå¸¸è§æ–‡ä»¶æ ¼å¼ æ ¹æ®ä¸åŒçš„æœåŠ¡å™¨ä»¥åŠæœåŠ¡å™¨çš„ç‰ˆæœ¬, æˆ‘ä»¬éœ€è¦ç”¨åˆ°ä¸åŒçš„è¯ä¹¦æ ¼å¼, å°±å¸‚é¢ä¸Šä¸»æµçš„æœåŠ¡å™¨æ¥è¯´, å¤§æ¦‚æœ‰ä»¥ä¸‹æ ¼å¼ï¼š\n.DER .CER, æ–‡ä»¶æ˜¯äºŒè¿›åˆ¶æ ¼å¼, åªä¿å­˜è¯ä¹¦, ä¸ä¿å­˜ç§é’¥ .PEM, ä¸€èˆ¬æ˜¯æ–‡æœ¬æ ¼å¼, å¯ä¿å­˜è¯ä¹¦, å¯ä¿å­˜ç§é’¥ .CRT, å¯ä»¥æ˜¯äºŒè¿›åˆ¶æ ¼å¼, å¯ä»¥æ˜¯æ–‡æœ¬æ ¼å¼, ä¸ .DER æ ¼å¼ç›¸åŒ, ä¸ä¿å­˜ç§é’¥ .PFX .P12, äºŒè¿›åˆ¶æ ¼å¼, åŒæ—¶åŒ…å«è¯ä¹¦å’Œç§é’¥, ä¸€èˆ¬æœ‰å¯†ç ä¿æŠ¤ .JKS, äºŒè¿›åˆ¶æ ¼å¼, åŒæ—¶åŒ…å«è¯ä¹¦å’Œç§é’¥, ä¸€èˆ¬æœ‰å¯†ç ä¿æŠ¤ å…¶ä¸­, PEM æ˜¯ \u0026ldquo;Privacy Enhanced Mail\u0026rdquo; çš„æ„æ€, å®ƒæœ¬èº«å¹¶ä¸æ˜¯ä¸“é—¨ç”¨æ¥å­˜å‚¨æ•°å­—è¯ä¹¦çš„, åªæ˜¯å®ƒä½¿ç”¨ Base64, èƒ½ç”¨æ¥å­˜å‚¨æ•°å­—è¯ä¹¦, æ‰€ä»¥ç”¨çš„è¾ƒå¤š. å®ƒçš„æ–‡ä»¶å†…å®¹å¤§æ¦‚æ˜¯è¿™æ ·:\n1 2 3 -----BEGIN XXX----- BASE64 çš„å†…å®¹ -----END XXX----- å®ƒçš„å†…å®¹ä¹Ÿå¯ä»¥æœ‰å¤šç«¯, æ‰€ä»¥å¯¹äºè¯ä¹¦çš„å­˜å‚¨, å¦‚æœåªåŒ…å«è¯ä¹¦æœ¬èº«, é‚£ä¹ˆå®ƒåªæœ‰ä¸€ä¸ª \u0026ldquo;CERTIFICATE\u0026rdquo; æ®µ, å¦‚æœå®ƒè¿˜åŒ…å«ç§é’¥, é‚£ä¹ˆå®ƒè¿˜æœ‰ä¸€ä¸ª \u0026ldquo;PRIVATE KEY\u0026rdquo; æ®µ.\næ•°å­—ç­¾å åœ¨ä¸Šé¢çš„éå¯¹ç§°åŠ å¯†ä¸­, æˆ‘ä»¬ä¸¾äº†ç®€å•çš„ä¾‹å­, é€šè¿‡éå¯¹ç§°åŠ å¯†ç®—æ³•å¯¹ä¿¡æ¯çš„å®‰å…¨æ€§è¿›è¡Œæ ¡éªŒ. ä½†å®é™…ä¸Š, éå¯¹ç§°åŠ å¯†ç®—æ³•çš„è®¡ç®—è¿‡ç¨‹æ˜¯æå…¶å¤æ‚ä¸”æ¶ˆè€—æ€§èƒ½çš„. æˆ‘ä»¬ä¸å¯èƒ½å°†ç‰¹åˆ«å¤§çš„ä¸€ä¸²ä¿¡æ¯ä½¿ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•è¿›è¡ŒåŠ å¯†ä»¥åŠè§£å¯†, åœ¨ä¿¡æ¯æ ¡éªŒä¸­, æ›´å¤šä½¿ç”¨çš„æ˜¯å¯¹ \u0026ldquo;æ‘˜è¦\u0026rdquo; è¿›è¡Œæ ¡éªŒ.\nä¸€æ®µåŒ…å«æ•°å­—ç­¾åçš„ä¿¡æ¯å¤§æ¦‚è‡³å°‘éœ€è¦åŒ…å«ä»¥ä¸‹ä¿¡æ¯:\nä¿¡æ¯ æè¿° ä¿¡æ¯ä¸»ä½“ ä¿¡æ¯çš„å†…å®¹ æ•°å­—è¯ä¹¦ ä¸€ä¸ªå¯è¢«æ ¡éªŒçš„æ•°å­—è¯ä¹¦, å…¶ä¸­åŒ…å«ç”¨äºæ ¡éªŒçš„å…¬é’¥ åŠ å¯†åæ‘˜è¦ ä¿¡æ¯ä¸»é¢˜é€šè¿‡æ‘˜è¦ç®—æ³•è®¡ç®—æ‘˜è¦, å†ä½¿ç”¨ç§é’¥è¿›è¡ŒåŠ å¯†çš„ç»“æœ æ•°å­—è¯ä¹¦æ˜¯æ— æ³•ä¼ªé€ çš„, åœ¨ä¸Šæ–‡ä¸­æˆ‘ä»¬å·²ç»æåˆ°, è€Œæ‘˜è¦ç”±äºæ˜¯é€šè¿‡åªæœ‰å‘å¸ƒè€…æ‰æŒæœ‰çš„ç§é’¥è¿›è¡ŒåŠ å¯†çš„, æ‰€ä»¥åŒæ ·ä¹Ÿæ— æ³•ä¼ªé€ . å½“ç”¨æˆ·æ¥æ”¶åˆ°è¿™æ®µä¿¡æ¯ä¹‹å, å…ˆæ ¡éªŒæ•°å­—è¯ä¹¦æ˜¯å¦æœ‰æ•ˆ, ç„¶åå†é€šè¿‡æ•°å­—è¯ä¹¦ä¸­çš„å…¬é’¥å¯¹åŠ å¯†åçš„æ‘˜è¦è¿›è¡Œè§£å¯†, å¾—åˆ°æ‘˜è¦æ˜æ–‡, æœ€ååˆ¤æ–­ä¿¡æ¯ä¸»é¢˜çš„æ‘˜è¦æ˜¯å¦ä¸è¿™æ®µæ‘˜è¦ä¿¡æ¯åŒ¹é…å°±å¯ä»¥äº†.\nä¸Šé¢çš„ä¿¡æ¯ä¸­, ä¿¡æ¯ä¸»ä½“, æ•°å­—è¯ä¹¦, åŠ å¯†åæ‘˜è¦, è¿™ä¸‰è€…ä»»ä½•ä¸€è€…äº§ç”Ÿæ”¹å˜, éƒ½ä¼šå¯¼è‡´æ ¡éªŒå¤±è´¥. é€šè¿‡è¿™ç§æ–¹å¼, å°±èƒ½å¤ŸåŒæ—¶å®ç°éªŒè¯ä¿¡æ¯æ˜¯å¦è¢«ä¼ªé€ æˆ–å˜æ›´äº†.\nè€Œè¿™ç§é€šè¿‡æ•°å­—è¯ä¹¦å’ŒåŠ å¯†åçš„æ‘˜è¦ä¿¡æ¯è¿›è¡Œæ ¡éªŒç çš„æ–¹å¼, å°±å«åšæ•°å­—ç­¾å.\nåŠ å¯†é€šä¿¡ æˆ‘ä»¬æ—¥å¸¸ä¸­è®¿é—®çš„ç½‘ç«™, ä¸€èˆ¬éƒ½æ˜¯åŠ å¯†çš„. ä»–ä»¬çš„åœ°å€ä»¥ \u0026ldquo;HTTPS\u0026rdquo; å¼€å¤´, å…¶åº•å±‚å°±æ˜¯ç”¨åˆ°äº† \u0026ldquo;SSL/TLS\u0026rdquo; åè®®, è€Œè¿™ä¸ªåè®®å°±æ˜¯ç”¨åˆ°äº†éå¯¹ç§°åŠ å¯†ç®—æ³•å®ç°åŠ å¯†é€šä¿¡çš„.\nåœ¨å‰é¢æˆ‘ä»¬æåˆ°, éå¯¹ç§°åŠ å¯†ç®—æ³•çš„è®¡ç®—æ˜¯å¤æ‚ä¸”æ¶ˆè€—æ€§èƒ½çš„, è€Œ HTTPS è¿›è¡Œå¤§é‡æ•°æ®ä¼ è¾“, å½“ç„¶ä¹Ÿä¸å¯èƒ½ä½¿ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•å¯¹è¿™äº›æ•°æ®è¿›è¡ŒåŠ å¯†. äº‹å®ä¸Š, åŒæ–¹å»ºç«‹é€šä¿¡å, æ˜¯é€šè¿‡å¯¹ç§°åŠ å¯†ç®—æ³•è¿›è¡ŒåŠ å¯†ä¿¡æ¯çš„, åªéœ€è¦ä¿è¯è¿™ä¸ªå¯¹ç§°åŠ å¯†ç®—æ³•æ‰€ä½¿ç”¨çš„å¯†é’¥ä¸ä¼šè¢«æ³„éœ²å‡ºå»å°±å¯ä»¥.\nä¹Ÿå°±æ˜¯è¯´, éå¯¹ç§°åŠ å¯†åœ¨åŠ å¯†é€šä¿¡ä¸­çš„ä½œç”¨, ä»…ä»…æ˜¯å¯¹ä»¥åè¦ä½¿ç”¨çš„å¯¹ç§°å¯†é’¥è¿›è¡ŒåŠ å¯†.\nåœ¨å»ºç«‹é€šä¿¡æ—¶, æœåŠ¡å™¨ä¼šå°†è‡ªå·±çš„æ•°å­—è¯ä¹¦å‘é€ç»™å®¢æˆ·ç«¯, æ­¤æ—¶å®¢æˆ·ç«¯å¯ä»¥å¯¹è¯ä¹¦è¿›è¡Œæ ¡éªŒ. è€Œè¯ä¹¦ä¸­åŒ…å«éå¯¹ç§°å¯†é’¥å¯¹ä¸­çš„ \u0026ldquo;å…¬é’¥\u0026rdquo;, å†ç„¶å, å®¢æˆ·ç«¯ä¼šç”Ÿæˆä¸€ä¸ªéšæœºçš„å¯†é’¥, ä½¿ç”¨å…¬é’¥è¿›è¡ŒåŠ å¯†å, å†å‘é€ç»™æœåŠ¡å™¨.\nç”±äºå…¬é’¥åŠ å¯†åçš„æ•°æ®ä»…èƒ½ä½¿ç”¨ç§é’¥è§£å¯†, æ‰€ä»¥è¿™ä¸²å¯†æ–‡, ä¹Ÿåªèƒ½ç”±æœåŠ¡å™¨è§£å¯†, äºæ˜¯è¿™ä¸ªéšæœºç”Ÿæˆçš„å¯¹ç§°å¯†é’¥, æˆåŠŸå®‰å…¨çš„é€è¾¾åˆ°æœåŠ¡å™¨äº†.\nè‡³æ­¤, å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å°±æˆåŠŸåå•†å¥½äº†ä¸€ä¸ªå¯¹ç§°å¯†é’¥. åœ¨æ¥ä¸‹æ¥çš„é€šä¿¡ä¸­, æ‰€æœ‰çš„ä¿¡æ¯å‡ä½¿ç”¨è¿™ä¸ªéšç§˜çš„å¯†é’¥è¿›è¡ŒåŠ å¯†.\n","date":"2024-02-02T22:15:35+08:00","permalink":"https://slimenull.com/p/20240202221535/","title":"æ‘˜è¦, åŠ å¯†, æ•°å­—ç­¾å, æ•°å­—è¯ä¹¦ä»¥åŠåŠ å¯†é€šä¿¡ç®€è¦ä»‹ç»"},{"content":"ä¸ºäº†è·å–å½“å‰è®¾å¤‡ç”¨æˆ·å·²å®‰è£…çš„æ‰€æœ‰åº”ç”¨ç¨‹åº, ä¸€èˆ¬æ¥è®²æœ‰ä¸¤ç§æ–¹æ¡ˆ. ä¸€ç§æ˜¯é€šè¿‡æŸ¥è¯¢ \u0026ldquo;shell:AppsFolder\u0026rdquo; ç›®å½•ä¸‹æ‰€æœ‰é¡¹, ä¸€ç§æ˜¯ä»å¼€å§‹èœå•ä¸­è·å–æ‰€æœ‰å¿«æ·æ–¹å¼, ç„¶ååŠ ä¸ŠæŸ¥è¯¢æ‰€æœ‰å·²å®‰è£…çš„ UWP åº”ç”¨, æœ€åå¾—åˆ°æ€»åˆ—è¡¨.\nå¦‚éœ€ä»£ç å‚è€ƒ, è¯·çœ‹ github.com/SlimeNull/WindowsAppsQuery ä»¥åŠ github.com/OrgEleCho/CurvaLauncher ä¸­çš„ \u0026lsquo;Run Applictions\u0026rsquo; éƒ¨åˆ†.\næŸ¥è¯¢ Win32 åº”ç”¨ æŸ¥è¯¢å·²å®‰è£… Win32 åº”ç”¨ç¨‹åº, ç›®å‰æœ‰ä¸¤ç§å¸¸ç”¨æ–¹å¼.\næŸ¥è¯¢æ³¨å†Œè¡¨ä¸­ \u0026ldquo;å¸è½½\u0026rdquo; çš„å­é”® æœå¯»å¼€å§‹èœå•ç›®å½• é€šè¿‡æ³¨å†Œè¡¨æŸ¥è¯¢ æ³¨å†Œè¡¨ä¸­, HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall ä¸­åˆ—ä¸¾äº†å½“å‰è®¡ç®—æœºçš„æ‰€æœ‰å¯å¸è½½åº”ç”¨ç¨‹åº å¦‚æœæ˜¯ä»…å®‰è£…åœ¨å½“å‰ç”¨æˆ·ä¸­çš„åº”ç”¨ç¨‹åº, åˆ™å­˜å‚¨åœ¨ HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall ä¸‹.\næ ¹æ®å¾®è½¯å®˜æ–¹æ–‡æ¡£ Win32/MSI/å¸è½½æ³¨å†Œè¡¨é”® ä¸­ä»‹ç», ä¸Šè¿°æ³¨å†Œè¡¨é”®çš„å­é”®ä¸­, å±æ€§ä¸ MSI ä¸­çš„å±æ€§æœ‰ä»¥ä¸‹å¯¹åº”å…³ç³»:\nå€¼ Windows Installer å±æ€§ DisplayName ProductNameÂ å±æ€§ DisplayVersion æ´¾ç”Ÿè‡ªÂ ProductVersionÂ å±æ€§ Publisher ManufacturerÂ å±æ€§ VersionMinor æ´¾ç”Ÿè‡ªÂ ProductVersionÂ å±æ€§ VersionMajor æ´¾ç”Ÿè‡ªÂ ProductVersionÂ å±æ€§ Version æ´¾ç”Ÿè‡ªÂ ProductVersionÂ å±æ€§ HelpLink ARPHELPLINKÂ å±æ€§ HelpTelephone ARPHELPTELEPHONEÂ å±æ€§ InstallDate æ­¤äº§å“æœ€åä¸€æ¬¡æ¥å—æœåŠ¡çš„æ—¶é—´ã€‚ æ¯æ¬¡ä»äº§å“åº”ç”¨æˆ–ç§»é™¤ä¿®è¡¥ç¨‹åºæˆ–ä½¿ç”¨ /vÂ å‘½ä»¤è¡Œé€‰é¡¹ä¿®å¤äº§å“æ—¶ï¼Œéƒ½ä¼šæ›¿æ¢æ­¤å±æ€§çš„å€¼ã€‚ å¦‚æœäº§å“æœªæ¥å—ä»»ä½•ä¿®å¤æˆ–ä¿®è¡¥ï¼Œåˆ™æ­¤å±æ€§åŒ…å«åœ¨æ­¤è®¡ç®—æœºä¸Šå®‰è£…è¯¥äº§å“çš„æ—¶é—´ã€‚ InstallLocation ARPINSTALLLOCATIONÂ å±æ€§ InstallSource SourceDirÂ å±æ€§ URLInfoAbout ARPURLINFOABOUTÂ å±æ€§ URLUpdateInfo ARPURLUPDATEINFOÂ å±æ€§ AuthorizedCDFPrefix ARPAUTHORIZEDCDFPREFIXÂ å±æ€§ Comments ARPCOMMENTSÂ å±æ€§ æä¾›ç»™â€œæ·»åŠ æˆ–åˆ é™¤ç¨‹åºâ€æ§åˆ¶é¢æ¿çš„æ³¨é‡Šã€‚ Contact ARPCONTACTÂ å±æ€§ æä¾›ç»™â€œæ·»åŠ æˆ–åˆ é™¤ç¨‹åºâ€æ§åˆ¶é¢æ¿çš„è”ç³»äººã€‚ EstimatedSize ç”± Windows Installer ç¡®å®šå’Œè®¾ç½®ã€‚ Language ProductLanguageÂ å±æ€§ ModifyPath ç”± Windows Installer ç¡®å®šå’Œè®¾ç½®ã€‚ Readme ARPREADMEÂ å±æ€§ æä¾›ç»™â€œæ·»åŠ æˆ–åˆ é™¤ç¨‹åºâ€æ§åˆ¶é¢æ¿çš„è‡ªè¿°æ–‡ä»¶ã€‚ UninstallString ç”± Windows Installer ç¡®å®šå’Œè®¾ç½®ã€‚ SettingsIdentifier MSIARPSETTINGSIDENTIFIERÂ å±æ€§ é€šè¿‡å¼€å§‹èœå•ç›®å½•æŸ¥è¯¢ å¦‚æœæ˜¯æœå¯»å¼€å§‹èœå•ç›®å½•, åˆ™æ˜¯ä»¥ä¸‹è·¯å¾„:\nå½“å‰ç”¨æˆ·çš„å¼€å§‹èœå•ç¨‹åºåˆ—è¡¨: C:\\Users\\slime\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs æ‰€æœ‰ç”¨æˆ·å…¬å…±çš„å¼€å§‹èœå•ç¨‹åºåˆ—è¡¨: C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs\né€šè¿‡ Environment.GetFolderPath æ–¹æ³•å³å¯è·å–ä¸Šè¿°ä¸¤ä¸ªè·¯å¾„. å‚æ•°åˆ†åˆ«æ˜¯ Programs æšä¸¾å’Œ CommonPrograms æšä¸¾\næ‰€æœ‰æ­£å¸¸å®‰è£…çš„ Win32 ç¨‹åºä¸€èˆ¬éƒ½ä¼šåˆ›å»ºå¼€å§‹èœå•é¡¹, æ‰€ä»¥å¯ä»¥é€šè¿‡è¿™ä¸ªç²—ç•¥çš„è·å–æ‰€æœ‰ Win32 åº”ç”¨ç¨‹åºåˆ—è¡¨.\nç„¶å, æ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½æ˜¯é€šè¿‡å¿«æ·æ–¹å¼å­˜åœ¨äºå¼€å§‹èœå•ä¸­çš„, æ‰€ä»¥ä½ éœ€è¦æœ‰è§£æå¿«æ·æ–¹å¼çš„æ–¹æ¡ˆ, ç¬¬ä¸€ç§æ˜¯é€šè¿‡ Shell API, ä½†è¿™æŒºéº»çƒ¦çš„. ç¬”è€…è¿™è¾¹æ¨èçš„æ–¹å¼æ˜¯é€šè¿‡ Securify.ShellLink è¿™ä¸ªåº“æ¥è§£æ.\n1 2 // ä»æ–‡ä»¶è¯»å–å¿«æ·æ–¹å¼ä¿¡æ¯ var shortcut = Shortcut.ReadFromFile(@\u0026#34;C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs\\Accessories\\Paint.lnk\u0026#34;); éœ€è¦æ³¨æ„çš„æ˜¯, å¿«æ·æ–¹å¼çš„ç»“æ„æ˜¯å¾ˆå¤æ‚çš„, ä½ æƒ³è¦çš„ \u0026ldquo;ç›®æ ‡è·¯å¾„\u0026rdquo; å¯èƒ½åœ¨å¿«æ·æ–¹å¼ä¸­ä¸ä¸€å®šå“ªä¸ªå±æ€§ä¸­, å¯ä»¥å‚è€ƒä»¥ä¸‹çš„ Fallback é¡ºåº:\nExtraData.EnvironmentVariableDataBlock.TargetUnicode LinkTargetIDList.Path LinkTargetIDList.DisplayName åœ¨è·å–è¿™äº›å±æ€§æ—¶, è®°å¾—å¯¹å±æ€§è¿›è¡Œåˆ¤ç©º, ä»¥å…é‡åˆ° NullReferenceException\nå¦‚æœè¦è·å–å…¶ä»–ä¿¡æ¯, è¯¸å¦‚å‘½ä»¤è¡Œå‚æ•°, å·¥ä½œç›®å½•, å›¾æ ‡æ­¤ç±», ç›´æ¥è·å–å¿«æ·æ–¹å¼çš„å¯¹åº”å±æ€§å³å¯. è‡³äºä»¥ç®¡ç†å‘˜æƒé™èº«ä»½è¿è¡Œ, è¿™ä¸ªç›´æ¥åˆ¤æ–­ LinkFlags æ˜¯å¦æœ‰ RunAsUser è¿™ä¸ªæ ‡å¿—å°±å¯ä»¥äº†.\næŸ¥è¯¢ UWP åº”ç”¨ æŸ¥è¯¢å·²å®‰è£…çš„ UWP åº”ç”¨ç¨‹åº, æœ‰ä½ èƒ½è½»æ˜“åœ¨ç½‘ä¸Šæ‰¾åˆ°çš„ä¸‰ç§æŸ¥è¯¢æ–¹å¼, ä»¥åŠç¬”è€…è‡ªå·±æ‰¾åˆ°çš„ç¬¬å››ç§æ–¹å¼.\nä½¿ç”¨ Windows SDK ä¸­çš„ PackageManager ç±»è¿›è¡Œæœ€æ­£è§„çš„æŸ¥è¯¢ ä½¿ç”¨é˜²ç«å¢™çš„ API, é€šè¿‡æŸ¥è¯¢ UWP å®¹å™¨åˆ—è¡¨, å®ç°æŸ¥æ‰¾æ‰€æœ‰ UWP åº”ç”¨ è°ƒç”¨ PowerShell, æ‰§è¡Œ Get-AppxPackage æŸ¥æ³¨å†Œè¡¨ é€šè¿‡ Windows SDK æŸ¥è¯¢ ç¬¬ä¸€ç§æ–¹æ¡ˆ, PackageManager å¹¶ä¸æ˜¯ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨åˆ°çš„ç±», è€Œæ˜¯éœ€è¦ä½¿ç”¨ Windows SDK æ‰å¯ä»¥ç”¨çš„. å¯¹é¡¹ç›®çš„é…ç½®æ–¹å¼ä¹Ÿç®€å•.\nå¦‚æœä½ æ˜¯ .NET CoreCLR çš„é¡¹ç›®, ä¾‹å¦‚ .NET8 çš„, é‚£ä¹ˆç›´æ¥å³é”®é¡¹ç›®, æ‰“å¼€å±æ€§, å°†ç›®æ ‡ OS æ”¹ä¸º Windows, ç›®æ ‡ OS ç‰ˆæœ¬æ”¹ä¸ºä½ çš„ç›®æ ‡ç³»ç»Ÿç‰ˆæœ¬, æ”¯æŒçš„ OS ç‰ˆæœ¬åˆ™æ˜¯æœ€ä½ OS ç‰ˆæœ¬. è¿™é‡Œå»ºè®® 1904 ä»€ä¹ˆçš„, ä¾‹å¦‚ 10.0.19041.0, é€‰æ‹©æ›´ä½çš„ç‰ˆæœ¬, å¯ä»¥æ”¯æŒæ›´å¤šç³»ç»Ÿ.\nå¦‚æœä½ æ˜¯ .NET Framework çš„é¡¹ç›®, é‚£ä¹ˆä½ éœ€è¦çŸ¥é“ä½ çš„ Windows SDK å®‰è£…åœ¨å“ª, åœ¨å®ƒä¸‹é¢ä¼šæœ‰ä¸€ä¸ª Windows.winmd åŠ¨æ€é“¾æ¥åº“, å®ƒå¤§æ¦‚åœ¨ä¸€ä¸ªå« \u0026lsquo;UnionMetadata\u0026rsquo; çš„ç›®å½•ä¸‹, å³é”®ä½ çš„é¡¹ç›®, æ·»åŠ å¼•ç”¨, ç„¶åæŠŠè¿™ä¸ª winmd åº“æ·»åŠ è¿›å»å³å¯.\né…ç½®å®Œä¹‹å, ä½ å°±å¯ä»¥ä½¿ç”¨ \u0026lsquo;PackageManager\u0026rsquo; è¿›è¡ŒæŸ¥è¯¢äº†, æŸ¥è¯¢å½“å‰ç”¨æˆ·çš„æ‰€æœ‰å·²å®‰è£…çš„åŒ…ä¸éœ€è¦ä»€ä¹ˆç‰¹æ®Šæƒé™, ä»£ç å¦‚ä¸‹:\n1 2 3 4 5 using System.Security.Principal; using Windows.Management.Deployment; PackageManager packageManager = new PackageManager(); var packages = packageManager.FindPackagesForUser(WindowsIdentity.GetCurrent().User!.Value); é€šè¿‡é˜²ç«å¢™ API æŸ¥è¯¢ ç¬¬äºŒç§æ–¹æ¡ˆ, é€šè¿‡ WinAPI NetworkIsolationEnumAppContainers æšä¸¾æ‰€æœ‰çš„åº”ç”¨ç¨‹åºå®¹å™¨, è¿›è€Œå®ç°æŸ¥è¯¢ UWP åº”ç”¨ç¨‹åº.\néæ‰˜ç®¡å‡½æ•°å£°æ˜ä»¥åŠç»“æ„ä½“å®šä¹‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 public static class NativeDll { /// \u0026lt;summary\u0026gt; /// åŠ è½½èµ„æºæ–‡æœ¬ /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;pszSource\u0026#34;\u0026gt;èµ„æºæ ‡è¯†ç¬¦\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;pszOutBuf\u0026#34;\u0026gt;è¾“å‡ºçš„ç¼“å†²åŒº\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;cchOutBuf\u0026#34;\u0026gt;ç¼“å†²åŒºå¤§å°\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;ppvReserved\u0026#34;\u0026gt;ä¿ç•™, å›ºå®š0\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt; [DllImport(\u0026#34;shlwapi.dll\u0026#34;, BestFitMapping = false, CharSet = CharSet.Unicode, ExactSpelling = true, ThrowOnUnmappableChar = true)] public static extern unsafe uint SHLoadIndirectString(string pszSource, ref char pszOutBuf, int cchOutBuf, IntPtr ppvReserved); [DllImport(\u0026#34;FirewallAPI.dll\u0026#34;)] public static extern uint NetworkIsolationEnumAppContainers(uint Flags, out uint pdwCntPublicACs, out IntPtr ppPublicACs); [DllImport(\u0026#34;FirewallAPI.dll\u0026#34;)] public static extern void NetworkIsolationFreeAppContainers(IntPtr pACs); public static string? GetIndirectString(string str) { Span\u0026lt;char\u0026gt; buffer = stackalloc char[4096]; if (SHLoadIndirectString(str, ref buffer[0], buffer.Length, 0) != 0) { return null; } return new string(buffer.TrimEnd(\u0026#39;\\0\u0026#39;)); } } internal struct INET_FIREWALL_APP_CONTAINER { internal IntPtr appContainerSid; internal IntPtr userSid; [MarshalAs(UnmanagedType.LPWStr)] internal string appContainerName; [MarshalAs(UnmanagedType.LPWStr)] internal string displayName; [MarshalAs(UnmanagedType.LPWStr)] internal string description; internal INET_FIREWALL_AC_CAPABILITIES capabilities; internal INET_FIREWALL_AC_BINARIES binaries; [MarshalAs(UnmanagedType.LPWStr)] internal string workingDirectory; [MarshalAs(UnmanagedType.LPWStr)] internal string packageFullName; } internal struct INET_FIREWALL_AC_CAPABILITIES { public uint count; public IntPtr capabilities; } internal struct INET_FIREWALL_AC_BINARIES { public uint count; public IntPtr binaries; } ç®€å•å°è£…ä¸€ä¸‹åº”ç”¨å®¹å™¨ç±»:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 using System.Runtime.InteropServices; internal record class AppContainer { public string DisplayName { get; set; } public string Description { get; set; } public string PackageFullName { get; set; } public string[] Binaries { get; set; } = []; public string WorkingDirectory { get; set; } public AppContainer(INET_FIREWALL_APP_CONTAINER info) { PackageFullName = info.packageFullName; WorkingDirectory = info.workingDirectory; uint HRESULT = 0; Span\u0026lt;char\u0026gt; buffer = stackalloc char[4096]; HRESULT = NativeDll.SHLoadIndirectString(info.displayName, ref buffer[0], buffer.Length, 0); if (HRESULT == 0) DisplayName = new string(buffer.TrimEnd(\u0026#39;\\0\u0026#39;)); else DisplayName = info.displayName; buffer.Clear(); if (NativeDll.SHLoadIndirectString(info.description, ref buffer[0], buffer.Length, 0) == 0) Description = new string(buffer.TrimEnd(\u0026#39;\\0\u0026#39;)); else Description = info.description; buffer.Clear(); INET_FIREWALL_AC_BINARIES inet_FIREWALL_AC_BINARIES = info.binaries; if (inet_FIREWALL_AC_BINARIES.count \u0026gt; 0 \u0026amp;\u0026amp; inet_FIREWALL_AC_BINARIES.binaries != 0) { Binaries = new string[inet_FIREWALL_AC_BINARIES.count]; for (int i = 0; i \u0026lt; inet_FIREWALL_AC_BINARIES.count; i++) { var str = Marshal.PtrToStringUni(Marshal.ReadIntPtr(inet_FIREWALL_AC_BINARIES.binaries + nint.Size * i)); ; if (str?.StartsWith(@\u0026#34;\\\\?\\\u0026#34;) == true) { str = str[4..]; } if (str != null) { Binaries[i] = str; } } } } } è°ƒç”¨:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 var enumResult = NativeDll.NetworkIsolationEnumAppContainers(0, out var num, out var ptr); if (enumResult != 0) throw new Win32Exception((int)enumResult, Marshal.GetLastPInvokeErrorMessage()); List\u0026lt;AppContainer\u0026gt; appContainers = new((int)num); for (int i = 0; i \u0026lt; num; i++) { var info = Marshal.PtrToStructure\u0026lt;INET_FIREWALL_APP_CONTAINER\u0026gt;(ptr + Marshal.SizeOf\u0026lt;INET_FIREWALL_APP_CONTAINER\u0026gt;() * i); appContainers.Add(new AppContainer(info)); } NativeDll.NetworkIsolationFreeAppContainers(ptr); foreach (var appContainer in appContainers) Console.WriteLine(appContainer); è¿™ç§æ–¹å¼è°ƒç”¨ä¹Ÿæœ‰ä¸€ç‚¹ç¼ºç‚¹, ä½ æ— æ³•è·å–åº”ç”¨ç¨‹åºçš„å›¾æ ‡. ä»¥ä¸Šä»£ç æ¥è‡ªäº Ilyfairy\né€šè¿‡æ³¨å†Œè¡¨æŸ¥è¯¢ ç¬¬ä¸‰ç§æ–¹æ¡ˆ, åœ¨æ³¨å†Œè¡¨çš„ \u0026ldquo;HKEY_CURRENT_USER\\Software\\Classes\\Local Settings\\Software\\Microsoft\\Windows\\CurrentVersion\\AppModel\\Repository\\Packages\u0026rdquo; ä¸‹, ä½ å¯ä»¥çœ‹åˆ°æ‰€æœ‰å·²å®‰è£…åŒ…çš„éƒ¨åˆ†ä¿¡æ¯\nå…¶ä¸­ \u0026ldquo;PackageId\u0026rdquo; æ˜¯è¯¥åŒ…çš„ ID, è€Œ \u0026ldquo;PackageRootFolder\u0026rdquo; ç›´æ¥ç»™å‡ºäº†åŒ…çš„æ ¹æ–‡ä»¶å¤¹, è€Œè¿™ä¸ªæ–‡ä»¶å¤¹ä¸­, æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°åŒ…çš„æ¸…å•æ–‡ä»¶ \u0026ldquo;AppxManifest.xml\u0026rdquo;\næ¸…å•ä¸­åˆ—å‡ºäº†æ‰€æœ‰è¯¥åŒ…å†…æ‰€æœ‰åº”ç”¨ç¨‹åºçš„ä¿¡æ¯, åŒ…æ‹¬åº”ç”¨åç§°, LOGO, ä»¥åŠè¯¥åº”ç”¨æ˜¯å¦å¯¹ç”¨æˆ·å¯è§(å±•ç¤ºåœ¨å¼€å§‹èœå•ä¸­)\néƒ¨åˆ†åº”ç”¨ç¨‹åº, åœ¨ Manifest ä¸­, åº”ç”¨ç¨‹åºçš„æ˜¾ç¤ºåç§°æ˜¯ç›´æ¥ä»¥æ–‡æœ¬å½¢å¼å­˜åœ¨çš„, ä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›æ˜¯é€šè¿‡èµ„æºè·¯å¾„çš„å½¢å¼å­˜åœ¨çš„. æˆ‘ä»¬éœ€è¦åŠ è½½è¿™ä¸ªæ–‡æœ¬èµ„æº, æ¥è·å–å…¶å®é™…æ–‡æœ¬.\nè¿™é‡Œå†æ¬¡ç”¨åˆ°äº† \u0026ldquo;SHLoadIndirectString\u0026rdquo; è¿™ä¸ª API:\n1 2 [DllImport(\u0026#34;shlwapi.dll\u0026#34;, BestFitMapping = false, CharSet = CharSet.Unicode, ExactSpelling = true, ThrowOnUnmappableChar = true)] static extern unsafe uint SHLoadIndirectString(string pszSource, ref char pszOutBuf, int cchOutBuf, IntPtr ppvReserved); é€šè¿‡ä¸€ä¸ªé”®è·å–å…¶å¯¹åº”æ‰€æœ‰åº”ç”¨ç¨‹åºçš„é€»è¾‘å¦‚ä¸‹:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 // ç±»å‹å®šä¹‰ public abstract record class AppInfo { private string? _queryRoot; public string Name { get; set; } = string.Empty; public string QueryRoot { get =\u0026gt; _queryRoot ?? Name; set =\u0026gt; _queryRoot = value; } public string[]? AlterQueryRoots { get; set; } } public record class UwpAppInfo : AppInfo { public string PackageId { get; set; } = string.Empty; public string FamilyID { get; set; } = string.Empty; public string PackageRootFolder { get; set; } = string.Empty; public string AppxManifestPath =\u0026gt; Path.Combine(PackageRootFolder, \u0026#34;AppxManifest.xml\u0026#34;); public string ApplicationId { get; set; } = string.Empty; public UwpAppLogo[] AppLogos { get; set; } = Array.Empty\u0026lt;UwpAppLogo\u0026gt;(); public required string OriginRegistryKeyName { get; set; } = string.Empty; public record struct UwpAppLogo(int Size, string Path); } // æ–¹æ³•å®šä¹‰ private IEnumerable\u0026lt;UwpAppInfo\u0026gt; GetUwpApps(RegistryKey subKey) { if (subKey.GetValue(\u0026#34;PackageID\u0026#34;) is not string packageId) yield break; string packageFamilyId = Regex.Replace(packageId, \u0026#34;_.*__\u0026#34;, \u0026#34;_\u0026#34;); if (subKey.GetValue(\u0026#34;PackageRootFolder\u0026#34;) is not string packageRootFolder) yield break; string packageManifestPath = Path.Combine(packageRootFolder, \u0026#34;AppxManifest.xml\u0026#34;); if (!System.IO.File.Exists(packageManifestPath)) yield break; var appxManifestContent = File.ReadAllText(packageManifestPath); XmlDocument xml = new(); xml.LoadXml(appxManifestContent); XmlNamespaceManager nsManager = new XmlNamespaceManager(xml.NameTable);//è¿™ä¸€æ­¥å®ä¾‹åŒ–ä¸€ä¸ªxmlå‘½åç©ºé—´ç®¡ç†å™¨ nsManager.AddNamespace(\u0026#34;ns\u0026#34;, \u0026#34;http://schemas.microsoft.com/appx/manifest/foundation/windows10\u0026#34;); nsManager.AddNamespace(\u0026#34;uap\u0026#34;, \u0026#34;http://schemas.microsoft.com/appx/manifest/uap/windows10\u0026#34;); var idNode = xml.SelectSingleNode(\u0026#34;/ns:Package/ns:Identity\u0026#34;, nsManager); var appNodes = xml.SelectNodes(\u0026#34;/ns:Package/ns:Applications/ns:Application\u0026#34;, nsManager); if (appNodes == null) yield break; foreach (XmlNode appNode in appNodes) { var visualElementsNode = appNode.SelectSingleNode(\u0026#34;uap:VisualElements\u0026#34;, nsManager); if (visualElementsNode == null) continue; if (visualElementsNode?.Attributes?[\u0026#34;AppListEntry\u0026#34;]?.Value is string appListEntry \u0026amp;\u0026amp; appListEntry.Equals(\u0026#34;none\u0026#34;, StringComparison.OrdinalIgnoreCase)) continue; if (visualElementsNode?.Attributes?[\u0026#34;DisplayName\u0026#34;]?.Value is not string displayName) continue; UwpAppInfo info = new() { OriginRegistryKeyName = Path.GetFileName(subKey.Name) }; info.PackageId = packageId; info.FamilyID = packageFamilyId; info.PackageRootFolder = packageRootFolder; var logoNode = xml.SelectSingleNode(\u0026#34;/ns:Package/ns:Properties/ns:Logo\u0026#34;, nsManager); if (appNode == null || appNode.Attributes?[\u0026#34;Id\u0026#34;]?.Value is not string appId) continue; info.ApplicationId = appId; if (displayName.StartsWith(resourcePrefix)) { string resourcePath = displayName.Substring(resourcePrefix.Length); // éç»å¯¹è·¯å¾„, ä¸”èƒ½å¤Ÿæ‰¾åˆ° Identity èŠ‚ç‚¹ if (!resourcePath.StartsWith(\u0026#34;//\u0026#34;) \u0026amp;\u0026amp; idNode?.Attributes?[\u0026#34;Name\u0026#34;]?.Value is string id) { // ä¸æ˜¯å¼•ç”¨å…¶ä»–èµ„æº, åˆ™æ·»åŠ  \u0026#39;Resource\u0026#39; å‰ç¼€ if (!resourcePath.Contains(\u0026#34;Resources\u0026#34;)) resourcePath = $\u0026#34;Resources/{resourcePath}\u0026#34;; // è½¬ä¸ºç»å¯¹èµ„æº resourcePath = $\u0026#34;//{id}/{resourcePath}\u0026#34;; } string resourceStr = $\u0026#34;@{{{packageId}?ms-resource:{resourcePath}}}\u0026#34;; uint errCode = SHLoadIndirectString(resourceStr, ref displayNameBuffer[0], displayNameBuffer.Length, 0); int endIndex = Array.IndexOf(displayNameBuffer, \u0026#39;\\0\u0026#39;); displayName = new string(displayNameBuffer, 0, endIndex); if (errCode != 0) continue; } if (string.IsNullOrWhiteSpace(displayName)) continue; info.Name = displayName; string? logoPath = logoNode?.InnerText; if (logoPath is not null) { var logoFullPath = Path.Combine(info.PackageRootFolder, logoPath); var logoFileName = Path.GetFileNameWithoutExtension(logoPath); var logoExtension = Path.GetExtension(logoPath); var logoFilesDir = Path.GetDirectoryName(logoFullPath) ?? \u0026#34;.\u0026#34;; var logoFilesPattern = $\u0026#34;{logoFileName}*{logoExtension}\u0026#34;; if (Directory.Exists(logoFilesDir)) { var regex = new Regex($@\u0026#34;{Regex.Escape(logoFileName)}(\\.scale-(?\u0026lt;scale\u0026gt;\\d+))?{Regex.Escape(logoExtension)}\u0026#34;); List\u0026lt;UwpAppInfo.UwpAppLogo\u0026gt; logos = new(); foreach (var searchedLogoFile in Directory.EnumerateFiles(logoFilesDir, logoFilesPattern)) { var searchedLogoFileName = Path.GetFileName(searchedLogoFile); var match = regex.Match(searchedLogoFileName); if (!match.Success) continue; int scale = 1; if (int.TryParse(match.Groups[\u0026#34;scale\u0026#34;].Value, out var parsedScale)) scale = parsedScale; logos.Add(new UwpAppInfo.UwpAppLogo(44 * scale, searchedLogoFile)); } info.AppLogos = logos.ToArray(); } } yield return info; } } ä¸Šè¿°ä»£ç æ¥è‡ªäº github.com/OrgEleCho/CurvaLauncher ä¸­ \u0026lsquo;Run Application\u0026rsquo; çš„ UWP åº”ç”¨ç´¢å¼•é€»è¾‘\næŸ¥è¯¢ AppsFolder ä½¿ç”¨ \u0026lsquo;è¿è¡Œ\u0026rsquo; å¯¹è¯æ¡†, æ‰“å¼€ shell:AppsFolder, ä½ å¯ä»¥æ‰“å¼€ä¸€ä¸ªåŒæ—¶åŒ…å« Win32 å’Œ UWP åº”ç”¨çš„æ–‡ä»¶å¤¹, ä½†è¿™ä¸ªæ–‡ä»¶å¤¹å®é™…ä¸Šæ˜¯ä¸å­˜åœ¨çš„, å®ƒæ˜¯ Shell æŠ½è±¡å‡ºæ¥çš„, æœ¬è´¨ä¸Šæ˜¯å¼€å§‹èœå•çš„ CommonPrograms å’Œ Programs ç›®å½•, ä»¥åŠæ‰€æœ‰ UWP åº”ç”¨ç¨‹åºåŠ èµ·æ¥, æ„æˆçš„ä¸€ä¸ªè™šæ‹Ÿç›®å½•.\nä¸è¿‡, æˆ‘ä»¬ä»ç„¶å¯ä»¥é€šè¿‡ç¼–ç¨‹æ‰‹æ®µæ¥éå†è¿™ä¸ª \u0026ldquo;ç›®å½•\u0026rdquo;, è·å–æ‰€æœ‰å·²å®‰è£…çš„åº”ç”¨ç¨‹åº. ä¸‹é¢æ˜¯é€šè¿‡ COM æŸ¥è¯¢ AppsFolder çš„ C++ ä»£ç .\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 #include \u0026lt;Windows.h\u0026gt; #include \u0026lt;ShlObj.h\u0026gt; #include \u0026lt;fcntl.h\u0026gt; #include \u0026lt;io.h\u0026gt; #include \u0026lt;iostream\u0026gt; using namespace std; int main() { if (_setmode(_fileno(stdout), _O_U16TEXT) == -1) { wcout \u0026lt;\u0026lt; L\u0026#34;Failed to set stdout to UTF-16\u0026#34; \u0026lt;\u0026lt; endl; return -1; } HRESULT result; result = CoInitializeEx(nullptr, COINIT_APARTMENTTHREADED | COINIT_DISABLE_OLE1DDE); if (FAILED(result)) { wcout \u0026lt;\u0026lt; L\u0026#34;CoInitializeEx failed: \u0026#34; \u0026lt;\u0026lt; hex \u0026lt;\u0026lt; result \u0026lt;\u0026lt; endl; return -1; } IShellItem* appsFolder; result = SHGetKnownFolderItem(FOLDERID_AppsFolder, KF_FLAG_DEFAULT, nullptr, IID_PPV_ARGS(\u0026amp;appsFolder)); if (FAILED(result)) { wcout \u0026lt;\u0026lt; L\u0026#34;SHGetKnownFolderItem failed: \u0026#34; \u0026lt;\u0026lt; hex \u0026lt;\u0026lt; result \u0026lt;\u0026lt; endl; return -1; } IEnumShellItems* appsFolderEnum; result = appsFolder-\u0026gt;BindToHandler(nullptr, BHID_EnumItems, IID_PPV_ARGS(\u0026amp;appsFolderEnum)); if (FAILED(result)) { wcout \u0026lt;\u0026lt; L\u0026#34;BindToHandler failed: \u0026#34; \u0026lt;\u0026lt; hex \u0026lt;\u0026lt; result \u0026lt;\u0026lt; endl; return -1; } for (IShellItem* app; appsFolderEnum-\u0026gt;Next(1, \u0026amp;app, nullptr) == S_OK; app-\u0026gt;Release()) { // è·å–åº”ç”¨ç¨‹åºçš„åç§° PWSTR name; result = app-\u0026gt;GetDisplayName(SIGDN_NORMALDISPLAY, \u0026amp;name); if (FAILED(result)) { wcout \u0026lt;\u0026lt; L\u0026#34;GetDisplayName failed: \u0026#34; \u0026lt;\u0026lt; hex \u0026lt;\u0026lt; result \u0026lt;\u0026lt; endl; return -1; } wcout \u0026lt;\u0026lt; name \u0026lt;\u0026lt; L\u0026#34; -\u0026gt; \u0026#34;; CoTaskMemFree(name); // è·å–åº”ç”¨ç¨‹åºçš„è·¯å¾„ PWSTR path; result = app-\u0026gt;GetDisplayName(SIGDN_PARENTRELATIVEPARSING, \u0026amp;path); if (FAILED(result)) { wcout \u0026lt;\u0026lt; L\u0026#34;GetDisplayName failed: \u0026#34; \u0026lt;\u0026lt; hex \u0026lt;\u0026lt; result \u0026lt;\u0026lt; endl; return -1; } wcout \u0026lt;\u0026lt; path \u0026lt;\u0026lt; L\u0026#34; = \u0026#34;; CoTaskMemFree(path); // è·å–åº”ç”¨ç¨‹åºçš„å›¾æ ‡ IShellItemImageFactory* imageFactory; result = app-\u0026gt;QueryInterface(IID_PPV_ARGS(\u0026amp;imageFactory)); if (FAILED(result)) { wcout \u0026lt;\u0026lt; L\u0026#34;QueryInterface failed: \u0026#34; \u0026lt;\u0026lt; hex \u0026lt;\u0026lt; result \u0026lt;\u0026lt; endl; return -1; } HBITMAP bitmap; result = imageFactory-\u0026gt;GetImage(SIZE { 64, 64 }, SIIGBF_ICONONLY, \u0026amp;bitmap); if (FAILED(result)) { wcout \u0026lt;\u0026lt; L\u0026#34;GetImage failed: \u0026#34; \u0026lt;\u0026lt; hex \u0026lt;\u0026lt; result \u0026lt;\u0026lt; endl; return -1; } wcout \u0026lt;\u0026lt; bitmap \u0026lt;\u0026lt; endl; DeleteObject(bitmap); imageFactory-\u0026gt;Release(); } appsFolderEnum-\u0026gt;Release(); appsFolder-\u0026gt;Release(); CoUninitialize(); // åŸç¥, å¯åŠ¨! // ShellExecuteW(nullptr, L\u0026#34;open\u0026#34;, L\u0026#34;explorer\u0026#34;, L\u0026#34;shell:AppsFolder\\\\Kingsoft.Office.ET\u0026#34;, nullptr, SW_NORMAL); return 0; } ","date":"2024-01-17T14:33:32+08:00","permalink":"https://slimenull.com/p/20240117143332/","title":"[.NET] æŸ¥è¯¢å½“å‰å·²å®‰è£…æ‰€æœ‰ Win32 ä¸ UWP åº”ç”¨"},{"content":"Unity æ˜¯å•çº¿ç¨‹è®¾è®¡çš„æ¸¸æˆå¼•æ“, æ‰€æœ‰å¯¹äº Unity çš„è°ƒç”¨éƒ½åº”è¯¥åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ. å€˜è‹¥æˆ‘ä»¬è¦å®ç°å¦å¤–å†æ‰§è¡Œä¸€ä¸ªä»»åŠ¡, è¯¥æ€ä¹ˆåšå‘¢? ç­”æ¡ˆå°±æ˜¯åç¨‹.\nåç¨‹æœ¬è´¨ä¸Šæ˜¯åŸºäº C# yield è¿­ä»£å™¨çš„, ä½¿ç”¨ yield è¯­æ³•ç”Ÿæˆçš„è¿”å›è¿­ä»£å™¨çš„æ–¹æ³•, å…¶å†…éƒ¨çš„é€»è¾‘æ‰§è¡Œ, æ˜¯ \u0026ldquo;æ‡’\u0026rdquo; çš„, åªæœ‰åœ¨è°ƒç”¨ MoveNext çš„æ—¶å€™, æ‰ä¼šç»§ç»­æ‰§è¡Œä¸‹ä¸€æ­¥é€»è¾‘.\nUnity ç”Ÿå‘½å‘¨æœŸ æˆ‘ä»¬çŸ¥é“, Unity åœ¨è¿è¡Œçš„æ—¶å€™, æœ¬è´¨ä¸Šæ˜¯æœ‰ä¸€ä¸ªä¸»å¾ªç¯, ä¸æ–­çš„è°ƒç”¨æ‰€æœ‰æ¸¸æˆå¯¹è±¡çš„å„ä¸ªäº‹ä»¶å‡½æ•°, è¯¸å¦‚ Update, LateUpdate, FixedUpdate, ä»¥åŠåœ¨è¿™ä¸ªä¸»å¾ªç¯ä¸­, è¿›è¡Œæ¸¸æˆä¸»é€»è¾‘çš„æ›´æ–°. å…¶ä¸­åç¨‹çš„å¤„ç†ä¹Ÿæ˜¯åœ¨è¿™é‡Œå®Œæˆçš„.\nUnity åœ¨æ¯ä¸€ä¸ªæ¸¸æˆå¯¹è±¡ä¸­éƒ½ç»´æŠ¤ä¸€ä¸ªåç¨‹çš„åˆ—è¡¨, è¯¥å¯¹è±¡å¯åŠ¨ä¸€ä¸ªåç¨‹çš„æ—¶å€™, è¯¥åç¨‹çš„è¿­ä»£å™¨å°±ä¼šè¢«æ”¾ç½®åˆ° \u0026ldquo;æ­£åœ¨æ‰§è¡Œçš„åç¨‹\u0026rdquo; åˆ—è¡¨ä¸­. Unity æ¯ä¸€å¸§éƒ½ä¼šå¯¹ä»–ä»¬è¿›è¡Œåˆ¤æ–­, æ˜¯å¦åº”è¯¥è°ƒç”¨ MoveNext æ–¹æ³•.\nåˆå› ä¸ºè¿­ä»£å™¨æœ‰ \u0026ldquo;æ‡’æ‰§è¡Œ\u0026rdquo; çš„ç‰¹æ€§, æ‰€ä»¥å°±èƒ½å¤Ÿå®ç°, ç­‰å¾…æŸäº›æ“ä½œç»“æŸ, ç„¶åæ‰§è¡Œä¸‹ä¸€æ®µé€»è¾‘.\nå…³äºè¿­ä»£å™¨æ‡’æ‰§è¡Œ, å‚è€ƒ: [C#] åŸºäº yield è¯­å¥çš„è¿­ä»£å™¨é€»è¾‘æ‡’æ‰§è¡Œ\nä»¿å†™åç¨‹ å…‰æ˜¯å£è¿°, è‚¯å®šæ˜¯æ— æ³•è®²æ˜ç™½åç¨‹åŸç†çš„, ä¸‹é¢å°†ä½¿ç”¨ä»£ç ç®€å•å®ç°ä¸€ä¸ªåç¨‹.\næˆ‘ä»¬æ¸¸æˆå¼•æ“å°†æœ‰ä»¥ä¸‹æ–‡ä»¶:\nGameEngine : æ¸¸æˆå¼•æ“, å­˜å‚¨æ‰€æœ‰çš„æ¸¸æˆå¯¹è±¡ GameObject : è¡¨ç¤ºä¸€ä¸ªæ¸¸æˆå¯¹è±¡, å°†ä¼šå­˜å‚¨å…¶æ­£åœ¨è¿è¡Œçš„åç¨‹ GameObjectStates : è¡¨ç¤ºä¸€ä¸ªæ¸¸æˆå¯¹è±¡çš„çŠ¶æ€, ä¾‹å¦‚å®ƒæ˜¯å¦å·²ç»å¯åŠ¨, æ˜¯å¦è¢«é”€æ¯ Coroutine : è¡¨ç¤ºä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„åç¨‹ WaitForSeconds : è¡¨ç¤ºä¸€ä¸ªè¦ç­‰å¾…çš„å¯¹è±¡, å®ƒå°†ä½¿åç¨‹æš‚åœæ‰§è¡ŒæŒ‡å®šç§’æ•° Program : æ¸¸æˆå¼•æ“çš„ä¸»å¾ªç¯é€»è¾‘ ä»¥åŠç”¨æˆ·çš„é€»è¾‘:\nMyGameObject : ç”¨æˆ·è‡ªå®šä¹‰çš„æ¸¸æˆå¯¹è±¡ é¦–å…ˆåˆ›å»ºä¸€ä¸ª GameEngine ç±», å®ƒå°†å®¹çº³å½“å‰åˆ›å»ºå¥½çš„æ‰€æœ‰æ¸¸æˆå¯¹è±¡.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 public class GameEngine { // ç§æœ‰æ„é€ å‡½æ•°, ä½¿å¤–éƒ¨æ— æ³•ç›´æ¥è¢«è°ƒç”¨ private GameEngine() { } // å•ä¾‹æ¨¡å¼ public static GameEngine Current { get; } = new(); // æ‰€æœ‰çš„æ¸¸æˆå¯¹è±¡ internal List\u0026lt;GameObject\u0026gt; _allGameObjects = new(); // é€šè¿‡ ReadOnlyList å‘å¤–æš´éœ²æ‰€æœ‰æ¸¸æˆå¯¹è±¡ public IReadOnlyList\u0026lt;GameObject\u0026gt; AllGameObjects =\u0026gt; _allGameObjects; public int FrameNumber { get; internal set; } } åˆ›å»ºä¸€ä¸ª WaitForSeconds ç±», å®ƒå’Œ Unity ä¸­çš„ WaitForSeconds ç±»ä¸€æ ·, ç”¨äºåœ¨å†™æˆä¸­é€šè¿‡ yield è¿”å›å®ç°ç­‰å¾…æŒ‡å®šæ—¶é—´.\n1 2 3 4 5 6 7 8 9 public class WaitForSeconds { public WaitForSeconds(float seconds) { Seconds = seconds; } public float Seconds { get; } } æ¥ä¸‹æ¥, åˆ›å»ºä¸€ä¸ª Coroutine ç±», å®ƒè¡¨ç¤ºä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„åç¨‹, æ„é€ æ—¶, ä¼ å…¥åç¨‹è¦æ‰§è¡Œçš„é€»è¾‘, ä¹Ÿå°±æ˜¯ä¸€ä¸ª IEnumerator. å…¶ä¸­, åŒ…å«ä¸€ä¸ª \u0026ldquo;å½“å‰çš„ç­‰å¾…å¯¹è±¡\u0026rdquo; ä»¥åŠ \u0026ldquo;å½“å‰ç­‰å¾…å¯¹è±¡ç›¸å…³è”çš„æŸäº›å‚æ•°æ•°æ®\u0026rdquo;. å®ƒçš„ Update æ–¹æ³•ä¼šåœ¨æ¸¸æˆä¸»å¾ªç¯ä¸­ä¸æ–­è¢«è°ƒç”¨.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 using System.Collections; public class Coroutine { public Coroutine(IEnumerator enumerator) { Enumerator = enumerator; } public IEnumerator Enumerator { get; } // å½“å‰ç­‰å¾…å¯¹è±¡ object? currentWaitable; // ä¸å½“å‰ç­‰å¾…å¯¹è±¡ç›¸å…³è”çš„å‚æ•°ä¿¡æ¯ object? currentWaitableParameter; public bool IsCompleted { get; set; } internal void Update() { // å¦‚æœå½“å‰åç¨‹å·²ç»ç»“æŸ, å°±ä¸å†è¿›è¡Œä»»ä½•æ“ä½œ if (IsCompleted) return; // å¦‚æœå½“å‰æ²¡æœ‰è¦ç­‰å¾…çš„å¯¹è±¡ if (currentWaitable == null) { // æ‰§è¡Œè¿­ä»£å™¨çš„ \u0026#34;MoveNext\u0026#34; if (!Enumerator.MoveNext()) { // å¦‚æœè¿­ä»£å™¨è¿”å›äº† false, ä¹Ÿå°±æ˜¯è¿­ä»£å™¨æ²¡æœ‰ä¸‹ä¸€ä¸ªæ•°æ®äº† // åˆ™è¡¨ç¤ºå½“å‰åç¨‹å·²ç»è¿è¡Œç»“æŸ, åšä¸Šæ ‡è®°, ç„¶åè¿”å› IsCompleted = true; return; } // å¦‚æœå½“å‰ç­‰å¾…å¯¹è±¡æ˜¯ \u0026#34;ç­‰å¾…æŒ‡å®šç§’\u0026#34; if (Enumerator.Current is WaitForSeconds waitForSeconds) { // ä¿å­˜å½“å‰ç­‰å¾…å¯¹è±¡ currentWaitable = waitForSeconds; // å°†å½“å‰æ—¶é—´ä½œä¸ºå‚æ•°å­˜èµ·æ¥ currentWaitableParameter = DateTime.Now; } else if (Enumerator.Current is Coroutine coroutine) { // å¦‚æœå½“å‰ç­‰å¾…å¯¹è±¡æ˜¯å¦ä¸€ä¸ªåç¨‹ // ä¿å­˜å½“å‰ç­‰å¾…å¯¹è±¡ currentWaitable = coroutine; } } else // å¦åˆ™, ä¹Ÿå°±æ˜¯å½“å½“å‰ç­‰å¾…å¯¹è±¡ä¸ä¸ºç©ºæ—¶ { // å¦‚æœå½“å‰ç­‰å¾…å¯¹è±¡æ˜¯ \u0026#34;ç­‰å¾…æŒ‡å®šç§’\u0026#34; if (currentWaitable is WaitForSeconds waitForSeconds) { DateTime startTime = (DateTime)currentWaitableParameter!; // åˆ¤æ–­æ˜¯å¦ç­‰å¾…ç»“æŸ if ((DateTime.Now - startTime).TotalSeconds \u0026gt;= waitForSeconds.Seconds) { // å¦‚æœç­‰å¾…ç»“æŸ, é‚£ä¹ˆå°±å°†å½“å‰ç­‰å¾…å¯¹è±¡ç½®ç©º // è¿™æ ·ä¸‹ä¸€æ¬¡è¢«è°ƒç”¨ Update æ—¶, å°±ä¼šé€šè¿‡è°ƒç”¨è¿­ä»£å™¨ MoveNext // æ‰§è¡Œåç¨‹çš„ä¸‹ä¸€æ®µé€»è¾‘, å¹¶ä¸”è·å–ä¸‹ä¸€ä¸ªç­‰å¾…å¯¹è±¡ currentWaitable = null; } } else if (currentWaitable is Coroutine coroutine) { // å¦‚æœç­‰å¾…å¯¹è±¡æ˜¯åç¨‹, å¹¶ä¸”å¯¹åº”åç¨‹å·²ç»æ‰§è¡Œå®Œæ¯• if (coroutine.IsCompleted) { // å°†å½“å‰ç­‰å¾…å¯¹è±¡ç½®ç©º currentWaitable = null; } } } } } ç¼–å†™ä¸€ä¸ª GameObjectStates æ¥è¡¨ç¤ºä¸€ä¸ªæ¸¸æˆå¯¹è±¡çš„çŠ¶æ€, ä¾‹å¦‚æ˜¯å¦å¯åŠ¨äº†, æ˜¯å¦è¢«é”€æ¯äº†ä»€ä¹ˆçš„.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 internal class GameObjectStates { // å¯¹åº”æ¸¸æˆå¯¹è±¡ public GameObject Target { get; } // æ˜¯å¦å·²ç»å¯åŠ¨ public bool Started { get; set; } // æ˜¯å¦å·²ç»è¢«é”€æ¯ public bool Destroyed { get; set; } public GameObjectStates(GameObject target) { Target = target; } } ä¸‹é¢, ç¼–å†™ä¸€ä¸ª GameObject, å› ä¸ºåç¨‹æ˜¯è¿è¡Œåœ¨æ¸¸æˆå¯¹è±¡ä¸­çš„, æ‰€ä»¥æ¸¸æˆå¯¹è±¡ä¼šæœ‰ä¸€ä¸ªå®¹å™¨æ¥æ‰¿è½½å½“å‰æ¸¸æˆå¯¹è±¡æ­£åœ¨è¿è¡Œçš„åç¨‹. å½“ç„¶, å®ƒä¹Ÿæœ‰ Start å’Œ Update ä¸¤ä¸ªè™šæ–¹æ³•, ä¼šè¢«æ¸¸æˆçš„ä¸»é€»è¾‘è°ƒç”¨.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 using System.Collections; public class GameObject { // å½“å‰æ¸¸æˆå¯¹è±¡çš„çŠ¶æ€ internal GameObjectStates States { get; } // æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„åç¨‹ List\u0026lt;Coroutine\u0026gt; coroutines = new(); // å³å°†å¼€å§‹è¿è¡Œçš„åç¨‹ List\u0026lt;Coroutine\u0026gt; coroutinesToAdd = new(); // å°†è¦è¢«åˆ é™¤çš„åç¨‹ List\u0026lt;Coroutine\u0026gt; coroutinesToRemove = new(); public GameObject() { // åˆå§‹åŒ–çŠ¶æ€ States = new(this); // å°†å½“å‰æ¸¸æˆå¯¹è±¡æ·»åŠ åˆ°æ¸¸æˆå¼•æ“ GameEngine.Current._allGameObjects.Add(this); } // ç”±æ¸¸æˆå¼•æ“è°ƒç”¨çš„ Start å’Œ Update public virtual void Start() { } public virtual void Update() { } // ç”±æ¸¸æˆå¼•æ“è°ƒç”¨çš„, æ›´æ–°æ‰€æœ‰åç¨‹çš„é€»è¾‘ internal void UpdateCoroutines() { // å°†éœ€è¦æ·»åŠ çš„æ‰€æœ‰åç¨‹æ·»åŠ åˆ°å½“å‰æ­£åœ¨è¿è¡Œçš„åç¨‹ä¸­ foreach (var coroutine in coroutinesToAdd) { coroutines.Add(coroutine); } coroutinesToAdd.Clear(); // æ›´æ–°å½“å‰æ‰€æœ‰åç¨‹ foreach (var coroutine in coroutines) { coroutine.Update(); // å¦‚æœå½“å‰åç¨‹å·²ç»æ‰§è¡Œå®Œæ¯•, åˆ™å°†å…¶æ·»åŠ åˆ° \u0026#34;åˆ é™¤åˆ—è¡¨\u0026#34; ä¸­ if (coroutine.IsCompleted) { coroutinesToRemove.Add(coroutine); } } // å°†å‡†å¤‡åˆ é™¤çš„æ‰€æœ‰åç¨‹ä»å½“å‰è¿è¡Œçš„åç¨‹åˆ—è¡¨ä¸­åˆ é™¤ foreach (var coroutine in coroutinesToRemove) { coroutines.Remove(coroutine); } coroutinesToRemove.Clear(); } // å¼€å¯ä¸€ä¸ªåç¨‹ public Coroutine StartCoroutine(IEnumerator enumerator) { Coroutine coroutine = new(enumerator); coroutinesToAdd.Add(coroutine); return coroutine; } // åœæ­¢ä¸€ä¸ªåç¨‹ public void StopCoroutine(Coroutine coroutine) { coroutinesToRemove.Add(coroutine); } // åœæ­¢ä¸€ä¸ªåç¨‹ public void StopCoroutine(IEnumerator enumerator) { int index = coroutines.FindIndex(c =\u0026gt; c.Enumerator == enumerator); if (index != -1) coroutinesToRemove.Add(coroutines[index]); } // é”€æ¯å½“å‰æ¸¸æˆå¯¹è±¡ public void DestroySelf() { States.Destroyed = true; } } è‡ªå®šä¹‰ä¸€ä¸ªæ¸¸æˆå¯¹è±¡ MyGameObject, å®ƒåœ¨ Start æ—¶å¯åŠ¨ä¸€ä¸ªåç¨‹.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 using System.Collections; class MyGameObject : GameObject { public override void Start() { base.Start(); StartCoroutine(MyCoroutineLogic()); } IEnumerator MyCoroutineLogic() { System.Console.WriteLine(\u0026#34;Logic out\u0026#34;); yield return StartCoroutine(MyCoroutineLogicInner()); yield return new WaitForSeconds(3); System.Console.WriteLine(\u0026#34;Logic out end\u0026#34;); } IEnumerator MyCoroutineLogicInner() { for (int i = 0; i \u0026lt; 5; i++) { yield return new WaitForSeconds(1); Console.WriteLine($\u0026#34;Coroutine inner {i}\u0026#34;); } } } ç¨‹åºä¸»é€»è¾‘, åˆ›å»ºè‡ªå®šä¹‰çš„æ¸¸æˆå¯¹è±¡, å¹¶æ‰§è¡Œä¸»å¾ªç¯:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 // åˆ›å»ºè‡ªå®šä¹‰çš„æ¸¸æˆå¯¹è±¡ new MyGameObject(); // è¦è¢«é”€æ¯çš„æ¸¸æˆå¯¹è±¡ List\u0026lt;GameObject\u0026gt; objectsToDestroy = new(); while (true) { // å¯¹æ‰€æœ‰æ¸¸æˆå¯¹è±¡æ‰§è¡Œ Start foreach (var obj in GameEngine.Current.AllGameObjects) { if (!obj.States.Started) { obj.Start(); obj.States.Started = true; } } // è°ƒç”¨æ‰€æœ‰æ¸¸æˆå¯¹è±¡çš„ Update foreach (var obj in GameEngine.Current.AllGameObjects) { if (obj.States.Destroyed) continue; obj.Update(); } // æ›´æ–°æ‰€æœ‰æ¸¸æˆå¯¹è±¡çš„åç¨‹ foreach (var obj in GameEngine.Current.AllGameObjects) { if (obj.States.Destroyed) continue; obj.UpdateCoroutines(); } // å°†éœ€è¦è¢«é”€æ¯çš„æ¸¸æˆå¯¹è±¡å­˜èµ·æ¥ objectsToDestroy.Clear(); foreach (var obj in GameEngine.Current.AllGameObjects) { if (obj.States.Destroyed) objectsToDestroy.Add(obj); } // ä»æ¸¸æˆå¼•æ“ä¸­ç§»å‡ºæ¸¸æˆå¯¹è±¡ foreach (var obj in objectsToDestroy) GameEngine.Current._allGameObjects.Remove(obj); } æ‰§è¡Œç»“æœ:\n1 2 3 4 5 6 7 Logic out Coroutine inner 0 Coroutine inner 1 Coroutine inner 2 Coroutine inner 3 Coroutine inner 4 Logic out end æ€»ç»“ ç»¼ä¸Šæ‰€è¿°, å¯ä»¥äº†è§£åˆ°, Unity åç¨‹çš„æœ¬è´¨æ— éå°±æ˜¯åœ¨åˆé€‚çš„å®é™…æ‰§è¡Œè¿­ä»£å™¨çš„ MoveNext æ–¹æ³•. å¯¹å½“å‰æ­£åœ¨ç­‰å¾…çš„å¯¹è±¡è¿›è¡Œæ¡ä»¶åˆ¤æ–­, å¦‚æœæ»¡è¶³æ¡ä»¶, åˆ™ MoveNext, å¦åˆ™å°±ä¸æ‰§è¡Œ.\n","date":"2023-12-13T15:37:16+08:00","permalink":"https://slimenull.com/p/20231213153716/","title":"[Unity] åŸºäºè¿­ä»£å™¨çš„åç¨‹åº•å±‚åŸç†è¯¦è§£"},{"content":"ä¼—æ‰€å‘¨çŸ¥, C# å¯ä»¥é€šè¿‡ yield è¯­å¥æ¥å¿«é€Ÿå‘ IEnumerator æˆ–è€… IEnumerable ç±»å‹çš„æ–¹æ³•è¿”å›å€¼è¿”å›ä¸€ä¸ªå…ƒç´ . ä½†å®ƒè¿˜æœ‰å¦å¤–ä¸€ä¸ªç‰¹æ€§, å°±æ˜¯å…¶å†…éƒ¨é€»è¾‘çš„æ‡’æ‰§è¡Œ. æ¯ä¸¤ä¸ª yield è¯­å¥ä¹‹é—´çš„é€»è¾‘éƒ½æ˜¯ä¸€ä¸ªçŠ¶æ€, åªæœ‰åœ¨è°ƒç”¨è¿­ä»£å™¨çš„ MoveNext æ–¹æ³•å, æ‰ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªçŠ¶æ€çš„é€»è¾‘.\nåœ¨æ–‡ç« ä¸­, ç¼–è¯‘åçš„ä»£ç å·²ç»ç»è¿‡ç®€åŒ–å’Œåˆ å‡, ä»¥ä¾¿äºç†è§£\nè¿­ä»£å™¨æ–¹æ³•çš„æ‡’æ‰§è¡Œ ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­:\n1 2 3 4 5 6 IEnumerator SomeLogic() { Console.WriteLine(\u0026#34;hello world\u0026#34;); yield return null; Console.WriteLine(\u0026#34;fuck you world\u0026#34;); } åœ¨è°ƒç”¨çš„æ—¶å€™, é€»è¾‘å¹¶ä¸ä¼šè¢«ç«‹å³æ‰§è¡Œ, åªæœ‰å¯¹å…¶è¿”å›çš„è¿­ä»£å™¨è°ƒç”¨ MoveNext çš„æ—¶å€™, æ‰ä¼šç»§ç»­æ‰§è¡Œ.\n1 2 3 4 var enumerator = SomeLogic(); enumerator.MoveNext(); // æ‰“å° hello world enumerator.MoveNext(); // æ‰“å° fuck you world è¿­ä»£å™¨æ–¹æ³•çš„ç¼–è¯‘ åœ¨ C# ä¸­, ä½¿ç”¨äº† yield è¯­å¥çš„, è¿”å› IEnumerator æˆ– IEnumerable çš„æ–¹æ³•, ä¼šç”±ç¼–è¯‘å™¨ç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨æˆ–å¯è¿­ä»£ç±»å‹, åœ¨ç±»å‹çš„å†…éƒ¨åŒ…å«è¯¥æ–¹æ³•çš„é€»è¾‘.\nä¾‹å¦‚ä¸Šé¢æåˆ°çš„ä»£ç , å®ƒä¼šè¢«ç¼–è¯‘æˆå¤§æ¦‚è¿™æ ·:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 IEnumerator SomeLogic() { return new SomeLogicEnumerator(); } private sealed class SomeLogicEnumerator : IEnumerator, IDisposable { private int state; private object current; object IEnumerator.Current { get { return current; } } public SomeLogicEnumerator(int state) { this.state = state; } void IDisposable.Dispose() { } private bool MoveNext() { int num = state; if (num != 0) { if (num != 1) { return false; } state = -1; Console.WriteLine(\u0026#34;AWA\u0026#34;); return false; } state = -1; Console.WriteLine(\u0026#34;QWQ\u0026#34;); current = null; state = 1; return true; } bool IEnumerator.MoveNext() { //ILSpy generated this explicit interface implementation from .override directive in MoveNext return this.MoveNext(); } void IEnumerator.Reset() { throw new NotSupportedException(); } } æˆ‘ä»¬å¯ä»¥çœ‹åˆ°, åœ¨è¿™ä¸ªè¿­ä»£å™¨ç±»å‹ä¸­, æœ‰ä¸€ä¸ª state å­—æ®µå­˜å‚¨äº†å½“å‰çš„çŠ¶æ€, è€Œåœ¨ MoveNext è¢«è°ƒç”¨æ—¶, ä¼šåˆ‡æ¢å½“å‰çŠ¶æ€, ç„¶åæ ¹æ®å½“å‰çŠ¶æ€æ‰§è¡Œå¯¹åº”é€»è¾‘.\nå½“ç„¶, å¦‚æœä½ çš„è¿­ä»£å™¨é€»è¾‘ç¨å¾®é•¿ä¸€äº›, å®ƒä¹Ÿæ˜¯å¯ä»¥å¤„ç†çš„.\n1 2 3 4 5 6 7 8 9 10 IEnumerator SomeLogic() { Console.WriteLine(\u0026#34;QWQ\u0026#34;); yield return 1; Console.WriteLine(\u0026#34;AWA\u0026#34;); yield return 2; Console.WriteLine(\u0026#34;QJFD\u0026#34;); yield return 3; Console.WriteLine(\u0026#34;JWOEIJFOIWE\u0026#34;); } å®ƒçš„ MoveNext å°±å˜æˆäº†è¿™æ ·:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 private bool MoveNext() { switch (state) { case 0: Console.WriteLine(\u0026#34;QWQ\u0026#34;); current = 1; state = 1; return true; case 1: Console.WriteLine(\u0026#34;AWA\u0026#34;); current = 2; state = 2; return true; case 2: Console.WriteLine(\u0026#34;QJFD\u0026#34;); current = 3; state = 3; return true; case 3: state = -1; Console.WriteLine(\u0026#34;JWOEIJFOIWE\u0026#34;); return false; default: return false; } } ","date":"2023-12-08T19:22:09+08:00","permalink":"https://slimenull.com/p/20231208192209/","title":"[C#] åŸºäº yield è¯­å¥çš„è¿­ä»£å™¨é€»è¾‘æ‡’æ‰§è¡Œ"},{"content":"åœ¨ Rust ä¸­, for è¯­å¥çš„æ‰§è¡Œä¾èµ–äºç±»å‹å¯¹äº IntoIterator çš„å®ç°, å¦‚æœæŸç±»å‹å®ç°äº†è¿™ä¸ª trait, é‚£ä¹ˆå®ƒå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ for è¿›è¡Œå¾ªç¯.\nç›´æ¥å®ç° åœ¨ Rust ä¸­, å¦‚æœä¸€ä¸ªç±»å‹å®ç°äº† Iterator, é‚£ä¹ˆå®ƒä¼šè¢«åŒæ—¶å®ç° IntoIterator, å…·ä½“é€»è¾‘æ˜¯è¿”å›è‡ªèº«, å› ä¸ºè‡ªèº«å°±æ˜¯è¿­ä»£å™¨.\nä½†æ˜¯å¦‚æœè‡ªèº«å°±æ˜¯è¿­ä»£å™¨çš„è¯, å°±æ„å‘³ç€è‡ªèº«å¿…é¡»å­˜å‚¨è¿­ä»£çŠ¶æ€, ä¾‹å¦‚å½“å‰è¿­ä»£çš„ä½ç½®. å¦‚æœæ˜¯è¿™æ ·çš„è¯, è¿­ä»£å™¨å°±åªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡. å†µä¸”è‡ªèº«ç›´æ¥è¢«ä¼ å…¥ into_iter æ–¹æ³•å, æ‰€æœ‰æƒè¢«è½¬ç§», è¯¥å¯¹è±¡å°±æ— æ³•è¢«å†æ¬¡ä½¿ç”¨äº†.\nå®šä¹‰ç±»å‹æœ¬èº«:\n1 2 3 4 5 struct IntRange { current: i32, step: i32, end: i32 } ç›´æ¥ä¸ºå…¶å®ç°è¿­ä»£å™¨:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 impl Iterator for IntRange { type Item = i32; fn next(\u0026amp;mut self) -\u0026gt; Option\u0026lt;Self::Item\u0026gt; { if self.current == self.end { return None; } else { let current = self.current; self.current += self.step; return Some(current); } } } ä½¿ç”¨è¯¥ç±»å‹:\n1 2 3 4 let range = IntRange { current: 0, step: 1, end: 10 }; for value in range { println!(\u0026#34;v: {}\u0026#34;, value); } æ‰€ä»¥ç»“è®ºæ˜¯, å¦‚æœä½ çš„ç±»å‹æ˜¯ä¸€æ¬¡æ€§ç”¨å“, ä½ å¯ä»¥ç›´æ¥å¯¹å…¶å®ç° Iterator\næ‰‹åŠ¨å®ç°è¿­ä»£å™¨ å¦‚æœä½ å‘æ‰‹åŠ¨å®ç°ç±»ä¼¼äºå®¹å™¨çš„ä¸œè¥¿, é‚£ä¹ˆå®ƒå½“ç„¶ä¸æ˜¯ä¸€æ¬¡æ€§çš„. æˆ‘ä»¬åº”è¯¥ä»¿ç…§ Rust ä¸­å¯¹åˆ‡ç‰‡çš„è¿­ä»£å™¨å®ç°.\nåŒæ—¶å®ç°ä¼šè½¬ç§»æ‰€æœ‰æƒå’Œä¸ä¼šè½¬ç§»æ‰€æœ‰æƒçš„ä¸¤ä¸ªè¿­ä»£å™¨ å¯¹ self å’Œ \u0026amp;self éƒ½å®ç° IntoIterator, è¿™æ ·å°±å¯ä»¥åšä¸è½¬ç§»æ‰€æœ‰æƒçš„è¿­ä»£äº† ç±»å‹æœ¬èº«:\n1 2 3 4 struct IntRange { step: i32, end: i32 } ä¸¤ä¸ªè¿­ä»£å™¨:\n1 2 3 4 5 6 7 8 9 struct IntRangeIter\u0026lt;\u0026#39;a\u0026gt; { range: \u0026amp;\u0026#39;a IntRange, current: i32, } struct IntRangeIntoIter { range: IntRange, current: i32, } ä¸¤ä¸ªè¿­ä»£å™¨å®ç°:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 impl Iterator for IntRangeIter\u0026lt;\u0026#39;_\u0026gt; { type Item = i32; fn next(\u0026amp;mut self) -\u0026gt; Option\u0026lt;Self::Item\u0026gt; { if self.current == self.range.end { return None; } else { let current = self.current; self.current += self.range.step; return Some(current); } } } impl Iterator for IntRangeIntoIter { type Item = i32; fn next(\u0026amp;mut self) -\u0026gt; Option\u0026lt;Self::Item\u0026gt; { if self.current == self.range.end { return None; } else { let current = self.current; self.current += self.range.step; return Some(current); } } } å®ç°è¿”å›ä¸¤ç§è¿­ä»£å™¨çš„ IntoIterator:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 impl\u0026lt;\u0026#39;a\u0026gt; IntoIterator for \u0026amp;\u0026#39;a IntRange { type Item = i32; type IntoIter = IntRangeIter\u0026lt;\u0026#39;a\u0026gt;; fn into_iter(self) -\u0026gt; Self::IntoIter { IntRangeIter { range: self, current: 0 } } } impl IntoIterator for IntRange { type Item = i32; type IntoIter = IntRangeIntoIter; fn into_iter(self) -\u0026gt; Self::IntoIter { IntRangeIntoIter { range: self, current: 0 } } } ä½¿ç”¨å®ƒ:\n1 2 3 4 5 6 7 8 9 10 11 let range = IntRange { step: 1, end: 10 }; // å¯ä»¥ä½¿ç”¨å¼•ç”¨æ¥è¿›è¡Œ for å¾ªç¯ for value in \u0026amp;range { println!(\u0026#34;v: {}\u0026#34;, value); } // ä¹Ÿå¯ä»¥ç›´æ¥å¯¹å…¶è¿›è¡Œ for å¾ªç¯ for value in range { println!(\u0026#34;v: {}\u0026#34;, value); } åˆ‡ç‰‡å¯¹è¿­ä»£çš„å®ç° æˆ‘ä»¬çŸ¥é“, Rust çš„åˆ‡ç‰‡æœ‰ä¸€ä¸ª iter æ–¹æ³•, å…¶å®å®ƒå°±ç›¸å½“äºå¯¹å½“å‰åˆ‡ç‰‡çš„å¼•ç”¨è°ƒç”¨ into_iter.\nå…¶å®, åœ¨è°ƒç”¨åˆ‡ç‰‡å¼•ç”¨çš„ into_iter æ–¹æ³•æ—¶, æœ¬è´¨ä¸Šå°±æ˜¯è°ƒç”¨çš„å…¶ iter æ–¹æ³•. æ–¹æ³•çš„å®ç°æ˜¯åœ¨ iter å†…çš„.\n1 2 3 4 5 let v = vec![1, 2, 3]; // ä¸‹é¢ä¸¤ä¸ªè°ƒç”¨æ˜¯ç­‰ä»·çš„ let iter1 = v.iter(); let iter2 = (\u0026amp;v).into_iter(); å¦‚æœä½ å¸Œæœ›å®ç°è¿­ä»£å˜é‡å¯å˜çš„è¿­ä»£å™¨, è¿˜å¯ä»¥ä¸º \u0026amp;mut T å®ç° into_iter, å½“ç„¶, Rust å†…éƒ¨å¯¹äºåˆ‡ç‰‡çš„å®ç°, ä¹Ÿæ˜¯è¿™æ ·çš„:\n1 2 3 4 5 let mut v = vec![1, 2, 3]; // ä¸‹é¢ä¸¤ä¸ªè°ƒç”¨æ˜¯ç­‰ä»·çš„ let mutIter = v.iter_mut(); let mutIter = (\u0026amp;mut v).into_iter(); æ€»ç»“ ä¸¤ç§ç±»å‹:\nå¯¹äºä¸€æ¬¡æ€§ä½¿ç”¨çš„ç±»å‹, å¯ä»¥ç›´æ¥å¯¹å…¶å®ç°è¿­ä»£å™¨ trait.\nå¯¹äºå®¹å™¨, ä¸åº”è¯¥å¯¹å®¹å™¨æœ¬èº«ç›´æ¥å®ç°è¿­ä»£å™¨, è€Œæ˜¯åº”è¯¥å•ç‹¬åˆ›å»ºè¿­ä»£å™¨ç±»å‹, ç„¶åå¯¹å…¶æœ¬èº«å®ç° IntoIterator\nä¸ºäº†æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨, è°ƒç”¨ä¹‹é—´çš„å®ç°åº”è¯¥æ˜¯è¿™æ ·:\nå®ç° T çš„ IntoIterator å®ç° \u0026amp;T çš„ iter å‡½æ•°, è¿”å›å€Ÿç”¨çš„è¿­ä»£å™¨. å®è®­ \u0026amp;mut T çš„ iter_mut å‡½æ•°, è¿”å›å¯å˜å€Ÿç”¨çš„è¿­ä»£å™¨. å¯¹ \u0026amp;T å’Œ \u0026amp;mut T å®ç° into_iter å‡½æ•°, å¹¶åœ¨å†…éƒ¨è°ƒç”¨åˆšåˆšå®ç°çš„ iter å’Œ iter_mut å‡½æ•°. è¿™æ ·, ç”¨æˆ·å°±å¯ä»¥ç›´æ¥è°ƒç”¨ iter æ–¹æ³•è·å¾—å€Ÿç”¨çš„è¿­ä»£å™¨, ç„¶åä½¿ç”¨ map, filter ç­‰æ–¹æ³•è¿›è¡Œé›†åˆçš„å¤æ‚æ“ä½œäº†\n","date":"2023-12-03T20:20:48+08:00","permalink":"https://slimenull.com/p/20231203202048/","title":"[Rust] å¯è¿­ä»£ç±»å‹, è¿­ä»£å™¨, å¦‚ä½•æ­£ç¡®çš„åˆ›å»ºè‡ªå®šä¹‰å¯è¿­ä»£ç±»å‹"},{"content":"Rust æ˜¯ä¸€ä¸ªæ— è¿è¡Œæ—¶çš„å¼ºç±»å‹è¯­è¨€, åŒ…å«å¾ˆå¤šé«˜çº§ç‰¹æ€§, ä¾‹å¦‚æ³›å‹, lambda ç­‰. åˆå› ä¸ºå…¶ç‹¬æœ‰çš„æ‰€æœ‰æƒæœºåˆ¶, æ‰€ä»¥ Rust çš„å†…å­˜å®‰å…¨è¦æ¯” C++ å®Œå–„è®¸å¤š.\né£æ ¼ Rust ä¸ C æ—è¯­è¨€ä¸ä¸€æ ·, C æ—è¯­è¨€åœ¨å®šä¹‰æ–¹æ³•, å˜é‡æ—¶, éƒ½æ˜¯ ç±»å‹ å…³é”®å­— è¿™æ ·çš„æ ¼å¼, ä¹Ÿå°±æ˜¯ç±»å‹å‰ç½®. Rust é‡‡ç”¨çš„æ˜¯ç±»å‹åç½®çš„é£æ ¼, å³ å…³é”®å­—: ç±»å‹\nåŸºæœ¬ç»“æ„ Rust çš„ç»“æ„ä¸ C++ æ˜¯å·®ä¸å¤šçš„, ä¸€ä¸ªæ–‡ä»¶çš„é¡¶éƒ¨å†™è¦å¼•å…¥çš„å†…å®¹, ä¸‹é¢æ˜¯ç»“æ„, å‡½æ•°, ç‰¹å¾çš„å£°æ˜.\n1 2 3 4 5 6 7 8 9 use std::io::stdout; use std::io::Write; fn main() { let hello_str = \u0026#34;Hello world\u0026#34;; let bytes = hello_str.as_bytes(); stdout().write_all(bytes).unwrap(); } åœ¨ä¸Šé¢ä»£ç ä¸­, std::io::stdout ä¸ std::io::Write éƒ½æ˜¯åœ¨ std::io ä¸‹, å®ƒä»¬å¯ä»¥é€šè¿‡èŠ±æ‹¬å·åˆå¹¶ä¸ºä»¥ä¸‹è¯­å¥:\n1 use std::io::{Write, stdout}; åŸºæœ¬ç±»å‹ æ•°å­—ç±»å‹\né•¿åº¦ æœ‰ç¬¦å· æ— ç¬¦å· 8 ä½ i8 u8 16 ä½ i16 u16 32 ä½ i32 u32 64 ä½ i64 u64 128 ä½ i128 u128 å¹³å°å¤§å° isize usize ä»¥åŠä¸‰åäºŒä½æµ®ç‚¹æ•° f32 ä¸å…­åå››ä½æµ®ç‚¹æ•° f64\nå¸ƒå°”(é€»è¾‘)å€¼ bool, å­—ç¬¦(Unicode)å€¼ char.\nRust ä¸­, ä¸€ä¸ªå­—ç¬¦å å››ä¸ªå­—èŠ‚, å¯ä»¥è¡¨è¾¾ä»»ä½• Unicode å­—ç¬¦, åŒ…å« Emoji è¡¨æƒ….\nå‡½æ•°å£°æ˜ ä½¿ç”¨ fn å…³é”®å­—æ¥å£°æ˜ä¸€ä¸ªå‡½æ•°.\n1 2 3 fn test1() { println!(\u0026#34;hello\u0026#34;); } å¦‚æœè¦å¸¦å‚æ•°, ç›´æ¥æŒ‰ç…§ç±»å‹åç½®é£æ ¼åœ¨æ‹¬å·å†…å†™æ˜.\n1 2 3 fn test2(number: i32) { println!(\u0026#34;number: {}\u0026#34;, number); } å¦‚æœè¦å¸¦è¿”å›å€¼, ç›´æ¥ä½¿ç”¨ç®­å¤´ -\u0026gt; æ¥æŒ‡å®š.\n1 2 3 fn test3(num1: i32, num2: i32) -\u0026gt; i32 { return num1 + num2; } å½“è¿”å›å€¼æ˜¯æœ€åä¸€è¡Œçš„æ—¶å€™, ä½ å¯ä»¥çœç•¥ return å’Œç»“å°¾çš„åˆ†å·, ç›´æ¥å°†è¡¨è¾¾å¼ä½œä¸ºè¿”å›å€¼è¿”å›.\n1 2 3 fn test3(num1: i32, num2: i32) -\u0026gt; i32 { num1 + num2 } å¦‚æœå‚æ•°æˆ–è€…è¿”å›å€¼æ˜¯å‡½æ•°ç±»å‹, ä½¿ç”¨ fn å…³é”®å­—å³å¯, ä¸‹é¢çš„ä¾‹å­ä¸­, resolver æ˜¯ä¸€ä¸ªå‡½æ•°, è¿™ä¸ªå‡½æ•°æœ‰ä¸¤ä¸ª i32 å‚æ•°, è¿”å›å€¼æ˜¯ i32\n1 2 3 fn test4(num1: i32, num2: i32, resolver: fn(i32, i32) -\u0026gt; i32) { println!(\u0026#34;{}\u0026#34;, resolver(num1, num2)); } å˜é‡å£°æ˜ ä½¿ç”¨ let å£°æ˜ä¸€ä¸ªå˜é‡.\n1 let num: i32 = 114514; å¤§éƒ¨åˆ†æƒ…å†µ, ä½ éƒ½å¯ä»¥çœç•¥æ‰ç±»å‹æ ‡è®°, Rust ä¼šè‡ªåŠ¨æ¨å¯¼å®ƒçš„ç±»å‹.\n1 let num = 114514; ä¸Šé¢å£°æ˜çš„å˜é‡, æ˜¯ä¸å¯å˜çš„. å¦‚æœä½ å¸Œæœ›å£°æ˜å¯å˜çš„å˜é‡, éœ€è¦ä½¿ç”¨ mut å…³é”®å­—.\n1 2 3 4 let mut num = 114514; // æ›´æ”¹å…¶å€¼ num = 666; æµç¨‹æ§åˆ¶ Rust ä¸­çš„ if ä¸ä½¿ç”¨æ‹¬å·, ç›´æ¥è·Ÿè¡¨è¾¾å¼ä»¥åŠè¯­å¥å³å¯.\n1 2 3 4 let num = 114514; if num == 114514 { println!(\u0026#34;value is 114514\u0026#34;); } åŒæ ·, Rust ä¸­ä¹Ÿæœ‰ else, else if å¯ç”¨, å’Œ C æ—è¯­è¨€ç±»ä¼¼, åªä¸è¿‡æ˜¯å°‘äº†æ‹¬å·.\n1 2 3 4 5 6 7 if num == 114514 { println!(\u0026#34;value is 114514\u0026#34;); } else if num == 1919810 { println!(\u0026#34;value is 1919810\u0026#34;); } else { println!(\u0026#34;invalid value\u0026#34;); } Rust ä¸­çš„ if ä¹Ÿå¯ä»¥å®ç°æ ¹æ®æ¡ä»¶è¿”å›ç‰¹å®šå€¼çš„éœ€æ±‚.\n1 2 3 4 5 6 let num = 114514; let tip = if num == 114514 { \u0026#34;å“¼å“¼å“¼\u0026#34; } else { \u0026#34;å•Šå•Šå•Š\u0026#34; }; åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­, å¯¹ num è¿›è¡Œåˆ¤æ–­, å¦‚æœå€¼ä¸º 114514, tip çš„å€¼ä¼šæ˜¯ \u0026ldquo;å“¼å“¼å“¼\u0026rdquo;, å¦åˆ™ä¸º \u0026ldquo;å•Šå•Šå•Š\u0026rdquo;. éœ€è¦æ³¨æ„çš„æ˜¯, å½“ä½ å¸Œæœ› if è¯­å¥å°†è¯­å¥ä½œä¸ºç»“æœè¿”å›æ—¶, ä¸è¦åœ¨è¯­å¥æœ«å°¾æ·»åŠ åˆ†å·.\nRust ä¸­çš„ for ç”¨æ¥å¯¹ä¸€ä¸ªå®ä¾‹è¿›è¡Œè¿­ä»£. ä½¿ç”¨ èµ·å§‹å€¼..ç»“æŸå€¼ è¿™æ ·çš„è¯­æ³•å¯ä»¥åˆ›å»ºç®€å•çš„æ•°å€¼èŒƒå›´. æ­é… for å³å¯å®ç°ç®€å•çš„æ•°å€¼å¾ªç¯.\n1 2 3 for i in 0..10 { println!(\u0026#34;current value: {}\u0026#34;, i); } åŒæ ·çš„, Rust ä¸­, continue å’Œ break ä¹Ÿå¯ç”¨.\n1 2 3 4 5 6 7 8 9 10 11 for i in 0..10 { println!(\u0026#34;current value: {}\u0026#34;, i); if i == 3 { continue; } if i == 7 { break; } } å€¼å¾—ä¸€æçš„æ˜¯, Rust åœ¨å¾ªç¯æ—¶, æ˜¯å…è®¸å¯¹é›†åˆå…ƒç´ è¿›è¡Œä¿®æ”¹çš„. åªéœ€è¦å°†è¿­ä»£å˜é‡ä½¿ç”¨ mut ä¿®é¥°.\n1 2 3 4 let arr = [1, 2, 3, 4]; for mut ele in arr { ele = ele * 2; } å¦‚æœä½ éœ€è¦ä¸€ä¸ª \u0026lsquo;æ­»å¾ªç¯\u0026rsquo;, å¯ä»¥ç›´æ¥ä½¿ç”¨ loop è¯­å¥.\n1 2 3 4 5 6 7 8 9 10 11 12 let mut i = 0; loop { println!(\u0026#34;current value: {}\u0026#34;, i); if i == 3 { continue; } if i == 10 { break; } } Rust çš„ loop è¿˜æ”¯æŒç»™å¾ªç¯è¯­å¥åŠ ä¸Šæ ‡ç­¾, ç„¶ååœ¨å†…éƒ¨å¾ªç¯ä¸­ç›´æ¥ä¸­æ–­æŒ‡å®šæ ‡ç­¾çš„å¾ªç¯.\n1 2 3 4 5 6 \u0026#39;loop_out: loop { loop { // åœ¨å†…éƒ¨å¾ªç¯ç›´æ¥ä¸­æ–­æœ€å¤–éƒ¨å¾ªç¯ break \u0026#39;loop_out; } } Rust çš„ loop è¿˜å¯ä»¥ä½œä¸ºä¸€ä¸ªå¸¦è¿”å›å€¼çš„è¡¨è¾¾å¼ä½¿ç”¨. åªéœ€è¦åœ¨ break çš„æ—¶å€™æä¾›è¿”å›å€¼å³å¯.\n1 2 3 4 5 6 7 8 let mut value = 0; let result = loop { value += 1; if value == 10 { break value * 2; } }; Rust çš„ match è¯­å¥å¯ä»¥è¿‘ä¼¼ç†è§£ä¸º if çš„é«˜çº§è¯­æ³•. ä¼ å…¥ä¸€ä¸ªå€¼, ä»¥åŠåŒ¹é…æ¡ä»¶å’Œè¯­å¥, å¯ä»¥æ‰§è¡Œå¯¹åº”è¯­å¥.\n1 2 3 4 5 6 let num = 114514; match num { 114514 =\u0026gt; println!(\u0026#34;hello\u0026#34;), 1919810 =\u0026gt; println!(\u0026#34;world\u0026#34;), _ =\u0026gt; { } } åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­, ä¼šå¯¹ num è¿›è¡ŒåŒ¹é…, å¹¶ä¸”åœ¨å€¼ä¸º 114514 å’Œ 1919810 æ—¶æ‰§è¡Œä¸åŒçš„è¯­å¥, å¦‚æœæ‰€æœ‰æ¡ä»¶éƒ½æ²¡æœ‰åŒ¹é…åˆ°, åˆ™ä¼šä½¿ç”¨ _ =\u0026gt; { } è¡¨ç¤ºçš„é»˜è®¤æƒ…å†µ, åœ¨è¿™é‡Œæ˜¯ç©ºè¯­å¥, ä¹Ÿå°±æ˜¯ä»€ä¹ˆä¹Ÿä¸æ‰§è¡Œ.\nåŒæ—¶, Rust çš„ match è¯­å¥ä¹Ÿå¯ä»¥ä½œä¸ºè¡¨è¾¾å¼è¿”å›ä¸€ä¸ªå€¼, åªéœ€è¦ match å†…çš„è¯­å¥æ˜¯æœ‰è¿”å›å€¼çš„è¡¨è¾¾å¼å³å¯.\n1 2 3 4 5 let result = match num { 114514 =\u0026gt; \u0026#34;hello\u0026#34;, 1919810 =\u0026gt; \u0026#34;world\u0026#34;, _ =\u0026gt; \u0026#34;\u0026#34; }; åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­, match å¯¹ num è¿›è¡ŒåŒ¹é…, å¹¶ä¸”åœ¨å€¼ä¸º 114514 å’Œ 1919810 çš„æ—¶å€™è¿”å›ä¸åŒçš„å­—ç¬¦ä¸², æœ€ç»ˆèµ‹å€¼ç»™ result. å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°æŒ‡å®šæ¡ä»¶, åˆ™æ˜¯ä½¿ç”¨é»˜è®¤è¯­å¥ _ =\u0026gt; \u0026quot;\u0026quot; è¿”å›ä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸².\néœ€è¦æ³¨æ„çš„æ˜¯, åœ¨ match è¯­å¥ä¸­, ä½¿ç”¨çš„æ˜¯ =\u0026gt; è€Œä¸æ˜¯ -\u0026gt;.\nå­—ç¬¦ä¸² / Strings åœ¨ Rust ä¸­, å­—ç¬¦ä¸²åˆ†ä¸¤ç§, ä¸€ç§æ˜¯ str, å®ƒè¡¨ç¤ºå­—ç¬¦ä¸²æœ¬èº«, ä¸å¯å˜. ç”±äº str ä½œä¸ºå­—ç¬¦ä¸²æœ¬èº«, å…¶å¤§å°æ˜¯ä¸ç¡®å®šçš„, æ‰€ä»¥å®ƒæ— æ³•ä½œä¸ºæœ¬åœ°å˜é‡å­˜å‚¨. æˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶, ä½¿ç”¨çš„éƒ½æ˜¯ \u0026amp;str, ä¹Ÿå°±æ˜¯ str çš„å¼•ç”¨.\n1 let hello1 : \u0026amp;str = \u0026#34;ä½ å¥½ä¸–ç•Œ\u0026#34;; å¦ä¸€ç§æ˜¯ String, æœ¬è´¨æ˜¯æ•°ç»„çš„åŒ…è£…, å®ƒæ˜¯å¯å˜çš„. ä½ å¯ä»¥å¯¹å…¶è¿›è¡Œæ›´æ”¹. ä½ å¯ä»¥å°†å®ƒç†è§£ä¸ºå…¶ä»–è¯­è¨€ä¸­å¸¸è§çš„ StringBuilder\n1 2 3 4 let hello2 : String = String::new(); hello2.add(\u0026#34;å‘å­—ç¬¦ä¸²ä¸­æ·»åŠ ä¸€äº›å†…å®¹\u0026#34;); hello2.add(\u0026#34;, ä½ å¥½å—?\u0026#34;) å¦‚æœä½ éœ€è¦å°†å­—ç¬¦ä¸²ç¼–ç ä¸ºå­—èŠ‚æ•°ç»„, å¯ä»¥ç›´æ¥ä½¿ç”¨ as_bytes å‡½æ•°\nç”±äº Rust ä¸­å­—ç¬¦ä¸²ä½¿ç”¨ UTF-8 å­˜å‚¨, æ‰€ä»¥è¯¥å‡½æ•°çš„ç»“æœå³ä¸ºå­—ç¬¦ä¸²ä½¿ç”¨ UTF-8 ç¼–ç åçš„ç»“æœ.\n1 2 let tip = \u0026#34;hello world\u0026#34;; let bytes = tip.as_bytes(); å¦‚æœå¸Œæœ›ä» UTF-8 è½¬ä¸º Rust å­—ç¬¦ä¸², å¯ä»¥ä½¿ç”¨ std::str::from_utf8 å‡½æ•°è¿›è¡Œè½¬æ¢.\n1 2 3 // bytes ä¸ºéœ€è¦è§£ç çš„æ•°æ® let bytes : \u0026amp;[u8]; let some_str = std::str::from_utf8(bytes); æ•°ç»„ / Arrays åœ¨ Rust ä¸­, æ•°ç»„æ˜¯é•¿åº¦ä¸å¯å˜çš„å®¹å™¨, å¹¶ä¸”å…¶å¤§å°å¿…é¡»åœ¨ç¼–è¯‘æ—¶ç¡®å®š. å…¶ç±»å‹è¡¨è¾¾ä¸º: [ç±»å‹; é•¿åº¦].\n1 let arr : [i32; 4]; åœ¨ä½¿ç”¨è¿™ä¸ªæ•°ç»„ä¹‹å‰, æˆ‘ä»¬è¿˜éœ€è¦å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–, å¯ä»¥ä½¿ç”¨ä¸­æ‹¬å·æŒ‡å®šå…¶æ¯ä¸€ä¸ªå…ƒç´ çš„å€¼.\n1 let arr : [i32; 4] = [1, 2, 3, 4]; å½“ç„¶, è¿™é‡Œçš„æ•°ç»„ç±»å‹ä¹Ÿå¯ä»¥è¢«çœç•¥æ‰.\n1 let arr = [1, 2, 3, 4]; å¦‚æœä½ å¸Œæœ›ç›´æ¥åˆå§‹åŒ–ä¸€ä¸ªæŒ‡å®šé•¿åº¦çš„æ•°ç»„, å¯ä»¥ä½¿ç”¨ä¸­æ‹¬å·ä»¥åŠåˆ†å·. å°±åƒæ•°ç»„çš„ç±»å‹è¡¨ç¤º.\n1 2 let arr : [i32; 4] = [0; 4]; let arr = [0; 4]; å®¹å™¨ / Collections å¦‚æœä½ éœ€è¦å¯å˜çš„å®¹å™¨, å¯ä»¥ä½¿ç”¨ Vec\u0026lt;T\u0026gt;, å½“ç„¶, åªæœ‰åœ¨å£°æ˜æ—¶ä½¿ç”¨ mut å…³é”®å­—, å®ƒæ‰å¯å˜.\n1 let mut v : Vec\u0026lt;i32\u0026gt; = Vec::\u0026lt;i32\u0026gt;::new(); ä½ å¯ä»¥å°†å®ƒç®€å†™ä¸ºè¿™æ ·:\n1 2 3 4 5 // æŒ‡å®šå˜é‡ç±»å‹, Vec çš„æ³›å‹å‚æ•°ä¼šè‡ªåŠ¨æ¨å¯¼ let mut v : Vec\u0026lt;i32\u0026gt; = Vec::new(); // æŒ‡å®šæ³›å‹å‚æ•°, å˜é‡çš„ç±»å‹ä¼šè‡ªåŠ¨æ¨å¯¼. let mut v = Vec::\u0026lt;i32\u0026gt;::new(); ä½¿ç”¨ len å‡½æ•°è·å–å…¶é•¿åº¦:\n1 let len = v.len(); ç”¨ push å’Œ pop æ–¹æ³•å¯ä»¥åœ¨ Vec\u0026lt;T\u0026gt; çš„ç»“å°¾å¢åˆ å…ƒç´ .\n1 2 v.push(114514); v.pop(); ä½¿ç”¨ insert å’Œ remove å¯ä»¥åœ¨æŒ‡å®šä½ç½®å¢åˆ å…ƒç´ .\n1 2 v.insert(0, 114514); v.remove(0); å“ˆå¸Œæ˜ å°„(HashMap)ç”¨äºå­˜å‚¨åŸºäºå“ˆå¸Œå€¼çš„é”®å€¼æ˜ å°„, åƒæ˜¯å…¶ä»–è¯­è¨€ä¸­çš„ \u0026ldquo;Dictionary\u0026rdquo; æˆ–è€… \u0026ldquo;Hashtable\u0026rdquo;,\n1 let mut hm : HashMap\u0026lt;\u0026amp;str, \u0026amp;str\u0026gt; = HashMap::\u0026lt;\u0026amp;str, \u0026amp;str\u0026gt;::new(); ç®€å†™:\n1 2 let mut hm : HashMap\u0026lt;\u0026amp;str, \u0026amp;str\u0026gt; = HashMap::new(); let mut hm = HashMap::\u0026lt;\u0026amp;str, \u0026amp;str\u0026gt;::new(); ä½¿ç”¨ len å‡½æ•°è·å–å…¶é•¿åº¦:\n1 let len = hm.len(); insert() æ–¹æ³•ç”¨äºæ’å…¥æˆ–æ›´æ–°ä¸€ä¸ªé”®å€¼å¯¹åˆ°å“ˆå¸Œæ˜ å°„ä¸­, å¦‚æœé”®å·²ç»å­˜åœ¨, åˆ™æ›´æ–°ä¸ºæ–°çš„é”®å€¼å¯¹, å¹¶åˆ™è¿”å›æ—§çš„å€¼. å¦‚æœé”®ä¸å­˜åœ¨åˆ™æ‰§è¡Œæ’å…¥æ“ä½œå¹¶è¿”å› None.\n1 hm.insert(\u0026#34;qwq\u0026#34;, \u0026#34;awa\u0026#34;); ä»å“ˆå¸Œæ˜ å°„ä¸­è·å–å’Œåˆ é™¤å€¼.\n1 2 let valueOption = hm.get(\u0026amp;\u0026#34;qwq\u0026#34;); let valueOption = hm.remove(\u0026amp;\u0026#34;qwq\u0026#34;); ä¹Ÿå¯ä»¥ä½¿ç”¨ for å¯¹å“ˆå¸Œæ˜ å°„è¿›è¡Œå¾ªç¯:\n1 2 3 for (k, v) in hm { println!(\u0026#34;Key: {}, Value: {}\u0026#34;, k, v); } å“ˆå¸Œé›†åˆæ˜¯åŸºäºå“ˆå¸Œå€¼çš„å…ƒç´ ä¸é‡å¤å®¹å™¨, å¸¸ç”¨äºå»é‡æˆ–å¿«é€ŸæŸ¥æ‰¾å…ƒç´ æ˜¯å¦å­˜åœ¨.\n1 let mut hs: HashSet\u0026lt;i32\u0026gt; = HashSet::new(); è·å–é•¿åº¦, æ’å…¥æ•°æ®, åˆ é™¤æ•°æ®, åˆ¤æ–­æ•°æ®æ˜¯å¦å·²ç»å­˜åœ¨:\n1 2 3 4 let len = hs.len(); let result = hs.insert(123); let result = hs.remove(\u0026amp;123); let result = hs.contains(\u0026amp;123); ç»“æ„ / Structures ä½¿ç”¨ struct å…³é”®å­—å¯ä»¥åˆ›å»ºä¸€ä¸ªç»“æ„ä½“.\n1 2 3 4 struct Point { x: i32, y: i32, } åœ¨ä½¿ç”¨ç»“æ„ä½“ç±»å‹çš„å˜é‡æ—¶, è¯¥å˜é‡å¿…é¡»è¢«åˆå§‹åŒ–.\n1 2 let p : Point = Point { x: 1, y: 3 }; let p = Point { x: 1, y: 3 }; ä½ å¯ä»¥å¯¹å®ƒçš„æˆå‘˜è¿›è¡Œèµ‹å€¼, å–å€¼.\n1 2 p.x = 114514; let x = p.x; å¦‚æœéœ€è¦ä¸ºè¯¥ç±»å‹æ·»åŠ ä¸€äº›æ–¹æ³•, ä½¿ç”¨ impl å…³é”®å­—.\n1 2 3 4 5 impl Point { fn new(x: i32, y: i32) -\u0026gt; Point { Point { x: x, y: y } } } ç°åœ¨, ä½ å¯ä»¥ä½¿ç”¨ Point::new æ¥åˆ›å»ºä¸€ä¸ª Point äº†.\n1 let p = Point::new(123, 456); å¦‚æœä½ è¦ä¸ºè¯¥ç±»å‹çš„å®ä¾‹åˆ›å»ºä¸€äº›å‡½æ•°, åªéœ€è¦åœ¨ç¼–å†™å‡½æ•°æ—¶, å°†ç¬¬ä¸€ä¸ªå‚æ•°å£°æ˜ä¸º self å³å¯.\n1 2 3 4 5 impl Point { fn output(self: \u0026amp;Self) { println!(\u0026#34;Point, x: {}, y: {}\u0026#34;, self.x, self.y); } } ç°åœ¨ä½ å¯ä»¥é€šè¿‡ä¸€ä¸ª Point å®ä¾‹æ¥è°ƒç”¨ output å‡½æ•°è¿›è¡Œè¾“å‡ºäº†.\n1 p.output(); åœ¨ä¸Šè¿°ä»£ç ä¸­, self å…³é”®å­—è¡¨ç¤ºå½“å‰å®ä¾‹, Self å…³é”®å­—è¡¨ç¤ºå½“å‰ç±»å‹, å½“ç„¶, ä½ ä¹Ÿå¯ä»¥å°†å®ƒå†™æˆå…·ä½“çš„ç±»å‹. ä¸‹é¢çš„ä»£ç éƒ½æ˜¯æœ‰æ•ˆçš„å®ä¾‹å‡½æ•°å®šä¹‰:\n1 2 3 4 5 6 7 impl Point { // ä¸ä½¿ç”¨ Self å…³é”®å­—, è€Œæ˜¯ä½¿ç”¨å…·ä½“çš„ Point ç±»å‹ fn output1(self: \u0026amp;Point) { } // ä¸ä½¿ç”¨ Self å…³é”®å­—, è€Œæ˜¯è®©å…¶è‡ªåŠ¨æ¨å¯¼ç±»å‹ fn output2(\u0026amp;self) { } } ç‰¹å¾ / Traits åœ¨ Rust ä¸­, trait è¡¨ç¤ºæŸç§ç‰¹å¾. ä¾‹å¦‚ \u0026ldquo;å¯è¿­ä»£\u0026rdquo;, \u0026ldquo;å¯æ˜¾ç¤º\u0026rdquo;, \u0026ldquo;å¯è°ƒè¯•\u0026rdquo;. å®ƒç±»ä¼¼äºå…¶ä»–ç¼–ç¨‹è¯­è¨€çš„æ¥å£. ä½¿ç”¨ trait å…³é”®å­—åˆ›å»ºä¸€ä¸ªç‰¹å¾.\n1 2 3 trait TestTrait { fn some_func(); } åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­, æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º TestTrait çš„ trait, å®ƒè§„å®š, éœ€è¦æœ‰ä¸€ä¸ªåä¸º some_func çš„æ— å‚æ— è¿”å›å€¼å‡½æ•°.\nè¦ä½¿æŸä¸ªç»“æ„å®ç°ä¸€ä¸ª trait, ä½¿ç”¨ impl ... for ... è¯­æ³•.\n1 2 3 4 5 impl TestTrait for Point { fn some_func() { println!(\u0026#34;hello world from struct Point\u0026#34;); } } trait ä¸»è¦æ˜¯ä¸æ³›å‹æ­é…ä½¿ç”¨. åŒæ—¶å’Œå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸ä¸€æ ·çš„æ˜¯, trait æ— æ³•ç›´æ¥ä½œä¸ºä¸€ä¸ªå‡½æ•°çš„å‚æ•°ç±»å‹. ä½ éœ€è¦ä½¿ç”¨æ³›å‹, ç„¶åæŒ‡å®šæ³›å‹éœ€è¦å®ç°æŸ trait, ç„¶åå°†è¯¥æ³›å‹ä½œä¸ºå‡½æ•°çš„å‚æ•°ç±»å‹ä½¿ç”¨.\ntrait å¯ä»¥ç”¨å†…ç½®çš„å®ç°, åœ¨è¿™æ–¹é¢, å®ƒåˆåƒå…¶ä»–è¯­è¨€çš„æŠ½è±¡ç±». ä¾‹å¦‚, æŸä¸ª trait éœ€è¦ç±»å‹å®ç°å‡½æ•° A, è€Œå‡½æ•° B ç”±è¯¥ trait è‡ªå·±å®ç°, å†…éƒ¨é€»è¾‘ä¾èµ–äºå‡½æ•° A. è¿™æ—¶, åªè¦æŸä¸ªç±»å‹å®ç°äº†è¿™ä¸ª trait å¹¶ç¼–å†™å‡½æ•° A çš„å®ç°, ä»–å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ trait å†…çš„å‡½æ•° B.\n1 2 3 4 5 6 7 8 9 10 11 12 trait TestTrait { fn get_string(\u0026amp;self) -\u0026gt; String; fn print_string(\u0026amp;self) { println!(\u0026#34;{}\u0026#34;, self.get_string()); } } impl TestTrait for Point { fn get_string(\u0026amp;self) -\u0026gt; String { return format!(\u0026#34;Point, x: {}, y: {}\u0026#34;, self.x, self.y); } } 1 2 let p = Point::new(1, 2); p.print_string(); ç‰¹æ€§ / Attributes Rust ä¸­çš„ç‰¹æ€§(Attribute)æ˜¯ä¸€ç§æ ‡è®°. ç±»ä¼¼äº C# çš„ Attribute æˆ–è€… Python ä¸­çš„ Decorators, åœ¨åšä¸Šæ ‡è®°å, å³å¯æ‹¥æœ‰æŸç§è¡Œä¸º.\nä¸‹é¢ä½¿ç”¨ derive ç‰¹æ€§æ¼”ç¤ºç‰¹æ€§çš„ä½¿ç”¨.\n1 2 3 4 5 #[derive(PartialEq, Eq)] struct Point { x: i32, y: i32 } åœ¨ä»¥ä¸Šä»£ç ä¸­, æˆ‘ä»¬ä¸º Point ç»“æ„æ·»åŠ äº† derive ç‰¹æ€§, è¿™ä¸ªç‰¹æ€§ç”¨äºè‡ªåŠ¨å®ç°æŒ‡å®šçš„ trait, åœ¨è¿™é‡Œ, æˆ‘ä»¬æŒ‡å®šäº† PartialEq å’Œ Eq.\nåœ¨å®ç°äº† PartialEq å’Œ Eq å, æˆ‘ä»¬çš„ Point ç»“æ„ç°åœ¨å¯ä»¥ä½¿ç”¨ == å’Œ != è¿ç®—ç¬¦äº†.\n1 2 3 4 5 6 let p1 = Point { x: 123, y: 456 }; let p2 = Point { x: 345, y: 829 }; if p1 == p2 { println!(\u0026#34;ä¸¤ç‚¹ç›¸ç­‰\u0026#34;) } æšä¸¾ / Enumerations Rust ä¸­çš„æšä¸¾å’Œå…¶ä»–è¯­è¨€ä¸­çš„æšä¸¾æœ‰å¾ˆå¤§ä¸åŒ. å®ƒæšä¸¾å¯ç†è§£ä¸º \u0026ldquo;æƒ…å†µ\u0026rdquo;, æ—¢å¯ä»¥ä½œä¸ºç±»ä¼¼äº C# ä¸­çš„çº¯å€¼ç±»å‹ä½¿ç”¨, ä¹Ÿå¯ä»¥åƒ Java çš„æšä¸¾ä¸€æ ·åœ¨æšä¸¾ä¸­å­˜å‚¨æ•°æ®.\nRust å¯¹äºæšä¸¾çš„ä¼˜åŒ–æ˜¯å¾ˆå¥½çš„, ä¸åƒ Java ä¸€èˆ¬æ˜¯åŸºäºå †ä¸­å­˜å‚¨çš„.\n1 2 3 enum ColorChannel { Red, Green, Blue } åœ¨ä»¥ä¸Šçš„ä¾‹å­ä¸­, æˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªæœ€ç®€å•çš„æšä¸¾, è¿™ä¸ªæšä¸¾ä»…åŒ…å«ä¸‰ç§æƒ…å†µ, å³ \u0026lsquo;çº¢\u0026rsquo;, \u0026lsquo;ç»¿\u0026rsquo;, \u0026lsquo;è“\u0026rsquo;. åœ¨è¿™ç§æƒ…å†µä¸‹, ä½ å¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬å®šä¹‰äº†ä¸‰ä¸ªæ•°å­—å€¼å¸¸é‡, é€šè¿‡ ColorChannel å¯ä»¥è®¿é—®å®ƒä»¬.\n1 2 3 let color_channel1 = ColorChannel::Red; let color_channel2 = ColorChannel::Green; let color_channel3 = ColorChannel::Blue; ç„¶åä½¿ç”¨æ¨¡å¼åŒ¹é…è¿›è¡Œåˆ¤æ–­.\n1 2 3 4 match color_channel1 { ColorChannel::Red =\u0026gt; println!(\u0026#34;is red\u0026#34;), _ =\u0026gt; {} } åœ¨è¿™é‡Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨ if è¯­å¥è¿›è¡Œåˆ¤æ–­, å› ä¸ºæˆ‘ä»¬å®šä¹‰çš„æšä¸¾æ²¡æœ‰å®ç°åä¸º PartialEq çš„ trait, è¿™æ˜¯å†…ç½®äº rust çš„ trait, ç”¨äºé‡è½½ == å’Œ != è¿ç®—ç¬¦.\nä¸‹é¢æˆ‘ä»¬å°†ä»¥ä¸€ä¸ªä¸åŒæƒ…å†µçš„é¢œè‰²è®²è¿° Rust ä¸­æšä¸¾å­˜å‚¨å€¼çš„ç”¨æ³•.\n1 2 3 4 enum Color { Rgb(u8, u8, u8), Channel(ColorChannel) } åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­, Color åˆ†æˆäº†ä¸¤ç§æƒ…å†µ, ä¸€ç§æ˜¯ Rgb, ä¸€ç§æ˜¯ Channel. å½“æ˜¯ Rgb çš„æ—¶å€™, å®ƒå­˜å‚¨ä¸‰ä¸ªæ— ç¬¦å·å…«ä½æ•´æ•°, å½“æ˜¯ Channel çš„æ—¶å€™, å®ƒå­˜å‚¨ä¸€ä¸ª ColorChannel æšä¸¾.\næˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒ:\n1 2 3 4 5 6 7 8 9 10 11 let color = Color::Rgb(89, 43, 233); match color { Color::Rgb(r, g, b) =\u0026gt; { println!(\u0026#34;é¢œè‰²æ˜¯ RGB å€¼. R: {}, G: {}, B: {}\u0026#34;, r, g, b); }, Color::Channel(channel) =\u0026gt; { println!(\u0026#34;é¢œè‰²æ˜¯é€šé“, {}\u0026#34;, channel); } } æ³¨æ„, å› ä¸ºè¿™é‡Œéœ€è¦å°† ColorChannel æ‰“å°è¾“å‡º, æ‰€ä»¥ ColorChannel éœ€è¦å®ç°åä¸º Display çš„ trait.\nåœ¨è¿™ç§æœ‰å­˜å‚¨å€¼çš„æƒ…å†µä¸‹, æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ if let çš„è¯­å¥å¯¹å…¶è¿›è¡Œåˆ¤æ–­:\n1 2 3 if let Color::Rgb(r, g, b) = color { println!(\u0026#34;é¢œè‰²æ˜¯ RGB å€¼. R: {}, G: {}, B: {}\u0026#34;, r, g, b); } æˆ‘ä»¬è¿˜å¯ä»¥ä¸ºæšä¸¾ä¸­çš„å€¼å‘½å, è¿™æ ·å°±å¯ä»¥:\n1 2 3 4 enum Color { Rgb { r: u8, g: u8, b:u8 }, Channel { channel: ColorChannel } } ä¸è¿‡è¿™æ ·çš„è¯, ä½¿ç”¨æ–¹å¼ä¹Ÿéœ€è¦åšäº›æ”¹åŠ¨:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 let color = Color::Rgb { r: 23, g: 12, b: 129 }; match color { Color::Rgb { r, g, b } =\u0026gt; { println!(\u0026#34;é¢œè‰²æ˜¯ RGB å€¼. R: {}, G: {}, B: {}\u0026#34;, r, g, b); }, Color::Channel { channel }=\u0026gt; { println!(\u0026#34;é¢œè‰²æ˜¯é€šé“, {}\u0026#34;, channel); } } if let Color::Rgb { r, g, b } = color { println!(\u0026#34;é¢œè‰²æ˜¯ RGB å€¼. R: {}, G: {}, B: {}\u0026#34;, r, g, b); } æ³›å‹ / Generic æ³›å‹æ˜¯ç¼–ç¨‹è¯­è¨€ä¸­æé‡è¦çš„ä¸€ä¸ªæ¦‚å¿µ. é€šè¿‡ä½¿ç”¨æ³›å‹, å¯ä»¥å®ç°ä¸€äº›é€»è¾‘çš„å¤ç”¨. ä¾‹å¦‚, å½“æˆ‘ä»¬è‡ªå®šä¹‰çš„ç»“æ„å®ç° Rust å†…ç½®çš„æŸäº› trait æ—¶, æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ Rust å†…çš„æŸäº›å‡½æ•°.\nä¸‹é¢æˆ‘ä»¬å°†è‡ªå·±å®šä¹‰ä¸€ä¸ªç®€å•çš„ trait å’Œä¸€ä¸ªç®€å•çš„æ³›å‹å‡½æ•°.\n1 2 3 4 5 6 7 trait I32Printer { fn print(\u0026amp;self, value: i32); } fn print_i32\u0026lt;Printer: I32Printer\u0026gt;(value: i32, printer: Printer) { printer.print(value); } åœ¨ä¸Šé¢çš„é€»è¾‘ä¸­, æˆ‘ä»¬åœ¨ print_i32 åæ·»åŠ äº†å°–æ‹¬å·, å°–æ‹¬å·ä¸­, å†’å·çš„å‰åŠéƒ¨åˆ†è¡¨ç¤ºéœ€è¦ä½¿ç”¨çš„æ³›å‹ç±»å‹, å†’å·åé¢æ˜¯å¯¹æ³›å‹ç±»å‹çš„çº¦æŸ, è¡¨ç¤ºè¯¥æ³›å‹ç±»å‹å¿…é¡»å®ç° I32Printer è¿™ä¸ª trait.\nåœ¨å‚æ•°åˆ—è¡¨ä¸­, æˆ‘ä»¬å®šä¹‰äº† printer å‚æ•°, æŒ‡å®šå…¶ç±»å‹ä¸ºæˆ‘ä»¬å®šä¹‰çš„æ³›å‹ç±»å‹. è¿™æ ·, å®ƒå°±å¯ä»¥æ¥å—ä»»ä½•å®ç°äº† I32Printer çš„ç±»å‹.\næ¥ä¸‹æ¥æˆ‘ä»¬å®šä¹‰ä¸¤ä¸ªç»“æ„, å®ç° I32Printer, ç¼–å†™ä¸åŒçš„æ‰“å°é€»è¾‘.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 struct SimpleI32Printer; struct AnotherI32Printer\u0026lt;\u0026#39;a\u0026gt; { prompt: \u0026amp;\u0026#39;a str, } impl I32Printer for SimpleI32Printer { fn print(\u0026amp;self, value: i32) { println!(\u0026#34;{}\u0026#34;, value); } } impl I32Printer for AnotherI32Printer\u0026lt;\u0026#39;_\u0026gt; { fn print(\u0026amp;self, value: i32) { println!(\u0026#34;{}: {}\u0026#34;, self.prompt, value); } } åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­, æˆ‘ä»¬å®šä¹‰äº† SimpleI32Printer å’Œ AnotherI32Printer ä¸¤ä¸ªç»“æ„, å¹¶ä¸”éƒ½ä¸ºå®ƒä»¬å®ç°äº† I32Printer çš„ trait.\nç°åœ¨, å¯ä»¥è°ƒç”¨æ–¹æ³•, ä¼ å…¥ä¸åŒçš„ printer, ç„¶åæŸ¥çœ‹è¿è¡Œç»“æœäº†.\n1 2 3 4 5 let printer1 = SimpleI32Printer; let printer2 = AnotherI32Printer { prompt: \u0026#34;Number:\u0026#34; }; print_i32::\u0026lt;SimpleI32Printer\u0026gt;(114514, printer1); print_i32::\u0026lt;AnotherI32Printer\u0026gt;(1919810, printer2); å¯ä»¥çœ‹åˆ°, å®ƒæ ¹æ®æˆ‘ä»¬ä¼ å…¥çš„ä¸åŒç±»å‹å®ä¾‹, æœ‰äº†ä¸åŒçš„è¡Œä¸º.\nåœ¨å…¶ä»–è¯­è¨€, ä¾‹å¦‚ C# å’Œ Java ä¸­, ä½ å¯ä»¥ç›´æ¥å°†æ¥å£ä½œä¸ºå‚æ•°ç±»å‹æŒ‡å®š. ä½†æ˜¯åœ¨ Rust ä¸­, ä½ å¿…é¡»åˆ›å»ºä¸€ä¸ªæ³›å‹å‚æ•°æ¥åšè¿™æ ·çš„é€»è¾‘. Rust ä¸­, ä¸€åˆ‡å‚æ•°, å˜é‡çš„å¤§å°éƒ½åº”è¯¥æ˜¯å›ºå®šçš„. å€˜è‹¥æˆ‘ä»¬å…è®¸ trait ä½œä¸ºå‚æ•°ç±»å‹, é‚£ä¹ˆç±»å‹çš„å¤§å°å°†ä¸å†ç¡®å®š. è€Œæ³›å‹åˆ™ç±»ä¼¼äº C++ çš„æ¨¡æ¿, åœ¨ç¼–è¯‘æ—¶, Rust ç¼–è¯‘å™¨ä¼šå¯¹å…¶åšå¤„ç†, ç”Ÿæˆèƒ½ä½¿ç”¨å¤šä¸ªç±»å‹è¿›è¡Œè°ƒç”¨çš„å‡½æ•°.\næ¥ä¸‹æ¥å°±æ˜¯æ³›å‹ç±»å‹äº†, åœ¨å®šä¹‰ç±»å‹çš„æ—¶å€™, æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨æ³›å‹.\n1 2 3 4 struct TwoValues\u0026lt;T1, T2\u0026gt; { value1: T1, value2: T2 } ä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 let two_values = TwoValues::\u0026lt;i32, u8\u0026gt; { value1: 123, value2: 123 }; // æˆ–è€… let two_values : TwoValues\u0026lt;i32, u8\u0026gt; = TwoValues { value1: 123, value2: 123 }; // ä¹Ÿå¯ä»¥è‡ªåŠ¨æ¨å¯¼ç±»å‹, è¿™é‡Œå°†ä¼šè¢«æ¨å¯¼ä¸º TwoValues\u0026lt;i32, i32\u0026gt; let two_values = TwoValues { value1: 123, value2: 123 }; ä¸ºæ³›å‹ç±»å‹å®ç°æ–¹æ³•, éœ€è¦è¿™æ ·å†™:\n1 2 3 4 5 impl\u0026lt;T1, T2\u0026gt; TwoValues\u0026lt;T1, T2\u0026gt; { fn common_fn(\u0026amp;self) { println!(\u0026#34;common func\u0026#34;); } } åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­, ç”±äºæˆ‘ä»¬ä¸çŸ¥é“æ³›å‹ç±»å‹å…·ä½“ç±»å‹, æ‰€ä»¥åœ¨ impl è¯­å¥åè¿˜æ˜¯éœ€è¦å£°æ˜ä¸¤ä¸ªæ³›å‹ç±»å‹, ç„¶åä¼ å…¥åˆ°ç±»å‹.\nä½†å¦‚æœä½ å¸Œæœ›ä¸ºå¸¦æœ‰æŒ‡å®šæ³›å‹å‚æ•°çš„æ³›å‹ç±»å‹å®šä¹‰ä¸€äº›å‡½æ•°, å¯ä»¥è¿™æ ·å†™:\n1 2 3 4 5 impl TwoValues\u0026lt;\u0026amp;str, i32\u0026gt; { fn test_output(\u0026amp;self) { println!(\u0026#34;{}: {}\u0026#34;, self.value1, self.value2); } } åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­, å› ä¸ºæˆ‘ä»¬åªæƒ³ä¸ºæ³›å‹ç±»å‹å‚æ•°ä¸º \u0026amp;str å’Œ i32 çš„ TwoValues å®šä¹‰å‡½æ•°, æ³›å‹ç±»å‹å·²çŸ¥, æ‰€ä»¥ä¸å¿…å†å®šä¹‰æ³›å‹ç±»å‹.\nä¸‹é¢è¿˜æœ‰ä¸ªä¾‹å­å¯ä¾›å‚è€ƒ, ç¬¬ä¸€ä¸ªæ³›å‹ç±»å‹å‚æ•°æˆ‘ä»¬æŒ‡å®šä¸º \u0026amp;str, ç¬¬äºŒä¸ªæŒ‡å®šä¸ºå®ç°äº† Display çš„æ³›å‹ç±»å‹.\n1 2 3 4 5 impl\u0026lt;T: Display\u0026gt; TwoValues\u0026lt;\u0026amp;str, T\u0026gt; { fn test_output2(\u0026amp;self) { println!(\u0026#34;{}: {}\u0026#34;, self.value1, self.value2) } } éœ€è¦æ³¨æ„çš„æ˜¯, ä¸å…¶ä»–è¯­è¨€ä¸ä¸€æ ·, Rust åœ¨æ„é€ ç±»å‹å®ä¾‹æˆ–è€…è°ƒç”¨æ³›å‹å‡½æ•°çš„æ—¶å€™, éœ€è¦ä½¿ç”¨ä¸¤ä¸ªå†’å·ä»¥åŠå°–æ‹¬å·æ¥æŒ‡å®šæ³›å‹ç±»å‹å‚æ•°.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 // æ­£ç¡®ä½¿ç”¨ let two_values = TwoValues::\u0026lt;\u0026amp;str, i32\u0026gt; { value1: \u0026#34;Tip\u0026#34;, value2: 10 } print_i32::\u0026lt;SimpleI32Printer\u0026gt;(114514, printer1); // é”™è¯¯ä½¿ç”¨ let two_values = TwoValues\u0026lt;\u0026amp;str, i32\u0026gt; { value1: \u0026#34;Tip\u0026#34;, value2: 10 } print_i32\u0026lt;SimpleI32Printer\u0026gt;(114514, printer1); ä¹‹æ‰€ä»¥å¼ºè°ƒè¿™ç‚¹, æ˜¯å› ä¸ºå…¶ä»–è¯­è¨€, è¯¸å¦‚ C#, Java, Kotlin, å®ƒä»¬åœ¨æ„é€ ç±»å‹å®ä¾‹å’Œè°ƒç”¨æ³›å‹æ–¹æ³•çš„æ—¶å€™, éƒ½æ˜¯ç›´æ¥ä½¿ç”¨å°–æ‹¬å·æ¥æŒ‡å®šæ³›å‹ç±»å‹å‚æ•°çš„. Rust éœ€è¦å¤šåŠ ä¸¤ä¸ªå†’å·, åˆå­¦è€…å¯èƒ½ä¼šå¿˜è®°è¿™ç‚¹.\næ‰€æœ‰æƒ / Ownership ä¸ºäº†ä¿è¯å†…å­˜å®‰å…¨, Rust å¼•å…¥äº† \u0026lsquo;æ‰€æœ‰æƒ\u0026rsquo; çš„æ¦‚å¿µ. å…¶å¤§æ¦‚æ€æƒ³ä¸º:\nä¸€ä¸ªç±»å‹å®ä¾‹æœ‰å”¯ä¸€çš„ä½œç”¨åŸŸ, å½“ç¦»å¼€å…¶ä½œç”¨åŸŸæ—¶, è¯¥å®ä¾‹ä¼šè¢«é”€æ¯ è¿™ä¸ªä½œç”¨åŸŸç§°ä¸ºå®ƒçš„ \u0026lsquo;æ‰€æœ‰è€…\u0026rsquo;, è¯¥ä½œç”¨åŸŸæŒæœ‰è¯¥å®ä¾‹çš„ \u0026lsquo;æ‰€æœ‰æƒ\u0026rsquo; æ‰€æœ‰æƒå¯ä»¥è½¬äº¤ç»™å¦ä¸€ä¸ªä½œç”¨åŸŸ, è½¬äº¤å, å½“å‰ä½œç”¨åŸŸå°†æ— æ³•ç»§ç»­ä½¿ç”¨è¯¥å®ä¾‹ æ‰€æœ‰æƒå¯ä»¥å€Ÿç”¨, å¹¶ä¸”æŒ‡å®šä¸€å®šçš„è®¿é—®æƒé™, å½“å‰ä½œç”¨åŸŸä»æŒæœ‰è¯¥å®ä¾‹çš„ \u0026lsquo;æ‰€æœ‰æƒ\u0026rsquo; å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€éƒ½æœ‰ä½œç”¨åŸŸçš„æ¦‚å¿µ, ç¦»å¼€ä½œç”¨åŸŸå, å€¼å°†ä½œåºŸ:\n1 2 3 4 5 6 if true { let some_integer = 114514; } // è¿™é‡Œå°†æŠ¥é”™, å› ä¸ºå·²ç»è„±ç¦»äº† some_integer çš„ä½œç”¨åŸŸ println!(\u0026#34;value: {}\u0026#34;, some_integer); å½“ä¸€ä¸ªå€¼ç›´æ¥ä¼ å…¥åˆ°å¦å¤–ä¸€ä¸ªå‡½æ•°ä¸­, é‚£ä¹ˆè¿™ä¸ªå€¼çš„æ‰€æœ‰æƒä¹Ÿå°†è½¬äº¤åˆ°å¦å¤–ä¸€ä¸ªå‡½æ•°ä¸­:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 struct MyValue { value: i32 } fn print_value(value: MyValue) { println!(\u0026#34;value: {}\u0026#34;, value.value); } fn main() { let my_value = MyValue { value: 114514 }; print_value(my_value); // è¿™é‡Œå°†æŠ¥é”™, å› ä¸ºåœ¨æ‰§è¡Œ print_value çš„æ—¶å€™, æ‰€æœ‰æƒå·²ç»è¢«è½¬è®© // å½“å‰ä½œç”¨åŸŸä¸å†æŒæœ‰ my_value, ä¹Ÿå°±æ— æ³•å†ä½¿ç”¨å®ƒ println!(\u0026#34;value: {}\u0026#34;, my_value.value); } å¦‚æœå¸Œæœ›å‡½æ•°ä¸è½¬è®©ä¼ å…¥å‚æ•°çš„æ‰€æœ‰æƒ, å¯ä»¥å°†å‚æ•°ç±»å‹å®šä¹‰ä¸º \u0026lsquo;å¼•ç”¨\u0026rsquo;. ä½ å¯ä»¥å°†å…¶ç†è§£ä¸ºå…¶ä»–è¯­è¨€ä¸­çš„ \u0026lsquo;æŒ‡é’ˆ\u0026rsquo;. åªéœ€è¦åœ¨ç±»å‹å‰åŠ  \u0026amp; ç¬¦å·å³å¯.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 struct MyValue { value: i32 } fn print_value(value: \u0026amp;MyValue) { println!(\u0026#34;value: {}\u0026#34;, value.value); } fn main() { let my_value = MyValue { value: 114514 }; print_value(\u0026amp;my_value); // è¿™æ—¶, ä½ ä»ç„¶å¯ä»¥ä½¿ç”¨ my_value // å› ä¸ºå½“å‰ä½œç”¨åŸŸæŒæœ‰ my_value çš„æ‰€æœ‰æƒ println!(\u0026#34;value: {}\u0026#34;, my_value.value); } è™½ç„¶æˆ‘ä»¬å°†å€¼å€Ÿç»™äº† print_value, ä½†åœ¨ print_value å†…éƒ¨, å®ƒåªèƒ½è¯»å–å‚æ•°çš„å€¼, è€Œä¸èƒ½å¯¹å‚æ•°è¿›è¡Œä¿®æ”¹. å¦‚æœä½ å¸Œæœ›å®ƒèƒ½å¤Ÿä¿®æ”¹è¯¥å®ä¾‹çš„å€¼, éœ€è¦åœ¨ç±»å‹å‰æ·»åŠ  mut å…³é”®å­—.\n1 2 3 fn change_value(value: \u0026amp;mut MyValue) { value.value = 123123; } åœ¨è°ƒç”¨æ—¶ä¹Ÿåº”è¯¥ä½¿ç”¨ \u0026amp;mut xxx æ¥è·å–è¯¥å®ä¾‹çš„å¯ä¿®æ”¹å¼•ç”¨.\n1 2 3 4 5 fn main() { let my_value = MyValue { value: 114514 }; change_value(\u0026amp;mut my_value); } å¦‚æœä½ éœ€è¦ä¸€ä¸ªèƒ½å¤Ÿå¯¹å€¼æœ¬èº«è¿›è¡Œæ›´æ”¹, é‚£ä¹ˆåœ¨èµ‹å€¼æ—¶, éœ€è¦åœ¨å˜é‡åå‰æ·»åŠ  * ç¬¦å·.\n1 2 3 fn change_int_value(value: \u0026amp;mut i32) { *value = 114514; } é”™è¯¯å¤„ç† åœ¨ Rust ä¸­, é”™è¯¯åˆ†ä¸ºä¸¤ç§: å¯æ¢å¤çš„é”™è¯¯ä»¥åŠä¸å¯æ¢å¤çš„é”™è¯¯. ä¾‹å¦‚, åœ¨å°†å­—ç¬¦ä¸²è§£æä¸ºæ•°å­—æ—¶, å¦‚æœæ•°å­—æ ¼å¼ä¸æ­£ç¡®, æ‰€å¼•å‘çš„é”™è¯¯æ˜¯ç¨‹åºé€»è¾‘ä¸Šå¯ä»¥å¤„ç†çš„. è€Œç±»ä¼¼äºå†…å­˜è®¿é—®å†²çª, æ ˆæº¢å‡ºè¿™ç§, å°±æ˜¯æ— æ³•æ¢å¤çš„é”™è¯¯.\nä¸å¯æ¢å¤çš„é”™è¯¯ä¼šç›´æ¥å¯¼è‡´ç¨‹åºå´©æºƒ. ä½ å¯ä»¥ä½¿ç”¨ panic å®æ‰‹åŠ¨å¼•å‘é”™è¯¯.\n1 2 panic!(\u0026#34;oops\u0026#34;); println!(\u0026#34;test\u0026#34;); // è¿™é‡Œä»£ç ä¸ä¼šè¢«æ‰§è¡Œ, å› ä¸ºç¨‹åºå·²ç»å´©äº† è€Œå¯¹äºå¯æ¢å¤çš„é”™è¯¯, Rust ä¸­çš„å‡½æ•°éƒ½ä¼šè¿”å›ä¸€ä¸ª Result\u0026lt;T, E\u0026gt; æ¥è¡¨ç¤ºå¯èƒ½åŒ…å«é”™è¯¯å€¼çš„è¿”å›å€¼. å®ƒæ˜¯ä¸€ä¸ªæšä¸¾, åŒ…å«ä¸¤ç§å–å€¼: Ok(T) ä¸ Err(E), æˆ‘ä»¬å¯ä»¥é€šè¿‡ match è¯­å¥å¯¹å…¶ä¸¤ç§æƒ…å†µåˆ†åˆ«è¿›è¡Œå¤„ç†.\n1 2 3 4 5 6 7 let origin_str = \u0026#34;123\u0026#34;; let parse_result = origin_str.parse::\u0026lt;i32\u0026gt;(); match parse_result { Ok(value) =\u0026gt; println!(\u0026#34;Value is: {}\u0026#34;, value), Err(err) =\u0026gt; println!(\u0026#34;Error: {}\u0026#34;, err) } å¦‚æœä½ ç¡®å®šè¯¥æ–¹æ³•çš„æ‰§è¡Œä¸ä¼šå‡ºç°é”™è¯¯, ä¹Ÿå¯ä»¥ä½¿ç”¨ unwrap å‡½æ•°ç›´æ¥å–å¾—æ­£ç¡®çš„å€¼.\n1 2 let origin_str = \u0026#34;123\u0026#34;; let parsed_value : i32 = origin_str.parse().unwrap(); ä½†æ˜¯å¦‚æœå°è¯•å¯¹ä¸€ä¸ªé”™è¯¯å€¼ä½¿ç”¨ unwrap, å°±ä¼šå¼•å‘ panic äº†.\n1 2 let origin_str = \u0026#34;ä¸æ˜¯æ•°å­—\u0026#34;; let parsed_value: i32 = origin_str.parse().unwrap(); // è¿™é‡Œä¼šç›´æ¥å´©æºƒ, å› ä¸ºè§£ææ˜¯å¤±è´¥çš„, æ— æ³•å–å¾—ç»“æœå€¼ Rust è¿˜æä¾›äº†ä¸€ä¸ª ? æ“ä½œç¬¦ç”¨äºç®€åŒ–å¼‚å¸¸å¤„ç†. ä¸‹é¢çš„ä»£ç æ˜¯ä¸ä½¿ç”¨ ? çš„.\n1 2 3 4 5 6 7 8 9 10 11 fn mul_input_with_10() -\u0026gt; Result\u0026lt;i32, ParseIntError\u0026gt; { let mut input = String::new(); std::io::stdin().read_line(\u0026amp;mut input).unwrap(); let valueResult = input.parse::\u0026lt;i32\u0026gt;(); match valueResult { Ok(value) =\u0026gt; Ok(value * 10), Err(err) =\u0026gt; Err(err), } } å¦‚æœä½¿ç”¨ ? çš„è¯, åˆ™æ˜¯è¿™æ ·. å½“ç»“æœä¸º Err(E) çš„æ—¶å€™, ä¼šç›´æ¥å°†ç»“æœä½œä¸ºå½“å‰å‡½æ•°çš„è¿”å›å€¼è¿”å›, è¡¨è¾¾å¼çš„ç»“æœåˆ™æ˜¯æ­£ç¡®çš„å€¼.\n1 2 3 4 5 6 fn mul_input_with_10() -\u0026gt; Result\u0026lt;i32, ParseIntError\u0026gt; { let mut input = String::new(); std::io::stdin().read_line(\u0026amp;mut input).unwrap(); Ok(input.parse::\u0026lt;i32\u0026gt;()? * 10) } æ¨¡å— æ¨¡å—æ˜¯ Rust ä¸­ç»„ç»‡æºä»£ç çš„æ–¹å¼. åœ¨ Rust ä¸­, ä¸€ä¸ªæ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹éƒ½å¯ä»¥å«åšä¸€ä¸ª \u0026ldquo;æ¨¡å—\u0026rdquo;.\nä¾‹å¦‚, å½“æˆ‘æœ‰ä¸€ä¸ª main.rs, æˆ‘å¸Œæœ›åœ¨é‡Œé¢ä½¿ç”¨ test.rs çš„æˆå‘˜æ—¶:\n1 2 3 4 5 6 // è¿™é‡Œæ˜¯ test.rs çš„å†…å®¹ // å…¬å¼€ä¸€ä¸ªå‡½æ•° pub fn test_fn() { println!(\u0026#34;test fn\u0026#34;); } ä¸‹é¢æ˜¯ main.rs, ä½¿ç”¨ mod è¯­å¥å¼•å…¥æ¨¡å—, ç„¶åä½¿ç”¨ use è¯­å¥ä½¿ç”¨æ¨¡å—ä¸­çš„æˆå‘˜:\n1 2 3 4 5 6 7 8 9 // å¼•å…¥ test æ¨¡å— mod test; // ä½¿ç”¨æ¨¡å—ä¸­çš„æˆå‘˜ use test::test_fn; fn main() { test_fn(); } å¦‚æœå¸Œæœ›å°†ä¸€ä¸ªæ–‡ä»¶å¤¹æš´éœ²ä¸ºä¸€ä¸ªæ¨¡å—çš„è¯, ä½ éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹, ç„¶ååœ¨æ–‡ä»¶å¤¹ä¸‹åˆ›å»º mod.rs, ç„¶åç¼–å†™å†…å®¹. åœ¨è¯¥æ–‡ä»¶ä¸‹å‘å¤–æš´éœ²çš„æˆå‘˜, å³ä¸ºè¯¥æ¨¡å—çš„æˆå‘˜.\n1 2 3 4 5 6 // è¿™é‡Œæ˜¯ test2/mod.rs çš„å†…å®¹ // å…¬å¼€ä¸€ä¸ªå‡½æ•° pub fn test_fn() { println!(\u0026#34;test fn\u0026#34;); } å¼•ç”¨çš„æ—¶å€™å’Œä¹‹å‰çš„ä»£ç ä¸€æ ·, åªéœ€è¦ä½¿ç”¨ mod test2 å³å¯å¼•å…¥ test2 æ¨¡å—.\nå¦‚æœä½ å¸Œæœ›åœ¨ test2 æ–‡ä»¶å¤¹ä¸‹ç¼–å†™æ›´å¤šçš„æ–‡ä»¶, å¹¶å‘å¤–æš´éœ²:\n1 2 3 4 5 |- test2 | |- another.rs | -- mod.rs | -- main.rs é‚£ä¹ˆä»»ä½•ä½ æƒ³è¦å‘å¤–æš´éœ²çš„å†…å®¹, éƒ½åº”è¯¥åœ¨ test2/mod.rs ä¸‹å£°æ˜å¥½.\n1 2 3 4 5 6 // è¿™é‡Œæ˜¯ test2/another.rs çš„å†…å®¹ // å…¬å¼€ä¸€ä¸ªç»“æ„ pub struct AnotherStruct { } åœ¨ test2/mod.rs ä¸­, ä½ éœ€è¦å¯¼å…¥å¹¶å…¬å¼€ another è¿™ä¸ªæ¨¡å—.\n1 2 3 4 5 6 7 8 9 // è¿™é‡Œæ˜¯ test2/mod.rs çš„å†…å®¹ // å¯¼å…¥å¹¶å…¬å¼€ another æ¨¡å— pub mod another; // å…¬å¼€å±äº test2 çš„æˆå‘˜ pub fn test_fn() { println!(\u0026#34;test fn\u0026#34;); } äºæ˜¯, ä½ å°±å¯ä»¥åœ¨ main.rs ä¸­, ä½¿ç”¨ AnotherStruct è¿™ä¸ªç±»å‹äº†.\n1 2 3 4 5 6 7 8 9 // å¯¼å…¥ test2 æ¨¡å— mod test2; // ä½¿ç”¨ test2/another ä¸­çš„ AnotherStruct use test2::another::AnotherStruct; fn main() { let value = AnotherStruct {}; } ä½†æ˜¯, å¦‚æœä½ å¸Œæœ›åœ¨ä½¿ç”¨ AnotherStruct æ—¶, ç›´æ¥é€šè¿‡ test2::AnotherStruct å¯¼å…¥, ä¹Ÿå¯ä»¥åœ¨ mod.rs è¿™æ ·å‘å¤–å…¬å¼€:\n1 2 3 4 5 6 7 // è¿™é‡Œæ˜¯ test/mod.rs çš„å†…å®¹ // å¯¼å…¥ another æ¨¡å—, ä½†æ˜¯ä¸å…¬å¼€ mod another; // ä½¿ç”¨å¹¶å…¬å¼€ another ä¸‹çš„ç»“æ„ pub use another::AnotherStruct; è¿™æ · AnotherStruct å¯ä»¥é€šè¿‡ use è¯­å¥ç›´æ¥å‘å¤–æš´éœ², ä½¿ç”¨æ—¶å°±å¯ä»¥ç›´æ¥ use test2::AnotherStruct äº†\n1 2 3 4 5 6 7 8 9 // å¯¼å…¥ test2 æ¨¡å— mod test2; // ä½¿ç”¨ test2 ç›´æ¥æš´éœ²çš„ AnotherStruct use test2::AnotherStruct; fn main() { let value = AnotherStruct {}; } æ–¹ä¾¿èµ·è§, ä½ ä¹Ÿå¯ä»¥ç›´æ¥ç”¨ * åœ¨ mod.rs ç›´æ¥å‘å¤–æš´éœ²æŸä¸ªæ¨¡å—çš„æ‰€ä»¥æˆå‘˜:\n1 2 3 4 mod another; // å‘å¤–æš´éœ² another ä¸­çš„æ‰€æœ‰æˆå‘˜ pub use another::*; å¦‚æœä½ åœ¨ä½¿ç”¨å¤šä¸ªæ¨¡å—æ—¶, å®ƒä»¬çš„ç±»å‹åç§°ç›¸åŒ, ä½ å¯ä»¥åœ¨ use çš„ä½¿ç”¨, ä½¿ç”¨ as ä¸ºå…¶å–åˆ«å:\n1 2 3 4 5 6 7 mod test2; use test2::AnotherStruct as qwq; fn main() { let value = qwq {}; } ","date":"2023-11-30T14:19:12+08:00","permalink":"https://slimenull.com/p/20231130141912/","title":"[Rust] å¿«é€ŸåŸºç¡€å…¥é—¨æ•™ç¨‹"},{"content":"Speex æ˜¯ä¸€ä¸ªå¼€æºçš„, é€‚åˆè¯­éŸ³ç¼–è§£ç çš„ç®—æ³•, å¸¸åº”ç”¨äºç½‘ç»œç”µè¯ä¸­.\nåœ¨ä¸‹é¢çš„çš„ä»‹ç»ä¸­, æˆ‘ä»¬å°†ä½¿ç”¨ SpeexSharp å¯¹ Speex ç¼–ç åœ¨ .NET ä¸­çš„ä½¿ç”¨åšä»‹ç»\nSpeexSharp å¯ä»¥åœ¨ nuget ä¸­ç›´æ¥å®‰è£…, å¹¶ä¸”å·²ç»å°è£…äº†ç¼–è§£ç å™¨çš„ç±»ä¾›ä½¿ç”¨. å¦‚æœä½ ä¸å¸Œæœ›äº†è§£ Speex çš„å…·ä½“ç¼–è§£ç è¿‡ç¨‹, å¯ä»¥å¿½ç•¥ä¸‹é¢çš„ \u0026lsquo;ç¼–ç \u0026rsquo; å’Œ \u0026lsquo;è§£ç \u0026rsquo; éƒ¨åˆ†, åªçœ‹ Speex çš„ä»‹ç», ç„¶åç›´æ¥ä½¿ç”¨è¿™äº›ç±»è¿›è¡Œç¼–è§£ç .\né‡‡æ · Speex çš„ç¼–è§£ç æ˜¯åŸºäºé‡‡æ ·çš„, ä¼ å…¥æ•°æ®çš„æ—¶å€™, æˆ‘ä»¬éœ€è¦ç»™å®šé‡‡æ ·, ä¼ å‡ºçš„æ—¶å€™, Speex ä¹Ÿæ˜¯è§£ç ä¸ºé‡‡æ ·.\nSpeex æ”¯æŒçš„é‡‡æ ·æ ¼å¼æœ‰ä¸¤ç§, æµ®ç‚¹æ•°å’Œæœ‰ç¬¦å· 16 ä½æ•´æ•°.\næ¨¡å¼å’Œè´¨é‡ Speex ç›®å‰æœ‰ä¸‰ç§æ¨¡å¼, çª„å¸¦, å®½å¸¦, è¶…å®½å¸¦. è¿™ä¸‰ç§æ¨¡å¼ä¸­, å¯¹éŸ³é¢‘æ•°æ®ç¼–ç åçš„æ•°æ®å¤§å°æ˜¯ä¸ä¸€æ ·çš„. å¦‚å…¶å, åœ¨çª„å¸¦æ¨¡å¼ä¸‹, éŸ³é¢‘ç¼–ç åæœ€å°, è´¨é‡ä¹Ÿæœ€ä½, åä¹‹, è¶…å®½å¸¦æ˜¯ç¼–ç åæœ€å¤§, è´¨é‡æœ€å¥½çš„æ¨¡å¼.\né€‰æ‹©å¥½æ¨¡å¼ä¹‹å, ä½ è¿˜å¯ä»¥å¯¹ç¼–ç è´¨é‡è¿›è¡Œå¾®è°ƒ. è´¨é‡çš„ç­‰çº§æ˜¯ä¸€ä¸ªä» 0 åˆ° 10 çš„å€¼(åŒ…å« 0 å’Œ 10), è®¾ç½®ç¼–ç å™¨çš„è´¨é‡ä¹‹å, ç¼–ç çš„ç»“æœå¤§å°å’Œè´¨é‡ä¹Ÿä¼šå˜æ›´.\nå­˜å‚¨æµ è¦è¿›è¡Œ Speex ç¼–ç , æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå­˜å‚¨éœ€è¦ç¼–ç çš„æ•°æ®çš„ç¼“å†²åŒº, Speex å·²ç»ä¸ºæˆ‘ä»¬å‡†å¤‡å¥½äº†è¿™ä¸ªç±»å‹, å¹¶ä¸” Speex ä¼šè‡ªåŠ¨ç®¡ç†è¿™ä¸ªç¼“å†²åŒº. å®ƒå«åš SpeexBits.\nåˆå§‹åŒ–ä¸€ä¸ª SpeexBits, æˆ‘ä»¬éœ€è¦å£°æ˜ä¸€ä¸ª SpeexBits ç±»å‹çš„å˜é‡, ç„¶åè°ƒç”¨ Speex çš„åˆå§‹åŒ–å‡½æ•°.\n1 2 SpeexBits bits; Speex.BitsInit(\u0026amp;bits); æ— è®ºæ˜¯ç¼–ç è¿˜æ˜¯è§£ç , éƒ½æ˜¯éœ€è¦ SpeexBits ä½œä¸ºå­˜å‚¨çš„.\nç¼–ç æ—¶, ç”¨æˆ·å°†é‡‡æ ·æ•°æ®çš„æŒ‡é’ˆä¼ ç»™ç¼–ç å‡½æ•°, å‡½æ•°å†…éƒ¨å¯¹å¸§è¿›è¡Œç¼–ç , æœ€åå°†ç¼–ç åçš„ç»“æœæ”¾å…¥ SpeexBits ä¸­.\nè§£ç æ—¶åˆ™æ˜¯ç”¨æˆ·å°†éœ€è¦è§£ç çš„æ•°æ®æ”¾å…¥ SpeexBits, å°†è¾“å‡ºæ•°æ®çš„ç¼“å†²åŒºä¼ ç»™è§£ç å‡½æ•°, è§£ç å‡½æ•°ä»ä¸­è¯»å–, è§£ç æ•°æ®, ç„¶åå°†è§£ç åçš„æ•°æ®å†™å…¥ç”¨æˆ·æŒ‡å®šçš„ç¼“å†²åŒºä¸­.\nå¦å¤–, SpeexBits ä¹‹æ‰€ä»¥å« Bits, æ˜¯å› ä¸ºå®ƒå…¶ä¸­å­˜å‚¨çš„æ•°æ®, åŸºæœ¬å•ä½æ˜¯æ¯”ç‰¹. åœ¨ç¼–ç æ—¶, ä½ å¯èƒ½ä¼šå¾—åˆ° 69.5 ä¸ªå­—èŠ‚. ä¹Ÿå°±æ˜¯ 556 ä¸ªæ¯”ç‰¹. åœ¨è¿™ç§æƒ…å†µä¸‹, æˆ‘ä»¬è¦å­˜å‚¨å®ƒçš„æ•°æ®æ—¶, è‚¯å®šæ˜¯è¦å‘ä¸Šèˆå…¥, ä¹Ÿå°±æ˜¯å­˜å‚¨å®ƒå†…éƒ¨çš„ 70 ä¸ªå­—èŠ‚.\nå¸§å¤§å°ä¸é‡‡æ ·ç‡ Speex çš„ç¼–è§£ç æ˜¯å¯¹äº \u0026ldquo;å¸§\u0026rdquo; è€Œè¨€çš„. æ¯ä¸€æ¬¡ç¼–ç , éƒ½å¿…é¡»æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¸§, å³ä¸€å®šæ•°é‡çš„é‡‡æ ·æ•°. è€Œå¸§çš„å¤§å°å–å†³äºä¸Šé¢æåˆ°çš„ Speex ç¼–ç æ¨¡å¼.\nè€Œä¸”, åœ¨ç¼–ç çš„æ—¶å€™, ä¼ å…¥é‡‡æ ·çš„é‡‡æ ·ç‡ä¹Ÿåº”è¯¥ä¸ç¼–ç å™¨è®¾å®šçš„é‡‡æ ·ç‡ä¸€è‡´. è¿™æ ·æ‰èƒ½è·å¾—æœ€å¥½çš„ç¼–ç æ•ˆæœ.\næ•°æ® \\ æ¨¡å¼ çª„å¸¦ å®½å¸¦ è¶…å®½å¸¦ å¸§å¤§å° 160 320 640 é»˜è®¤é‡‡æ ·ç‡ 8000Hz 16000Hz 32000Hz æ³¨æ„, å¸§å¤§å°æ˜¯é’ˆå¯¹ \u0026lsquo;é‡‡æ ·æ•°é‡\u0026rsquo; çš„, ä¾‹å¦‚, å¦‚æœä½ è¦ä»¥å®½å¸¦æ¨¡å¼ç¼–ç æµ®ç‚¹æ•°é‡‡æ ·, é‚£ä¹ˆä½ éœ€è¦ 320 ä¸ªæµ®ç‚¹é‡‡æ ·, æ¯ä¸ª 4 å­—èŠ‚, æ€»å…±éœ€è¦ 1280 ä¸ªå­—èŠ‚. å¦‚æœæ˜¯å¸¦ç¬¦å· 16 ä½æ•´æ•°åˆ™æ˜¯éœ€è¦ 640 ä¸ªå­—èŠ‚.\nå¦‚æœä½ å¸Œæœ›å°†ä½¿ç”¨ Speex ç¼–ç çš„è¯­éŸ³å­˜å‚¨åˆ°æ–‡ä»¶, ä½ å¯èƒ½éœ€è¦åšä¸€äº›å¤„ç†. å› ä¸º Speex çš„ç¼–è§£ç æ˜¯é’ˆå¯¹äºå¸§çš„, æ‰€ä»¥ä½ çš„æ–‡ä»¶ä¸­è‡³å°‘éœ€è¦æœ‰æ ‡è¯†å¸§çš„åœ°æ–¹. åœ¨è§£ç æ—¶, è¯»å–ä¸€å¸§, ç„¶åè°ƒç”¨è§£ç æ–¹æ³•, å¾—åˆ°åŸå§‹é‡‡æ ·.\næœ€ç®€å•çš„æ–¹å¼å°±æ˜¯åœ¨æ¯ä¸€å¸§çš„å‰é¢åŠ ä¸€å­—èŠ‚çš„å¤´, è¿™ä¸ªå­—èŠ‚ç”¨æ¥æ ‡è¯†åé¢å¤šå°‘å­—èŠ‚æ˜¯ä¸€å¸§.\nç¼–ç è¿‡ç¨‹ è¦è¿›è¡Œå®Œæ•´çš„ç¼–ç , éœ€è¦è¿›è¡Œä»¥ä¸‹å¤§æ¦‚æ­¥éª¤\nå‡†å¤‡ç”¨äºå­˜å‚¨çš„ SpeexBits åˆå§‹åŒ–ä¸€ä¸ªç¼–ç å™¨ è°ƒç”¨ç¼–ç æ–¹æ³• ä» SpeexBits ä¸­è¯»å–ç¼–ç ç»“æœ ä¸‹é¢æ˜¯å®½å¸¦æ¨¡å¼ç¼–ç çš„ç¤ºä¾‹ä»£ç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 // è¦è¿›è¡Œç¼–ç çš„é‡‡æ ·æ•°æ® float[] samples; // å– 320 ä¸ªé‡‡æ ·, ä¹Ÿå°±æ˜¯å®½å¸¦æ¨¡å¼ä¸‹çš„ä¸€å¸§ float[] frame = samples.Take(320).ToArray(); // å®šä¹‰å¹¶åˆå§‹åŒ–ç”¨äºå­˜å‚¨çš„ SpeexBits SpeexBits bits; Speex.BitsInit(\u0026amp;bits); // è·å–è¡¨ç¤ºå®½å¸¦æ¨¡å¼çš„æŒ‡é’ˆ, 0, 1, 2 åˆ†åˆ«æ˜¯çª„å¸¦, å®½å¸¦, è¶…å®½å¸¦ SpeexMode* mode = Speex.LibGetMode(1); // åˆå§‹åŒ–ç¼–ç å™¨, å¾—åˆ°è¡¨ç¤ºç¼–ç å™¨çŠ¶æ€çš„æŒ‡é’ˆ void* encoderState = Speex.EncoderInit(mode); // å°†æ•°ç»„è½¬ä¸ºæŒ‡é’ˆ fixed (float* framePtr = frame) { // é‡ç½® SpeexBits å†…å®¹ Speex.BitsReset(\u0026amp;bits); // è°ƒç”¨ç¼–ç æ–¹æ³• Speex.Encode(encoderState, framePtr, \u0026amp;bits); } // è·å–ç¼–ç åçš„æ•°é‡ (ä¹Ÿå°±æ˜¯ bits ä¸­å­˜å‚¨çš„å­—èŠ‚æ•°) int bitCount = bits.BitCount; int byteCount = (bits.BitCount + 7) \u0026gt;\u0026gt; 3 // å‘ä¸Šèˆå…¥ // å£°æ˜ä¸€ä¸ªç¼“å†²åŒºç”¨äºå­˜å‚¨ç¼–ç åç»“æœ byte[] buffer = new byte[byteCount]; // å›ºå®šç¼“å†²åŒº, è½¬ä¸ºæŒ‡é’ˆ fixed (byte* bufferPtr = buffer) { // å°† Bits å†…å­˜å‚¨çš„ç¼–ç ç»“æœå†™å…¥åˆ°æˆ‘ä»¬è‡ªå·±çš„ç¼“å†²åŒºä¸­ Speex.BitsWrite(\u0026amp;bits, bufferPtr, buffer.Length); } // åšå…¶ä»–å¤„ç†. éœ€è¦æ³¨æ„çš„æ˜¯, æ¯ä¸€æ¬¡ç¼–ç ä¹‹å, ä½ éƒ½åº”è¯¥é‡ç½®ä¸€ä¸‹ SpeexBits\nå› ä¸ºç¼–ç æ–¹æ³•çš„ç»“æœå†å¾€ SpeexBits å­˜å…¥æ—¶, å¦‚æœæ²¡æœ‰æŠ¹é™¤æ—§çš„æ•°æ®, SpeexBits ä¸­å°±ä¼šåŒæ—¶å­˜å‚¨ç€æ—§çš„æ•°æ®å’Œæ–°çš„æ•°æ®, å¦‚æœä½ æ²¡æœ‰æ‰‹åŠ¨å¾€ SpeexBits é‡Œé¢å†™å…¥ä¸€äº›ä¸œè¥¿åšæ ‡è¯†, é‚£ä¹ˆä½ å°±æ— æ³•åŒºåˆ†ä¸åŒçš„å¸§äº†.\næœ€ç®€å•çš„æ–¹å¼å°±æ˜¯, æ¯ä¸€æ¬¡ç¼–ç å, è¯»å–ç¼–ç ç»“æœ, ç„¶åæ¸…ç©º SpeexBits.\nå¦‚æœä½ éœ€è¦å°†æ‰€æœ‰é‡‡æ ·éƒ½ç¼–ç äº†, å¾ˆç®€å•, åªéœ€è¦ç”¨ for è¿›è¡Œå¾ªç¯å°±å¥½äº†. ä½†åœ¨è¿™ä¹‹å‰, ä½ è¿˜éœ€è¦å¯¹åŸå§‹çš„é‡‡æ ·åšå¡«å……å¤„ç†, ç¡®ä¿å®ƒçš„å¤§å°æ˜¯å¸§å¤§å°çš„æ•´æ•°å€, è¿™æ ·ä½ åœ¨åšç¼–ç çš„æ—¶å€™, å°±ä¸ä¼šå‡ºç°è®¿é—®å†²çªçš„é—®é¢˜äº†.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 float[] samples; int padLength = samples.Length % 360; if (padLength != 0) padLength = 360 - padLength; float[] paddedSamples = new [samples.Length + padLength]; Array.Copy(samples, 0, paddedSamples, 0, samples.Length); fixed (float* paddedSamplesPtr = paddedSamples) { for (int i = 0; i \u0026lt; paddedSamples.Length; i += 360) { Speex.BitsReset(\u0026amp;bits); Speex.Encode(encoderState, paddedSamplesPtr + i, \u0026amp;bits); } } è§£ç è¿‡ç¨‹ è§£ç åŒæ ·å¾ˆç®€å•, åªéœ€è¦æˆ‘ä»¬å°†å·²ç»ç¼–ç çš„ä¸€å¸§ä»¥åŠè¾“å‡ºç¼“å†²åŒºä¼ å…¥åˆ° Decode å‡½æ•°ä¸­, Speex å°±ä¼šå°†è§£ç åçš„ä¸€å¸§å­˜å…¥åˆ°ç¼“å†²åŒºä¸­.\nå‡†å¤‡ç”¨äºå­˜å‚¨çš„ SpeexBits åˆå§‹åŒ–ä¸€ä¸ªè§£ç å™¨ å°†éœ€è¦è§£ç çš„å¸§å­˜å…¥åˆ° SpeexBits ä¸­ è°ƒç”¨è§£ç æ–¹æ³• åŒæ ·çš„, è§£ç çš„æ—¶å€™ä¹Ÿæ˜¯é€å¸§è§£ç çš„, ä½ ä¼ å…¥çš„ç¼“å†²åŒºè‡³å°‘èƒ½å®¹çº³ä¸€å¸§çš„éŸ³é¢‘æ‰å¯ä»¥.\nä¸‹é¢æ˜¯å®½å¸¦æ¨¡å¼è§£ç çš„ç¤ºä¾‹ä»£ç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 // è¦è¿›è¡Œè§£ç çš„ Speex æ•°æ® byte[] speex; // å£°æ˜ç”¨äºå­˜å‚¨è§£ç ç»“æœçš„ç¼“å†²åŒº float[] buffer = new float[320]; // å®šä¹‰å¹¶åˆå§‹åŒ–ç”¨äºå­˜å‚¨çš„ SpeexBits SpeexBits bits; Speex.BitsInit(\u0026amp;bits); // è·å–è¡¨ç¤ºå®½å¸¦æ¨¡å¼çš„æŒ‡é’ˆ SpeexMode* mode = Speex.LibGetMode(1); // åˆå§‹åŒ–è§£ç å™¨ void* decoderState = Speex.DecoderInit(mode); // å›ºå®š Speex æ•°æ® fixed (byte* speexPtr = speex) { // å°†å…¶è¯»å…¥åˆ° SpeexBits ä¸­ Speex.BitsReadFrom(\u0026amp;bits, speexPtr, speex.Length); } // å›ºå®šç¼“å†²åŒº fixed (float* bufferPtr = buffer) { // è¿›è¡Œè§£ç  Speex.Decode(decoderState, \u0026amp;bits, bufferPtr); } // åšå…¶ä»–å¤„ç† éœ€è¦æ³¨æ„çš„æ˜¯, åœ¨è§£ç æ—¶, è¯»å…¥ SpeexBits çš„æ•°æ®åªèƒ½æ˜¯ä¸€å¸§, å¦‚æœä½ å­˜å…¥ä¸¤å¸§æˆ–è€…æ›´å¤šçš„è¯, é‚£ä¹ˆè§£ç ä¼šå‡ºé—®é¢˜.\nå¦‚æœä½ å­˜å…¥äº†åŠä¸ªå¸§æˆ–è€…æ•°æ®æŸåçš„ä¸€ä¸ªå¸§, è§£ç ä»ç„¶èƒ½æˆåŠŸ, åªä¸è¿‡è¾“å‡ºç»“æœçš„è´¨é‡ä¼šä¸‹é™.\næ‰˜ç®¡è°ƒç”¨ ä»¥ä¸Š, æˆ‘ä»¬å·²ç»äº†è§£äº† Speex ç¼–è§£ç çš„å…·ä½“è¿‡ç¨‹, ä½† SpeexSharp è¿˜æä¾›äº†ç¼–è§£ç å™¨çš„ç±»å°è£…, å†…éƒ¨ä¼šè‡ªåŠ¨åˆå§‹åŒ– SpeexBits, å­˜å–ç¼–è§£ç æ•°æ®ç­‰.\nå¦‚æœè¦ä½¿ç”¨è¿™äº›å°è£…å¥½çš„ç±»æ¥è¿›è¡Œç¼–è§£ç , åªéœ€è¦æ–°å»º SpeexEncoder æˆ– SpeexDecoder çš„ç¤ºä¾‹å³å¯.\n","date":"2023-11-13T09:45:19+08:00","permalink":"https://slimenull.com/p/20231113094519/","title":"[.NET] Speex è¯­éŸ³ç¼–è§£ç ä»‹ç», ä½¿ç”¨, ä»£ç ç¤ºä¾‹"},{"content":"ä¾‹å¦‚ä¸€ä¸ªæ•´æ•°, 6, å®ƒçš„åå…­è¿›åˆ¶è¡¨ç¤ºä¸º: 0x00000006\nå…±å››å­—èŠ‚.\nä½ é«˜ä½ x x ä½ä½ å€¼ 0x00 0x00 0x00 0x06 ä¾‹å¦‚æˆ‘çš„å­˜å‚¨ç¼“å†²åŒºæœ‰å››ä¸ªå­—èŠ‚:\nåœ°å€ 0 1 2 3 å€¼ 0 0 0 0 å¦‚æœæˆ‘å°†è¿™ä¸ªæ•°å­—å­˜å…¥æ—¶, ä½ä½å­—èŠ‚åœ¨ä½ä½åœ°å€, åˆ™æ˜¯å°ç«¯åº. å³,\nåœ°å€ 0 1 2 3 å€¼ 0x06 0x00 0x00 0x00 å¦‚æœä½ä½å­—èŠ‚å­˜å‚¨åœ¨é«˜ä½åœ°å€, åˆ™æ˜¯å¤§ç«¯åº.\nåœ°å€ 0 1 2 3 å€¼ 0x00 0x00 0x00 0x06 åœ¨è¿›è¡Œç½‘ç»œä¼ è¾“æ—¶, å‘é€è€…ä¸æ¥æ”¶è€…æ‰€ä½¿ç”¨çš„æ•°å­—è§£ææ–¹å¼å¿…é¡»æ˜¯ä½¿ç”¨ç›¸åŒçš„ç«¯åº, å¦åˆ™å°±ä¼šäº§ç”Ÿæ•°å€¼é”™è¯¯.\nè™½ç„¶ç½‘ç»œé€šä¿¡å»ºè®®ä½¿ç”¨å¤§ç«¯ä¼ è¾“, ä½†æ˜¯åªè¦ä¿è¯å‘é€è€…å’Œæ¥æ”¶è€…ç«¯åºä¸€è‡´, å°±ä¸ä¼šå¼•å‘é”™è¯¯. åè€Œå¦‚æœå‘é€å‰éƒ½åšå¤„ç†, ä½ çš„é€»è¾‘ä¼šæ˜¯è¿™æ ·, ä¼šå¾ˆéº»çƒ¦, æœ‰ç§è„±è£¤å­æ”¾å±çš„æ„Ÿè§‰:\nBitConverter: å¾—åˆ°å°ç«¯çš„å­—èŠ‚\nè½¬ä¸ºå¤§ç«¯åº\nè¿›è¡Œç½‘ç»œä¼ è¾“\nä»å¤§ç«¯åºè½¬ä¸ºå°ç«¯åº\nBitConverter: å¾—åˆ°åŸå§‹æ•°å­—\nå› ä¸ºç›®å‰å¸¸ç”¨è®¡ç®—æœº(x86æ¶æ„å¤„ç†å™¨)å‡ä¸ºå°ç«¯åº, å¹¶ä¸”å°ç«¯åºåœ¨å¯»å€æ—¶ä¹Ÿæ›´åŠ èŠ‚çœæ€§èƒ½, ä¸éœ€è¦è¿›è¡Œé¢å¤–çš„è®¡ç®—.\n","date":"2023-11-12T20:11:46+08:00","permalink":"https://slimenull.com/p/20231112201146/","title":"ç®€è¿°æ•°æ®å­˜å‚¨çš„å¤§å°ç«¯åº"},{"content":"Unity C# åœ¨å†™çš„è¿‡ç¨‹ä¸­, å’Œçº¯ C# æ˜¯æœ‰å¾ˆå¤§å‡ºå…¥çš„. ç”šè‡³è¯´, Unity C# å°±æ˜¯é‚ªæ•™. ä¾‹å¦‚å®ƒçš„å‘½åè§„èŒƒä¸ C# æ˜¯ä¸ä¸€è‡´çš„, è€Œä¸”ç”±äºæ¸¸æˆå¼•æ“çš„ä»‹å…¥, ç¼–å†™æ—¶çš„ä¹ æƒ¯ç›¸è¾ƒäº C# æ¥è®², ä¹Ÿéœ€è¦æœ‰æ‰€æ”¹å˜.\né€šç”¨ç¼–ç è§„èŒƒ å¸¸è§çš„ä¸€äº›ç¼–ç è§„èŒƒå°±ä¸éœ€è¦è¿‡å¤šæåŠäº†, è¿™é‡Œåªåšç®€å•åˆ—ä¸¾.\næ·»åŠ åˆé€‚çš„ç©ºæ ¼å’Œæ¢è¡Œ, ä»¥ä½¿ä»£ç å˜å¾—æ¸…æ™°æ˜ç¡® ç›¸åŒåŠŸèƒ½æˆ–è€…ç›¸åŒç±»å‹çš„æˆå‘˜å°½é‡æ”¾åœ¨ä¸€èµ·, ä¾‹å¦‚ç§æœ‰æˆå‘˜çš„å®šä¹‰å†™åœ¨ä¸€èµ·, å…¬å¼€æˆå‘˜çš„å®šä¹‰å†™åœ¨ä¸€èµ·. å‘½åå‡†åˆ™å‚è€ƒ å…³äº \u0026ldquo;ä¸ä½¿ç”¨\u0026rdquo; çš„è§„åˆ™\nC# ä»æ¥ä¸ä¼šä½¿ç”¨è›‡å½¢å‘½åæ³•, é™¤äº†å‰ç¼€, ä¸è¦åœ¨ä½ çš„å‘½åä¸­å‡ºç°ä¸‹åˆ’çº¿. è¿™æ ·çš„åç§°æ˜¯ä¸è§„èŒƒçš„: button_ok C# ä»æ¥ä¸ä¼šä½¿ç”¨åŒˆç‰™åˆ©å‘½åæ³•, ä¹Ÿå°±æ˜¯åœ¨åç§°çš„å°¾éƒ¨åŠ ä¸Šç”¨ä»¥æ ‡è¯†ç±»å‹çš„åç¼€. è¿™æ ·çš„åç§°æ˜¯ä¸è§„èŒƒçš„: frmShop(è¡¨ç¤ºä¸€ä¸ªå•†åº—çš„çª—ä½“) C# åŸºæœ¬ä¸ä¼šä½¿ç”¨ç¼©å†™, é™¤äº†å¸¸ç”¨ä¸é€šç”¨çš„ç¼©å†™ä¾‹å¦‚ \u0026ldquo;HTTP\u0026rdquo;(Hyper text transfer protocol) å’Œ \u0026ldquo;ID\u0026rdquo;(Identifier) , ä¸è¦ä½¿ç”¨ç¼©å†™. è¿™æ ·çš„åç§°æ˜¯ä¸è§„èŒƒçš„: acc(account), btn(button). ä½ åº”è¯¥ä½¿ç”¨å®ƒä»¬çš„å…¨ç§°, é™¤éå®ƒçš„å…¨ç§°çœŸçš„å¾ˆé•¿. å‚è€ƒ: é€šç”¨å‘½åçº¦å®š - æ¡†æ¶è®¾è®¡æŒ‡å¼• | Microsoft Learn\nå…³äº \u0026ldquo;Unity C# ä¸ C# ä¸åŒä¹‹å¤„\u0026rdquo;\nUnity C# æ ‡å‡†åº“çš„å±æ€§(Properties)å¹¶æ²¡æœ‰æŒ‰ç…§ C# è§„èŒƒä½¿ç”¨å¤§é©¼å³°å‘½åæ³•. æˆå‘˜å‘½å:\næ‰€æœ‰å…¬å¼€çš„æˆå‘˜éƒ½åº”è¯¥ä½¿ç”¨å¸•æ–¯å¡å‘½åæ³•. ä½†æ˜¯å¯¹äºå±æ€§å’Œå­—æ®µ, ä½ å¯ä»¥è€ƒè™‘ä½¿ç”¨é©¼å³°å‘½åæ³•, å› ä¸º Unity å°±æ˜¯è¿™ä¹ˆåšçš„. è¿™ä¸ªå¯ä»¥æ ¹æ®ä½ çš„ä¹ æƒ¯é€‰æ‹©. ç§æœ‰å­—æ®µæˆå‘˜å»ºè®®ä½¿ç”¨ä¸‹åˆ’çº¿å‰ç¼€ä¸é©¼å³°å‘½åæ³• æ‰€æœ‰çš„æ–¹æ³•åç§°éƒ½åº”è¯¥ä½¿ç”¨å¸•æ–¯å¡å‘½åæ³•. ä¸è®ºå…¶è®¿é—®ç­‰çº§æ˜¯æ€æ ·çš„, æ–¹æ³•éƒ½åº”è¯¥ä½¿ç”¨å¸•æ–¯å¡å‘½åæ³• æ‰€æœ‰çš„æ–¹æ³•å‚æ•°éƒ½åº”è¯¥ä½¿ç”¨é©¼å³°å‘½åæ³•. ç±»å‹å®šä¹‰:\næ‰€æœ‰çš„ç±»å‹å®šä¹‰éƒ½åº”è¯¥ä½¿ç”¨å¸•æ–¯å¡å‘½åæ³• æ¥å£å®šä¹‰åº”è¯¥æœ‰ \u0026lsquo;I\u0026rsquo; å‰ç¼€. å…³äºè¯­ä¹‰ä¸Šçš„å»ºè®®.\nå…³äºæ¸¸æˆå¯¹è±¡çš„æ§åˆ¶è„šæœ¬, å¯ä»¥ä»¥ \u0026lsquo;Controller\u0026rsquo; ä¸ºåç¼€å‘½å, å½“ç„¶, å¦‚æœè§‰å¾—å¤ªé•¿, ä½¿ç”¨ \u0026lsquo;Ctrl\u0026rsquo; ä½œä¸ºåç¼€ä¹Ÿæ˜¯å¯ä»¥çš„. å½“è„šæœ¬ä¸­éœ€è¦å¼•ç”¨æŸäº›æ¸¸æˆå¯¹è±¡çš„æ—¶å€™, å¯ä»¥å°†è¿™ä¸ªå­—æ®µåæ·»åŠ  \u0026lsquo;Ref\u0026rsquo; åç¼€æ¥è¡¨ç¤ºè¿™æ˜¯ä¸ªæ¸¸æˆå¯¹è±¡å¼•ç”¨. å½“å¼•ç”¨çš„æŸä¸ªæ¸¸æˆå¯¹è±¡æ˜¯ä¸“é—¨ç”¨æ¥ä½œä¸ºå¦ä¸€ä¸ªæ¸¸æˆå¯¹è±¡çš„çˆ¶å¯¹è±¡çš„æ—¶å€™, ä¹Ÿå°±æ˜¯ \u0026ldquo;æ’æ§½\u0026rdquo;, ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ \u0026lsquo;Slot\u0026rsquo; ä½œä¸ºåç¼€æ¥å‘½å, è¿™æ ·çœ‹åˆ°åå­—å°±èƒ½çŸ¥é“ç”¨é€”. å½“å¼•ç”¨ä¸€ä¸ªé¢„åˆ¶ä½“çš„æ—¶å€™, å¯ä»¥ä½¿ç”¨ \u0026lsquo;Prefab\u0026rsquo; åç¼€æ¥è¡¨ç¤ºè¿™é‡Œéœ€è¦ä¸€ä¸ªé¢„åˆ¶ä½“. ä¸ºä»€ä¹ˆå‰é¢è¯´ä¸ä½¿ç”¨ç±»å‹å‰ç¼€, è€Œè¿™é‡Œåˆæ¨èä½¿ç”¨åç¼€. æ˜¯å› ä¸º Unity ä¸­æ¸¸æˆå¯¹è±¡å¯èƒ½æ˜¯åœºæ™¯ä¸­çš„, ä¹Ÿæœ‰å¯èƒ½æ˜¯é¢„åˆ¶ä½“. å¼•ç”¨çš„æ—¶å€™, å­—æ®µå£°æ˜æ˜¯ä¸€æ¨¡ä¸€æ ·çš„. åªèƒ½åœ¨åç§°ä¸ŠåŠ åç¼€åŠ ä»¥åŒºåˆ†.\n","date":"2023-10-31T08:15:56+08:00","permalink":"https://slimenull.com/p/20231031081556/","title":"[Unity] ä¸ªäººç¼–ç è§„èŒƒä¸å‘½åå‡†åˆ™å‚è€ƒ"},{"content":"æ¬¸? ä½ è¿˜åœ¨ä½¿ç”¨ Dispatcher æ¥è®¾ç½®ä¸è·å–æ•°æ®? è½åå•¦! å¿«æ¥è¯•è¯• MVVM å§!\næ•°æ®ç»‘å®š: æ•°æ®ç»‘å®šéœ€è¦æœ‰ä¸€ä¸ªæº, è¿™ä¸ªæºå¯ä»¥æ˜¯ä¸€ä¸ªæ§ä»¶, ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡.\næœ€ç®€å•çš„æ•°æ®ç»‘å®šæ˜¯å¯¹æ§ä»¶å±æ€§çš„ç»‘å®š. ä¾‹å¦‚, ä¸€ä¸ª Label å§‹ç»ˆæ˜¾ç¤º Slider çš„å€¼: ç»‘å®šæ•°æ®åˆ°æŸä¸ªæ§ä»¶, æ­¤æ—¶, æ•°æ®ç»‘å®šçš„æºå°±æ˜¯è¿™ä¸ªæ§ä»¶. Pathæ˜¯Value, å³, æˆ‘ä»¬è¦è·å–ä¸è®¾ç½®è¿™ä¸ªæ§ä»¶çš„Value\nDataContext: å¦‚æœè¦è®¾ç½®æºä¸ºä¸€ä¸ªå¯¹è±¡. ä¾‹å¦‚æˆ‘ä»¬å®šä¹‰çš„ MyObj çš„å®ä¾‹, åˆ™éœ€è¦æŒ‡å®š DataContext. æŒ‡å®š DataContext çš„æ§ä»¶ä»¥åŠå®ƒçš„å­å…ƒç´ éƒ½å°†ä½¿ç”¨æŒ‡å®šçš„å¯¹è±¡ä½œä¸ºæ•°æ®ç»‘å®šçš„æº. ä¾‹å¦‚: MVVM: MVVM çš„æ„æ€æ˜¯: Model, View, ViewModel, å…¶ä¸­:\nModel: ç¨‹åºçš„æ ¸å¿ƒä»£ç , ä¾‹å¦‚æ•°æ®åº“æ“ä½œ View: ç¨‹åºçš„å±•ç¤ºå±‚, ä¾‹å¦‚ UI å±•ç¤ºä¸ UI äº‹ä»¶. ViewModel: è§†å›¾æ•°æ®å±‚. å•Šæˆ‘çŸ¥é“ä½ å¾ˆè¿·æƒ‘\u0026hellip; æ¯•ç«Ÿå½“æ—¶æˆ‘ä¹Ÿæ˜¯è¿™æ ·, åæ­£, ä¸€ä¸ªä¾‹å­è¶³å¤Ÿæè¿°å‡ºæ¥äº†.\nä¾‹å­: æ–°å»ºä¸€ä¸ª WPF é¡¹ç›®. æ­¤æ¬¡æ¼”ç¤º, æˆ‘ä»¬ä»¥ MvvmTest ä½œä¸ºé¡¹ç›®å. åœ¨é¡¹ç›®ä¸­åˆ›å»ºä»¥ä¸‹æ–‡ä»¶å¤¹: Model, View, ViewModel. å°† MainWindow.xaml ç§»åŠ¨åˆ° View ä¸­. å¹¶è°ƒæ•´ xaml ä¸­çš„ Window çš„ x:Class å±æ€§å€¼. ","date":"2023-09-02T09:00:54+08:00","permalink":"https://slimenull.com/p/20230902090054/","title":"[.NET] WPF æ•°æ®ç»‘å®šä¸ MVVM æ¨¡å‹"},{"content":"åœ¨ WPF ä¸­, æŒ‰é’®åŒ…å«ä¸€ä¸ª \u0026ldquo;è¾¹æ¡†\u0026rdquo;, å¾ˆå¤šæ—¶å€™éœ€è¦è®¾ç½®æŒ‰é’®çš„åœ†è§’, ä½†æ˜¯æŒ‰é’®å¹¶æ²¡æœ‰æä¾›ä¸€ä¸ªå±æ€§ç”¨æ¥è®¾ç½®è¾¹æ¡†åœ†è§’.\nä¸‹é¢ä»¥æŒ‰é’®ä¸ºä¾‹, åˆ—ä¸¾å‡ ç§å¸¸ç”¨çš„è®¾ç½®åœ†è§’çš„æ–¹å¼.\né€šè¿‡é™„åŠ å±æ€§ å®šä¹‰ä¸€ä¸ªé™„åŠ å±æ€§, ç„¶ååœ¨å„ä¸ªåœ°æ–¹å°±èƒ½ç›´æ¥æ–¹ä¾¿çš„ä½¿ç”¨äº†, ä¸‹é¢æ˜¯å®é™…ä½¿ç”¨æ–¹å¼:\n1 \u0026lt;Button utils.BorderUtils.CornerRadius=\u0026#34;3\u0026#34;/\u0026gt; æ¥ä¸‹æ¥æ˜¯å…·ä½“å®ç°ä»£ç , é¦–å…ˆæ˜¯ä¸€äº›å·¥å…·æ–¹æ³•:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 using System.Windows.Media; namespace System.Windows { public static class CommonUtils { public static void RunOnFirstLoaded(this FrameworkElement element, EventHandler handler) { void Once(object? sender, RoutedEventArgs e) { element.Loaded -= Once; handler.Invoke(sender, e); } if (element.IsLoaded) handler.Invoke(element, EventArgs.Empty); else element.Loaded += Once; } public static TElement? GetElementFromVisualTree\u0026lt;TElement\u0026gt;(this FrameworkElement control) where TElement : FrameworkElement { if (control is TElement ele) return ele; int childrenCount = VisualTreeHelper.GetChildrenCount(control); for (int i = 0; i \u0026lt; childrenCount; i++) { DependencyObject child = VisualTreeHelper.GetChild(control, i); if (child is TElement eleChild) return eleChild; } return null; } } } ç„¶åæ˜¯ BorderUtils è¿™ä¸ªç±», åœ¨å…¶ä¸­å®šä¹‰ CornerRadius é™„åŠ å±æ€§:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 using System; using System.Windows.Controls; using System.Windows.Media; namespace System.Windows { public static class BorderUtils { [AttachedPropertyBrowsableForType(typeof(FrameworkElement))] public static CornerRadius GetCornerRadius(DependencyObject obj) { return (CornerRadius)obj.GetValue(CornerRadiusProperty); } public static void SetCornerRadius(DependencyObject obj, CornerRadius value) { obj.SetValue(CornerRadiusProperty, value); } // Using a DependencyProperty as the backing store for CornerRadius. This enables animation, styling, binding, etc... public static readonly DependencyProperty CornerRadiusProperty = DependencyProperty.RegisterAttached(\u0026#34;CornerRadius\u0026#34;, typeof(CornerRadius), typeof(BorderUtils), new PropertyMetadata(new CornerRadius(), CornerRadiusChanged)); private static void CornerRadiusChanged(DependencyObject d, DependencyPropertyChangedEventArgs e) { if (d is not FrameworkElement ele) return; ele.RunOnFirstLoaded((s, _e) =\u0026gt; { if (CommonUtils.GetElementFromVisualTree\u0026lt;Border\u0026gt;(ele) is not Border border) return; border.CornerRadius = (CornerRadius)e.NewValue; }); } } } é€šè¿‡èµ„æº ç›´æ¥åœ¨ Button èŠ‚ç‚¹ä¸‹æ·»åŠ ä¸€ä¸ª Border çš„æ ·å¼èµ„æº, ç„¶å Button ä¸­çš„ Border å°±ä¼šåº”ç”¨è¿™ä¸ªæ ·å¼.\n1 2 3 4 5 6 7 \u0026lt;Button\u0026gt; \u0026lt;Button.Resources\u0026gt; \u0026lt;Style TargetType=\u0026#34;Border\u0026#34;\u0026gt; \u0026lt;Setter Property=\u0026#34;CornerRadius\u0026#34; Value=\u0026#34;3\u0026#34; /\u0026gt; \u0026lt;/Style\u0026gt; \u0026lt;/Button.Resources\u0026gt; \u0026lt;/Button\u0026gt; é€šè¿‡æ¨¡æ¿ å¾ˆéº»çƒ¦çš„ä¸€ç§æ–¹å¼, ä¸æ¨è\n1 2 3 4 5 6 7 8 9 10 \u0026lt;Button\u0026gt; \u0026lt;Button.Template\u0026gt; \u0026lt;ControlTemplate TargetType=\u0026#34;{x:Type Button}\u0026#34; \u0026gt; \u0026lt;Border BorderBrush=\u0026#34;{TemplateBinding Control.BorderBrush}\u0026#34; BorderThickness=\u0026#34;1\u0026#34; CornerRadius=\u0026#34;7,7,7,7\u0026#34;\u0026gt; \u0026lt;Border.Background\u0026gt;#FFDDDDDD\u0026lt;/Border.Background\u0026gt; \u0026lt;ContentPresenter Content=\u0026#34;{TemplateBinding ContentControl.Content}\u0026#34; HorizontalAlignment=\u0026#34;Center\u0026#34; VerticalAlignment=\u0026#34;Center\u0026#34; \u0026gt;\u0026lt;/ContentPresenter\u0026gt; \u0026lt;/Border\u0026gt; \u0026lt;/ControlTemplate\u0026gt; \u0026lt;/Button.Template\u0026gt; \u0026lt;/Button\u0026gt; ","date":"2023-09-02T08:59:24+08:00","permalink":"https://slimenull.com/p/20230902085924/","title":"[.NET/WPF] è®¾ç½®æŒ‰é’®, ä»¥åŠå…¶ä»–ä»»ä½•åŒ…å«è¾¹æ¡†çš„æ§ä»¶çš„åœ†è§’"},{"content":"åœ¨ Unity ä¸­çš„ Inspector, åŸºæœ¬æ•°æ®ç±»å‹, æ•°ç»„, éƒ½æ˜¯å¯ä»¥ç›´æ¥æ˜¾ç¤ºå‡ºæ¥çš„, ä½†åˆ›å»ºå‡ºæ¥çš„ç»“æ„ä½“ä¸èƒ½ç›´æ¥æ˜¾ç¤ºå‡ºæ¥.\nä¸ºç»“æ„ä½“æ·»åŠ ä¸€ä¸ª System.Serializable ç‰¹æ€§å³å¯ä½¿å…¶èƒ½å¤Ÿæ˜¾ç¤ºåœ¨ Inspector ä¸­.\n1 2 3 4 5 6 [Serializable] struct CustomData { public int SomeInteger; public string SomeString; } ","date":"2023-08-31T15:02:36+08:00","permalink":"https://slimenull.com/p/20230831150236/","title":"[Unity, ç¬”è®°] åœ¨ Inspector ä¸­æ˜¾ç¤ºç»“æ„ä½“, ç»“æ„ä½“çš„åºåˆ—åŒ–"},{"content":"ä¸€ä¸ªå¯ä¾›ç»§æ‰¿çš„å•ä¾‹ç»„ä»¶æ¨¡æ¿ç±»:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 public class SingletonComponent\u0026lt;TComponent\u0026gt; : MonoBehavior where TComponent : SingletonComponent\u0026lt;TComponent\u0026gt; { static TComponent _instance; private static TComponent GetOrFindOrCreateComponent() { // åŒæ£€ç´¢ if (_instance == null) { // å°è¯•åœ¨åœºæ™¯ä¸­æŸ¥æ‰¾å·²å­˜åœ¨çš„ç»„ä»¶ _instance = FindObjectOfType\u0026lt;TComponent\u0026gt;(); // å¦‚æœæ‰¾ä¸åˆ°, åˆ™åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡, å¹¶ä¸”æŒ‚è½½ä¸Šç»„ä»¶ if (_instance == null) { GameObject gameObject = new GameObject(); _instance = gameObject.AddComponent\u0026lt;TComponent\u0026gt;(); } } return _instance; } public static TComponent Instance =\u0026gt; GetOrFindOrCreateComponent(); } å› ä¸º Unity æ˜¯å•çº¿ç¨‹çš„, æ‰€ä»¥åœ¨è¿™é‡Œæ²¡æœ‰å¿…è¦ä½¿ç”¨åŒæ£€ç´¢\nä½¿ç”¨æ–¹å¼ ä¾‹å¦‚ä½ è¦åˆ›å»ºä¸€ä¸ªå…¨å±€çš„å•ä¾‹ç®¡ç†ç±», å¯ä»¥è¿™æ ·ä½¿ç”¨:\n1 2 3 4 public class GameManager : SingletonComponent\u0026lt;GameManager\u0026gt; { // your code here } æ³¨æ„äº‹é¡¹ å°½é‡é¿å…è®© SingletonComponent å¸®ä½ åˆ›å»ºç»„ä»¶, å› ä¸ºå®ƒåªæ˜¯å•çº¯çš„å°†ç»„ä»¶åˆ›å»º, å¹¶æŒ‚è½½åˆ°ç©ºå¯¹è±¡ä¸Š, è€Œä¸ä¼šè¿›è¡Œä»»ä½•å…¶ä»–è¡Œä¸º. å¦‚æœä½ çš„ç»„ä»¶éœ€è¦è¿›è¡ŒæŸäº›åˆå§‹åŒ–, é‚£ä¹ˆå®ƒå¯èƒ½ä¸ä¼šæ­£å¸¸.\n","date":"2023-08-28T20:22:36+08:00","permalink":"https://slimenull.com/p/20230828202236/","title":"[Unity] å•ä¾‹è®¾è®¡æ¨¡å¼, å¯ä¾›ç»§æ‰¿çš„å•ä¾‹ç»„ä»¶æ¨¡æ¿ç±»"},{"content":"ç†Ÿæ‚‰ C# å¼€å‘çš„æœ‹å‹, åœ¨åˆšè¿›å…¥ Unity å¼€å‘æ—¶, ä¸å¯é¿å…çš„ä¼šæœ‰ä¸€äº›è¿·æƒ‘, ä¾‹å¦‚ä¸æ¸…æ¥š Unity è‡ªå·±çš„æ€æƒ³, å¦‚ä½•è®¾è®¡ä¸æ¶æ„ä¸€ä¸ªåº”ç”¨ç¨‹åºä¹‹ç±»çš„. æœ¬ç¯‡æ–‡ç« ç®€è¦çš„ä»‹ç»ä¸€ä¸‹ Unity çš„åŸºç¡€ç¼–ç¨‹æ€æƒ³.\nç‹¬ç«‹ Unity å¾ˆå°‘ä½¿ç”¨ C# çš„æ ‡å‡†åº“, ä¾‹å¦‚ C# çš„ç½‘ç»œ, äº‹ä»¶é©±åŠ¨, å¯¹è±¡æ¨¡å‹, è¿™äº›æ¦‚å¿µåœ¨ Unity ä¸­å‡ ä¹ä¸ä¼šè¢«ç”¨åˆ°. ç”šè‡³äº, è¿æ ‡å‡†çš„ System å‘½åç©ºé—´éƒ½å¾ˆå°‘è¢«å¼•ç”¨.\nUnity è‡ªå·±å®ç°äº†ä¸€å¥—è¾ƒä¸ºå®Œå–„çš„æ ‡å‡†åº“, ä»¥é€‚ç”¨äºæ¸¸æˆå¼€å‘. ä¾‹å¦‚æœ€ç®€å•çš„ \u0026ldquo;éšæœºæ•°\u0026rdquo;, åœ¨ Unity ä¸­, UnityEngine.Random ç±»å®ç°äº†éšæœºæ•°ç”Ÿæˆ. å¹¶ä¸”å®ƒæ˜¯ä¸€ä¸ªé™æ€ç±», ä¸éœ€è¦æˆ‘ä»¬åˆ›å»ºéšæœºæ•°å¯¹è±¡, å³å¯ä½¿ç”¨.\nUnity ç”¨åˆ°çš„, æœ€å¤šæ˜¯ C# ä¸­çš„é›†åˆ, LINQ æŸ¥è¯¢è¿™äº›. ç”šè‡³äº, Unity ä¸­çš„ UI äº‹ä»¶å¤„ç†å™¨, éƒ½ä¸æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ C# EventHandler. å®Œå®Œå…¨å…¨ç®—å¾—ä¸Šé‚ªæ•™.\nå‘½å åˆšå¼€å§‹ä½¿ç”¨ Unity çš„ä½ , è‚¯å®šä¼šç–‘æƒ‘,,, ä¸ºä»€ä¹ˆ Unity çš„è„šæœ¬ä¸­, ç”¨äºè·å– Transform ç»„ä»¶çš„å±æ€§, å«åš transform, è€Œä¸æ˜¯ Transform. ä¸€ä¸ªå…¬å¼€çš„å±æ€§, å´ä¸ä½¿ç”¨å¤§é©¼å³°å‘½åæ³•, è€Œæ˜¯ä½¿ç”¨å°é©¼å³°?\näº‹å®ä¸Š, Unity å‹æ ¹ä¸ç”¨ C# çš„å‘½åè§„èŒƒ, åªæœ‰ä¸€éƒ¨åˆ†ä¸ C# çš„å‘½åè§„èŒƒç»Ÿä¸€. ä¾‹å¦‚, å®ƒçš„ç±»å‹è¿˜æ˜¯å¤§é©¼å³°çš„, å®ƒçš„æ¥å£ä¹Ÿæ˜¯ä»¥ I å¼€å¤´çš„å¤§é©¼å³°å‘½å. ä¸è¿‡å•å•å±æ€§å‘½åä¸ C# ä¸ç»Ÿä¸€è¿™ä»¶äº‹, å°±å·²ç»èƒ½è®©å¤§å¤šæ•°æ³¨é‡ä¼˜é›…çš„ C# ç¨‹åºå‘˜ç«å†’ä¸‰ä¸ˆäº†.\nå¯¹è±¡ åˆšåˆšä¹Ÿæåˆ°äº†, Unity è‡ªå·±å•ç‹¬å®ç°äº†ä¸€æ•´å¥—æ ‡å‡†åº“, åªæœ‰å°‘éƒ¨åˆ†æ˜¯ä½¿ç”¨ C# çš„ä¸œè¥¿. äº‹å®ä¸Š, åœ¨ Unity ä¸­, æ‰€æœ‰ Unity å¯å¼•ç”¨çš„å¯¹è±¡éƒ½æ˜¯ç”± UnityEngine.Object æ´¾ç”Ÿè€Œæ¥çš„. ä¾‹å¦‚æ¸¸æˆå¯¹è±¡ UnityEngine.GameObject, è¿˜æœ‰è¯¸å¦‚ Camea, RigidBody è¿™äº›å„ç§å„æ ·çš„ç»„ä»¶.\nUnity çš„å¯¹è±¡å°è£…äº†å¾ˆå¤šé™æ€æ–¹æ³•, ä¾‹å¦‚å…‹éš†ä¸€ä¸ªå¯¹è±¡, é”€æ¯ä¸€ä¸ªå¯¹è±¡, åœ¨åœºæ™¯ä¸­æŸ¥æ‰¾æŸä¸ªç±»å‹çš„å¯¹è±¡. ç”±äºæˆ‘ä»¬åœ¨ Unity ä¸­ç¼–è¾‘çš„ C# ä»£ç å¤§å¤šæ˜¯ä¸€ä¸ªç»§æ‰¿äº† UnityEngine.MonoBehavior çš„è„šæœ¬, è€Œå®ƒåˆé—´æ¥ç»§æ‰¿ UnityEngine.Object, æ‰€ä»¥æˆ‘ä»¬åœ¨ä»£ç ä¸­è®¿é—®è¿™äº›æ–¹æ³•çš„æ—¶å€™, å°±ä¸éœ€è¦å†™ç±»å, ç›´æ¥è°ƒç”¨å³å¯.\næ¸¸æˆå¯¹è±¡ä¸ç»„ä»¶ åœ¨ C# ä¸­, å®ç°åŠŸèƒ½çš„æ‹“å±•æ˜¯é€šè¿‡ç»§æ‰¿æ¥å®ç°çš„, ä¾‹å¦‚ Button ç»§æ‰¿ Control, å¹¶åœ¨ Control çš„åŸºç¡€ä¸Šæ‹“å±•å‡ºè‡ªå·±çš„åŠŸèƒ½, ä½†æ˜¯ Unity ä¸æ˜¯è¿™æ ·.\nUnity ä¸­, æ¯ä¸€ä¸ªåœºæ™¯ä¸­çš„å¯¹è±¡, å°±å•çº¯åªæ˜¯ä¸€ä¸ª GameObject, å®ƒè‡ªå·±æœ¬èº«æ²¡æœ‰ä»»ä½•åŠŸèƒ½. å¦‚æœè¦ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›åŠŸèƒ½, å°±è¦ä¸ºå®ƒæŒ‚è½½ä¸€äº›ç»„ä»¶. ä¾‹å¦‚æ¸¸æˆä¸­åŸå§‹çš„ä¸€ä¸ª Sphere ç‰©ä½“, å®ƒç”± Transform, MeshFilter, MeshRenderer, SphereCollider è¿™äº›ç»„ä»¶æ„æˆ, ä»–ä»¬åˆ†åˆ«è´Ÿè´£æ‰¿è½½ \u0026ldquo;ç‰©ä½“çš„å˜æ¢, åŒ…æ‹¬ä½ç½®, æ—‹è½¬, ç¼©æ”¾\u0026rdquo;, \u0026ldquo;ç½‘æ ¼çš„å­˜å‚¨\u0026rdquo;, \u0026ldquo;ç½‘æ ¼çš„æ¸²æŸ“\u0026rdquo;, \u0026ldquo;ç¢°æ’ç›¸å…³åŠŸèƒ½\u0026rdquo;.\nä¸è¿‡, Unity ä¸­çš„ç»„ä»¶æœ¬èº«è¿˜æ˜¯å­˜åœ¨ç»§æ‰¿å…³ç³»çš„. ä¾‹å¦‚ SphereCollider å’Œ BoxCollider éƒ½æ˜¯ Collider çš„æ´¾ç”Ÿç±».\nåªè¦ç†è§£äº†ä»»ä½•æ¸¸æˆä¸­çš„ç‰©ä½“éƒ½æœ‰ä¸€ä¸ªæœ€åŸºæœ¬çš„æ¸¸æˆå¯¹è±¡å’Œæä¾›åŠŸèƒ½çš„ç»„ä»¶æ„æˆ, å°±å¯ä»¥ç†è§£å¤§éƒ¨åˆ†é—®é¢˜äº†. æ ¹æ®è¿™ä¸€ç‚¹, å¦‚æœä½ æƒ³è‡ªå·±æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ª Sphere, ä¹Ÿå¯ä»¥å…ˆåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡, ç„¶åæŒ‰ç…§ Sphere çš„æ„æˆ, å°†æ‰€éœ€è¦çš„ç»„ä»¶é€ä¸ªæ·»åŠ ä¸Šå», å¹¶æ­£ç¡®çš„è®¾ç½®å¥½å±æ€§, å°±å¯ä»¥å®Œç¾çš„å¤åˆ¶å‡ºå’Œè‡ªå¸¦çš„ Sphere ä¸€æ¨¡ä¸€æ ·çš„ç‰©ä½“äº†.\nç»„ä»¶ä¹‹é—´çš„ä¾èµ–ä¸äº’æ–¥ ç»„ä»¶ä¹Ÿæ˜¯æœ‰ç›¸äº’çš„å…³ç³»çš„, å°±åƒæˆ‘ä»¬æ‰€ç”¨çš„ æ§åˆ¶åè½¬ ä¸­çš„æœåŠ¡ä¸€æ ·, æˆ‘ä»¬å°†åŠŸèƒ½æŠ½æˆä¸€ä¸ªä¸ªæœåŠ¡, è€ŒæœåŠ¡ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³». Unity çš„ç»„ä»¶ä¹Ÿæ˜¯å¦‚æ­¤.\nå¦‚æœè¦ä½¿åŠŸèƒ½æ­£å¸¸è¿è¡Œ, å°±éœ€è¦åŒæ—¶æ·»åŠ ç»„ä»¶æ‰€ä¾èµ–çš„ç»„ä»¶. ä¾‹å¦‚è¦å®ç°ç‰©ç†æ•ˆæœ, æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ª RigidBody ç»„ä»¶, ä½†æ˜¯è¦ä½¿ç‰©ä½“ä¹‹é—´èƒ½å¤Ÿäº§ç”Ÿç¢°æ’, å°±éœ€è¦å†æ·»åŠ ä¸€ä¸ª Collider. å¦‚æœå•ç‹¬æ·»åŠ  RigidBody, è™½ç„¶ç‰©ä½“ä¼šå—é‡åŠ›å½±å“, ä½†æ˜¯å› ä¸ºä¸ä¼šäº§ç”Ÿç¢°æ’, æ‰€ä»¥ä¼šç›´æ¥ç©¿è¿‡å…¶ä»–ç‰©ä½“.\nè‡³äºç»„ä»¶çš„äº’æ–¥, æœ‰ä¸¤ç§, ä¸€ç§æ˜¯å®Œå…¨ä¸èƒ½å…±å­˜çš„, ä¾‹å¦‚æ— æ³•ä¸ºä¸€ä¸ªç‰©ä½“åŒæ—¶æ·»åŠ  BoxCollider å’Œ BoxCollider2D, å¦‚æœå°è¯•æ·»åŠ , ç¼–è¾‘å™¨ä¸­ä¼šæç¤º \u0026ldquo;ç»„ä»¶å†²çª\u0026rdquo;. å¦ä¸€ç§åˆ™æ˜¯, å¯ä»¥åŒæ—¶æ·»åŠ , ä½†æ˜¯ä¼šäº§ç”Ÿä¸€äº›å¥‡æ€ªæ•ˆæœçš„. ä¾‹å¦‚ CharacterController å’Œ RigidBody åŒæ—¶æ·»åŠ åˆ°ç‰©ä½“ä¸­æ—¶, å°±ä¼šå¼•èµ·ç§»åŠ¨ç›¸å…³çš„é—®é¢˜.\nå…¨å±€å•ä¾‹ä¸é™æ€ç±» Unity ä¸­å¾ˆå°‘ä½¿ç”¨é™æ€ç±», é™¤éä½ è¦ç”¨é™æ€ç±»æ‰¿è½½ä¸€äº›å·¥å…·æ–¹æ³•. ä½†å¦‚æœæ˜¯ä¸€äº›é€»è¾‘ç›¸å…³çš„ä¸œè¥¿, é‚£å®ƒåŸºæœ¬éƒ½æ˜¯åƒæ™®é€šçš„è„šæœ¬ä¸€æ ·æ˜¯éé™æ€çš„, è€Œæƒ³è¦å…¨å±€è®¿é—®, åœ¨ Unity ä¸­æ›´å¤šä½¿ç”¨çš„æ˜¯ \u0026ldquo;å•ä¾‹æ¨¡å¼\u0026rdquo;.\nåœ¨å¹³å¸¸çš„å¼€å‘ä¸­, æˆ‘ä»¬å¤§æŠµæ˜¯å¾ˆå°‘ç”¨åˆ°å•ä¾‹çš„. å› ä¸ºç›´æ¥ç”¨é™æ€å°±å¯ä»¥è§£å†³é—®é¢˜. ä½†æ˜¯ Unity ä¸­ä½¿ç”¨é™æ€çš„è¯, æˆ‘ä»¬å°±æ²¡åŠæ³•å°†å®ƒä½œä¸ºç»„ä»¶æŒ‚è½½åˆ°æ¸¸æˆå¯¹è±¡ä¸Š, è€Œä¸”ä¹Ÿä¸èƒ½é€šè¿‡ Unity çš„ç¼–è¾‘å™¨å¯¹å®ƒçš„ä¸€äº›å˜é‡è¿›è¡Œèµ‹å€¼, ä¸æ˜¯å¾ˆæ–¹ä¾¿. æ‰€ä»¥ Unity å•ä¾‹ç”¨çš„æ›´å¤š.\néœ€è¦æ³¨æ„çš„æ˜¯, å¹³å¸¸ç¼–ç¨‹ä¸­æ‰€ä½¿ç”¨çš„å•ä¾‹æ˜¯æ²¡åŠæ³•ç›´æ¥åº”ç”¨åœ¨ Unity ä¸Šçš„, Unity çš„å¯¹è±¡äº§ç”Ÿä¸é”€æ¯éƒ½ä¸å¹³å¸¸çš„å¼€å‘æœ‰æ‰€ä¸åŒ, éœ€è¦åšä¸€ç‚¹é’ˆå¯¹ Unity çš„ \u0026ldquo;æœ¬åœ°åŒ–\u0026rdquo; æ‰èƒ½æ­£ç¡®ä½¿ç”¨.\nç®¡ç†ç±» Unity ä¼šä½¿ç”¨å¤§é‡çš„ \u0026ldquo;ç®¡ç†ç±»\u0026rdquo; ç”¨æ¥é›†ä¸­ç®¡ç†é€»è¾‘. ç”šè‡³äº, å½“ä½ åˆ›å»ºä¸€ä¸ªåå­—ä¸º GameManager çš„è„šæœ¬æ—¶, å®ƒçš„å›¾æ ‡ä¸æ˜¯ä¸€ä¸ª C# è„šæœ¬å›¾æ ‡, è€Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„é½¿è½®å›¾æ ‡. ç”±æ­¤å¯è§ Unity å¼€å‘ä¸­æœ‰å¤šé‡è§†è¿™ä¸ª.\nç›¸æ¯”è¾ƒæˆ‘ä»¬å¹³å¸¸çš„æ¡Œé¢å¼€å‘, åç«¯å¼€å‘, ä¹‹æ‰€ä»¥ Unity æ›´å¸¸ä½¿ç”¨æ‰€è°“çš„ç®¡ç†ç±», æ˜¯å› ä¸º Unity æ¸¸æˆå¯¹è±¡çš„é€šä¿¡æ˜¯æ¯”è¾ƒéº»çƒ¦çš„, è€Œä¸”ä¸€æ•´ä¸ªæ¸¸æˆçš„é€»è¾‘ä¹Ÿæ›´åŠ å¤æ‚, ä¾‹å¦‚ä¸€åœºæˆ˜æ–—çš„è¿›è¡Œ, è¿™æ—¶ä½¿ç”¨ä¸€ä¸ª \u0026ldquo;æˆ˜æ–—ç®¡ç†\u0026rdquo; çš„ç±»æ¥è®°å½•æˆ˜æ–—ç›¸å…³çš„æ•°æ®, è°ƒç”¨è§’è‰²è¿›è¡Œæˆ˜æ–—, è¦æ›´åŠ æ–¹ä¾¿äº›.\n","date":"2023-08-18T16:55:42+08:00","permalink":"https://slimenull.com/p/20230818165542/","title":"[Unity] åŸºç¡€çš„ç¼–ç¨‹æ€æƒ³, ç»„ä»¶å¼å¼€å‘"},{"content":"æˆ‘ä»¬åœ¨å¼€å‘ä¸­, ç»å¸¸ä¼šæœ‰è¿™æ ·çš„éœ€æ±‚:\nç‚¹å‡»æŒ‰é’®å, è¿›è¡Œä¸€äº›è€—æ—¶çš„å·¥ä½œ å·¥ä½œè¿›è¡Œæ—¶, æŒ‰é’®ä¸å¯å†æ¬¡è¢«ç‚¹å‡» å·¥ä½œè¿›è¡Œæ—¶, ä¼šæ˜¾ç¤ºè¿›åº¦æ¡, æˆ–è€… \u0026ldquo;åŠ è½½ä¸­\u0026rdquo; çš„åŠ¨ç”» RelayCommand CommunityToolkit.Mvvm ä¸­çš„ RelayCommand é™¤äº†æ”¯æŒæœ€ç®€å•çš„åŒæ­¥æ–¹æ³•, è¿˜æ”¯æŒä»¥ Task ä½œä¸ºè¿”å›å€¼çš„å¼‚æ­¥æ–¹æ³•, å½“æˆ‘ä»¬ä¸ºè¿™æ ·çš„å¼‚æ­¥æ–¹æ³•æ ‡è®°ä¸Š RelayCommand ç‰¹æ€§æ—¶, å®ƒä¼šç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„å¼‚æ­¥æŒ‡ä»¤.\næŒ‡ä»¤åœ¨æ‰§è¡Œæ—¶, ä¸»è¦é€»è¾‘ä¼šåœ¨åå°, è€Œä¸æ˜¯è¿è¡Œåœ¨ UI çº¿ç¨‹ä¸­. å…·ä½“å¯ä»¥å‚è€ƒ \u0026ldquo;å¼‚æ­¥å’Œå¼‚æ­¥çš„çº¿ç¨‹åˆ‡æ¢\u0026rdquo; æŒ‡ä»¤åœ¨æ‰§è¡Œæ—¶, CanExecute ä¼šå˜ä¸º false, æ­¤æ—¶ä½¿ç”¨è¯¥ Command çš„ Button æˆ–è€…å…¶ä»–æ§ä»¶, ä¹Ÿä¼šå˜æˆ \u0026lsquo;è¢«ç¦ç”¨\u0026rsquo; çš„çŠ¶æ€. å¦‚æœæ–¹æ³•å‚æ•°ä¸­åŒ…å«ä¸€ä¸ª CancellationToken, é‚£ä¹ˆè¿™ä¸ªä»»åŠ¡åŒæ ·å¯ä»¥è¢«å–æ¶ˆ. åªéœ€è¦ä½ æ–¹æ³•å†…éƒ¨æœ‰æ­£ç¡®å®ç° \u0026ldquo;å–æ¶ˆæ‰§è¡Œ\u0026rdquo; çš„é€»è¾‘å°±æ²¡é—®é¢˜. ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­.\nä¸»çª—ä½“ä»£ç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 \u0026lt;Window x:Class=\u0026#34;LearnMvvm.MainWindow\u0026#34; xmlns=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation\u0026#34; xmlns:x=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml\u0026#34; xmlns:d=\u0026#34;http://schemas.microsoft.com/expression/blend/2008\u0026#34; xmlns:mc=\u0026#34;http://schemas.openxmlformats.org/markup-compatibility/2006\u0026#34; xmlns:local=\u0026#34;clr-namespace:LearnMvvm\u0026#34; xmlns:vm=\u0026#34;clr-namespace:LearnMvvm.ViewModels\u0026#34; mc:Ignorable=\u0026#34;d\u0026#34; Title=\u0026#34;MainWindow\u0026#34; Height=\u0026#34;450\u0026#34; Width=\u0026#34;7![è¯·æ·»åŠ å›¾ç‰‡æè¿°](images/65ddbab8f917458bbfd40ebdb6bb6d16.gif) 00\u0026#34;\u0026gt; \u0026lt;Window.DataContext\u0026gt; \u0026lt;vm:MainViewModel/\u0026gt; \u0026lt;/Window.DataContext\u0026gt; \u0026lt;Grid\u0026gt; \u0026lt;StackPanel Margin=\u0026#34;50\u0026#34;\u0026gt; \u0026lt;Button Command=\u0026#34;{Binding DoSomethingCommand}\u0026#34;\u0026gt;Do something\u0026lt;/Button\u0026gt; \u0026lt;Button Command=\u0026#34;{Binding CancelDoSomethingCommand}\u0026#34; Margin=\u0026#34;0 5 0 0\u0026#34;\u0026gt;Cancel\u0026lt;/Button\u0026gt; \u0026lt;ProgressBar Margin=\u0026#34;0 10 0 0\u0026#34; Height=\u0026#34;15\u0026#34; Value=\u0026#34;{Binding Progress}\u0026#34;/\u0026gt; \u0026lt;/StackPanel\u0026gt; \u0026lt;/Grid\u0026gt; \u0026lt;/Window\u0026gt; åå° ViewModel\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 public partial class MainViewModel : ObservableObject { [ObservableProperty] private int progress; [RelayCommand] public async Task DoSomething(CancellationToken token) { for (int i = 0; i \u0026lt;= 100; i++) { if (token.IsCancellationRequested) return; await Task.Delay(100); Progress = i; } } [RelayCommand] public void CancelDoSomething() { DoSomethingCommand.Cancel(); } } æ•ˆæœ:\nåœ¨ CommunityToolkit.Mvvm ä¸­, æ”¯æŒä»¥ä¸‹æ ·å¼çš„ RelayCommand ç­¾å:\nvoid æ–¹æ³•å() æ— å‚åŒæ­¥æŒ‡ä»¤ void æ–¹æ³•å(ç±»å‹ å‚æ•°å) æœ‰å‚åŒæ­¥æŒ‡ä»¤ Task æ–¹æ³•å(), æ— å‚, ä¸æ”¯æŒå–æ¶ˆçš„å¼‚æ­¥æŒ‡ä»¤ Task æ–¹æ³•å(ç±»å‹ å‚æ•°å) æœ‰å‚, ä¸æ”¯æŒå–æ¶ˆçš„å¼‚æ­¥æŒ‡ä»¤ Task æ–¹æ³•å(CancellationToken token) æ— å‚, æ”¯æŒå–æ¶ˆçš„å¼‚æ­¥æŒ‡ä»¤ Task æ–¹æ³•å(ç±»å‹ å‚æ•°å, CancellationToken token) æœ‰å‚, æ”¯æŒå–æ¶ˆçš„å¼‚æ­¥æŒ‡ä»¤ ","date":"2023-08-18T14:36:49+08:00","permalink":"https://slimenull.com/p/20230818143649/","title":"[.NET/WPF] CommunityToolkit.Mvvm å¼‚æ­¥æŒ‡ä»¤"},{"content":"å‚è€ƒè¿™ç¯‡æ–‡ç« , EVå½•åˆ¶æ–‡ä»¶æŸå-ä¿®å¤æ–¹æ³•, æˆ‘ç”¨ C# å†™äº†ä¸€ä¸ªå°ç¨‹åº.\nä»“åº“: github.com/SlimeNull/EvRepair ä¸‹è½½: github.com/SlimeNull/EvRepair/Releases é•œåƒ: gitee.com/slimenull/EvRepair/releases\nè§‰å¾—è¿˜ä¸é”™çš„è¯, ç‚¹ä¸ªæ˜Ÿæ˜Ÿ\næ¨èä½¿ç”¨çš„å‡ ä¸ªç†ç”±:\nå†…åµŒ ffmpeg å’Œ recovery_MP4.exe, ä¸éœ€è¦ç”¨æˆ·è‡ªå·±ç¿»å¢™ä¸‹è½½ å…¨è‡ªåŠ¨çš„, ç†æ‰€å½“ç„¶çš„, ä¸éœ€è¦æ‰“æŒ‡ä»¤, å°±å¯ä»¥å®Œæˆæ“ä½œ, åªéœ€è¦è·Ÿç€æç¤ºèµ°å°±å¥½äº† FAQ:\næ€ä¹ˆä½¿ç”¨ å¦‚æœæœ‰çœ‹ä¸æ‡‚çš„ä¸œè¥¿, å°±ç›´æ¥ä¸€è·¯å›è½¦ä½¿ç”¨é»˜è®¤é€‰é¡¹å°±å¥½. æç¤ºè·¯å¾„ä¸å­˜åœ¨ è¾“å…¥è·¯å¾„çš„æ—¶å€™, ä¸è¦å¸¦åŒå¼•å· ","date":"2023-08-15T15:37:35+08:00","permalink":"https://slimenull.com/p/20230815153735/","title":"EV å½•å±ä¿®å¤å°å·¥å…·"},{"content":"ä¸€ä¸ªæ§åˆ¶å°ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆçš„ç®€å•å®ç°. å·²åœ¨ github.com/SlimeNull/Tetris å¼€æº.\næ€è·¯ å¾ˆç®€å•, ä¸€ä¸ªäºŒç»´æ•°ç»„å­˜å‚¨å½“å‰æ¸¸æˆçš„æ–¹å—åœ°å›¾, ç”¨ bool å³å¯, true è¡¨ç¤ºå½“å‰å—è¢«å¡«å……, false è¡¨ç¤ºæ²¡æœ‰.\nç„¶å, æŠ½ä¸€ä¸ª \u0026ldquo;å½¢çŠ¶\u0026rdquo; ç±», å½¢çŠ¶è¡¨ç¤ºå½“å‰ç©å®¶æ­£åœ¨æ“ä½œçš„ä¸€ä¸ªå½¢çŠ¶, ä¾‹å¦‚æ–¹å—, ç›´çº¿, T å½¢ä»€ä¹ˆçš„. ä¸€ä¸ªå½¢çŠ¶åˆæœ‰ä¸åŒçš„æ ·å¼, ä¹Ÿå°±æ˜¯ç©å®¶å¯ä»¥åˆ‡æ¢çš„æ ·å¼. æ¯ä¸€ä¸ªæ ·å¼éƒ½æ˜¯åŸæ¥æ ·å¼æ—‹è½¬ä¹‹åçš„ç»“æœ. ä¸ºäº†æ–¹ä¾¿, å¯ä»¥ç›´æ¥ä½¿ç”¨ç¡¬ç¼–ç çš„æ–¹å¼å­˜å‚¨æ‰€æœ‰æ ·å¼ä¸­æ–¹å—çš„ç›¸å¯¹åæ ‡.\nä¸€ä¸ªå½¢çŠ¶æœ‰ä¸€ä¸ªè‡ªå·±çš„åæ ‡, å¹¶ä¸”å®ƒåŒ…å«å¾ˆå¤šæ–¹å—. åœ¨ç»˜åˆ¶çš„æ—¶å€™, è·å–å®ƒæ¯ä¸€ä¸ªæ–¹å—çš„åæ ‡, è½¬æ¢ä¸ºåœ°å›¾å†…çš„ç»å¯¹åæ ‡, ç„¶åä½¿ç”¨ StringBuilder æ‹¼æ¥å­—ç¬¦ä¸², å³å¯.\nèµ„æ–™ ä¿„ç½—æ–¯æ–¹å—ä¸­æ€»å…±æœ‰è¿™ä¸ƒç§æ–¹å—\nç±»å‹å®šä¹‰ ä¸€ä¸ªç®€å•çš„äºŒç»´åæ ‡\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 /// \u0026lt;summary\u0026gt; /// è¡¨ç¤ºä¸€ä¸ªåæ ‡ /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;X\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;Y\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; record struct Coordinate(int X, int Y) { /// \u0026lt;summary\u0026gt; /// æ ¹æ®åŸºåæ ‡å’Œç›¸å¯¹åæ ‡, è·å–ä¸€ä¸ªç»å¯¹åæ ‡ /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;baseCoord\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;relativeCoord\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt; public static Coordinate GetAbstract(Coordinate baseCoord, Coordinate relativeCoord) { return new Coordinate(baseCoord.X + relativeCoord.X, baseCoord.Y + relativeCoord.Y); } } å½¢çŠ¶çš„ä¸€ä¸ªæ ·å¼, å•çº¯ä½¿ç”¨åæ ‡æ•°ç»„å­˜å‚¨å³å¯.\n1 record struct ShapeStyle(Coordinate[] Coordinates); å½¢çŠ¶\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 /// \u0026lt;summary\u0026gt; /// å½¢çŠ¶åŸºç±» /// \u0026lt;/summary\u0026gt; abstract class Shape { /// \u0026lt;summary\u0026gt; /// åç§° /// \u0026lt;/summary\u0026gt; public abstract string Name { get; } /// \u0026lt;summary\u0026gt; /// å½¢çŠ¶çš„ä½ç½® /// \u0026lt;/summary\u0026gt; public Coordinate Position { get; set; } /// \u0026lt;summary\u0026gt; /// å½¢çŠ¶æ‰€æœ‰çš„æ ·å¼ /// \u0026lt;/summary\u0026gt; protected abstract ShapeStyle[] ShapeStyles { get; } /// \u0026lt;summary\u0026gt; /// å½“å‰ä½¿ç”¨çš„æ ·å¼ç´¢å¼• /// \u0026lt;/summary\u0026gt; private int _currentStyleIndex = 0; /// \u0026lt;summary\u0026gt; /// ä»åæ ‡æ„å»ºä¸€ä¸ªæ–°å½¢çŠ¶ /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;position\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; public Shape(Coordinate position) { Position = position; } /// \u0026lt;summary\u0026gt; /// è·å–å½“å‰å½¢çŠ¶çš„å½“å‰æ‰€æœ‰æ–¹å— (ç›¸å¯¹åæ ‡) /// \u0026lt;/summary\u0026gt; /// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt; public IEnumerable\u0026lt;Coordinate\u0026gt; GetBlocks() { return ShapeStyles[_currentStyleIndex].Coordinates; } /// \u0026lt;summary\u0026gt; /// è·å–å½“å‰å½¢çŠ¶ä¸‹ä¸€ä¸ªæ ·å¼çš„æ‰€æœ‰æ–¹å— (ç›¸å¯¹åæ ‡) /// \u0026lt;/summary\u0026gt; /// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt; public IEnumerable\u0026lt;Coordinate\u0026gt; GetNextStyleBlocks() { return ShapeStyles[(_currentStyleIndex + 1) % ShapeStyles.Length].Coordinates; } /// \u0026lt;summary\u0026gt; /// æ”¹å˜æ ·å¼ /// \u0026lt;/summary\u0026gt; public void ChangeStyle() { _currentStyleIndex = (_currentStyleIndex + 1) % ShapeStyles.Length; } } ä¸€ä¸ª T å½¢çŠ¶çš„å®ç°\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 class ShapeT : Shape { public ShapeT(Coordinate position) : base(position) { } public override string Name =\u0026gt; \u0026#34;T\u0026#34;; protected override ShapeStyle[] ShapeStyles { get; } = new ShapeStyle[] { new ShapeStyle( new Coordinate[] { new Coordinate(-1, 0), new Coordinate(0, 0), new Coordinate(1, 0), new Coordinate(0, 1), }), new ShapeStyle( new Coordinate[] { new Coordinate(-1, 0), new Coordinate(0, -1), new Coordinate(0, 0), new Coordinate(0, 1), }), new ShapeStyle( new Coordinate[] { new Coordinate(-1, 0), new Coordinate(0, 0), new Coordinate(1, 0), new Coordinate(0, -1), }), new ShapeStyle( new Coordinate[] { new Coordinate(1, 0), new Coordinate(0, -1), new Coordinate(0, 0), new Coordinate(0, 1), }), }; } ä¸»é€»è¾‘ ä¸Šé¢çš„å®šä¹‰å·²ç»å†™å¥½äº†, æ¥ä¸‹æ¥å°±æ˜¯å†™æ¸¸æˆä¸»é€»è¾‘.\nä¸»é€»è¾‘åŒ…å«æ¯ä¸€å›åˆè‡ªåŠ¨å‘ä¸‹ç§»åŠ¨å½¢çŠ¶, å¦‚æœæ— æ³•ç»§ç»­å‘ä¸‹ç§»åŠ¨, åˆ™æŠŠå½“å‰çš„å½¢çŠ¶å­˜å‚¨åˆ°åœ°å›¾ä¸­. å¹¶è¿›è¡Œä¸€æ¬¡æ‰«æ, å°†æ‰€æœ‰çš„æ•´è¡Œå…¨éƒ¨æ¶ˆé™¤.\næŠ½ä¸€ä¸ª TetrisGame çš„ç±»ç”¨æ¥è¡¨ç¤ºä¿„ç½—æ–¯æ–¹å—æ¸¸æˆ, ä¸‹é¢æ˜¯è¿™ä¸ªç±»çš„åŸºæœ¬å®šä¹‰.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 class TetrisGame { /// \u0026lt;summary\u0026gt; /// x, y /// \u0026lt;/summary\u0026gt; private readonly bool[,] map; private readonly Random random = new Random(); public TetrisGame(int width, int height) { map = new bool[width, height]; Width = width; Height = height; } public Shape? CurrentShape { get; set; } public int Width { get; } public int Height { get; } } åˆ¤æ–­å½“å‰å½¢çŠ¶æ˜¯å¦å¯ä»¥è¿›è¡Œç§»åŠ¨çš„æ–¹æ³•\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 /// \u0026lt;summary\u0026gt; /// åˆ¤æ–­æ˜¯å¦å¯ä»¥ç§»åŠ¨ (ç§»åŠ¨åæ˜¯å¦ä¼šä¸å·²æœ‰æ–¹å—é‡åˆ, æˆ–è€…è¶…å‡ºè¾¹ç•Œ) /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;xOffset\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;yOffset\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt; private bool CanMove(int xOffset, int yOffset) { // å¦‚æœå½“å‰æ²¡å½¢çŠ¶, è¿”å› false if (CurrentShape == null) return false; foreach (var block in CurrentShape.GetBlocks()) { Coordinate coord = Coordinate.GetAbstract(CurrentShape.Position, block); coord.X += xOffset; coord.Y += yOffset; // å¦‚æœç§»åŠ¨åæ–¹å—åæ ‡è¶…å‡ºç•Œé™, ä¸èƒ½ç§»åŠ¨ if (coord.X \u0026lt; 0 || coord.X \u0026gt;= Width || coord.Y \u0026lt; 0 || coord.Y \u0026gt;= Height) return false; // å¦‚æœç§»åŠ¨åæ–¹å—ä¼šä¸åœ°å›¾ç°æœ‰æ–¹å—é‡åˆ, åˆ™ä¸èƒ½ç§»åŠ¨ if (map[coord.X, coord.Y]) return false; } return true; } åˆ¤æ–­å½“å‰å½¢çŠ¶æ˜¯å¦èƒ½å¤Ÿåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªæ ·å¼çš„æ–¹æ³•\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 /// \u0026lt;summary\u0026gt; /// åˆ¤æ–­æ˜¯å¦å¯ä»¥æ”¹å˜å½¢çŠ¶ (æ”¹å˜å½¢çŠ¶åæ˜¯å¦ä¼šå’Œå·²æœ‰æ–¹å—é‡åˆ, æˆ–è€…è¶…å‡ºè¾¹ç•Œ) /// \u0026lt;/summary\u0026gt; /// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt; private bool CanChangeShape() { // å¦‚æœå½“å‰æ²¡å½¢çŠ¶, å½“ç„¶ä¸èƒ½åˆ‡æ¢æ ·å¼ if (CurrentShape == null) return false; // è·å–ä¸‹ä¸€ä¸ªæ ·å¼çš„æ‰€æœ‰æ–¹å— foreach (var block in CurrentShape.GetNextStyleBlocks()) { Coordinate coord = Coordinate.GetAbstract(CurrentShape.Position, block); // å¦‚æœè¶…å‡ºç•Œé™, ä¸èƒ½åˆ‡æ¢ if (coord.X \u0026lt; 0 || coord.X \u0026gt;= Width || coord.Y \u0026lt; 0 || coord.Y \u0026gt;= Height) return false; // å¦‚æœä¸ç°æœ‰æ–¹å—é‡åˆ, ä¸èƒ½åˆ‡æ¢ if (map[coord.X, coord.Y]) return false; } return true; } æŠŠå½“å‰å½¢çŠ¶å­˜å‚¨åˆ°åœ°å›¾ä¸­\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 /// \u0026lt;summary\u0026gt; /// å°†å½“å‰å½¢çŠ¶å­˜å‚¨åˆ°åœ°å›¾ä¸­ /// \u0026lt;/summary\u0026gt; private void StorageShapeToMap() { // æ²¡å½¢çŠ¶, å­˜å¯‚å¯ if (CurrentShape == null) return; // æ‰€æœ‰æ–¹å—éå†ä¸€ä¸‹ foreach (var block in CurrentShape.GetBlocks()) { // è½¬ä¸ºç»å¯¹åæ ‡ Coordinate coord = Coordinate.GetAbstract(CurrentShape.Position, block); // è¶…å‡ºç•Œé™åˆ™è·³è¿‡ if (coord.X \u0026lt; 0 || coord.X \u0026gt;= Width || coord.Y \u0026lt; 0 || coord.Y \u0026gt;= Height) continue; // å­˜åœ°å›¾é‡Œ map[coord.X, coord.Y] = true; } // å½“å‰å½¢çŠ¶è®¾ä¸º null CurrentShape = null; } ç”Ÿæˆä¸€ä¸ªæ–°å½¢çŠ¶\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 /// \u0026lt;summary\u0026gt; /// ç”Ÿæˆä¸€ä¸ªæ–°å½¢çŠ¶ /// \u0026lt;/summary\u0026gt; /// \u0026lt;exception cref=\u0026#34;InvalidOperationException\u0026#34;\u0026gt;\u0026lt;/exception\u0026gt; private void GenerateShape() { int shapeCount = 7; int randint = random.Next(shapeCount); Coordinate initCoord = new Coordinate(Width / 2, 0); Shape newShape = randint switch { 0 =\u0026gt; new ShapeI(initCoord), 1 =\u0026gt; new ShapeJ(initCoord), 2 =\u0026gt; new ShapeL(initCoord), 3 =\u0026gt; new ShapeO(initCoord), 4 =\u0026gt; new ShapeS(initCoord), 5 =\u0026gt; new ShapeT(initCoord), 6 =\u0026gt; new ShapeZ(initCoord), _ =\u0026gt; throw new InvalidOperationException() }; CurrentShape = newShape; } æ‰«æåœ°å›¾, æ¶ˆé™¤æ‰€æœ‰æ•´è¡Œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 /// \u0026lt;summary\u0026gt; /// æ‰«æ, æ¶ˆé™¤æ‰å¯æ¶ˆé™¤çš„è¡Œ /// \u0026lt;/summary\u0026gt; private void Scan() { for (int y = 0; y \u0026lt; Height; y++) { // è®¾ç½®å½“å‰è¡Œæ˜¯æ•´è¡Œ bool ok = true; // å¾ªç¯å½“å‰è¡Œçš„æ‰€æœ‰æ–¹å—, å¦‚æœæ–¹å—ä¸º false, ok å°±ä¼šè¢«è®¾ä¸º false for (int x = 0; x \u0026lt; Width; x++) ok \u0026amp;= map[x, y]; // å¦‚æœå½“å‰è¡Œç¡®å®æ˜¯æ•´è¡Œ if (ok) { // æ‰€æœ‰è¡Œå…¨éƒ¨å¾€ä¸‹ç§»åŠ¨ for (int _y = y; _y \u0026gt; 0; _y--) for (int x = 0; x \u0026lt; Width; x++) map[x, _y] = map[x, _y - 1]; // æœ€é¡¶è¡Œå…¨è®¾ä¸ºç©º for (int x = 0; x \u0026lt; Width; x++) map[x, 0] = false; } } } å°è£…ä¸€äº›ç”¨æˆ·æ“ä½œä½¿ç”¨çš„æ–¹æ³•\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 /// \u0026lt;summary\u0026gt; /// æ ¹æ®æŒ‡å®šåç§», è¿›è¡Œç§»åŠ¨ /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;xOffset\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;yOffset\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; public void Move(int xOffset, int yOffse { lock (this) { if (CurrentShape == null) return; if (CanMove(xOffset, yOffset)) { var newCoord = CurrentShape. newCoord.X += xOffset; newCoord.Y += yOffset; CurrentShape.Position = newC } } } /// \u0026lt;summary\u0026gt; /// å‘å·¦ç§»åŠ¨ /// \u0026lt;/summary\u0026gt; public void MoveLeft() { Move(-1, 0); } /// \u0026lt;summary\u0026gt; /// å‘å³ç§»åŠ¨ /// \u0026lt;/summary\u0026gt; public void MoveRight() { Move(1, 0); } /// \u0026lt;summary\u0026gt; /// å‘ä¸‹ç§»åŠ¨ /// \u0026lt;/summary\u0026gt; public void MoveDown() { Move(0, 1); } /// \u0026lt;summary\u0026gt; /// æ”¹å˜å½¢çŠ¶æ ·å¼ /// \u0026lt;/summary\u0026gt; public void ChangeShapeStyle() { lock (this) { if (CurrentShape == null) return; if (CanChangeShape()) CurrentShape.ChangeStyle(); } } /// \u0026lt;summary\u0026gt; /// é™è½åˆ°åº•éƒ¨ /// \u0026lt;/summary\u0026gt; public void Fall() { lock (this) { while (CanMove(0, 1)) { Move(0, 1); } } } æ¸¸æˆæ¯ä¸€è½®çš„ä¸»é€»è¾‘\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 /// \u0026lt;summary\u0026gt; /// ä¸‹ä¸€ä¸ªå›åˆ /// \u0026lt;/summary\u0026gt; public void NextTurn() { lock (this) { // å¦‚æœå½“å‰æ²¡æœ‰å­˜åœ¨çš„å½¢çŠ¶, åˆ™ç”Ÿæˆä¸€ä¸ªæ–°çš„, å¹¶è¿”å› if (CurrentShape == null) { GenerateShape(); return; } // å¦‚æœå¯ä»¥å‘ä¸‹ç§»åŠ¨ if (CanMove(0, 1)) { // ç›´æ¥æ”¹å˜å½“å‰å½¢çŠ¶çš„åæ ‡ var newCoord = CurrentShape.Position; newCoord.Y += 1; CurrentShape.Position = newCoord; } else { // å°†å½“å‰çš„å½¢çŠ¶ä¿å­˜åˆ°åœ°å›¾ä¸­ StorageShapeToMap(); } // æ‰«æ, åˆ¤æ–­æŸäº›è¡Œå¯ä»¥è¢«æ¶ˆé™¤ Scan(); } } å°†åœ°å›¾æ¸²æŸ“åˆ°æ§åˆ¶å°\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 public void Render() { StringBuilder sb = new StringBuilder(); bool[,] mapCpy = new bool[Width, Height]; Array.Copy(map, mapCpy, mapCpy.Length); if (CurrentShape != null) { foreach (var block in CurrentShape.GetBlocks()) { Coordinate coord = Coordinate.GetAbstract(CurrentShape.Position, block); if (coord.X \u0026lt; 0 || coord.X \u0026gt;= Width || coord.Y \u0026lt; 0 || coord.Y \u0026gt;= Height) continue; mapCpy[coord.X, coord.Y] = true; } } sb.AppendLine(\u0026#34;â”Œ\u0026#34; + new string(\u0026#39;â”€\u0026#39;, Width * 2) + \u0026#34;â”\u0026#34;); for (int y = 0; y \u0026lt; Height; y++) { sb.Append(\u0026#34;|\u0026#34;); for (int x = 0; x \u0026lt; Width; x++) { sb.Append(mapCpy[x, y] ? \u0026#34;##\u0026#34; : \u0026#34; \u0026#34;); } sb.Append(\u0026#34;|\u0026#34;); sb.AppendLine(); } sb.AppendLine(\u0026#34;â””\u0026#34; + new string(\u0026#39;â”€\u0026#39;, Width * 2) + \u0026#34;â”˜\u0026#34;); lock (this) { Console.SetCursorPosition(0, 0); Console.Write(sb.ToString()); } } ","date":"2023-08-09T09:36:33+08:00","permalink":"https://slimenull.com/p/20230809093633/","title":"[C#] ç®€å•çš„ä¿„ç½—æ–¯æ–¹å—å®ç°"},{"content":"å‰å‡ æ—¥, æˆ‘æ‹¿ç€æ‰‹é‡Œçš„ OnePlus 8T ä½œæ­», æˆåŠŸçš„æŠŠå®ƒä½œæˆäº†ç –, ç³»ç»Ÿåˆ†åŒºå—å±, recovery å’Œ bootloader åˆ†åŒºä¹Ÿéƒ½å—å±, æ¢è¨€ä¹‹, åªèƒ½ä½¿ç”¨ 9008 è¿›è¡Œåˆ·æœºäº†\u0026hellip;\nä»€ä¹ˆæ˜¯ 9008 æ·±åˆ· æŒ‰ç…§ç½‘ä¸Šçš„ä»‹ç», 9008 æ˜¯éªé¾™ç³»åˆ—å¤„ç†å™¨çš„æ‰‹æœºä¸“æœ‰çš„, ç”¨äºä¸ºæ‰‹æœºç¡¬ä»¶ä¸‹è½½æ•°æ®çš„æ¨¡å¼. åªè¦æ‰‹æœºè¿˜èƒ½é€šç”µ, é‚£ 9008 æ¨¡å¼å°±èƒ½ç”¨. æ‰€ä»¥, æ— è®ºæ‰‹æœºæ€ä¹ˆæˆç –äº†, éƒ½èƒ½é€šè¿‡è¿™ç§æ–¹å¼, ä¸ºæ‰‹æœºé‡æ–°åˆ·å…¥ç³»ç»Ÿ, è¾¾åˆ°æ•‘ç –çš„ç›®çš„.\nè¿™é‡Œè¯´çš„ \u0026ldquo;ä¸‹è½½æ•°æ®\u0026rdquo; æŒ‡çš„æ˜¯å‘æ‰‹æœºå­˜å‚¨å™¨å†™å…¥æ•°æ®\næœ‰ä»€ä¹ˆè¦æ±‚ å› ä¸º 9008 æ¨¡å¼æ˜¯éªé¾™å¤„ç†å™¨ç‹¬æœ‰çš„åŠŸèƒ½, æ‰€ä»¥, ä½ çš„æ‰‹æœºå¿…é¡»æ­è½½éªé¾™å¤„ç†å™¨. è”å‘ç§‘æˆ–è€…å…¶ä»–åˆ™ä¸å¯ä»¥.\nä¸è¿‡æ®æˆ‘æ‰€çŸ¥, è”å‘ç§‘ä¹Ÿæœ‰å’Œ 9008 å¯¹æ ‡çš„ä¸€ä¸ªæ•‘ç –æ–¹å¼, åªä¸è¿‡æˆ‘æ²¡æœ‰è¯•è¿‡.\néœ€è¦åšä»€ä¹ˆå‡†å¤‡ ä½ ç”µè„‘éœ€è¦æœ‰éªé¾™çš„ USB é©±åŠ¨, è¿™æ ·, åœ¨ç”µè„‘è¿æ¥åˆ°æ‰‹æœºçš„æ—¶å€™, ç”µè„‘æ‰èƒ½è¯†åˆ«åˆ°æ‰‹æœº.\nä¸€èˆ¬çš„, è¿™ä¸ªé©±åŠ¨éƒ½æ¯”è¾ƒéš¾æ‰¾, ä¾‹å¦‚å¤ªæ–°çš„ç‰ˆæœ¬å¯èƒ½ä¸è¡Œ, å¤ªæ—§çš„ç‰ˆæœ¬ä¹Ÿå¯èƒ½ä¸è¡Œ, åœ¨ Windows11 ä¸Š, é©±åŠ¨è¿˜éœ€è¦ç­¾å, æˆ–è€…éœ€è¦æ‰‹åŠ¨æ·»åŠ æµ‹è¯•è¯ä¹¦ä»€ä¹ˆçš„, ä¸è¿‡, åªéœ€è¦å»æ‹¿ç€æ‰‹æœºç‰Œå­, åœ¨ç½‘ä¸Šå»æœç´¢é©±åŠ¨ä¸‹è½½, æ€»æ˜¯èƒ½ä¸‹è½½åˆ°åˆé€‚çš„é©±åŠ¨çš„.\nåœ¨æœ‰é©±åŠ¨ä¹‹å, ä½ ç”µè„‘ä¸Šè¿˜éœ€è¦æœ‰ä¸“ç”¨çš„ 9008 æ•‘ç –åŒ…, ä¸€èˆ¬å‚å•†ä¼šæä¾›è¿™æ ·çš„æ•‘ç –åŒ…, ä¸€ä¸ªæ•‘ç –åŒ…ä¸­åŒ…å«åˆ·æœºå·¥å…·, ä»¥åŠåˆ·æœºåŒ…. åœ¨æ‰¾åˆ·æœºåŒ…çš„æ—¶å€™, åªéœ€è¦æ‹¿ç€æ‰‹æœºçš„å…·ä½“å‹å·, å»æœç´¢å³å¯.\nå¦‚æœå®˜ç½‘æ‰¾ä¸åˆ°çš„è¯, å¯ä»¥å»ä¸€äº›åˆ·æœºè®ºå›ä¸Šæ‰¾æ‰¾, ä½¿ç”¨é­”æ³•ä¸Šç½‘, å» XDA ä¸Šèƒ½æ‰¾åˆ°è®¸å¤šçš„ä½ æƒ³çŸ¥é“çš„ä¸œè¥¿, ä¾‹å¦‚ä¸€äº›åˆ·æœºæ•™ç¨‹.\nå¦‚ä½•è¿›è¡Œæ“ä½œ å¯¹äºå¼€æ”¾æ€§æœ€å¼ºçš„ä¸€åŠ æ‰‹æœº, æƒ³è¦è¿›å…¥ 9008 æ¨¡å¼, æ“ä½œèµ·æ¥æå…¶ç®€å•!\næ‰‹æœºå¤„äºå…³æœºçŠ¶æ€, å¹¶åŒæ—¶æŒ‰ä¸‹éŸ³é‡ä¸Šä¸‹é”® ä½¿ç”¨æ•°æ®çº¿è¿æ¥ç”µè„‘ä¸æ‰‹æœº ç”µè„‘çš„è®¾å¤‡ç®¡ç†å™¨ä¸­, å‡ºç°äº†ä¸€ä¸ªæ–°çš„ä¸²å£è®¾å¤‡, åå­—æ˜¯ \u0026ldquo;Qualcomm HS-USB QDLoader 9008 (COMx)\u0026rdquo; FAQ:\nå¦‚æœä½ ç”µè„‘æ²¡æœ‰è¯†åˆ«åˆ°ä»»ä½•è®¾å¤‡ è¯·ç¡®è®¤, ä½ çš„çº¿æ˜¯å¦æ˜¯æ•°æ®çº¿, ä½ æ˜¯å¦æŒ‰ä½äº†éŸ³é‡ä¸Šä¸‹é”®, ä»¥åŠä½ æ‰‹æœºæ˜¯å¦æ”¯æŒé€šè¿‡è¿™ç§æ–¹å¼è¿›å…¥ 9008 æ¨¡å¼ ç”µè„‘è¯†åˆ«åˆ°äº†ä¸€ä¸ªæ–°è®¾å¤‡, ä½†å®ƒæ˜¯ä¸€ä¸ªåä¸º \u0026ldquo;QHSUSB_DLOAD\u0026rdquo; çš„æœªçŸ¥è®¾å¤‡ æ˜¾ç„¶, ä½ çš„ç”µè„‘æ²¡æœ‰æ­£ç¡®çš„å®‰è£…éªé¾™çš„ USB é©±åŠ¨, è¯·å»ç½‘ä¸Šæ‰¾ä¸€äº›å…¶ä»–å¯ç”¨çš„é©±åŠ¨è¯•è¯• ç”µè„‘è¯†åˆ«åˆ°äº† \u0026ldquo;Qualcomm HS-USB QDLoader 9008 (COMx)\u0026rdquo; è®¾å¤‡, ä½†å¸¦æœ‰ä¸€ä¸ªæ„Ÿå¹å· ä½ çš„ç”µè„‘æ­£ç¡®çš„å®‰è£…äº†éªé¾™çš„ USB é©±åŠ¨, ä½†æ˜¯å®ƒä¼¼ä¹æ˜¯æ—§çš„ç‰ˆæœ¬, æ—§çš„éªé¾™é©±åŠ¨ä¸å¸¦æœ‰é©±åŠ¨ç­¾å, è€Œåœ¨æ–°ç‰ˆçš„ Windows ä¸­, é©±åŠ¨å¿…é¡»æ­£ç¡®ç­¾åæ‰èƒ½æ­£å¸¸å·¥ä½œ, è¯·å»ç½‘ä¸Šæ‰¾ä¸€äº›å…¶ä»–å¯ç”¨çš„é©±åŠ¨è¯•è¯• ç”µè„‘è¯†åˆ«åˆ°äº† \u0026ldquo;Qualcomm HS-USB QDLoader 9008 (COMx)\u0026rdquo; è®¾å¤‡, ä½†æ˜¯å½“æˆ‘æ¾å¼€éŸ³é‡é”®çš„æ—¶å€™, å®ƒå°±ä¼šæ–­å¼€ å°½ç®¡ç½‘ä¸Šæœ‰äººè¯´è¿™æ˜¯å› ä¸ºå®‰è£…äº†ä¸åˆé€‚çš„é©±åŠ¨, ä½†ä½ ä»ç„¶å¯ä»¥ç»§ç»­æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤ç»§ç»­è¿›è¡Œ, ä½†æ˜¯ä¸è¦æ¾å¼€éŸ³é‡é”®äº†. å¦‚ä½•å¸è½½é©±åŠ¨? åªéœ€è¦åœ¨è®¾å¤‡ç®¡ç†å™¨ä¸­, å³é”®è®¾å¤‡, å•å‡» \u0026ldquo;å¸è½½è®¾å¤‡\u0026rdquo;, åœ¨å¼¹å‡ºçš„çª—å£ä¸­, ä¼šæœ‰ä¸€ä¸ªé€‰é¡¹ \u0026ldquo;å¸è½½é©±åŠ¨ç¨‹åº\u0026rdquo;, å‹¾é€‰å®ƒ, ç„¶åç¡®è®¤å³å¯.\nå¼€å§‹åˆ·æœº æ‰“å¼€ä½ çš„åˆ·æœºå·¥å…·, å¦‚æœæ˜¯ä¸€åŠ æ‰‹æœº, é‚£å®ƒåº”è¯¥æ˜¯ \u0026ldquo;MsmDownloadTool\u0026rdquo;.\næ‰“å¼€ä½ çš„åˆ·æœºå·¥å…· æŒ‰ç…§ä¸Šä¸€éƒ¨åˆ†çš„æ­¥éª¤, å°†æ‰‹æœºä»¥ 9008 æ¨¡å¼è¿æ¥åˆ°ç”µè„‘, æ­¤æ—¶åˆ·æœºå·¥å…·ä¸­ä¼šå‡ºç°ä½ çš„è®¾å¤‡, å¹¶ä¸”çŠ¶æ€æ˜¾ç¤º \u0026ldquo;å·²è¿æ¥\u0026rdquo; ç‚¹å‡» \u0026ldquo;å¼€å§‹\u0026rdquo;, æ­¤æ—¶åˆ·æœºå·¥å…·ä¼šé€šè¿‡ 9008 ç«¯å£è®¾å¤‡ä¸æ‰‹æœºé€šä¿¡, ä¼ è¾“æ•°æ® ç­‰å¾…çŠ¶æ€ä¸€æ ä¸­å‡ºç°è¿›åº¦æ¡, å°±å¯ä»¥æ¾å¼€éŸ³é‡ä¸Šä¸‹é”®äº† FAQ:\nParam é¢„è½½å¤±è´¥ æ›´æ¢é©±åŠ¨ è‡ªåŠ¨æ£€æµ‹ DDR å¤±è´¥ æ‰‹æœºå…³æœº, é‡æ–°è¿›å…¥ 9008 æ¨¡å¼, å¹¶ä¸”é‡å¯ç”µè„‘ä¸Šçš„åˆ·æœºå·¥å…· è¿›åº¦å¡ä½äº† é‡åˆ·ä¸€éè¯•è¯• ","date":"2023-07-19T16:36:23+08:00","permalink":"https://slimenull.com/p/20230719163623/","title":"[åˆ·æœº] 9008 åˆ·æœºæ•‘ç –ç¬”è®°"},{"content":"å¦‚æœè¦ä½¿ç”¨é¼ æ ‡è¾“å…¥, é‚£ä¹ˆéœ€è¦:\nå¯ç”¨é¼ æ ‡è¾“å…¥, åªæœ‰å¯ç”¨ä¹‹å, æ‰èƒ½æ¥æ”¶åˆ°é¼ æ ‡äº‹ä»¶ å…³é—­æ§åˆ¶å°çš„å¿«é€Ÿç¼–è¾‘æ¨¡å¼, å¾ˆå¤šäººçš„æ§åˆ¶å°éƒ½å¯ç”¨äº†å¿«é€Ÿç¼–è¾‘æ¨¡å¼, å®ƒä¼šå¯¼è‡´é¼ æ ‡è¾“å…¥æ— æ•ˆ ä»»ä½•æƒ…å†µä¸‹, éƒ½éœ€è¦:\nä¸ä½¿ç”¨é™¤ ReadConsoleInput ä¹‹å¤–çš„ä»»ä½•è¾“å…¥æ–¹æ³•, å› ä¸ºå®ƒä»¬ä¼šå’Œä½ äº‰æŠ¢ ReadConsoleInput çš„ä½¿ç”¨. å¼•ç”¨:\nGetStdHandle å‡½æ•° GetConsoleMode å‡½æ•° SetConsoleMode å‡½æ•° ReadConsoleInput å‡½æ•° å‚è€ƒä»£ç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 internal class NativeApi { public const int STD_OUTPUT_HANDLE = -11; public const uint ENABLE_VIRTUAL_TERMINAL_PROCESSING = 0x0004; public const uint ENABLE_MOUSE_INPUT = 0x0010; public const int STD_INPUT_HANDLE = -10; public const uint ENABLE_QUICK_EDIT_MODE = 0x0040; [DllImport(\u0026#34;kernel32.dll\u0026#34;, SetLastError = true)] public static extern IntPtr GetStdHandle(int nStdHandle); [DllImport(\u0026#34;kernel32.dll\u0026#34;)] public static extern bool GetConsoleMode(IntPtr hConsoleHandle, out uint lpMode); [DllImport(\u0026#34;kernel32.dll\u0026#34;)] public static extern bool SetConsoleMode(IntPtr hConsoleHandle, uint dwMode); public static void EnableANSI() { var handle = GetStdHandle(STD_OUTPUT_HANDLE); GetConsoleMode(handle, out var mode); mode |= ENABLE_VIRTUAL_TERMINAL_PROCESSING; SetConsoleMode(handle, mode); } public static void EnableMouseInput() { var handle = GetStdHandle(STD_INPUT_HANDLE); GetConsoleMode(handle, out var mode); mode |= ENABLE_MOUSE_INPUT; mode \u0026amp;= ~ENABLE_QUICK_EDIT_MODE; //å…³é—­å¿«é€Ÿç¼–è¾‘ SetConsoleMode(handle, mode); } [DllImport(\u0026#34;kernel32.dll\u0026#34;, CharSet = CharSet.Unicode, SetLastError = true, EntryPoint = \u0026#34;ReadConsoleInputW\u0026#34;)] public static extern bool ReadConsoleInput( IntPtr hConsoleInput, [Out] INPUT_RECORD[] lpBuffer, uint nLength, out uint lpNumberOfEventsRead); public enum InputRecordEventType : uint { KEY_EVENT = 0x1, MOUSE_EVENT = 0x2, WINDOW_BUFFER_SIZE_EVENT = 0x4, MENU_EVENT = 0x8, FOCUS_EVENT = 0x10, } [StructLayout(LayoutKind.Explicit)] public struct INPUT_RECORD { [FieldOffset(0)] public InputRecordEventType EventType; [FieldOffset(4)] public KEY_EVENT_RECORD KeyEvent; [FieldOffset(4)] public MOUSE_EVENT_RECORD MouseEvent; [FieldOffset(4)] public WINDOW_BUFFER_SIZE_RECORD WindowBufferSizeEvent; [FieldOffset(4)] public MENU_EVENT_RECORD MenuEvent; [FieldOffset(4)] public FOCUS_EVENT_RECORD FocusEvent; }; [StructLayout(LayoutKind.Explicit, CharSet = CharSet.Unicode)] public struct KEY_EVENT_RECORD { [FieldOffset(0), MarshalAs(UnmanagedType.Bool)] public bool bKeyDown; [FieldOffset(4), MarshalAs(UnmanagedType.U2)] public ushort wRepeatCount; // ConsoleKey [FieldOffset(6), MarshalAs(UnmanagedType.U2)] public ushort wVirtualKeyCode; [FieldOffset(8), MarshalAs(UnmanagedType.U2)] public ushort wVirtualScanCode; [FieldOffset(10)] public char UnicodeChar; [FieldOffset(12), MarshalAs(UnmanagedType.U4)] public ControlKeyState dwControlKeyState; } // dwControlKeyState bitmask [Flags] public enum ControlKeyState { RIGHT_ALT_PRESSED = 0x1, LEFT_ALT_PRESSED = 0x2, RIGHT_CTRL_PRESSED = 0x4, LEFT_CTRL_PRESSED = 0x8, SHIFT_PRESSED = 0x10, NUMLOCK_ON = 0x20, SCROLLLOCK_ON = 0x40, CAPSLOCK_ON = 0x80, ENHANCED_KEY = 0x100 } [StructLayout(LayoutKind.Sequential)] public struct MOUSE_EVENT_RECORD { public COORD dwMousePosition; public MouseButtonState dwButtonState; public short MouseDelta; public ControlKeyState dwControlKeyState; public MouseEventFlags dwEventFlags; } [Flags] public enum MouseButtonState : short { FROM_LEFT_1ST_BUTTON_PRESSED = 0x1, RIGHTMOST_BUTTON_PRESSED = 0x2, FROM_LEFT_2ND_BUTTON_PRESSED = 0x4, FROM_LEFT_3RD_BUTTON_PRESSED = 0x8, FROM_LEFT_4TH_BUTTON_PRESSED = 0x10 } [StructLayout(LayoutKind.Sequential)] public struct COORD { public short X; public short Y; public COORD(short X, short Y) { this.X = X; this.Y = Y; } }; [Flags] public enum MouseEventFlags { MOUSE_MOVED = 0x1, DOUBLE_CLICK = 0x2, MOUSE_WHEELED = 0x4, MOUSE_HWHEELED = 0x8 } public struct WINDOW_BUFFER_SIZE_RECORD { public COORD dwSize; public WINDOW_BUFFER_SIZE_RECORD(short x, short y) { dwSize = new COORD(x, y); } } [StructLayout(LayoutKind.Sequential)] public struct MENU_EVENT_RECORD { public uint dwCommandId; } [StructLayout(LayoutKind.Sequential)] public struct FOCUS_EVENT_RECORD { public uint bSetFocus; } } ","date":"2023-06-27T20:52:43+08:00","permalink":"https://slimenull.com/p/20230627205243/","title":"[C#] ä½¿ç”¨ ReadConsoleInput æ‰€éœ€è¦æ³¨æ„çš„é—®é¢˜."},{"content":"åœ¨ C# ä¸­, å§”æ‰˜ä¸ Lambda æ˜¯æœ€å¸¸ç”¨çš„åŠŸèƒ½ä¹‹ä¸€, è¯¸å¦‚å¤šçº¿ç¨‹, å¯è¿­ä»£ç±»å‹çš„ LINQ æ“ä½œ, å›è°ƒ, éƒ½æ˜¯å€ŸåŠ©å§”æ‰˜å®Œæˆçš„. å®ƒåœ¨ C è¯­è¨€å¯¹åº”çš„æ˜¯å‡½æ•°æŒ‡é’ˆ, åœ¨ C++ ä¸­å¯¹åº”çš„æ˜¯ std::function\nå§”æ‰˜ / Delegate åœ¨ C# ä¸­, å§”æ‰˜æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»å‹, å®ƒç”¨æ¥å­˜å‚¨ä¸€æ®µé€»è¾‘(å¯æ‰§è¡Œçš„å†…å®¹). ä¾‹å¦‚åœ¨å£°æ˜å­—æ®µæˆ–å˜é‡çš„æ—¶å€™, æˆ‘ä»¬æŒ‡å®šç±»å‹ä¸ºå§”æ‰˜, é‚£ä¹ˆè¿™ä¸ªå­—æ®µæˆ–å˜é‡å°±å¯ä»¥å­˜ä¸‹ä¸€æ®µé€»è¾‘. åœ¨ä½ éœ€è¦çš„æ—¶å€™, å°±å¯ä»¥ç›´æ¥æ‰§è¡Œå®ƒ.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 void MethodA() { // è¿™æ˜¯ä¸€ä¸ªæ–¹æ³•, é‡Œé¢åŒ…å«ä¸€äº›é€»è¾‘ // è¿™ä¸ªæ–¹æ³•æ²¡æœ‰å‚æ•°, ä¹Ÿæ²¡æœ‰è¿”å›å€¼ Console.WriteLine(\u0026#34;Hello world\u0026#34;); } void MethodB() { // å£°æ˜ä¸€ä¸ªèƒ½å­˜å‚¨ä¸‹ä¸€æ®µé€»è¾‘çš„å˜é‡ // Action è¡¨ç¤ºæ— å‚æ•°æ— è¿”å›å€¼çš„é€»è¾‘ Action someLogic; // ä¸ºå…¶èµ‹å€¼, å¯ä»¥ç›´æ¥å°†æ–¹æ³•èµ‹å€¼è¿‡å» someLogic = MethodA; // è°ƒç”¨è¿™æ®µé€»è¾‘ // å› ä¸ºå®ƒå­˜å‚¨çš„å°±æ˜¯ MethodA, æ‰€ä»¥ç­‰åŒäºè°ƒç”¨ MethodA someLogic.Invoke(); } äº‹å®ä¸Š, åœ¨ä½¿ç”¨å§”æ‰˜ä¹‹å‰, æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªå§”æ‰˜ç±»å‹, åœ¨ä¸Šè¿°ä»£ç ä¸­ä½¿ç”¨çš„ Action, å°±æ˜¯ç³»ç»Ÿé¢„å®šä¹‰å¥½çš„ä¸€ä¸ªå§”æ‰˜ç±»å‹. å¦‚æœæˆ‘ä»¬éœ€è¦ä¸ºå¸¦æœ‰ç‰¹å®šå‚æ•°, ç‰¹å®šè¿”å›å€¼çš„ä¸€æ®µé€»è¾‘å®šä¹‰ä¸€ä¸ªç±»å‹, å¯ä»¥ä½¿ç”¨ delegate å…³é”®å­—.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 // å®šä¹‰ä¸€ä¸ªæ— å‚æ•°, æ— è¿”å›å€¼å§”æ‰˜ç±»å‹ // å…¶ä¸­, MyDelegate æ˜¯å§”æ‰˜ç±»å‹å, public æ˜¯è®¿é—®ä¿®é¥° public delegate void MyDelegate(); // å®šä¹‰ä¸€ä¸ªå¸¦æœ‰ int å‚æ•°, è¿”å›å€¼ä¸º string çš„å§”æ‰˜ç±»å‹ public delegate string MyDelegate2(int); // å®šä¹‰ä¸€ä¸ªå¸¦æœ‰ int, float å‚æ•°, è¿”å›å€¼ä¸º string çš„å§”æ‰˜ç±»å‹ public delegate string MyDelegate3(int, float); // å¦‚æœä½ æƒ³, ä½ ä¹Ÿå¯ä»¥ä¸ºå§”æ‰˜ç±»å‹å®šä¹‰ä¸­çš„å‚æ•°å†™ä¸Šåå­— // è¿™ä¸ªåå­—ä¹Ÿåªæ˜¯ä¸ºäº†å¯è¯»æ€§, è®©ç”¨æˆ·çŸ¥é“è¿™ä¸ªå‚æ•°æ˜¯åšä»€ä¹ˆç”¨çš„ // é™¤æ­¤ä¹‹å¤–, å°±ä¹ˆæœ‰ä»€ä¹ˆåˆ«çš„ç”¨å¤„äº† public delegate string MyDelegate4(int value1, float value2); è¦ä½¿ç”¨å®šä¹‰å¥½çš„å§”æ‰˜ç±»å‹, å’Œæœ€å¼€å§‹ç»™å‡ºçš„ç¤ºä¾‹ä»£ç ä¸€æ ·, åªéœ€è¦æŠŠä»–å½“æˆä¸€ä¸ªæ™®é€šç±»å‹ç›´æ¥ä½¿ç”¨å³å¯.\n1 2 3 // å®šä¹‰ä¸€ä¸ª someLogic å˜é‡, ç±»å‹ä¸º MyDelegate // åŒæ—¶, ä¸ºå…¶èµ‹åˆå§‹å€¼ MethodA MyDelegate someLogic = MethodA; ä½ å¯ä»¥é€šè¿‡å§”æ‰˜ç±»å‹æ¥å­˜ä¸‹ä»»ä½•ä½ æƒ³è¦å­˜ä¸‹çš„é€»è¾‘, åªè¦ç±»å‹å’Œå¯¹åº”é€»è¾‘çš„å‚æ•°è¿”å›å€¼æ˜¯åŒ¹é…çš„å³å¯. ä¸‹é¢æ˜¯å®šä¹‰ä¸€ä¸ªå§”æ‰˜ç±»å‹, ç„¶åå°† Console.WriteLine è¿™ä¸ªæ–¹æ³•å­˜å…¥å˜é‡çš„å®Œæ•´ç¤ºä¾‹ä»£ç .\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 namespace TestConsole { class Program { // å®šä¹‰å‚æ•°ä¸º string, æ— è¿”å›å€¼çš„å§”æ‰˜ç±»å‹ delegate void MyDelegate(string text); static void Main(string[] args) { // å®šä¹‰å˜é‡ MyDelegate someLogic; // ä¸ºå…¶èµ‹å€¼ // å› ä¸º Console.WriteLine æœ‰åŒ¹é…çš„é‡è½½, æ‰€ä»¥å¯ä»¥å­˜å…¥ someLogic = Console.WriteLine; } } } ä¸ä»…æ˜¯è¯¸å¦‚ Console.WriteLine çš„é™æ€æ–¹æ³•å¯ä»¥å­˜å…¥, éé™æ€çš„æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥å­˜å…¥çš„. ä¸‹é¢æ˜¯ä¸€æ®µå°†å®ä¾‹æ–¹æ³•å­˜å…¥å˜é‡çš„å®Œæ•´ç¤ºä¾‹ä»£ç .\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 namespace TestConsole { class TestClass { public void TestMethod() { var x = 1; var y = 2; var z = x + y; System.Console.WriteLine(z); } } delegate void TestDelegate(); class Program { static void Main(string[] args) { // åˆ›å»ºç±»å‹çš„å®ä¾‹ TestClass ins = new TestClass(); // å®šä¹‰å§”æ‰˜å˜é‡ TestDelegate someLogic; // å°†å®ä¾‹çš„æ–¹æ³•å­˜å…¥åˆ°å§”æ‰˜å˜é‡ someLogic = ins.TestMethod; } } } åŒ¿åå‡½æ•° / Lambda åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­, æˆ‘ä»¬å°†æ–¹æ³•å­˜å…¥äº†å§”æ‰˜å˜é‡ä¸­, ä½†å¦‚æœæ¯ä¸€æ®µé€»è¾‘éƒ½éœ€è¦å®šä¹‰ä¸€ä¸ªæ–¹æ³•, é‚£å°±å¤ªéº»çƒ¦äº†. ä½¿ç”¨ Lambda è¡¨è¾¾å¼å°±æ˜¯ä¸€ä¸ªå¾ˆä¸é”™çš„é€‰æ‹©.\n1 2 3 4 5 6 Action someLogic; someLogic = () =\u0026gt; { Console.WriteLine(\u0026#34;Hello world\u0026#34;); }; åœ¨ä¸Šé¢çš„ä»£ç ä¸­, æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ— å‚æ— è¿”å›å€¼çš„å§”æ‰˜å˜é‡, å¹¶ä½¿ç”¨äº†ä¸€ä¸ªå¥‡æ€ªçš„è¯­æ³•ä¸ºå…¶èµ‹å€¼. è¿™ä¸ªè¯­æ³•, å°±æ˜¯ Lambda è¡¨è¾¾å¼. å…¶ä¸­æ‹¬å·è¡¨ç¤ºå‚æ•°, =\u0026gt; æ˜¯ lambda çš„ç¬¦å·, åé¢çš„å¤§æ‹¬å·æ˜¯é€»è¾‘çš„å†…å®¹. å› ä¸ºæ— å‚æ•°, æ‰€ä»¥æ‹¬å·å†…æ˜¯ç©ºçš„.\nLambda è¯­å¥çš„æ ‡å‡†è¯­æ³•å¦‚ä¸‹:\n(è¾“å…¥å‚æ•°) =\u0026gt; { \u0026lt;å¤šæ¡è¯­å¥\u0026gt; }\nä¸‹é¢æˆ‘ä»¬ä»¥ä¸€ä¸ªæ‰§è¡ŒåŠ æ³•è®¡ç®—çš„ Lambda è¯­å¥ä¸ºä¾‹, äº†è§£ Lambda è¯­å¥çš„å…·ä½“å†™æ³•.\n1 2 3 4 5 6 7 8 9 10 11 12 // å®šä¹‰ä¸€ä¸ªä¼ å…¥ä¸¤ä¸ª int å‚æ•°, è¿”å›ä¸€ä¸ª int ç»“æœçš„å§”æ‰˜å˜é‡ Func\u0026lt;int, int, int\u0026gt; someLogic; // ä¸ºå§”æ‰˜å˜é‡èµ‹å€¼ someLogic = (int a, int b) =\u0026gt; { return a + b; }; // æ‰§è¡Œå§”æ‰˜, å¹¶æ‰“å°è¿”å›å€¼ // è¾“å‡ºå†…å®¹æ˜¯ 114514 Console.WriteLine(someLogic.Invoke(114000, 514)); Lambda è¯­å¥å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ²¡æœ‰åå­—çš„æ–¹æ³•, åœ¨ä¸Šé¢çš„ä»£ç ä¸­, æˆ‘ä»¬æ‰€å†™çš„ Lambda è¡¨è¾¾å¼ä¼ å…¥ä¸¤ä¸ª int, å¹¶ä½¿ç”¨ return è¿”å›ä»–ä»¬çš„ç›¸åŠ ç»“æœ. è¿™ä¸ª Lambda è¯­å¥ç›´æ¥è¢«èµ‹å€¼åˆ° someLogic å˜é‡ä¸­, å¹¶åœ¨åç»­çš„ä»£ç ä¸­, é€šè¿‡ someLogic è°ƒç”¨åˆšåˆšç¼©å†™çš„é€»è¾‘.\näº‹å®ä¸Š, å› ä¸ºç¼–è¯‘å™¨çŸ¥é“ someLogic çš„å§”æ‰˜ç±»å‹éœ€è¦ä¼ å…¥ä¸¤ä¸ª int, æ‰€ä»¥åœ¨åé¢ç›´æ¥èµ‹å€¼çš„ Lambda è¯­å¥ä¸­, å‚æ•°çš„ç±»å‹æ˜¯å¯ä»¥çœç•¥çš„. ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ¨å¯¼ä»–ä»¬çš„ç±»å‹.\n1 2 3 4 5 // çœç•¥å‚æ•°çš„ç±»å‹, ç›´æ¥å†™å‚æ•°å someLogic = (a, b) =\u0026gt; { return a + b; }; å¦‚æœ Lambda è¯­å¥çš„ä¼ å…¥å‚æ•°åªæœ‰ä¸€ä¸ª, é‚£ä¹ˆæ‹¬å·ä¹Ÿæ˜¯å¯ä»¥è¢«çœç•¥çš„.\n1 2 3 4 5 6 7 8 // å®šä¹‰ä¸€ä¸ªä¼ å…¥å‚æ•°ä¸º int, æ— è¿”å›å€¼çš„å§”æ‰˜å˜é‡ Action\u0026lt;int\u0026gt; someLogic; // ä¸ºå…¶èµ‹å€¼ someLogic = integer =\u0026gt; { Console.WriteLine(integer); }; å¦‚æœä½ ä¸éœ€è¦ä½¿ç”¨ä¼ å…¥çš„å‚æ•°, å¯ä»¥ä½¿ç”¨ _ å°†å…¶ä¸¢å¼ƒ:\n1 2 3 4 5 6 // å®šä¹‰ä¸€ä¸ªä¼ å…¥å‚æ•°ä¸º int, æ— è¿”å›å€¼çš„å§”æ‰˜å˜é‡ Action\u0026lt;int\u0026gt; someLogic; // ä¸ºå…¶èµ‹å€¼ // è¿™é‡Œçš„è¡¨è¾¾å¼æ²¡æœ‰ä½¿ç”¨ä¼ å…¥çš„å‚æ•° someLogic = _ =\u0026gt; Console.WriteLine(\u0026#34;Hello world\u0026#34;); å¦‚æœ Lambda è¯­å¥çš„æ–¹æ³•ä½“åªæœ‰ä¸€ä¸ªè¯­å¥, é‚£ä¹ˆå¤§æ‹¬å·æ˜¯å¯ä»¥è¢«çœç•¥çš„. æ­¤æ—¶ Lambda è¯­å¥å°±å«åš Lambda è¡¨è¾¾å¼äº†.\n1 2 3 4 5 // å®šä¹‰ä¸€ä¸ªä¼ å…¥å‚æ•°ä¸º int, æ— è¿”å›å€¼çš„å§”æ‰˜å˜é‡ Action\u0026lt;int\u0026gt; someLogic; // ä¸ºå…¶èµ‹å€¼ someLogic = integer =\u0026gt; Console.WriteLine(integer); å¦‚æœä½ è¦åœ¨ Lambda ä¸­ä½¿ç”¨ await, å¯ä»¥åœ¨ Lambda å‰æ·»åŠ  async å…³é”®å­—, ä½¿ç”¨æ–¹å¼å’Œæ™®é€šçš„æ–¹æ³•æ˜¯ä¸€æ ·çš„.\n1 2 3 4 5 6 7 8 9 10 11 12 // å®šä¹‰ä¸€ä¸ªæ— ä¼ å…¥å‚æ•°, è¿”å›å€¼ä¸º Task\u0026lt;int\u0026gt; çš„å§”æ‰˜å˜é‡ Func\u0026lt;Task\u0026lt;int\u0026gt;\u0026gt; someLogic; // ä¸ºå…¶èµ‹å€¼, å¹¶ä½¿ç”¨ async Lambda someLogic = async () =\u0026gt; { // å»¶æ—¶ 1s await Task.Delay(1000); // è¿”å›å€¼ return 114514; } å¦‚æœåªæ˜¯å•çº¯è°ƒç”¨ä¸€ä¸ªå§”æ‰˜, é‚£ä¹ˆä¹Ÿå¯ä»¥ä¸éœ€è¦ä½¿ç”¨ Invoke, ç›´æ¥æŠŠä»–å½“æˆæ–¹æ³•, åè·Ÿæ‹¬å·å’Œå‚æ•°å³å¯.\n1 2 3 4 5 6 Action\u0026lt;string\u0026gt; someLogic = str =\u0026gt; Console.WriteLine(str); someLogic.Invoke(\u0026#34;Hello world\u0026#34;); // ç­‰åŒäºä¸Šé¢çš„ Invoke someLogic(\u0026#34;Hello world\u0026#34;); æ•è· / Capture åœ¨ä½¿ç”¨ Lambda è¯­å¥/è¡¨è¾¾å¼çš„æ—¶å€™, Lambda å¯ä»¥æ•è·åˆ°å¤–éƒ¨çš„å˜é‡, å­—æ®µ, æˆ–å±æ€§, ç®€å•æ¥è®²å°±æ˜¯, ä½ å¯ä»¥ç›´æ¥åœ¨ Lambda å†…ä½¿ç”¨ Lambda å¤–çš„ä»»ä½•ä¸œè¥¿.\nè¯»å– Lambda å¤–çš„å€¼, å¹¶ä¸” Lambda èƒ½æ„ŸçŸ¥åˆ°å¤–éƒ¨å¯¹å€¼çš„å˜æ›´.\n1 2 3 4 5 6 7 8 9 10 int num = 0; Action action = () =\u0026gt; Console.WriteLine(num); // è¾“å‡º 0 action.Invoke(); num += 123; // è¾“å‡º 123 (å¤–éƒ¨å¯¹å˜é‡å˜æ›´æ—¶, lambda ä»ç„¶èƒ½è¾“å‡ºæ­£ç¡®çš„å€¼) action.Invoke(); å¯¹ Lamda å¤–éƒ¨çš„å€¼è¿›è¡Œæ›´æ”¹.\n1 2 3 4 5 6 7 8 int num = 0; Action action = () =\u0026gt; num++; for (int i = 0; i \u0026lt; 3; i++) action.Invoke(); // è¾“å‡º 3 Console.WriteLine(num); ä½¿ç”¨ / Usage ä¸‹é¢åˆ—ä¸¾å‡ ç§ä½¿ç”¨ Lambda è¯­å¥/è¡¨è¾¾å¼çš„ä¾‹å­.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 // ä¸€å¥è¯å¯åŠ¨æ–°çº¿ç¨‹ new Thread(() =\u0026gt; { int i = 0; while (true) { Console.WriteLine(i++); Thread.Sleep(1000); } }).Start(); // ä¸€å¥è¯å¯åŠ¨æ–°ä»»åŠ¡ Task.Run(async () =\u0026gt; { int i = 0; while (true) { Console.WriteLine(i++); await Task.Delay(1000); } }); // ç”Ÿæˆ 10 ä¸ªéšæœºæ•° List\u0026lt;int\u0026gt; numbers = Enumerable.Range(0, 10) .Select(_ =\u0026gt; Random.Shared.Next()) .ToList(); // ç­›é€‰ä¸Šé¢éšæœºæ•°ä¸­å¤§äº 100 çš„ List\u0026lt;int\u0026gt; filteredNumbers = numbers .Where(num =\u0026gt; num \u0026gt; 100) .ToList(); ç¼–è¯‘ / Compilation Lambda æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè¯­æ³•ç³–, åœ¨ç¼–è¯‘æ—¶, Lambda ä¼šè¢«ç¼–è¯‘æˆæ–¹æ³•, æˆ–è€…ä¸€ä¸ªç±», ç„¶åå…¶ä¸­åŒ…å«çš„ä¸€ä¸ªæ–¹æ³•.\nä»¥ä¸‹å®ä¾‹, ä¸ºäº†å¯è¯»æ€§, å‡åœ¨ç¼–è¯‘å™¨ç¼–è¯‘åç»“æœçš„åŸºç¡€ä¸Šè¿›è¡Œäº†å‘½åä¸Šçš„ä¼˜åŒ–, ä»¥æ–¹ä¾¿ç†è§£.\nç¤ºä¾‹ä¸€:æ•è·å±€éƒ¨å˜é‡\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 using System; public class Program { static void Main(string[] args) { int num = 0; Action action = () =\u0026gt; Console.WriteLine(num); // è¾“å‡º 0 action.Invoke(); num += 123; // è¾“å‡º 123 (å¤–éƒ¨å¯¹å˜é‡å˜æ›´æ—¶, lambda ä»ç„¶èƒ½è¾“å‡ºæ­£ç¡®çš„å€¼) action.Invoke(); } } ç¼–è¯‘åæºç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 public class Program { [CompilerGenerated] private sealed class LambdaClass { public int num; internal void LambdaMethod() { Console.WriteLine(num); } } private static void Main(string[] args) { LambdaClass lambdaInstance = new LambdaClass(); lambdaInstance.num = 0; Action action = new Action(lambdaInstance.LambdaMethod); action(); lambdaInstance.num += 123; action(); } } å¯ä»¥çœ‹åˆ°, åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­, Lambda è¡¨è¾¾å¼è¢«ç¼–è¯‘æˆäº†ä¸€ä¸ªç±», å¹¶ä¸”æ•è·åˆ°çš„å±€éƒ¨å˜é‡å‡å˜æˆäº†ç±»çš„å­—æ®µ. è€Œä¸å†æ˜¯å­˜å‚¨åœ¨æ ˆä¸Š.\nç”±æ­¤, å°±è¯ç”Ÿäº†ä¸€ä¸ªé—®é¢˜, å½“ä½ å°è¯•å¯¹ä¸€ä¸ªè¢«æ•è·çš„å±€éƒ¨å˜é‡å–åœ°å€çš„æ—¶å€™, å°±ä¼šæŠ¥é”™. æˆ‘ä»¬æ²¡åŠæ³•å–ä¸€ä¸ªä½äºå †ä¸Šçš„å¯¹è±¡ä¸­. å †ä¸Šçš„å¯¹è±¡ä¼šè¢« GC ç§»åŠ¨. æˆ–è€…è¯´, å¦‚æœä¸€ä¸ªå±€éƒ¨å˜é‡è¢«å–åœ°å€, å°±æ„å‘³ç€å®ƒéœ€è¦åœ¨æ ˆä¸Š, è€Œå­˜å‚¨åœ¨æ ˆä¸Šçš„å€¼, æ²¡åŠæ³•è¢« Lambda æ‰€æ•è·.\nç¤ºä¾‹äºŒ:æ•è·å®ä¾‹å­—æ®µ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 using System; public class Program { int num = 0; void SomeMethod(string[] args) { Action action = () =\u0026gt; Console.WriteLine(num); // è¾“å‡º 0 action.Invoke(); num += 123; // è¾“å‡º 123 (å¤–éƒ¨å¯¹å˜é‡å˜æ›´æ—¶, lambda ä»ç„¶èƒ½è¾“å‡ºæ­£ç¡®çš„å€¼) action.Invoke(); } } ç¼–è¯‘åæºç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 public class Program { private int num = 0; private void SomeMethod(string[] args) { Action action = new Action(LambdaMethod); action(); num += 123; action(); } [CompilerGenerated] private void LambdaMethod() { Console.WriteLine(num); } } ","date":"2023-05-29T21:46:34+08:00","permalink":"https://slimenull.com/p/20230529214634/","title":"[.NET/C#] å§”æ‰˜ä¸ Lambda è¡¨è¾¾å¼, è¯­å¥è¯¦è§£"},{"content":"CommunityToolkit.Mvvm åŒ…ï¼ˆåˆå MVVM å·¥å…·åŒ…ï¼Œä»¥å‰ç§°ä¸º Microsoft.Toolkit.Mvvmï¼‰æ˜¯ä¸€ä¸ªç°ä»£ã€å¿«é€Ÿå’Œæ¨¡å—åŒ–çš„ MVVM åº“ã€‚ å®ƒæ˜¯ .NET Community Toolkit çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶å›´ç»•ä»¥ä¸‹åŸåˆ™æ„å»ºï¼š\nç‹¬ç«‹äºå¹³å°å’Œè¿è¡Œæ—¶ - .NET Standard 2.0ã€.NET Standard 2.1 å’Œ .NET 6 ï¼ˆä¸ UI æ¡†æ¶æ— å…³ï¼‰ æ˜“äºä¸Šæ‰‹å’Œä½¿ç”¨ â€” å¯¹åº”ç”¨ç¨‹åºç»“æ„æˆ–ç¼–ç èŒƒä¾‹ï¼ˆâ€œMVVMâ€ä¹‹å¤–ï¼‰æ²¡æœ‰ä¸¥æ ¼è¦æ±‚ï¼Œå³çµæ´»ä½¿ç”¨ã€‚ å¯é€‰ - è‡ªç”±é€‰æ‹©è¦ä½¿ç”¨çš„ç»„ä»¶ã€‚ å¼•ç”¨å®ç° - ç²¾ç›Šå’Œé«˜æ€§èƒ½ï¼Œä¸ºåŸºç±»åº“ä¸­åŒ…å«çš„æ¥å£æä¾›å®ç°ï¼Œä½†ç¼ºä¹ç›´æ¥ä½¿ç”¨å®ƒä»¬çš„å…·ä½“ç±»å‹ã€‚ å¯è§‚å¯Ÿå¯¹è±¡ / ObservableObject åœ¨ WPF ä¸­ï¼Œ å†™å‡º MVVM è®¾è®¡æ¨¡å¼çš„ç¨‹åºï¼Œ è‡ªç„¶éœ€è¦è¿›è¡Œå‰å°ä¸åå°æ•°æ®çš„ç»‘å®šï¼Œ è€Œåœ¨åŸç”Ÿå®ç°ä¸­ï¼Œ ç¼–å†™ä¸€ä¸ªå¯ç»‘å®šçš„ç±»ï¼Œ å¹¶ä¸”ç¼–å†™è¯¥ç±»ä¸­å¯ç»‘å®šçš„æˆå‘˜ï¼Œ æ˜¯éå¸¸éº»çƒ¦çš„ä¸€ä»¶äº‹æƒ…ã€‚ ä½ éœ€è¦æ‰‹åŠ¨åœ¨å€¼å˜æ›´çš„æ—¶å€™ï¼Œ å¼•å‘ â€œPropertyChangedâ€ äº‹ä»¶ï¼Œ å¤§æ¦‚çš„ä»£ç ä¼šåƒè¿™æ ·ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 public class MainViewModel : INotifyPropertyChanged { private string windowTitle = \u0026#34;Toturial App\u0026#34;; public string WindowTitle { get =\u0026gt; windowTitle; set { windowTitle = value; NotifyPropertyChanged(); } } public event PropertyChangedEventHandler PropertyChanged; protected void NotifyPropertyChanged([CallerMemberName] string propertyName) { PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(propertyName)); } } åƒè¿™æ ·ï¼Œ æ¯ä¸€ä¸ªå±æ€§éƒ½éœ€è¦ç¼–å†™ä¸€ä¸ªå¯¹åº”çš„å­—æ®µï¼Œ ç„¶åæ‰‹åŠ¨ç¼–å†™ getterï¼Œ setterï¼Œ å¹¶åœ¨ setter ä¸­è¿›è¡Œå±æ€§å˜æ›´çš„é€šçŸ¥ï¼Œæ˜¾ç„¶ï¼Œ éå¸¸éº»çƒ¦ã€‚\nåœ¨ CommunityToolkit.Mvvm ä¸­ï¼Œ æä¾›äº†ç”¨äºç”Ÿæˆè¿™äº›é‡å¤æ€§ä»£ç çš„æºç”Ÿæˆå™¨ï¼Œ æˆ‘ä»¬åªéœ€è¦ç®€å•çš„åœ¨éœ€è¦çš„åœ°æ–¹åŠ ä¸Šä¸€äº›ç‰¹æ€§ï¼Œ å°±å¯ä»¥å®ç°è¿™äº›å¤æ‚çš„ä¸œè¥¿äº†ã€‚ ä¾‹å¦‚ï¼Œ ä¸Šè¿°ä»£ç åœ¨ CommunityToolkit.Mvvm ä¸­ï¼Œ ä»£ç æ˜¯è¿™æ ·çš„ï¼š\n1 2 3 4 5 6 [ObservableObject] public partial class MainViewModel { [ObservableProperty] private string windowTitle = \u0026#34;Toturial App\u0026#34;; } ä¸ºæ‰€éœ€çš„ ViewModel æ·»åŠ  ObservableObject ç‰¹æ€§ï¼Œ åˆ©ç”¨åˆ†å¸ƒç±»ï¼Œ ä»–ä¼šè‡ªåŠ¨ç”Ÿæˆè¯¥ç±»å‹å¯¹ INotifyPropertyChanged çš„å®ç°ã€‚ è€Œæ‰“ä¸Šäº† ObservableProperty ç‰¹æ€§çš„å­—æ®µï¼Œ æºç”Ÿæˆå™¨ä¼šè‡ªåŠ¨ç”Ÿæˆè¯¥å­—æ®µåç§°è½¬æ¢ä¸ºå¤§é©¼å³°ä¹‹åçš„ä¸€ä¸ªå±æ€§ï¼Œ å¹¶åœ¨å±æ€§å®šä¹‰ä¸­åŒ…å«å¯¹å±æ€§å˜æ›´çš„é€šçŸ¥é€»è¾‘ã€‚\nç®€å•æ¥è®²ï¼Œ æˆ‘ä»¬ä¸éœ€è¦å†™é‚£ä¹ˆå¤æ‚çš„é€»è¾‘äº†ã€‚ åªéœ€è¦ä¸ºå¯è§‚å¯Ÿçš„ç±»å‹æ‰“ä¸Š ObservableObjectï¼Œ ä¸ºå¯è§‚å¯Ÿçš„å±æ€§æ‰“ä¸Š ObservablePropertyï¼Œ å…¶ä½™çš„ï¼Œ éƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆã€‚\nRelayCommand / ä¸­ç»§æŒ‡ä»¤ åŒæ ·çš„ï¼Œ åœ¨åŸç”Ÿ WPF ä¸­ï¼Œ æƒ³è¦å®šä¹‰ä¸€ä¸ªæŒ‡ä»¤ï¼Œ ä¹Ÿæ˜¯éå¸¸éº»çƒ¦çš„ä¸€ä»¶äº‹ã€‚ ä½ éœ€è¦ä¸ºæŒ‡ä»¤ä¸“é—¨å†™ä¸€ä¸ªç±»ï¼Œ å¹¶å®ç° ICommand æ¥å£ã€‚ åœ¨è¿™ä¸ªæ¥å£ä¸­åˆ†åˆ«åŒ…å«äº†åˆ¤æ–­æŒ‡ä»¤æ˜¯å¦èƒ½å¤Ÿæ‰§è¡Œï¼Œæ‰§è¡ŒæŒ‡ä»¤çš„æ–¹æ³•ï¼Œä»¥åŠä¸€ä¸ªç”¨äºé€šçŸ¥ â€œæŒ‡ä»¤å¯æ‰§è¡Œæ€§å˜æ›´â€ çš„äº‹ä»¶ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 public class MyCommand : ICommand { public bool CanExecute(object parameter) { // è¿™é‡Œå†™åˆ¤æ–­å‘½ä»¤æ˜¯å¦å¯æ‰§è¡Œçš„é€»è¾‘ } public void Execute(object parameter) { // è¿™é‡Œæ˜¯å‘½ä»¤æ‰§è¡Œçš„é€»è¾‘ } // è¿™é‡Œæ˜¯ç”¨äºé€šçŸ¥æŒ‡ä»¤å¯æ‰§è¡Œæ€§å˜æ›´çš„äº‹ä»¶ public event EventHandler? CanExecuteChanged; } ä½†æ˜¯å¾ˆå¤šæ—¶å€™ï¼Œ æˆ‘ä»¬çš„æŒ‡ä»¤åªæ˜¯ä¸€äº›ç®€å•çš„é€»è¾‘ï¼Œ ä¸ºä¸€ä¸ªç®€å•é€»è¾‘ç¼–å†™ä¸€ä¸ªç±»ï¼Œ æœªå…æœ‰äº›å¤ªéº»çƒ¦äº†ã€‚ äºæ˜¯ CommunityToolkit.Mvvm ä¸­ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç‰¹æ€§ï¼šRelayCommandã€‚\nå½“ä¸ºä¸€ä¸ªæ–¹æ³•æ‰“ä¸Š RelayCommand æ ‡è®°çš„æ—¶å€™ï¼Œ CommunityToolkit.Mvvm ä¼šåœ¨è¯¥æ–¹æ³•æ‰€åœ¨çš„ç±»ä¸‹ç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„ Commandï¼Œ ä½ å¯ä»¥åœ¨ç•Œé¢ä¸Šç›´æ¥ç»‘å®šåˆ°è¿™ä¸ª Commandï¼Œ è€Œä¸éœ€è¦è‡ªå·±æ‰‹åŠ¨ç¼–å†™ä¸€ä¸ª Command ç±»ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 public partial class MainWindow { public MainWindow() { // å°†ç»‘å®šä¸Šä¸‹æ–‡è®¾ä¸ºè‡ªèº« DataContext = this; InitalizeComponents(); } // è¿™é‡Œä¼šç”Ÿæˆä¸€ä¸ª ShowMessageCommand å±æ€§ [RelayCommand] public void ShowMessage() { MessageBox.Show(\u0026#34;Hello world!\u0026#34;); } } 1 2 3 4 5 6 7 8 \u0026lt;Window ...\u0026gt; \u0026lt;Grid\u0026gt; \u0026lt;StackPanel\u0026gt; \u0026lt;!--ç›´æ¥ç»‘å®šåˆ°åå°çš„ ShowMessageCommand--\u0026gt; \u0026lt;Button Content=\u0026#34;Click Me\u0026#34; Command=\u0026#34;{Binding ShowMessageCommand}\u0026#34;/\u0026gt; \u0026lt;/StackPanel\u0026gt; \u0026lt;/Grid\u0026gt; \u0026lt;/Window\u0026gt; ","date":"2023-05-12T12:50:59+08:00","permalink":"https://slimenull.com/p/20230512125059/","title":"[.NET/WPF] å¦‚ä½•ä½¿ç”¨ CommunityToolkit.Mvvm"},{"content":"æˆ‘è®¤ä¸ºé­”å¤§å…¬æœ€éš¾çš„ä¸€ç‚¹å°±æ˜¯, ä¼šé‡Šæ”¾è¶…ç»æ³•æœ¯. ä¸€æ—¦é‡Šæ”¾, å°±ç®—æœ‰ 700 çš„é­”æŠ—, 3000 çš„è¡€é‡, ä¹Ÿè¦å›¢ç­. æ‰€ä»¥æœ€å…³é”®çš„ä¸€ç‚¹å°±æ˜¯, ä¸è®©é­”å¤§å…¬æœ‰é‡Šæ”¾æ³•æœ¯çš„æœºä¼š.\nè¦æ±‚ ç­‰çº§å¤§æ¦‚æ˜¯ 40 çº§, ä½†æ˜¯è£…å¤‡ä¸èƒ½å¤ªæ‹‰è·¨, è¡€é‡å¤§æ¦‚ä¸¤åƒ, å¾—ä¿è¯ä¸èƒ½è¢«é­”å¤§å…¬ç§’æ‰, å¹¶ä¸”ç¥å®˜èƒ½åœ¨ä¸€æ¬¡æ¢å¤é­”æ³•åå°†é˜Ÿä¼è¡€é‡å›æ»¡.\néœ€è¦ä¸€äº›å…‰å’Œæš—çš„ç²¾çµçŸ³, ä»»æ„ç­‰çº§çš†å¯, ä¸»è¦ç”¨äºç ´é˜².\né˜µå®¹æ­é… æˆ‘è¿™è¾¹çš„æ‰“æ³•, éœ€è¦ä¸¤ä¸ªå­¦è€…, ä¸€ä¸ªçŒäºº, ä¸€ä¸ªç›—è´¼ä»¥åŠä¸€ä¸ªç¥å®˜. ä¸¤ä¸ªå­¦è€…å‡éœ€è¦å¤§ç«å†°é›·æ³•æœ¯(ç”¨æ¥ç ´é˜²ä»¥åŠæ‰“å‡ºä¸»è¦ä¼¤å®³), çŒäººéœ€è¦ \u0026lsquo;äº”æœˆé›¨ç®­\u0026rsquo;(ç”¨äºç ´é˜²), ç›—è´¼éœ€è¦ \u0026lsquo;å¸è¡€åŒ•é¦–\u0026rsquo; æˆ– \u0026lsquo;å¸é­”åŒ•é¦–\u0026rsquo;(ç”¨äºç ´é˜²).\næƒ³å¤šæ‹¿ç‚¹é’±, å¯ä»¥è®©å•†äººä½¿ç”¨å¥¥ä¹‰ (æ‰“å¤šå°‘è¡€, ç»™å¤šå°‘é’±), ä¼¤å®³ä½çš„è¯, å¤§æ¦‚æ¯æ¬¡ 5000$ çš„æ ·å­, å¦‚æœä¼¤å®³å¤Ÿ, ä¸€æ¬¡ 7000 æ˜¯æ²¡é—®é¢˜çš„. æ•´ä¸ªæˆ˜æ–—ä¸­å¤§æ¦‚èƒ½ç”¨ä¸ª 5 æ¬¡(ä¸æ˜¯ä¸èƒ½ç”¨æ›´å¤šæ¬¡, è€Œæ˜¯æ‰“è¿™ä¹ˆå¤šæ¬¡, é­”å¤§å…¬å·²ç»è¦æ­»æ‰äº†). å¦å¤–, å¯¹é­”å¤§å…¬è¿›è¡Œæ”¶é’±, æ˜¯èƒ½æ”¶åˆ° 40000 çš„.\nç¥å®˜éœ€è¦æœ‰å¤§æ¢å¤é­”æ³•, å¦‚æœæ²¡æœ‰, é‚£å¾—ä¿è¯å¢å¼ºçš„æ¢å¤é­”æ³•èƒ½å¤Ÿå°†é˜Ÿä¼è¡€é‡è¡¥æ»¡, ä¿è¯æ¯ä¸€æ¬¡ç ´é˜²å, é˜Ÿä¼çŠ¶æ€èƒ½å›æ»¡.\nè§’è‰² ä¸»èŒä¸š å‰¯èŒä¸š ç‰¹è•¾è å•†äºº å­¦è€… å¡æ‹‰æ–¯ å­¦è€… ç›—è´¼ æ³°é‡Œç¿ ç›—è´¼ çŒäºº æ¬§è²è‰äºš ç¥å®˜ èˆå¥³ BOSS å¼±ç‚¹ BOSS åœ¨åˆå§‹çŠ¶æ€ç ´é˜²ä¹‹å, ä¼šåœ¨ä¸‹é¢çš„ä¸‰ä¸ªé˜¶æ®µä¸­ä¸æ–­åˆ‡æ¢, æŒ‰ç…§é˜µå®¹ä¸­çš„æ­é…, å¯ä»¥è½»æ¾å¯¹å…¶ç ´é˜².\nçŠ¶æ€ å¼±ç‚¹ ç›¾ åˆå§‹çŠ¶æ€ å‰‘, æª, æ–§, é›·, å…‰ 4 é˜¶æ®µ 1 å‰‘, é›·, é£ 7 é˜¶æ®µ 2 å¼“, å…‰, æš— 10 é˜¶æ®µ 3 çŸ­å‰‘, ç«, å†° 10 è¦ç‚¹ çŒäººéœ€è¦åœ¨æ•´ä¸ªæˆ˜æ–—ä¸­, å§‹ç»ˆä¿è¯å¯¹æ–¹æœ‰ \u0026ldquo;é»ç€ä¸ç½‘\u0026rdquo; çš„çŠ¶æ€, è¿™æ ·èƒ½å¤Ÿä¿è¯: åœ¨å½“å‰é­”å¤§å…¬é˜²å¾¡æ¢å¤çš„å›åˆ, é­”å¤§å…¬æ”»å‡»é¡ºåºå¤„äºæœ€å¼€å§‹, è€Œåœ¨ç¬¬äºŒä¸ªå›åˆ, ç”±äºé»ç€ä¸ç½‘, é­”å¤§å…¬æ”»å‡»é¡ºåºå¤„äºæœ€å. è¿™æ ·, é˜Ÿä¼çš„æ”»å‡»é¡ºåºå°±é›†ä¸­åœ¨ä¸­é—´, æ€»å…±å…«æ¬¡æ”»å‡», å¯¹å…¶ç ´é˜²ä¹Ÿæ˜¯è½»è½»æ¾æ¾.\nç¬¬ä¸€å›åˆ ç¬¬äºŒå›åˆ é­”å¤§å…¬ é­”å¤§å…¬ æˆ‘æ–¹ æˆ‘æ–¹ æˆ‘æ–¹ æˆ‘æ–¹ æˆ‘æ–¹ æˆ‘æ–¹ æˆ‘æ–¹ æˆ‘æ–¹ é­”å¤§å…¬ é­”å¤§å…¬ è¿™æ ·, é­”å¤§å…¬å°±æœ‰äº†è¿™æ ·çš„è¡Œä¸º: æ¯ä¸€æ¬¡é˜²å¾¡æ¢å¤, éƒ½ä¼šè¢«åé¢é˜Ÿä¼å…«æ¬¡æ”»å‡»æ‰“ç ´é˜², ç„¶åé˜Ÿä¼è¿›è¡Œè¾“å‡º, è€Œä¸‹ä¸€æ¬¡é˜²å¾¡æ¢å¤, é­”å¤§å…¬åˆä¼šè¢«ç›´æ¥æ‰“æ™•, å¦‚æ­¤å¾€å¤.\né­”å¤§å…¬æ¯ä¸€æ¬¡é˜²å¾¡æ¢å¤çš„æ—¶å€™, éƒ½ä¼šæœ‰ä»¥ä¸‹ä¸¤æ¬¡è¡Œä¸º: è°ƒæ•´å§¿åŠ¿(ä¹Ÿå°±æ˜¯åˆ‡æ¢é˜¶æ®µ, å¼±ç‚¹ä¼šå˜æ›´), è¿›è¡Œå…¨ä½“æ³•æœ¯æ”»å‡»(åªè¦èƒ½æŠ—ä½, è¿™åœºæˆ˜æ–—å°±å·²ç»å®£å‘Šä½ çš„èƒœåˆ©äº†)\næµç¨‹ è¿›å…¥æˆ˜æ–—çš„æ—¶å€™, å‡å®šé­”å¤§å…¬å…ˆæ‰‹æ”»å‡», å®ƒä¼šç›´æ¥ç»™ä½ ä¸€ä¸ªå¨æ…‘çš„å…¨ä½“ debuff, ç„¶åè¿›è¡Œä¸€æ¬¡æ³•æœ¯æ”»å‡»(éœ€è¦ç¡¬æŠ—). æŠ—ä½ä¹‹åç›´æ¥è¿›è¡Œç ´ç›¾, ä¸¤ä¸ªå­¦è€…é‡Šæ”¾å¤§é›·æ³•æœ¯, ç›´æ¥ç ´é˜². åˆ°çŒäººçš„å›åˆ, ä¸è¦çŠ¹è±«, ç›´æ¥ç»™ \u0026ldquo;é»ç€ä¸çº¿\u0026rdquo; çš„ debuff.\nä¸€æ—¦é­”å¤§å…¬æ²¡æœ‰é»ç€ä¸çº¿çš„ debuff, å®ƒå°±æœ‰æœºä¼šç»™è‡ªå·±ä¸€ä¸ªé­”æ³•è¶…ç»åŒ– buff, è¿™æ—¶å®ƒçš„é­”æ³•æ”»å‡»å°±èƒ½ç›´æ¥å°†æˆ‘æ–¹å›¢ç­. å³ä¾¿æ˜¯ 700 é­”æŠ—, 3000 è¡€é‡ä¹Ÿæ— æµäºäº‹. æ‰€ä»¥æ•´åœºæˆ˜æ–—, å¿…é¡» è¦ ä¿è¯æ•Œæ–¹å§‹ç»ˆæœ‰é»ç€ä¸çº¿çš„ debuff\nåœ¨åˆå§‹é˜¶æ®µå°†å®ƒæ‰“ç ´é˜²ä¹‹å, ä¸è¦ç€æ€¥è¾“å‡º, å°†å®ƒåˆå§‹é˜¶æ®µçš„æ‰€æœ‰å¼±ç‚¹å…¨éƒ¨ä½¿ç”¨å­¦è€…çš„æŠ€èƒ½æ¢æ˜, ä¸è¦å¿ƒç–¼ BP, ç›´æ¥å¼€ BP æ¢æ˜.\nè½®åˆ°ç¥å®˜å›åˆ, ç›´æ¥å°†é˜Ÿä¼è¡€é‡å›æ»¡. ç¥å®˜åº”è¯¥æ˜¯æœ‰ä¸¤ä¸ªå›åˆ, å› ä¸ºé­”å¤§å…¬æ²¡åŠæ³•ç§’æ€æˆ‘ä»¬, å¹¶ä¸”æ¯ä¸€æ¬¡æ¢å¤éƒ½ä¼šè¢«æˆ‘æ–¹æ‰“ç ´é˜², æ‰€ä»¥å·²ç»èƒ½ç¡®è®¤æˆ˜æ–—èƒœåˆ©äº†. æ¥ä¸‹æ¥éœ€è¦çš„å°±æ˜¯è€—å®ƒ. ä½ ä¹Ÿå¯ä»¥ç”¨ç¥å®˜ç»™è‡ªå·±å¥—ä¸ªåå°„è½»çº±, æ¶å¿ƒä¸€ä¸‹å¯¹æ–¹(ä¼¤å®³ä¸å¼º, æ±¡è¾±æ€§æå¼º).\nåœ¨è¿›è¡Œä»¥ä¸Šæ“ä½œä¹‹å, ä¼šæœ‰ä»¥ä¸‹çš„æ•ˆæœ: é­”å¤§å…¬å¤„äºç ´é˜²çŠ¶æ€, æ¯ä¸€æ¬¡é˜²å¾¡æ¢å¤, éƒ½ä¼šå†æ¬¡è¢«æ‰“æ™•.\nå¯¹ç­– é­”å¤§å…¬åœ¨ä¸åŒçš„é˜¶æ®µä¸‹, å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å¯¹ç­–è¿›è¡Œç ´é˜²:\nçŠ¶æ€ å¼±ç‚¹ ç›¾ å¯¹ç­– åˆå§‹çŠ¶æ€ å‰‘, æª, æ–§, é›·, å…‰ 4 å­¦è€…ç›´æ¥æ”¾å¤§é­”æ³•å³å¯ é˜¶æ®µ 1 å‰‘, é›·, é£ 7 å­¦è€…æ”¾å¤§é­”æ³•, å…±å››æ¬¡æ”»å‡», 8 æ¬¡ä¼¤å®³, ç›´æ¥ç ´é˜² é˜¶æ®µ 2 å¼“, å…‰, æš— 10 çŒäººä¸¤æ¬¡ \u0026lsquo;äº”æœˆç®­é›¨\u0026rsquo;, è‡³å°‘ç ´æ‰ 6 ç›¾, ç¥å®˜ä¸¤æ¬¡å…‰æ˜é­”æ³•ç ´è°ƒ 2 ç›¾, å¦‚æœæœ‰å‰©ä¸‹çš„, ä½¿ç”¨ç²¾çµçŸ³æˆ–è€…å•†äººä¸¤æ¬¡æ™®é€šæ”»å‡»ç ´æ‰ é˜¶æ®µ 3 çŸ­å‰‘, ç«, å†° 10 å­¦è€…æ”¾å¤§é­”æ³•, å…±å››æ¬¡æ”»å‡», 8 æ¬¡ä¼¤å®³, å‰©ä½™ä¸¤ç›¾ç›´æ¥ç›—è´¼å¸è¡€åŒ•é¦–æˆ–è€…å¸é­”åŒ•é¦–ç›´æ¥æ‰“æ‰ ç ´é˜²å, ä¼˜å…ˆè¿›è¡Œ HP æ¢å¤, å¦‚æœæ•Œæ–¹çš„ \u0026lsquo;é»ç€æ•ç½‘\u0026rsquo; debuff å›åˆæ•°ä¸è¶³, å°±èµ¶ç´§è¡¥ä¸Š.\næ³¨æ„äº‹é¡¹ åƒä¸‡ä¸€å®šè¦åœ¨é­”å¤§å…¬é˜²å¾¡æ¢å¤åç›´æ¥å°†å…¶ç ´é˜², ä¸ç»™ä»–å‡ºæ‰‹çš„æœºä¼š, å¦åˆ™å°±ä¼šå›¢ç­. æ—¶ä¸æ—¶æ³¨æ„è‡ªå·±çš„è“æ¡, å¦‚æœè¦ç”¨å¤§é­”æ³•çš„æ—¶å€™, æ²¡æœ‰è“äº†, é‚£ä¼šå¾ˆå“äººçš„.\n","date":"2023-05-04T13:45:03+08:00","permalink":"https://slimenull.com/p/20230504134503/","title":"[å…«æ–¹æ—…äºº] é­”å¤§å…¬æ”»ç•¥, å¯è¡Œçš„ä¸€ç§æ‰“æ³•"},{"content":"2023 å¹´äº†, å¦‚æœå’±å†™çš„ç¨‹åºè¿˜ä¸æ”¯æŒæš—è‰²æ¨¡å¼, é‚£å°±è¯´ä¸è¿‡å»äº†.\nåˆ¤æ–­æ˜¯å¦æ˜¯æš—è‰²æ¨¡å¼ åœ¨ Windows ä¸­åˆ¤æ–­å½“å‰ç³»ç»Ÿçš„é¢œè‰²æ¨¡å¼æ˜¯å¦æ˜¯æš—è‰², å¯ä»¥é€šè¿‡æŸ¥è¯¢æ³¨å†Œè¡¨é¡¹æ¥å®ç°.\nä¸‹é¢æ˜¯ C++ çš„ç¤ºä¾‹ä»£ç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 HKEY hKey; const wchar_t* subKey = L\u0026#34;SOFTWARE\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Themes\\\\Personalize\u0026#34;; const wchar_t* valueName = L\u0026#34;AppsUseLightTheme\u0026#34;; DWORD value = -1; DWORD valueSize = sizeof(DWORD); if (RegOpenKeyEx(HKEY_CURRENT_USER, subKey, 0, KEY_READ, \u0026amp;hKey) == ERROR_SUCCESS) { HRESULT hr = RegGetValue(hKey, nullptr, valueName, RRF_RT_REG_DWORD, nullptr, \u0026amp;value, \u0026amp;valueSize); if (hr != S_OK) { value = -1; // ä¸è¦å‡å®šè¯¥é”®å¿…é¡»å­˜åœ¨ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°†è¿”å›é»˜è®¤å€¼ } RegCloseKey(hKey); } if (value == 0) { // å½“å‰ä½¿ç”¨æš—è‰²ä¸»é¢˜ } else if (value == 1) { // å½“å‰ä½¿ç”¨äº®è‰²ä¸»é¢˜ } else { // æ— æ³•ç¡®å®šå½“å‰ä¸»é¢˜ } ä¸‹é¢æ˜¯ C# ç¤ºä¾‹ä»£ç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 using Microsoft.Win32; RegistryKey key = Registry.CurrentUser.OpenSubKey(@\u0026#34;SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Themes\\Personalize\u0026#34;); if (key != null) { int appsUseLightTheme = (int)key.GetValue(\u0026#34;AppsUseLightTheme\u0026#34;, -1); if (appsUseLightTheme == 0) { // å½“å‰ä½¿ç”¨æš—è‰²ä¸»é¢˜ } else if (appsUseLightTheme == 1) { // å½“å‰ä½¿ç”¨äº®è‰²ä¸»é¢˜ } else { // æ— æ³•ç¡®å®šå½“å‰ä¸»é¢˜ } key.Close(); } è®¾ç½®çª—å£æš—è‰²æ¨¡å¼ Windows ä¸­è‡ªå¸¦äº†ä¸€ä¸ªæš—è‰²æ¨¡å¼çš„ WinAPI, ç›´æ¥è°ƒç”¨å°±å¯ä»¥å°†çª—å£æ ‡é¢˜æ å˜æˆæš—è‰².\nä¸‹é¢æ˜¯ C++ çš„ç¤ºä¾‹ä»£ç :\n1 2 3 4 5 6 7 8 9 10 11 #include \u0026lt;windows.h\u0026gt; #include \u0026lt;dwmapi.h\u0026gt; int main() { HWND hWnd = GetMainWindowHandle(); // è·å–ä¸»çª—å£å¥æŸ„ DWORD dwAttribute = DWMWA_USE_IMMERSIVE_DARK_MODE; // è®¾ç½®æš—è‰²æ¨¡å¼å±æ€§ BOOL bValue = TRUE; // å¯ç”¨æš—è‰²æ¨¡å¼ DwmSetWindowAttribute(hWnd, dwAttribute, \u0026amp;bValue, sizeof(bValue)); // è®¾ç½®çª—å£å±æ€§ return 0; } ä¸‹é¢æ˜¯ C# çš„ç¤ºä¾‹ä»£ç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 [DllImport(\u0026#34;dwmapi.dll\u0026#34;, PreserveSig = true)] public static extern int DwmSetWindowAttribute(IntPtr hwnd, DwmWindowAttribute attr, ref int attrValue, int attrSize); public static bool EnableDarkModeForWindow(IntPtr hWnd, bool enable) { int darkMode = enable ? 1 : 0; int hr = DwmSetWindowAttribute(hWnd, DwmWindowAttribute.UseImmersiveDarkMode, ref darkMode, sizeof(int)); return hr \u0026gt;= 0; } public enum DwmWindowAttribute : uint { NCRenderingEnabled = 1, NCRenderingPolicy, TransitionsForceDisabled, AllowNCPaint, CaptionButtonBounds, NonClientRtlLayout, ForceIconicRepresentation, Flip3DPolicy, ExtendedFrameBounds, HasIconicBitmap, DisallowPeek, ExcludedFromPeek, Cloak, Cloaked, FreezeRepresentation, PassiveUpdateMode, UseHostBackdropBrush, UseImmersiveDarkMode = 20, WindowCornerPreference = 33, BorderColor, CaptionColor, TextColor, VisibleFrameBorderThickness, SystemBackdropType, Last } å“åº”é…è‰²æ›´æ”¹ å½“ç³»ç»Ÿé…è‰²æ›´æ”¹çš„æ—¶å€™, ä¼šå‘æ‰€æœ‰çª—ä½“å‘é€ä¸€ä¸ª THEMECHANGED æ¶ˆæ¯:\nC++ ä¸­, ä½ å¯ä»¥åœ¨ WndProc æ•æ‰è¿™ä¸ªæ¶ˆæ¯, ç„¶åè¿›è¡Œå…·ä½“æ“ä½œ. ä¾‹å¦‚ä¸Šé¢æåˆ°çš„, è®¾ç½®çª—å£æš—è‰²æ¨¡å¼.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 #include \u0026lt;Windows.h\u0026gt; #include \u0026lt;iostream\u0026gt; LRESULT CALLBACK WndProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam); int main() { // æ³¨å†Œçª—å£ç±» WNDCLASS wc = {}; wc.lpfnWndProc = WndProc; wc.hInstance = GetModuleHandle(NULL); wc.lpszClassName = L\u0026#34;MyWindowClass\u0026#34;; if (!RegisterClass(\u0026amp;wc)) { std::cerr \u0026lt;\u0026lt; \u0026#34;Failed to register window class\u0026#34; \u0026lt;\u0026lt; std::endl; return 1; } // åˆ›å»ºçª—å£ HWND hwnd = CreateWindow( L\u0026#34;MyWindowClass\u0026#34;, L\u0026#34;My Window\u0026#34;, WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, NULL, NULL, GetModuleHandle(NULL), NULL ); if (!hwnd) { std::cerr \u0026lt;\u0026lt; \u0026#34;Failed to create window\u0026#34; \u0026lt;\u0026lt; std::endl; return 1; } // æ˜¾ç¤ºçª—å£ ShowWindow(hwnd, SW_SHOWDEFAULT); // æ¶ˆæ¯å¾ªç¯ MSG msg; while (GetMessage(\u0026amp;msg, NULL, 0, 0)) { TranslateMessage(\u0026amp;msg); DispatchMessage(\u0026amp;msg); } return 0; } LRESULT CALLBACK WndProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam) { switch (uMsg) { case WM_DESTROY: PostQuitMessage(0); return 0; case WM_THEMECHANGED: std::cout \u0026lt;\u0026lt; \u0026#34;Theme changed\u0026#34; \u0026lt;\u0026lt; std::endl; return 0; default: return DefWindowProc(hwnd, uMsg, wParam, lParam); } } C# çš„è¯, å¦‚æœä½ åœ¨ä½¿ç”¨ WinForm æˆ– WPF, ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ C# å°è£…å¥½çš„ SystemEvents ç±», å®ƒæœ‰ä¸€ä¸ª UserPreferenceChanged äº‹ä»¶, é€šè¿‡è®¢é˜…è¿™ä¸ªäº‹ä»¶, å¹¶åˆ¤æ–­å…·ä½“åˆ†ç±», æœ€åæ‰§è¡Œæ“ä½œ:\n1 2 3 4 5 6 7 8 9 SystemEvents.UserPreferenceChanged += SystemEvents_UserPreferenceChanged; private void SystemEvents_UserPreferenceChanged(object sender, UserPreferenceChangedEventArgs e) { if (e.Category == UserPreferenceCategory.General) { // æ›´æ–°é¢œè‰²ä¸»é¢˜ } } ","date":"2023-04-04T17:32:08+08:00","permalink":"https://slimenull.com/p/20230404173208/","title":"[Win32] çª—ä½“æš—è‰²æ¨¡å¼, C++, WinForm, WPF ä½¿ç”¨æ–¹æ³•, åˆ¤æ–­é¢œè‰²æ¨¡å¼, å“åº”é¢œè‰²å˜æ›´æ¶ˆæ¯, è®¾ç½®æ ‡é¢˜æ æš—è‰²."},{"content":"èµ„æºæ˜¯ WPF é‡Œé¢çš„ä¸€ä¸ªå¥½ä¸œè¥¿, ä½ å¯ä»¥åœ¨é‡Œé¢å­˜å¾ˆå¤šä¸œè¥¿, ç„¶åç›´æ¥åœ¨ XAML æˆ– CS ä»£ç ä¸­è°ƒç”¨è·å–å¯¹åº”çš„å€¼. ä»»ä½•ä¸œè¥¿éƒ½å¯ä»¥å­˜è¿›å», åªè¦å®ƒæ˜¯å¯ä»¥ç”±æ–‡æœ¬è¡¨ç¤ºçš„, é‚£å°±å¯ä»¥.\nå®šä¹‰èµ„æºçš„æ–¹å¼ èµ„æºå®šä¹‰æœ‰å¾ˆå¤šæ–¹å¼, å®ƒä»¬ä¹Ÿæœ‰ä¸åŒçš„æ•ˆæœ, ä½œç”¨åŸŸ, ä»¥åŠåˆé€‚çš„ç”¨é€”.\n1. åœ¨æ§ä»¶ä¸­å®šä¹‰èµ„æº åœ¨ WPF ä¸­, ä»»ä½•ä¸€ä¸ª FrameworkElement (æ¡†æ¶å…ƒç´ ) éƒ½å¯ä»¥ç”¨æ¥å®šä¹‰èµ„æº, å®ƒæœ‰ä¸€ä¸ª Resources å±æ€§, æˆ‘ä»¬ä½¿ç”¨å®ƒæ¥å®šä¹‰æ‰€éœ€èµ„æºå³å¯.\nåœ¨ä¸€ä¸ªæ§ä»¶ä¸­å®šä¹‰çš„èµ„æº, è¿™ä¸ªèµ„æºä¹Ÿåªèƒ½åœ¨è¿™ä¸ªæ§ä»¶ä¸­è¢«è®¿é—®, å¤–éƒ¨æ˜¯æ— æ³•è®¿é—®åˆ°è¿™ä¸ªèµ„æºçš„.\nä¸‹é¢æ˜¯ä¸€ä¸ªåœ¨ StackPanel ä¸­å®šä¹‰ä¸€ä¸ªé€‚ç”¨äº Button çš„ Style:\n1 2 3 4 5 6 7 8 9 10 11 12 \u0026lt;StackPanel\u0026gt; \u0026lt;StackPanel.Resources\u0026gt; \u0026lt;Style TargetType=\u0026#34;Button\u0026#34;\u0026gt; \u0026lt;Setter Property=\u0026#34;Margin\u0026#34; Value=\u0026#34;3\u0026#34;/\u0026gt; \u0026lt;/Style\u0026gt; \u0026lt;/StackPanel.Resources\u0026gt; \u0026lt;Button\u0026gt;Click\u0026lt;/Button\u0026gt; \u0026lt;Button\u0026gt;Me\u0026lt;/Button\u0026gt; \u0026lt;Button\u0026gt;To\u0026lt;/Button\u0026gt; \u0026lt;Button\u0026gt;Go\u0026lt;/Button\u0026gt; \u0026lt;/StackPanel\u0026gt; åœ¨ä¸Šé¢çš„ä»£ç ä¸­, StackPanel æ§ä»¶çš„ Resources ä¸­å®šä¹‰äº†ä¸€ä¸ª Style, è¿™ä¸ª Style çš„ç›®æ ‡ç±»å‹æ˜¯ Button, å®ƒå°†åº”ç”¨äº StackPanel ä¸‹æ‰€æœ‰çš„ Button, ä¾‹å¦‚åœ¨ä¸Šé¢ä»£ç ä¸­, æˆ‘ä»¬ä¸ºæŒ‰é’®å®šä¹‰äº† Margin å€¼ä¸º 3, è¿™æ ·, è¿™ä¸ª StackPanel ä¸­çš„æ‰€æœ‰ Button éƒ½å¯ä»¥å¿«é€Ÿçš„ç©ºå‡ºä¸€äº›é—´è·, è€Œä¸éœ€è¦æˆ‘ä»¬ä¸ºæ¯ä¸€ä¸ª Button èµ‹å€¼ Margin äº†.\næ•ˆæœå›¾:\nå¾ˆå¤šæ—¶å€™, æˆ‘ä»¬ä¹Ÿåœ¨ Window æˆ– Page ä¸­å®šä¹‰ä¸€äº›èµ„æº, ä¾‹å¦‚è½¬æ¢å™¨, æŸäº›å¿…è¦çš„æ•°æ®ä¹‹ç±»çš„, è¿™äº›èµ„æºåœ¨æ•´ä¸ª Window å’Œ Page éƒ½èƒ½è®¿é—®, è€Œä¸ä¼šè¢«å¤–é¢è®¿é—®åˆ°, éå¸¸æ–¹ä¾¿.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 \u0026lt;Page x:Class=\u0026#34;OpenGptChat.Views.MainPage\u0026#34; Title=\u0026#34;MainPage\u0026#34; xmlns=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation\u0026#34; xmlns:x=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml\u0026#34; xmlns:mc=\u0026#34;http://schemas.openxmlformats.org/markup-compatibility/2006\u0026#34; xmlns:d=\u0026#34;http://schemas.microsoft.com/expression/blend/2008\u0026#34; xmlns:local=\u0026#34;clr-namespace:OpenGptChat.Views\u0026#34; xmlns:utilities=\u0026#34;clr-namespace:OpenGptChat.Utilities;assembly=OpenGptChat.Common\u0026#34; mc:Ignorable=\u0026#34;d\u0026#34; d:DesignHeight=\u0026#34;600\u0026#34; d:DesignWidth=\u0026#34;880\u0026#34; d:Background=\u0026#34;White\u0026#34; d:DataContext=\u0026#34;{d:DesignInstance Type=local:MainPage}\u0026#34; Background=\u0026#34;{DynamicResource GeneralBackground}\u0026#34; Style=\u0026#34;{DynamicResource AnimatedPageStyle}\u0026#34;\u0026gt; \u0026lt;Page.Resources\u0026gt; \u0026lt;utilities:BindingProxy x:Key=\u0026#34;PageSelf\u0026#34; Data=\u0026#34;{Binding}\u0026#34;/\u0026gt; \u0026lt;/Page.Resources\u0026gt; \u0026lt;!--çœç•¥é¡µé¢å†…å®¹--\u0026gt; \u0026lt;/Page\u0026gt; 2. åœ¨èµ„æºå­—å…¸ä¸­å®šä¹‰èµ„æº å¦‚æœä½ ç¿»äº† FrameworkElement çš„å®šä¹‰, ä½ ä¼šå‘ç°, å®ƒçš„ Resources å±æ€§çš„ç±»å‹, å°±æ˜¯ ResourceDictionary, å³: èµ„æºå­—å…¸.\nåœ¨ WPF ä¸­, ä½ åŒæ ·å¯ä»¥åœ¨ä½ çš„é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ªèµ„æºå­—å…¸æ–‡ä»¶, å®ƒæ˜¯ä¸€ä¸ª XAML æ–‡ä»¶, å¤§æ¦‚æ˜¯è¿™æ ·çš„æ ¼å¼:\n1 2 3 4 5 6 \u0026lt;ResourceDictionary xmlns=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation\u0026#34; xmlns:x=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml\u0026#34;\u0026gt; \u0026lt;!--åœ¨è¿™é‡Œå®šä¹‰èµ„æº--\u0026gt; \u0026lt;/ResourceDictionary\u0026gt; å¦‚æœä½ æƒ³åœ¨åˆ«çš„åœ°æ–¹å¼•ç”¨ä¸€ä¸ªèµ„æºå­—å…¸, å¯ä»¥ç›´æ¥åœ¨ä½ çš„ XAML ä¸­è¿™ä¹ˆå£°æ˜:\n1 \u0026lt;ResourceDictionary Source=\u0026#34;èµ„æºå­—å…¸çš„è·¯å¾„\u0026#34;/\u0026gt; å› ä¸ºåˆšåˆšçš„ FrameworkElement çš„ Resources å±æ€§æ˜¯ ResourceDictionary ç±»å‹, æ‰€ä»¥ä½ ä¹Ÿå¯ä»¥ç›´æ¥æŠŠè‡ªå·±çš„èµ„æºå­—å…¸èµ‹å€¼è¿‡å», å¤§æ¦‚æ˜¯è¿™æ ·çš„:\n1 2 3 4 5 \u0026lt;StackPanel\u0026gt; \u0026lt;StackPanel.Resources\u0026gt; \u0026lt;ResourceDictionary Source=\u0026#34;èµ„æºå­—å…¸çš„è·¯å¾„\u0026#34;/\u0026gt; \u0026lt;/StackPanel.Resources\u0026gt; \u0026lt;/StackPanel\u0026gt; å¦‚æœä½ å¸Œæœ›å®šä¹‰ä¸€äº›å…¨å±€éƒ½èƒ½ä½¿ç”¨çš„èµ„æº, é‚£ä¹ˆä½ å¯ä»¥ç›´æ¥åœ¨é¡¹ç›®ä¸­çš„ App.xaml ä¸­å®šä¹‰. åœ¨ App.xaml å®šä¹‰çš„èµ„æº, æ˜¯æ•´ä¸ªç¨‹åºéƒ½å¯ä»¥ç›´æ¥è®¿é—®åˆ°çš„, ä¾‹å¦‚è¿™æ ·:\n1 2 3 4 5 6 7 8 9 10 11 \u0026lt;Application x:Class=\u0026#34;WpfTutorial.App\u0026#34; xmlns=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation\u0026#34; xmlns:x=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml\u0026#34; xmlns:local=\u0026#34;clr-namespace:WpfTutorial\u0026#34; StartupUri=\u0026#34;MainWindow.xaml\u0026#34;\u0026gt; \u0026lt;Application.Resources\u0026gt; \u0026lt;Style TargetType=\u0026#34;Button\u0026#34; x:Key=\u0026#34;pinkButton\u0026#34;\u0026gt; \u0026lt;Setter Property=\u0026#34;Background\u0026#34; Value=\u0026#34;Pink\u0026#34;/\u0026gt; \u0026lt;/Style\u0026gt; \u0026lt;/Application.Resources\u0026gt; \u0026lt;/Application\u0026gt; éœ€è¦çŸ¥é“çš„æ˜¯, èµ„æºå­—å…¸ä¹Ÿæ˜¯å¯ä»¥åˆå¹¶çš„, ResourceDictionary æœ‰ä¸€ä¸ªå±æ€§å«åš MergedDictionaries, ä½ å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ ä¸€äº›å…¶ä»–çš„èµ„æºå­—å…¸, ç„¶åé‚£äº›èµ„æºå­—å…¸ä¸­åŒ…å«çš„èµ„æº, å°±ä¼šåˆå¹¶åˆ°å½“å‰å­—å…¸ä¸­.\nOpenGptChat çš„ App.xaml æ˜¯è¿™æ ·å®šä¹‰çš„:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 \u0026lt;Application x:Class=\u0026#34;OpenGptChat.App\u0026#34; xmlns=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation\u0026#34; xmlns:x=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml\u0026#34; xmlns:local=\u0026#34;clr-namespace:OpenGptChat\u0026#34;\u0026gt; \u0026lt;Application.Resources\u0026gt; \u0026lt;ResourceDictionary\u0026gt; \u0026lt;ResourceDictionary.MergedDictionaries\u0026gt; \u0026lt;ResourceDictionary Source=\u0026#34;/Themes/Generic.xaml\u0026#34;/\u0026gt; \u0026lt;ResourceDictionary Source=\u0026#34;/Resources/AnimationStyles.xaml\u0026#34;/\u0026gt; \u0026lt;ResourceDictionary Source=\u0026#34;/Resources/ControlStyles/All.xaml\u0026#34;/\u0026gt; \u0026lt;ResourceDictionary Source=\u0026#34;/Converters/SingletonConverters.xaml\u0026#34;/\u0026gt; \u0026lt;ResourceDictionary Source=\u0026#34;pack://application:,,,/OpenGptChat.Common;component/ColorModes/BrightMode.xaml\u0026#34;/\u0026gt; \u0026lt;ResourceDictionary Source=\u0026#34;pack://application:,,,/OpenGptChat.Common;component/Languages/en.xaml\u0026#34;/\u0026gt; \u0026lt;/ResourceDictionary.MergedDictionaries\u0026gt; \u0026lt;/ResourceDictionary\u0026gt; \u0026lt;/Application.Resources\u0026gt; \u0026lt;/Application\u0026gt; ä»ä¸Šé¢çš„ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°, å®ƒæ²¡æœ‰ç›´æ¥åœ¨ App.xaml ä¸­ç›´æ¥å®šä¹‰ä»»ä½•èµ„æº, è€Œæ˜¯åœ¨å…¶ä»–çš„åœ°æ–¹å®šä¹‰èµ„æº, æœ€åå°†å®ƒä»¬åˆå¹¶åˆ° App.xaml, è¿™æ ·å°†èµ„æºåˆ†é—¨åˆ«ç±», ç®¡ç†èµ·æ¥ä¹Ÿæ˜¯æ–¹ä¾¿çš„.\nè®¿é—®èµ„æºçš„æ–¹å¼ åœ¨ä¸Šé¢çš„å†…å®¹ä¸­, ä½ åº”è¯¥ä¹Ÿçœ‹åˆ°äº†, æˆ‘ç›´æ¥åœ¨æ§ä»¶ä¸­å®šä¹‰çš„ Style, å®ƒæœ‰ä¸€ä¸ª TargetType å±æ€§, æˆ–è€…æˆ‘åœ¨ä¸Šé¢ App.xaml ä¸­å®šä¹‰ Style çš„æ—¶å€™, æ·»åŠ äº†ä¸€ä¸ª x:Key å±æ€§. æ˜¯è¿™äº›å†³å®šäº†èµ„æºçš„è®¿é—®æ–¹å¼.\n1. è®¿é—®ä½¿ç”¨ç›®æ ‡ç±»å‹å®šä¹‰çš„èµ„æº å¦‚æœä¸€ä¸ªèµ„æºæ˜¯ä¸€ä¸ª Style, é‚£ä¹ˆå®ƒå¯ä»¥ç›´æ¥æœ‰ä¸€ä¸ª TargetType å±æ€§, å½“ä½ ç»™å®ƒèµ‹å€¼å, æ‰€æœ‰èƒ½è®¿é—®åˆ°è¯¥èµ„æºçš„, å¯¹åº”ç±»å‹çš„æ§ä»¶, éƒ½ä¼šåº”ç”¨è¿™ä¸ªæ ·å¼, æ¢è¨€ä¹‹, ä½ å¯ä»¥ç”¨å®ƒå®šä¹‰ä¸€äº› å…¨å±€ æˆ– é€šç”¨ çš„æ ·å¼, ç„¶ååº”ç”¨åˆ°ä½ æƒ³è¦çš„åœ°æ–¹.\nä¸Šé¢ç›´æ¥åœ¨ StackPanel ä¸­å®šä¹‰ Style èµ„æºçš„ä¾‹å­å°±æ˜¯ä½¿ç”¨çš„è¿™ç§æ–¹å¼, å®ƒåªæœ‰ä¸€ä¸ª TargetType, äºæ˜¯å®ƒçš„æˆå‘˜ä¸­, æ‰€æœ‰çš„ Button éƒ½ä¼šåº”ç”¨è¿™ä¸ªæ ·å¼, ç„¶åè®¾ç½® Margin å€¼ä¸ºæ ·å¼ä¸­æŒ‡å®šçš„å€¼.\nå¦‚æœä½ å¸Œæœ›å°†ä¸€ä¸ªæ ·å¼åº”ç”¨åˆ°æ•´ä¸ªåº”ç”¨ç¨‹åº, å¾ˆç®€å•, åªéœ€è¦è®©å®ƒå¯ä»¥è¢«æ•´ä¸ªåº”ç”¨ç¨‹åºè®¿é—®å³å¯, é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥ç”¨ä»€ä¹ˆå‘¢? å½“ç„¶æ˜¯ App.xaml äº†. ä½ åœ¨ App.xaml ä¸­ç›´æ¥å®šä¹‰çš„ Style èµ„æºæˆ–è€…åˆå¹¶åˆ° App.xaml çš„ Style èµ„æº, å¦‚æœè®¾ç½®äº† TargetType å¹¶ä¸”æ²¡æœ‰è®¾ç½® x:Key, é‚£ä¹ˆå®ƒä»¬å°±ä¼šå¯¹å…¨å±€è¿›è¡Œåº”ç”¨.\n2. è®¿é—®ä½¿ç”¨é”®å®šä¹‰çš„èµ„æº ä»»ä½•ä¸€ä¸ªèµ„æº, å¦‚æœä½ å®šä¹‰äº†é”®, ä¹Ÿå°±æ˜¯ x:Key, é‚£ä¹ˆè®¿é—®å®ƒçš„æ—¶å€™, å°±åªèƒ½é€šè¿‡ {StaticResource é”®} æˆ– {DynamicResource é”®} æ¥è®¿é—®.\nå®ƒä»¬åˆ†åˆ«æ˜¯é™æ€èµ„æºå’ŒåŠ¨æ€èµ„æº. ä½œç”¨å°±å’Œå®ƒä»¬çš„åå­—ä¸€æ ·, é™æ€èµ„æºä¸€æ—¦å¼•ç”¨ä¹‹å, å°±ä¸ä¼šå˜æ›´, è€Œä½¿ç”¨åŠ¨æ€èµ„æºå¼•ç”¨çš„èµ„æº, å¦‚æœä½ åŠ¨æ€æ›´æ–°äº†èµ„æºå­—å…¸, é‚£ä¹ˆè¿™ä¸ªå¼•ç”¨ä¹Ÿä¼šæ›´æ–°.\né€šè¿‡è¿™ä¸ªç‰¹æ€§, æˆ‘ä»¬å¯ä»¥ç”¨æ¥åš \u0026ldquo;è¯­è¨€å›½é™…åŒ–\u0026rdquo;, ä¹Ÿå°±æ˜¯ç»™ç¨‹åºæ·»åŠ å¤šè¯­è¨€æ”¯æŒ. åŒç†, å¦‚æœä½ è¦åšç¨‹åºçš„é¢œè‰²æ¨¡å¼åˆ‡æ¢, é‚£ä¹ˆä¹Ÿå¯ä»¥ç›´æ¥åš, æ¯•ç«Ÿ, æ§ä»¶çš„ Foreground, Background ä»¥åŠå‡ ä¹ä»»ä½•ä¸œè¥¿éƒ½æ˜¯å¯ä»¥é€šè¿‡åŠ¨æ€èµ„æºæ¥å¼•ç”¨çš„.\nåŠ¨æ€åˆ‡æ¢èµ„æº åªè¦ä½ çš„ CS ä»£ç èƒ½è®¿é—®åˆ°çš„åœ°æ–¹, ä½ éƒ½å¯ä»¥æ“ä½œ. ä»¥ App.xaml ä¸ºä¾‹, å®ƒå…¶å®æ˜¯ä¸€ä¸ªç±», åŸºç±»å‹æ˜¯ Application, è€Œæˆ‘ä»¬åœ¨ App.xaml ä¸­è®¿é—®åˆ°çš„å±æ€§, åŸºæœ¬éƒ½æ˜¯åœ¨è®¿é—® Application çš„å±æ€§.\n1. åŸºæœ¬æ“ä½œ å¦‚æœä½ ç¿»è¿‡ Application çš„å®šä¹‰, ä½ ä¼šå‘ç°, å®ƒæä¾›äº†ä¸€ä¸ª Current å±æ€§, ç”¨æ¥è·å–å½“å‰æ­£åœ¨è¿è¡Œçš„ Application å®ä¾‹.\nä¸‹é¢æ˜¯æ“ä½œ Application æ›¿æ¢å½“å‰ç¨‹åºçš„èµ„æºçš„ç¤ºä¾‹ä»£ç .\n1 2 3 4 ResourceDictionary res = æˆ‘çš„èµ„æºå­—å…¸, è¿™é‡Œæ€ä¹ˆè·å–åˆ°çš„ä½ è‡ªå·±å†³å®šå’¯; // ç›´æ¥å°†å½“å‰åº”ç”¨ç¨‹åºçš„èµ„æºæ›¿æ¢æˆæˆ‘ä»¬çš„èµ„æº Application.Current.Resources = res; æˆ–è€…å§”å©‰ä¸€ç‚¹, æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å½“å‰ç¨‹åºèµ„æºå­—å…¸ä¸­çš„ MergedDictionaries ä¸­æ·»åŠ è‡ªå·±çš„èµ„æº, å®ƒå¯ä»¥ç›´æ¥è¦†ç›–æ‰ç›¸åŒ x:Key çš„å€¼.\n1 2 3 4 ResourceDictionary res = æˆ‘çš„èµ„æºå­—å…¸, è¿™é‡Œæ€ä¹ˆè·å–çš„ä½ è‡ªå·±å†³å®šå’¯; // åœ¨å½“å‰åº”ç”¨ç¨‹åºçš„èµ„æºä¸­, æ·»åŠ æˆ‘ä»¬è‡ªå·±çš„èµ„æº. Application.Current.Resources.MergedDictionaries.Add(res); 2. åˆ æ‰æ—§çš„, æ·»åŠ æ–°çš„ ç›´æ¥æ›¿æ¢æ‰ç¨‹åºçš„èµ„æºå­—å…¸æ˜¾ç„¶ä¸å¥½, å› ä¸ºæˆ‘ä»¬é‡Œé¢å¯èƒ½å®šä¹‰äº†å¾ˆå¤šä¸œè¥¿, æ›´æ¢èµ·æ¥ä¸æ–¹ä¾¿. è€Œç›´æ¥å‘é‡Œé¢æ·»åŠ æ–°çš„, è¦†ç›–æ—§çš„ä¹Ÿä¸å¥½, å› ä¸ºä¹…è€Œä¹…ä¹‹, èµ„æºå­—å…¸ä¼šè¶Šç§¯è¶Šå¤š, å¯èƒ½ä¼šå½±å“ç¨‹åºçš„æ€§èƒ½.\næƒ³è¦åˆ å»æ—§çš„å­—å…¸, é¦–å…ˆæˆ‘ä»¬å°±å¾—çŸ¥é“è¿™ä¸ªå­—å…¸æ˜¯ä¸æ˜¯æˆ‘ä»¬æ‰€è¦åˆ å»çš„å­—å…¸. ä¾‹å¦‚æˆ‘ç¨‹åºèµ„æºçš„åˆå¹¶å­—å…¸ä¸­æœ‰ä¸€ä¸ªç”¨æ¥å­˜æ”¾ è¯­è¨€ çš„å­—å…¸, é‚£ä¹ˆåšå¾—è®©å®ƒæœ‰ä¸ªåœ°æ–¹èƒ½å¤Ÿæ ‡è¯†å‡º \u0026ldquo;è¿™ä¸ªå­—å…¸æ˜¯ç”¨æ¥å­˜æ”¾è¯­è¨€ä¿¡æ¯çš„\u0026rdquo;. æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯åœ¨å­—å…¸ä¸­åŠ å…¥ä¸€ä¸ªå¸¦æœ‰æ ‡è¯†æ€§è´¨çš„èµ„æº, ä¾‹å¦‚è¿™æ ·:\n1 2 3 4 5 6 7 8 9 \u0026lt;ResourceDictionary xmlns=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation\u0026#34; xmlns:x=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml\u0026#34; xmlns:s=\u0026#34;clr-namespace:System;assembly=mscorlib\u0026#34;\u0026gt; \u0026lt;!-- è¿™é‡Œå­˜æ”¾èµ„æº --\u0026gt; \u0026lt;!-- ç”¨ä¸€ä¸ªåç§°ä¸ä¼šå’Œå…¶ä»–èµ„æºå­—å…¸èµ„æºé‡å¤çš„ä»»æ„èµ„æºåšæ ‡è¯† --\u0026gt; \u0026lt;s:Boolean x:Key=\u0026#34;IsLanguageResource\u0026#34;\u0026gt;True\u0026lt;/s:Boolean\u0026gt; \u0026lt;/ResourceDictionary\u0026gt; åœ¨åˆ¤æ–­çš„æ—¶å€™è¿™æ ·å†™:\n1 2 3 4 var oldResources = Application.Current.Resources.MergedDictionaries .Where(res =\u0026gt; res.Contains(\u0026#34;IsLanguageResource\u0026#34;) .ToList(); ä¸‹é¢çš„ä»£ç å–è‡ª OpenGptChat çš„ ColorModeService, å¯ä»¥åšåŠ¨æ€èµ„æºåˆ‡æ¢çš„å‚è€ƒ:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 // åˆ‡æ¢èµ„æºåˆ°æŒ‡å®šèµ„æºå­—å…¸ private void SwitchTo(ResourceDictionary colorModeResource) { // æ‹¿åˆ°æ—§çš„èµ„æº var oldColorModeResources = Application.Current.Resources.MergedDictionaries .Where(dict =\u0026gt; dict.Contains(\u0026#34;IsColorModeResource\u0026#34;)) .ToList(); // åˆ æ‰æ—§çš„èµ„æº foreach (var res in oldColorModeResources) Application.Current.Resources.MergedDictionaries.Remove(res); // æ·»åŠ æ–°çš„èµ„æº Application.Current.Resources.MergedDictionaries.Add(colorModeResource); } å›½é™…åŒ–ä¸é…è‰²åˆ‡æ¢ WPF ä¸­çš„ç•Œé¢å¯ä»¥ç»‘å®šåˆ°èµ„æº, è€Œèµ„æºåˆ‡æ¢åç•Œé¢ä¹Ÿä¼šè·Ÿç€æ›´æ–°, åˆ©ç”¨è¿™ä¸ªç‰¹ç‚¹, æˆ‘ä»¬å¯ä»¥å°†è¦æ˜¾ç¤ºçš„æ–‡æœ¬ç»‘å®šåˆ°æˆ‘ä»¬çš„è¯­è¨€èµ„æº, å°†ç•Œé¢ä¸­å‰æ™¯è‰², èƒŒæ™¯è‰²ç­‰å„ç§æ§ä»¶çš„é¢œè‰²ç»‘å®šåˆ°æˆ‘ä»¬çš„é…è‰²èµ„æº, ç„¶ååŠ¨æ€åˆ‡æ¢èµ„æº, å³å¯åšåˆ°å›½é™…åŒ–ä¸é…è‰²åˆ‡æ¢.\n1. ç¼–å†™å¤šä¸ªèµ„æºæ–‡ä»¶ åšå›½é™…åŒ–çš„æ—¶å€™, ä¸ºäº†é¿å…èµ„æºæ‰¾ä¸åˆ°çš„æƒ…å†µ, æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ª fallback çš„æƒ…å†µ. å› ä¸ºèµ„æºæ˜¯å¯è¦†ç›–çš„, æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹é€»è¾‘:\nå®šä¹‰ä¸€ä¸ª _base.xaml, åœ¨é‡Œé¢ç¼–å†™ä¸€äº›åŸºç¡€çš„èµ„æº, ä»¥åŠé»˜è®¤è¯­è¨€çš„ä¸€äº›æ–‡æœ¬. å®šä¹‰å…¶ä»–è¯­è¨€, ä¾‹å¦‚ zh-Hans.xaml, ç„¶ååœ¨ MergedDictionaries ä¸­æ·»åŠ  _base.xaml, è¿™æ ·, é›€é£Ÿçš„å†…å®¹ä¼š fallback åˆ° _base.xaml ä¸­çš„èµ„æº, è€Œé‡å¤çš„èµ„æºåˆ™ä¼šè¿›è¡Œè¦†ç›–. ä¸‹é¢æ˜¯æ¥è‡ª OpenGptChat çš„, å¯å‚è€ƒçš„ _base.xaml:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 \u0026lt;ResourceDictionary xmlns=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation\u0026#34; xmlns:x=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml\u0026#34; xmlns:s=\u0026#34;clr-namespace:System;assembly=mscorlib\u0026#34;\u0026gt; \u0026lt;!--é¡µé¢å--\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrChat\u0026#34;\u0026gt;Chat\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrConfiguration\u0026#34;\u0026gt;Configuration\u0026lt;/s:String\u0026gt; \u0026lt;!--é…ç½®å--\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrAPIKey\u0026#34;\u0026gt;API Key\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrAPIGPTModel\u0026#34;\u0026gt;API GPT Model\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrAPIHost\u0026#34;\u0026gt;API Host\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrAPITimeout\u0026#34;\u0026gt;API Timeout\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrTemperature\u0026#34;\u0026gt;Temperature\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrSystemMessages\u0026#34;\u0026gt;System messages\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrApply\u0026#34;\u0026gt;Apply\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrWindowAlwaysOnTop\u0026#34;\u0026gt;Window always on top\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrLanguage\u0026#34;\u0026gt;Language\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrColorMode\u0026#34;\u0026gt;Color mode\u0026lt;/s:String\u0026gt; \u0026lt;!--çƒ­é”®æè¿°--\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrHotkeyTips\u0026#34;\u0026gt;Hotkety Tips\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrCloseApplication\u0026#34;\u0026gt;Close application\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrHideApplication\u0026#34;\u0026gt;Hide application\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrShowApplication\u0026#34;\u0026gt;Show application\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrSendMessage\u0026#34;\u0026gt;Send message\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrGlobalHotkey\u0026#34;\u0026gt;Global hotkey\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrInputBox\u0026#34;\u0026gt;Input box\u0026lt;/s:String\u0026gt; \u0026lt;!--æŒ‰é’®--\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrSend\u0026#34;\u0026gt;Send\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrSave\u0026#34;\u0026gt;Save\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrNewSession\u0026#34;\u0026gt;New Session\u0026lt;/s:String\u0026gt; \u0026lt;!--å·¥å…·æç¤º--\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrAboutOpenGptChat\u0026#34;\u0026gt;About OpenGptChat\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrGoBackToMainPage\u0026#34;\u0026gt;Go back to Main page\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrResetChat\u0026#34;\u0026gt;Reset chat\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrGoToConfigurationPage\u0026#34;\u0026gt;Go to Configuration page\u0026lt;/s:String\u0026gt; \u0026lt;!--èœå•ç›¸å…³--\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrCopy\u0026#34;\u0026gt;Copy\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrEdit\u0026#34;\u0026gt;Edit\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrDelete\u0026#34;\u0026gt;Delete\u0026lt;/s:String\u0026gt; \u0026lt;!--æœ€åä½¿ç”¨ä¸€ä¸ª \u0026#39;IsLanguageResource\u0026#39; æ ‡è¯†å½“å‰èµ„æºå­—å…¸æ˜¯è¯­è¨€èµ„æº--\u0026gt; \u0026lt;s:Boolean x:Key=\u0026#34;IsLanguageResource\u0026#34;\u0026gt;True\u0026lt;/s:Boolean\u0026gt; \u0026lt;/ResourceDictionary\u0026gt; å¯ä»¥çœ‹åˆ°, ä¸Šé¢çš„å†…å®¹ä¸­, æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯è‹±æ–‡, æ‰€ä»¥å½“æˆ‘ä»¬ç¼–å†™ en.xaml çš„æ—¶å€™, åªéœ€è¦ç›´æ¥ fallback, è€Œä¸éœ€è¦é‡æ–°å†™å†…å®¹:\n1 2 3 4 5 6 7 8 9 10 \u0026lt;ResourceDictionary xmlns=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation\u0026#34; xmlns:x=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml\u0026#34; xmlns:s=\u0026#34;clr-namespace:System;assembly=mscorlib\u0026#34;\u0026gt; \u0026lt;ResourceDictionary.MergedDictionaries\u0026gt; \u0026lt;ResourceDictionary Source=\u0026#34;_base.xaml\u0026#34;/\u0026gt; \u0026lt;/ResourceDictionary.MergedDictionaries\u0026gt; \u0026lt;!--è‹±è¯­æ˜¯é»˜è®¤è¯­è¨€, ç›´æ¥ fallback è¿‡å»--\u0026gt; \u0026lt;/ResourceDictionary\u0026gt; ä½†æ˜¯, å¦‚æœæ˜¯ä¸­æ–‡çš„è¯, æˆ‘ä»¬å°±éœ€è¦è¿›è¡Œè¦†ç›–äº†:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 \u0026lt;ResourceDictionary xmlns=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation\u0026#34; xmlns:x=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml\u0026#34; xmlns:s=\u0026#34;clr-namespace:System;assembly=mscorlib\u0026#34;\u0026gt; \u0026lt;ResourceDictionary.MergedDictionaries\u0026gt; \u0026lt;ResourceDictionary Source=\u0026#34;_base.xaml\u0026#34;/\u0026gt; \u0026lt;/ResourceDictionary.MergedDictionaries\u0026gt; \u0026lt;!--é¡µé¢åç§°--\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrChat\u0026#34;\u0026gt;èŠå¤©\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrConfiguration\u0026#34;\u0026gt;é…ç½®\u0026lt;/s:String\u0026gt; \u0026lt;!--é…ç½®åç§°--\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrAPIKey\u0026#34;\u0026gt;API å¯†é’¥\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrAPIHost\u0026#34;\u0026gt;API ä¸»æœº\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrAPIGPTModel\u0026#34;\u0026gt;API GPT æ¨¡å‹\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrAPITimeout\u0026#34;\u0026gt;API è¶…æ—¶æ—¶é—´\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrTemperature\u0026#34;\u0026gt;æ¸©åº¦\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrSystemMessages\u0026#34;\u0026gt;ç³»ç»Ÿæ¶ˆæ¯\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrApply\u0026#34;\u0026gt;åº”ç”¨\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrWindowAlwaysOnTop\u0026#34;\u0026gt;çª—å£ç½®é¡¶\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrLanguage\u0026#34;\u0026gt;è¯­è¨€\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrColorMode\u0026#34;\u0026gt;è‰²å½©æ¨¡å¼\u0026lt;/s:String\u0026gt; \u0026lt;!--çƒ­é”®æè¿°--\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrHotkeyTips\u0026#34;\u0026gt;çƒ­é”®æç¤º\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrCloseApplication\u0026#34;\u0026gt;å…³é—­ç¨‹åº\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrHideApplication\u0026#34;\u0026gt;éšè—ç¨‹åº\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrShowApplication\u0026#34;\u0026gt;æ˜¾ç¤ºç¨‹åº\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrSendMessage\u0026#34;\u0026gt;å‘é€æ¶ˆæ¯\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrGlobalHotkey\u0026#34;\u0026gt;å…¨å±€çƒ­é”®\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrInputBox\u0026#34;\u0026gt;è¾“å…¥æ¡†\u0026lt;/s:String\u0026gt; \u0026lt;!--æŒ‰é’®--\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrSend\u0026#34;\u0026gt;å‘é€\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrSave\u0026#34;\u0026gt;ä¿å­˜\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrNewSession\u0026#34;\u0026gt;æ–°å»ºä¼šè¯\u0026lt;/s:String\u0026gt; \u0026lt;!--å·¥å…·æç¤º--\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrAboutOpenGptChat\u0026#34;\u0026gt;å…³äº OpenGptChat\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrGoBackToMainPage\u0026#34;\u0026gt;è¿”å›åˆ°ä¸»é¡µé¢\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrResetChat\u0026#34;\u0026gt;é‡ç½®èŠå¤©\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrGoToConfigurationPage\u0026#34;\u0026gt;è½¬åˆ°é…ç½®é¡µé¢\u0026lt;/s:String\u0026gt; \u0026lt;!--èœå•--\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrCopy\u0026#34;\u0026gt;å¤åˆ¶\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrEdit\u0026#34;\u0026gt;ç¼–è¾‘\u0026lt;/s:String\u0026gt; \u0026lt;s:String x:Key=\u0026#34;StrDelete\u0026#34;\u0026gt;åˆ é™¤\u0026lt;/s:String\u0026gt; \u0026lt;/ResourceDictionary\u0026gt; 2. ç¼–å†™èµ„æºåˆ‡æ¢çš„é€»è¾‘ æŒ‰ç…§æˆ‘ä»¬åˆšåˆšæ‰€è¯´çš„é€»è¾‘, åªéœ€è¦ç¨åŠ å®Œå–„, å³å¯å¾—åˆ°ä¸‹é¢ç”¨äºè¯­è¨€åˆ‡æ¢çš„ä»£ç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 public class LanguageService { private static string resourceUriPrefix = \u0026#34;pack://application:,,,/OpenGptChat.Common;component\u0026#34;; private static Dictionary\u0026lt;CultureInfo, ResourceDictionary\u0026gt; languageResources = new Dictionary\u0026lt;CultureInfo, ResourceDictionary\u0026gt;() { { new CultureInfo(\u0026#34;en\u0026#34;), new ResourceDictionary() { Source = new Uri($\u0026#34;{resourceUriPrefix}/Languages/en.xaml\u0026#34; ) } }, { new CultureInfo(\u0026#34;zh-hans\u0026#34;), new ResourceDictionary() { Source = new Uri($\u0026#34;{resourceUriPrefix}/Languages/zh-hans.xaml\u0026#34; ) } }, { new CultureInfo(\u0026#34;zh-hant\u0026#34;), new ResourceDictionary() { Source = new Uri($\u0026#34;{resourceUriPrefix}/Languages/zh-hant.xaml\u0026#34; ) } }, { new CultureInfo(\u0026#34;ja\u0026#34;), new ResourceDictionary() { Source = new Uri($\u0026#34;{resourceUriPrefix}/Languages/ja.xaml\u0026#34; ) } }, { new CultureInfo(\u0026#34;ar\u0026#34;), new ResourceDictionary() { Source = new Uri($\u0026#34;{resourceUriPrefix}/Languages/ar.xaml\u0026#34; ) } }, { new CultureInfo(\u0026#34;es\u0026#34;), new ResourceDictionary() { Source = new Uri($\u0026#34;{resourceUriPrefix}/Languages/es.xaml\u0026#34; ) } }, { new CultureInfo(\u0026#34;fr\u0026#34;), new ResourceDictionary() { Source = new Uri($\u0026#34;{resourceUriPrefix}/Languages/fr.xaml\u0026#34; ) } }, { new CultureInfo(\u0026#34;ru\u0026#34;), new ResourceDictionary() { Source = new Uri($\u0026#34;{resourceUriPrefix}/Languages/ru.xaml\u0026#34; ) } }, { new CultureInfo(\u0026#34;ur\u0026#34;), new ResourceDictionary() { Source = new Uri($\u0026#34;{resourceUriPrefix}/Languages/ur.xaml\u0026#34; ) } }, { new CultureInfo(\u0026#34;tr\u0026#34;), new ResourceDictionary() { Source = new Uri($\u0026#34;{resourceUriPrefix}/Languages/tr.xaml\u0026#34; ) } }, }; private static CultureInfo defaultLanguage = new CultureInfo(\u0026#34;en\u0026#34;); public LanguageService( ConfigurationService configurationService) { // å¦‚æœé…ç½®æ–‡ä»¶é‡Œé¢æœ‰æŒ‡å®šè¯­è¨€, åˆ™è®¾ç½®è¯­è¨€ CultureInfo language = CultureInfo.CurrentCulture; if (!string.IsNullOrWhiteSpace(configurationService.Configuration.Language)) language = new CultureInfo(configurationService.Configuration.Language); SetLanguage(language); } private CultureInfo currentLanguage = defaultLanguage; public IEnumerable\u0026lt;CultureInfo\u0026gt; Languages =\u0026gt; languageResources.Keys; public CultureInfo CurrentLanguage { get =\u0026gt; currentLanguage; set { if (!SetLanguage(value)) throw new ArgumentException(\u0026#34;Unsupport language\u0026#34;); } } public bool SetLanguage(CultureInfo language) { // æŸ¥æ‰¾ä¸€ä¸ªåˆé€‚çš„ key (å…ˆæŸ¥æ‰¾å®Œå…¨ç¬¦åˆçš„è¯­è¨€) CultureInfo? key = Languages .Where(key =\u0026gt; key.Equals(language)) .FirstOrDefault(); // å¦‚æœæ²¡æ‰¾åˆ°, å°±é™ä½è¦æ±‚, æ‰¾è¯­è¨€ç›¸åŒçš„è¯­è¨€ // ä¾‹å¦‚èµ„æºä¸­åªæœ‰ç¾å¼è‹±è¯­, ä½†æ˜¯éœ€è¦åˆ‡æ¢åˆ°è‹±å¼è‹±è¯­ // å› ä¸ºè¿™ä¿©æ˜¯åŒä¸€ä¸ªè¯­è¨€åªæ˜¯åœ°åŒºä¸åŒ, æ‰€ä»¥ä¹Ÿèƒ½åˆ‡æ¢è¿‡å» if (key == null) key = Languages .Where(key =\u0026gt; key.TwoLetterISOLanguageName == language.TwoLetterISOLanguageName) .FirstOrDefault(); if (key != null) { // å–èµ„æºå­—å…¸ ResourceDictionary? resourceDictionary = languageResources[key]; // å–æ—§çš„èµ„æº var oldLanguageResources = Application.Current.Resources.MergedDictionaries .Where(dict =\u0026gt; dict.Contains(\u0026#34;IsLanguageResource\u0026#34;)) .ToList(); //åˆ å»æ—§çš„å­—å…¸ foreach (var res in oldLanguageResources) Application.Current.Resources.MergedDictionaries.Remove(res); // æ·»åŠ æ–°çš„èµ„æº Application.Current.Resources.MergedDictionaries.Add(resourceDictionary); currentLanguage = key; return true; } return false; } } 3. åŸç†ç›¸åŒçš„é…è‰²åˆ‡æ¢ é…è‰²åˆ‡æ¢ä¹Ÿæ˜¯ä¸€æ ·çš„é€»è¾‘, ä¹Ÿä½¿ç”¨ä¸€ä¸ª Key æ¥æ ‡è¯†å½“å‰èµ„æºæ˜¯ \u0026ldquo;é…è‰²\u0026rdquo; èµ„æº, åˆ‡æ¢çš„æ—¶å€™ä¹Ÿæ˜¯å¦‚æ­¤, æ‹¿åˆ°æ—§çš„èµ„æº, åˆ æ‰å®ƒä»¬, ç„¶åæ·»åŠ æ–°çš„èµ„æº.\nç»“è¯­: è¿™äº›éƒ½æ˜¯æˆ‘åœ¨ç¼–å†™ OpenGptChat æ—¶æ€»ç»“å‡ºæ¥çš„ç”¨æ³•, æƒ³å­¦ä¹  WPF å»ºè®®å»çœ‹ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®.\n","date":"2023-04-03T13:36:18+08:00","permalink":"https://slimenull.com/p/20230403133618/","title":"[WPF] èµ„æº, é™æ€èµ„æº, åŠ¨æ€èµ„æºçš„ä½¿ç”¨åŠæ³¨æ„äº‹é¡¹. ä½¿ç”¨èµ„æºå­—å…¸è¿›è¡Œ â€œè¯­è¨€å›½é™…åŒ–â€œ ä¸ â€œé¢œè‰²æ¨¡å¼åˆ‡æ¢â€œ"},{"content":"å¤šé¡µé¢ç¨‹åºæ˜¯ä¸€ç§å¾ˆå¸¸è§çš„è®¾è®¡, ä¸€ä¸ªç¨‹åºä¸­æœ‰å¤šä¸ªé¡µé¢, ç„¶åç›´æ¥åˆ‡æ¢é¡µé¢è€Œä¸éœ€è¦åˆ›å»ºæ–°çš„çª—å£, WPF ä¸­ä½¿ç”¨ Frame æ¥åšé¡µé¢è·³è½¬, ä½†æ˜¯å¦‚ä½•ä¼˜é›…çš„è®¾è®¡ä¸€ä¸ªå¤šé¡µé¢ç¨‹åº, è¿™æ˜¯ä¸ªé—®é¢˜.\næœ€åŸºæœ¬çš„é¡µé¢è·³è½¬ ç¼–å†™ä¸€ä¸ªæœ€åŸºæœ¬çš„é¡µé¢è·³è½¬, é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨ä¸»çª—å£ä¸­æ”¾ä¸€ä¸ª Frame æ§ä»¶, ç„¶åå†ç¼–å†™ä¸¤ä¸ª Page. ä¸‹é¢æˆ‘ä»¬ä»¥ä¸¤ä¸ªé¡µé¢ MainPage å’Œ Configuration ä½œä¸ºç¤ºä¾‹è®²è§£.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 \u0026lt;!--çª—å£ UI--\u0026gt; \u0026lt;Window x:Class=\u0026#34;WpfNavigationTutorial.MainWindow\u0026#34; xmlns=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation\u0026#34; xmlns:x=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml\u0026#34; xmlns:d=\u0026#34;http://schemas.microsoft.com/expression/blend/2008\u0026#34; xmlns:mc=\u0026#34;http://schemas.openxmlformats.org/markup-compatibility/2006\u0026#34; xmlns:local=\u0026#34;clr-namespace:WpfNavigationTutorial\u0026#34; xmlns:pages=\u0026#34;clr-namespace:WpfTutorial.Views.Pages\u0026#34; mc:Ignorable=\u0026#34;d\u0026#34; Title=\u0026#34;MainWindow\u0026#34; Height=\u0026#34;450\u0026#34; Width=\u0026#34;800\u0026#34;\u0026gt; \u0026lt;Grid\u0026gt; \u0026lt;Grid.ColumnDefinitions\u0026gt; \u0026lt;ColumnDefinition Width=\u0026#34;3*\u0026#34;/\u0026gt; \u0026lt;ColumnDefinition Width=\u0026#34;13*\u0026#34;/\u0026gt; \u0026lt;/Grid.ColumnDefinitions\u0026gt; \u0026lt;ListBox Name=\u0026#34;navMenu\u0026#34; SelectionChanged=\u0026#34;ListBox_SelectionChanged\u0026#34;\u0026gt; \u0026lt;ListBoxItem Content=\u0026#34;Main\u0026#34; Tag=\u0026#34;{x:Type pages:MainPage}\u0026#34;/\u0026gt; \u0026lt;ListBoxItem Content=\u0026#34;Configuration\u0026#34; Tag=\u0026#34;{x:Type pages:ConfigurationPage}\u0026#34;/\u0026gt; \u0026lt;/ListBox\u0026gt; \u0026lt;Frame Grid.Column=\u0026#34;1\u0026#34; Name=\u0026#34;appFrame\u0026#34; NavigationUIVisibility=\u0026#34;Hidden\u0026#34;/\u0026gt; \u0026lt;/Grid\u0026gt; \u0026lt;/Window\u0026gt; åœ¨ä¸Šé¢çš„ä»£ç ä¸­, æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå·¦å³ä¸¤æ å¸ƒå±€, å·¦ä¾§æ”¾äº†ä¸€ä¸ª ListBox, å³ä¾§æ”¾äº†ä¸€ä¸ª Frame, åœ¨ ListBox ä¸­, æˆ‘ä»¬æ”¾äº†ä¸¤ä¸ª ListBoxItem, ä½¿ç”¨ Content åšå†…å®¹, å¹¶ä¸”ç»™åŠ äº† Tag æ ‡è¯†è¿™ä¸ªæŒ‰é’®å…·ä½“è¦è·³è½¬åˆ°å“ªä¸ªé¡µé¢.\nç„¶ååœ¨ä¸¤ä¸ªé¡µé¢ä¸­åˆ†åˆ«è¿™ä¹ˆç®€å•å†™ä¸€ä¸‹å†…å®¹:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 \u0026lt;!--è¿™é‡Œæ˜¯ä¸»é¡µé¢--\u0026gt; \u0026lt;Page x:Class=\u0026#34;WpfTutorial.Views.Pages.MainPage\u0026#34; xmlns=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation\u0026#34; xmlns:x=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml\u0026#34; xmlns:mc=\u0026#34;http://schemas.openxmlformats.org/markup-compatibility/2006\u0026#34; xmlns:d=\u0026#34;http://schemas.microsoft.com/expression/blend/2008\u0026#34; xmlns:local=\u0026#34;clr-namespace:WpfTutorial.Views.Pages\u0026#34; mc:Ignorable=\u0026#34;d\u0026#34; d:DesignHeight=\u0026#34;450\u0026#34; d:DesignWidth=\u0026#34;800\u0026#34; Title=\u0026#34;MainPage\u0026#34;\u0026gt; \u0026lt;Grid\u0026gt; \u0026lt;Grid MaxWidth=\u0026#34;400\u0026#34; Margin=\u0026#34;20\u0026#34;\u0026gt; \u0026lt;StackPanel HorizontalAlignment=\u0026#34;Stretch\u0026#34;\u0026gt; \u0026lt;TextBlock\u0026gt;This is main page\u0026lt;/TextBlock\u0026gt; \u0026lt;/StackPanel\u0026gt; \u0026lt;/Grid\u0026gt; \u0026lt;/Grid\u0026gt; \u0026lt;/Page\u0026gt; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 \u0026lt;!--è¿™é‡Œæ˜¯é‡Œä¸€ä¸ªé¡µé¢é¡µé¢ (é…ç½®é¡µé¢)--\u0026gt; \u0026lt;Page x:Class=\u0026#34;WpfTutorial.Views.Pages.ConfigurationPage\u0026#34; xmlns=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation\u0026#34; xmlns:x=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml\u0026#34; xmlns:mc=\u0026#34;http://schemas.openxmlformats.org/markup-compatibility/2006\u0026#34; xmlns:d=\u0026#34;http://schemas.microsoft.com/expression/blend/2008\u0026#34; xmlns:local=\u0026#34;clr-namespace:WpfTutorial.Views.Pages\u0026#34; mc:Ignorable=\u0026#34;d\u0026#34; d:DesignHeight=\u0026#34;450\u0026#34; d:DesignWidth=\u0026#34;800\u0026#34; Title=\u0026#34;ConfigurationPage\u0026#34;\u0026gt; \u0026lt;Grid\u0026gt; \u0026lt;Grid MaxWidth=\u0026#34;400\u0026#34; Margin=\u0026#34;20\u0026#34;\u0026gt; \u0026lt;StackPanel HorizontalAlignment=\u0026#34;Stretch\u0026#34;\u0026gt; \u0026lt;TextBlock\u0026gt;This is configuration page\u0026lt;/TextBlock\u0026gt; \u0026lt;/StackPanel\u0026gt; \u0026lt;/Grid\u0026gt; \u0026lt;/Grid\u0026gt; \u0026lt;/Page\u0026gt; åœ¨åå°ä»£ç ä¸­, æˆ‘ä»¬è¿™ä¹ˆå†™, å½“é€‰æ‹©é¡¹å˜æ›´çš„æ—¶å€™, ä¹Ÿä½¿ç”¨ Frame è¿›è¡Œé¡µé¢è·³è½¬.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 public partial class MainWindow : Window { public MainWindow() { InitializeComponent(); } // é¡µé¢å®ä¾‹çš„ç¼“å­˜ private static readonly Dictionary\u0026lt;Type, Page\u0026gt; bufferedPages = new Dictionary\u0026lt;Type, Page\u0026gt;(); // å½“ private void ListBox_SelectionChanged(object sender, SelectionChangedEventArgs e) { // å¦‚æœé€‰æ‹©é¡¹ä¸æ˜¯ ListBoxItem, åˆ™è¿”å› if (navMenu.SelectedItem is not ListBoxItem item) return; // å¦‚æœ Tag ä¸æ˜¯ä¸€ä¸ªç±»å‹, åˆ™è¿”å› if (item.Tag is not Type type) return; // å¦‚æœé¡µé¢ç¼“å­˜ä¸­æ‰¾ä¸åˆ°é¡µé¢, åˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„é¡µé¢å¹¶å­˜å…¥ if (!bufferedPages.TryGetValue(type, out Page? page)) page = bufferedPages[type] = Activator.CreateInstance(type) as Page ?? throw new Exception(\u0026#34;this would never happen\u0026#34;); // ä½¿ç”¨ Frame è¿›è¡Œå¯¼èˆª. appFrame.Navigate(page); } } æœ€åçš„æ•ˆæœå°±æ˜¯è¿™æ ·, ç‚¹å‡»å·¦ä¾§é¡¹ç›®çš„æ—¶å€™, å³ä¾§é¡µé¢ä¼šç›´æ¥è¿›è¡Œè·³è½¬:\nåŠ ä¸€ç‚¹ç¾åŒ– ç”¨ ListBox åšä¾§è¾¹é¡µé¢æ å°±å¤ªä¸‘äº†, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ListBox è‡ªå·±ç»™å®ƒå¥—ä¸€ä¸ªæ ·å¼.\nè¿™é‡Œä¸ä½¿ç”¨ ItemsControl æ˜¯å› ä¸º, ListBox çš„é¡¹ç›®æ˜¯ \u0026ldquo;å¯é€‰ä¸­\u0026rdquo; çš„, è€Œ ItemsControl æ˜¯æ²¡æœ‰çš„, ItemsControl åªé€‚åˆç•Œé¢æ§ä»¶çš„æ‰¹é‡ç»‘å®šç”Ÿæˆ.\nåˆ›å»ºä¸€ä¸ª NavigationItem ç”¨æ¥å­˜æ”¾å¯¼èˆªæ•°æ®:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 public class NavigationItem { /// \u0026lt;summary\u0026gt; /// å¯¼èˆªæ ‡é¢˜ /// \u0026lt;/summary\u0026gt; public string Title { get; set; } = string.Empty; /// \u0026lt;summary\u0026gt; /// å¯¼èˆªæè¿° /// \u0026lt;/summary\u0026gt; public string Description { get; set; } = string.Empty; /// \u0026lt;summary\u0026gt; /// ç›®æ ‡é¡µé¢çš„ç±»å‹ /// \u0026lt;/summary\u0026gt; public Type TargetPageType { get; set; } = typeof(Page); } ä¸º MainWindow åˆ›å»ºä¸€ä¸ª MainWindowModel ç”¨æ¥å­˜æ”¾é¡µé¢æ•°æ®:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 public class MainWndowModel { public ObservableCollection\u0026lt;NavigationItem\u0026gt; NavigationItems { get; } = new ObservableCollection\u0026lt;NavigationItem\u0026gt;() { new NavigationItem() { Title = \u0026#34;Main\u0026#34;, Description = \u0026#34;The main page of this application\u0026#34;, TargetPageType = typeof(MainPage) }, new NavigationItem() { Title = \u0026#34;Configuration\u0026#34;, Description = \u0026#34;Configure something you want\u0026#34;, TargetPageType = typeof(ConfigurationPage) } }; } ç„¶åå°†ä¸»é¡µé¢çš„ä»£ç æ”¹æˆè¿™æ ·:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 \u0026lt;Window x:Class=\u0026#34;WpfNavigationTutorial.MainWindow\u0026#34; xmlns=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation\u0026#34; xmlns:x=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml\u0026#34; xmlns:d=\u0026#34;http://schemas.microsoft.com/expression/blend/2008\u0026#34; xmlns:mc=\u0026#34;http://schemas.openxmlformats.org/markup-compatibility/2006\u0026#34; xmlns:local=\u0026#34;clr-namespace:WpfNavigationTutorial\u0026#34; xmlns:pages=\u0026#34;clr-namespace:WpfTutorial.Views.Pages\u0026#34; xmlns:vm=\u0026#34;clr-namespace:WpfNavigationTutorial.ViewModels\u0026#34; mc:Ignorable=\u0026#34;d\u0026#34; Title=\u0026#34;MainWindow\u0026#34; Height=\u0026#34;450\u0026#34; Width=\u0026#34;800\u0026#34;\u0026gt; \u0026lt;Window.DataContext\u0026gt; \u0026lt;!--ç›´æ¥åœ¨ XAML ä¸­ç»™ Window çš„ DataContext èµ‹å€¼--\u0026gt; \u0026lt;vm:MainWndowModel/\u0026gt; \u0026lt;/Window.DataContext\u0026gt; \u0026lt;Grid\u0026gt; \u0026lt;Grid.ColumnDefinitions\u0026gt; \u0026lt;ColumnDefinition Width=\u0026#34;3*\u0026#34;/\u0026gt; \u0026lt;ColumnDefinition Width=\u0026#34;13*\u0026#34;/\u0026gt; \u0026lt;/Grid.ColumnDefinitions\u0026gt; \u0026lt;!--ä½¿ç”¨ ListBox, å¹¶ä¸”å°† ItemsSource ç»‘å®šåˆ°æˆ‘ä»¬çš„æ•°æ®--\u0026gt; \u0026lt;!--è®°å¾—è¦ä½¿ç”¨ç¦ç”¨å®ƒçš„æ°´å¹³æ»šåŠ¨æ¡--\u0026gt; \u0026lt;ListBox Name=\u0026#34;navMenu\u0026#34; ItemsSource=\u0026#34;{Binding NavigationItems}\u0026#34; BorderThickness=\u0026#34;0 0 1 0\u0026#34; ScrollViewer.HorizontalScrollBarVisibility=\u0026#34;Disabled\u0026#34; SelectionChanged=\u0026#34;navMenu_SelectionChanged\u0026#34;\u0026gt; \u0026lt;ListBox.ItemTemplate\u0026gt; \u0026lt;DataTemplate\u0026gt; \u0026lt;Border Padding=\u0026#34;5\u0026#34;\u0026gt; \u0026lt;StackPanel\u0026gt; \u0026lt;TextBlock Text=\u0026#34;{Binding Title}\u0026#34;/\u0026gt; \u0026lt;!--æè¿°ä¿¡æ¯ç”¨ç°è‰²å­—ä½“, å­—å·ä¹Ÿå°ä¸€ç‚¹, å¤šä½™çš„éƒ¨åˆ†å‰ªåˆ‡æ‰--\u0026gt; \u0026lt;TextBlock Text=\u0026#34;{Binding Description}\u0026#34; Foreground=\u0026#34;Gray\u0026#34; FontSize=\u0026#34;10\u0026#34; TextTrimming=\u0026#34;CharacterEllipsis\u0026#34;/\u0026gt; \u0026lt;/StackPanel\u0026gt; \u0026lt;/Border\u0026gt; \u0026lt;/DataTemplate\u0026gt; \u0026lt;/ListBox.ItemTemplate\u0026gt; \u0026lt;/ListBox\u0026gt; \u0026lt;Frame Grid.Column=\u0026#34;1\u0026#34; Name=\u0026#34;appFrame\u0026#34; NavigationUIVisibility=\u0026#34;Hidden\u0026#34;/\u0026gt; \u0026lt;/Grid\u0026gt; \u0026lt;/Window\u0026gt; åå°ä»£ç ä¹Ÿç›¸åº”çš„æ”¹ä¸€ä¸‹, åªéœ€è¦åˆ¤æ–­æ•°æ®æ˜¯å¦æ˜¯ NavigationItem å°±å¥½:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 public partial class MainWindow : Window { public MainWindow() { InitializeComponent(); } private static readonly Dictionary\u0026lt;Type, Page\u0026gt; bufferedPages = new Dictionary\u0026lt;Type, Page\u0026gt;(); private void navMenu_SelectionChanged(object sender, SelectionChangedEventArgs e) { // å¦‚æœé€‰æ‹©é¡¹ä¸æ˜¯ FrameworkElement, åˆ™è¿”å› if (navMenu.SelectedItem is not NavigationItem item) return; Type type = item.TargetPageType; // å¦‚æœé¡µé¢ç¼“å­˜ä¸­æ‰¾ä¸åˆ°é¡µé¢, åˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„é¡µé¢å¹¶å­˜å…¥ if (!bufferedPages.TryGetValue(type, out Page? page)) page = bufferedPages[type] = Activator.CreateInstance(type) as Page ?? throw new Exception(\u0026#34;this would never happen\u0026#34;); appFrame.Navigate(page); } } æœ€åçš„æ•ˆæœ:\nå½“ç„¶, è¿™æ ·çš„æ•ˆæœè¿˜æ˜¯å¾ˆç®€å•, ä¸è¿‡, æ›´å¤æ‚çš„è®¾è®¡, å°±ä»»ç”±ä½ è‡ªå·±å‘æŒ¥å•¦. ä¾‹å¦‚æ”¹æ‰ ListBox å…ƒç´ è¢«é€‰ä¸­æ—¶çš„ä¸‘é™‹é¢œè‰², ä»¥åŠå»æ‰èšé›†ç„¦ç‚¹æ—¶çš„è™šçº¿, æˆ–è€…åŠ ä¸€äº›åŠ¨ç”», éƒ½å¯ä»¥.\n","date":"2023-04-01T21:00:13+08:00","permalink":"https://slimenull.com/p/20230401210013/","title":"[WPF] å¤šé¡µé¢ç¨‹åºåŸºæœ¬è·³è½¬"},{"content":"åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºé‡Œé¢, å¾ˆå¤šæ—¶å€™ä¼šç”¨åˆ°åˆ—è¡¨, è€Œåˆ—è¡¨å…ƒç´ çš„æ ·å¼, æˆ‘ä»¬æ˜¯å¸Œæœ›èƒ½å¤Ÿè‡ªå®šä¹‰çš„, æ ¹æ® MVVM è®¾è®¡æ¨¡å¼, æˆ‘ä»¬çš„åˆ—è¡¨å…ƒç´ , ä¹Ÿéœ€è¦ç»‘å®šåˆ°åå°æ•°æ®, è¿™æ ·åå°æ•°æ®è¿›è¡Œæ›´æ–°çš„æ—¶å€™, å‰å° UI ä¹Ÿä¼šè·Ÿç€æ›´æ–°, åŒ…æ‹¬å…ƒç´ ä¹Ÿä¼šè‡ªåŠ¨å¢åˆ .\nä½¿ç”¨ ItemsControl ItemsControl æ˜¯æœ€åŸºæœ¬çš„ \u0026ldquo;å¤šå…ƒç´ \u0026rdquo; æ§ä»¶, åƒæ˜¯ ListBox, ListView ä»–éƒ½æ˜¯åŸºäº ItemsControl çš„, å› ä¸º ListBox å’Œ ListView å®ƒä»¬æœ‰ä¸€äº›é»˜è®¤æ ·å¼. ä¾‹å¦‚ ListBox å®ƒæœ‰ä¸€ä¸ªæ»šåŠ¨æ¡, æ‰€ä»¥å½“æˆ‘ä»¬è‡ªå®šä¹‰çš„æ—¶å€™, è¿˜æ˜¯æ¨èä½¿ç”¨ ItemsControl.\né¦–å…ˆç¼–å†™ä¸€ä¸ªç®€å•çš„æ•°æ®æ¨¡å‹:\n1 2 3 4 5 6 7 8 9 10 public class StudentInfo { public string Name { get; set; } public string Description { get; set; } public int Age { get; set; } public string Gender { get; set; } public int Grade { get; set; } } å†å†™ä¸€ä¸ªç”¨äºç»‘å®šæ•°æ®çš„ ViewModel:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 public class MainWindowModel { public ObservableCollection\u0026lt;StudentInfo\u0026gt; StudentInfos { get; } = new ObservableCollection\u0026lt;StudentInfo\u0026gt;() { new StudentInfo() { Name = \u0026#34;IFdream\u0026#34;, Description = \u0026#34;ä¸Šè¯¾ä¸å¬è®²çš„å­¦ç”Ÿ\u0026#34;, Age = 17, Gender = \u0026#34;Female\u0026#34;, Grade = 114514 }, new StudentInfo() { Name = \u0026#34;ilyFairy\u0026#34;, Description = \u0026#34;å“¼å“¼å“¼å•Šå•Šå•Šçš„å­¦ç”Ÿ\u0026#34;, Age = 21, Gender = \u0026#34;æ­¦è£…ç›´å‡æœº\u0026#34;, Grade = 1919810 } }; } ç„¶ååœ¨çª—å£ä¸­éšä¾¿å†™ä¸€ä¸ªç®€å•çš„ç•Œé¢:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 \u0026lt;Window x:Class=\u0026#34;WpfItemsBindingTutorial.MainWindow\u0026#34; xmlns=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation\u0026#34; xmlns:x=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml\u0026#34; xmlns:d=\u0026#34;http://schemas.microsoft.com/expression/blend/2008\u0026#34; xmlns:mc=\u0026#34;http://schemas.openxmlformats.org/markup-compatibility/2006\u0026#34; xmlns:vm=\u0026#34;clr-namespace:WpfItemsBindingTutorial.ViewModels\u0026#34; xmlns:local=\u0026#34;clr-namespace:WpfItemsBindingTutorial\u0026#34; mc:Ignorable=\u0026#34;d\u0026#34; Title=\u0026#34;MainWindow\u0026#34; Height=\u0026#34;450\u0026#34; Width=\u0026#34;800\u0026#34;\u0026gt; \u0026lt;Window.DataContext\u0026gt; \u0026lt;!--ç›´æ¥ç»™çª—ä½“çš„ DataContext èµ‹å€¼--\u0026gt; \u0026lt;vm:MainWindowModel/\u0026gt; \u0026lt;/Window.DataContext\u0026gt; \u0026lt;Grid\u0026gt; \u0026lt;Grid Margin=\u0026#34;20\u0026#34; MaxWidth=\u0026#34;400\u0026#34;\u0026gt; \u0026lt;StackPanel\u0026gt; \u0026lt;!--ä½¿ç”¨ ItemsControl è¿›è¡Œé›†åˆçš„æ•°æ®ç»‘å®š, åœ¨ ItemsSource é‡Œé¢æŒ‡å®šæˆ‘ä»¬çš„é›†åˆ--\u0026gt; \u0026lt;ItemsControl ItemsSource=\u0026#34;{Binding StudentInfos}\u0026#34;\u0026gt; \u0026lt;ItemsControl.ItemTemplate\u0026gt; \u0026lt;!--ä½¿ç”¨æ•°æ®æ¨¡æ¿å°±å¯ä»¥ä¸ºæ¯ä¸€ä¸ªå…ƒç´ è‡ªå®šä¹‰å‘ˆç°æ–¹å¼äº†--\u0026gt; \u0026lt;DataTemplate\u0026gt; \u0026lt;!--æ•´ä¸€ä¸ªè¾¹æ¡†, åŠ èƒŒæ™¯é¢œè‰², åœ†è§’, ä»¥åŠå†…å¤–è¾¹è·--\u0026gt; \u0026lt;Border Margin=\u0026#34;0 10 0 0\u0026#34; Padding=\u0026#34;5\u0026#34; Background=\u0026#34;#eeeeee\u0026#34; CornerRadius=\u0026#34;5\u0026#34;\u0026gt; \u0026lt;!--ç”¨ Effect åŠ ä¸ªé˜´å½±--\u0026gt; \u0026lt;Border.Effect\u0026gt; \u0026lt;DropShadowEffect ShadowDepth=\u0026#34;0\u0026#34; BlurRadius=\u0026#34;3\u0026#34;/\u0026gt; \u0026lt;/Border.Effect\u0026gt; \u0026lt;!--è¿™é‡Œç”¨æ ˆå¸ƒå±€æ¥åšä¸»è¦å†…å®¹--\u0026gt; \u0026lt;StackPanel\u0026gt; \u0026lt;!--åœ¨æ•°æ®æ¨¡æ¿ä¸­, å¯ä»¥ç›´æ¥ç»‘å®šåˆ°æˆ‘ä»¬çš„æ•°æ®æˆå‘˜--\u0026gt; \u0026lt;TextBlock\u0026gt; \u0026lt;Run Text=\u0026#34;Name:\u0026#34;/\u0026gt; \u0026lt;Run Text=\u0026#34;{Binding Name}\u0026#34;/\u0026gt; \u0026lt;/TextBlock\u0026gt; \u0026lt;TextBlock\u0026gt; \u0026lt;Run Text=\u0026#34;Description:\u0026#34;/\u0026gt; \u0026lt;Run Text=\u0026#34;{Binding Description}\u0026#34;/\u0026gt; \u0026lt;/TextBlock\u0026gt; \u0026lt;!--ç”¨ UniformGrid åšä¸ªä¸‰æ å¸ƒå±€--\u0026gt; \u0026lt;UniformGrid Columns=\u0026#34;3\u0026#34;\u0026gt; \u0026lt;TextBlock\u0026gt; \u0026lt;Run Text=\u0026#34;Age:\u0026#34;/\u0026gt; \u0026lt;Run Text=\u0026#34;{Binding Age}\u0026#34;/\u0026gt; \u0026lt;/TextBlock\u0026gt; \u0026lt;TextBlock\u0026gt; \u0026lt;Run Text=\u0026#34;Gender:\u0026#34;/\u0026gt; \u0026lt;Run Text=\u0026#34;{Binding Gender}\u0026#34;/\u0026gt; \u0026lt;/TextBlock\u0026gt; \u0026lt;TextBlock\u0026gt; \u0026lt;Run Text=\u0026#34;Grade:\u0026#34;/\u0026gt; \u0026lt;Run Text=\u0026#34;{Binding Grade}\u0026#34;/\u0026gt; \u0026lt;/TextBlock\u0026gt; \u0026lt;/UniformGrid\u0026gt; \u0026lt;/StackPanel\u0026gt; \u0026lt;/Border\u0026gt; \u0026lt;/DataTemplate\u0026gt; \u0026lt;/ItemsControl.ItemTemplate\u0026gt; \u0026lt;/ItemsControl\u0026gt; \u0026lt;/StackPanel\u0026gt; \u0026lt;/Grid\u0026gt; \u0026lt;/Grid\u0026gt; \u0026lt;/Window\u0026gt; äºæ˜¯æˆ‘ä»¬å°±å¾—åˆ°äº†è¿™æ ·çš„ä¸€ä¸ªé¡µé¢:\nä½¿ç”¨ ListBox äº‹å®ä¸Š, ListBox çš„ä½¿ç”¨å’Œ ItemsControl æ˜¯å·®ä¸å¤šçš„, åŒ…æ‹¬åŒæ ·çš„æ–¹å¼ç»‘å®š ItemsSource, åŒæ ·çš„æ–¹å¼è®¾ç½® ItemTemplate, åªä¸è¿‡ ListBox éœ€è¦ç”¨æˆ·æ³¨æ„è¿™äº›å†…å®¹:\nListBox çš„å…ƒç´ æ˜¯å¯é€‰ä¸­çš„, å¦‚æœä½ ä¸å¸Œæœ›å…ƒç´ å¯è¢«é€‰ä¸­, é‚£ä¹ˆä½¿ç”¨ ItemsControl ListBox æ˜¯è‡ªå¸¦æ»šåŠ¨æ¡çš„, å¦‚æœä½ å¸Œæœ›è‡ªå·±æ§åˆ¶æ»šåŠ¨æ¡, ä½ å¯ä»¥ä½¿ç”¨ ScrollViewer.XXX é™„åŠ å±æ€§æ¥å¯¹å®ƒæ“ä½œ ListBox çš„å…ƒç´ æ˜¯é€‰ä¸­çš„, è¿™å°±æ„å‘³ç€, è¿™ä¸ªä¸œè¥¿åªé€‚åˆä¸€äº›æ•°æ®çš„ \u0026ldquo;é€‰æ‹©\u0026rdquo;, ä¾‹å¦‚æˆ‘è¦å¡«ä¸€ä¸ªè¡¨å•, ç„¶åç»™ç”¨æˆ·é€‰æ‹©ä¸€ä¸ªæ•°æ®. å¦‚æœæˆ‘è¦åšä¸€ä¸ªèŠå¤©çª—å£, èŠå¤©çª—å£é‡Œé¢çš„èŠå¤©æ¶ˆæ¯, æ˜¾ç„¶æ˜¯ä¸€ä¸ª \u0026ldquo;å®¹å™¨\u0026rdquo;, ç„¶åæ¯ä¸€ä¸ªæ¶ˆæ¯æ°”æ³¡, éƒ½æ˜¯ä¸€ä¸ªå…ƒç´ , è¿™ä¸ªå®Œå…¨å¯ä»¥ç”±ç»‘å®šè§£å†³, è€Œä½¿ç”¨ ListBox ä¼šä½¿æ¶ˆæ¯å¯é€‰ä¸­, è¿™ä¸å¥½, æˆ‘åªæ˜¯æƒ³è®©ä»–è‡ªåŠ¨ç”Ÿæˆæ§ä»¶, æ‰€ä»¥ä½¿ç”¨ ItemsControl.\nä¸è¿‡, å¦‚æœä½ è¦ç”¨ ListBox åšä¸€ä¸ª \u0026ldquo;å¯¼èˆªæ \u0026rdquo; çš„è¯, ç¡®å®æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©, å› ä¸ºå¯ä»¥ç›´æ¥è®¢é˜… SelectionChanged, å¹¶åœ¨äº‹ä»¶ä¸­å¤„ç†é¡µé¢è·³è½¬çš„é€»è¾‘.\n","date":"2023-04-01T16:53:16+08:00","permalink":"https://slimenull.com/p/20230401165316/","title":"[WPF] é›†åˆå…ƒç´ æ•°æ®ç»‘å®šä¸æ¨¡æ¿"},{"content":"å¦‚æœä½ åœ¨ä½¿ç”¨ä¸€ä¸ªæ§åˆ¶å°ç¨‹åº, å¹¶ä¸”è¿˜å¸Œæœ›å¤„ç†ä¸€äº›å…¨å±€å¿«æ·é”®, é‚£ä¹ˆè¿™ä¸ªæ–¹æ³•æ˜¯åˆé€‚çš„.\nè¿™é‡Œè¯´çš„ä¸åˆ›å»ºçª—å£æŒ‡çš„æ˜¯ä¸åˆ›å»ºå¯è§çš„çª—å£\nä½¿ç”¨ MessageOnly çª—å£ Windows ä¸­å­˜åœ¨ä¸€ä¸ªç‰¹æ®Šçš„çª—ä½“å¥æŸ„ HWND_MESSAGE, å®ƒçš„å€¼æ˜¯ -3, å½“ä¸€ä¸ªçª—å£çš„çˆ¶çª—å£æ˜¯å®ƒçš„æ—¶å€™, è¿™ä¸ªçª—å£ä¼šæˆä¸º \u0026ldquo;ä»…æ¶ˆæ¯çª—å£\u0026rdquo;\nä½¿ç”¨ä»…æ¶ˆæ¯çª—å£å¯ä»¥å‘é€å’Œæ¥æ”¶æ¶ˆæ¯ã€‚ å®ƒä¸å¯è§ã€æ²¡æœ‰ z é¡ºåºã€æ— æ³•æšä¸¾ä¸”ä¸æ¥æ”¶å¹¿æ’­æ¶ˆæ¯ã€‚ è¯¥çª—å£åªæ˜¯è°ƒåº¦æ¶ˆæ¯ã€‚\nè‹¥è¦åˆ›å»ºä»…æ¶ˆæ¯çª—å£ï¼Œè¯·åœ¨ CreateWindowEx å‡½æ•°çš„ hWndParent å‚æ•°ä¸­æŒ‡å®šHWND_MESSAGEå¸¸é‡æˆ–ç°æœ‰ä»…æ¶ˆæ¯çª—å£çš„å¥æŸ„ã€‚ è¿˜å¯ä»¥é€šè¿‡åœ¨ SetParent å‡½æ•°çš„ hWndNewParent å‚æ•°ä¸­æŒ‡å®šHWND_MESSAGEï¼Œå°†ç°æœ‰çª—å£æ›´æ”¹ä¸ºä»…æ¶ˆæ¯çª—å£ã€‚\nå‚è€ƒ: çª—å£åŠŸèƒ½:ä»…æ¶ˆæ¯çª—å£ -Win32 apps | Microsoft Learn\nWPF çš„ä½¿ç”¨ç¤ºä¾‹: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 // çª—å£åˆ›å»ºçš„å‚æ•° HwndSourceParameters hwndSourceParameters = new HwndSourceParameters() { HwndSourceHook = Hook, ParentWindow = (IntPtr)(-3), // a magic window handle }; // åˆ›å»ºçª—å£ hwndSource = new HwndSource(hwndSourceParameters); // Hook æ¶ˆæ¯æ–¹æ³•å®šä¹‰ IntPtr Hook(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled) { // è¿™é‡Œå¤„ç†æ¶ˆæ¯ } ","date":"2023-03-28T07:56:24+08:00","permalink":"https://slimenull.com/p/20230328075624/","title":"[Win32] åœ¨ä¸åˆ›å»ºçª—å£çš„æƒ…å†µä¸‹æ¥æ”¶å¤„ç†æ¶ˆæ¯."},{"content":"ç›®å‰çš„çº¯ CSS å¸ƒå±€, æ˜¯æ²¡åŠæ³•å®ç°æ¯”è¾ƒå®Œç¾çš„ç€‘å¸ƒæµå¸ƒå±€çš„.\nå‚è€ƒ: CSSæ€»ç»“:ç€‘å¸ƒæµå¸ƒå±€ - é»‘ç™½ç¨‹åºå‘˜ æˆ‘ä½¿ç”¨ JS + CSS, å¹¶ä¸”è‡ªåŠ¨å¸ƒå±€å®ç°äº†è¾ƒä¸ºç®€å•, è§‚èµæ€§å¥½çš„ç€‘å¸ƒæµå¸ƒå±€.\nä»£ç  HTML:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;css/style.css\u0026#34;\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;button onclick=\u0026#34;add_new()\u0026#34;\u0026gt;add\u0026lt;/button\u0026gt; \u0026lt;button onclick=\u0026#34;start_loop()\u0026#34;\u0026gt;start loop\u0026lt;/button\u0026gt; \u0026lt;button onclick=\u0026#34;stop_loop()\u0026#34;\u0026gt;stop loop\u0026lt;/button\u0026gt; \u0026lt;!--ç€‘å¸ƒæµå®¹å™¨--\u0026gt; \u0026lt;div id=\u0026#34;masonry\u0026#34;\u0026gt; \u0026lt;!--ç€‘å¸ƒæµåˆ—--\u0026gt; \u0026lt;div class=\u0026#34;masonry-column-container\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;masonry-column\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;masonry-column-container\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;masonry-column\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;masonry-column-container\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;masonry-column\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;masonry-column-container\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;masonry-column\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;masonry-column-container\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;masonry-column\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;masonry-column-container\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;masonry-column\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;masonry-column-container\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;masonry-column\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;script\u0026gt; // åŒ…è£…ä¸€ä¸ªç®€å•çš„éšæœºæ•° function random(start, end) { return Math.random() * (end - start) + start; } // åœ¨ç€‘å¸ƒæµä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´  function add_new() { let masonry = document.getElementById(\u0026#34;masonry\u0026#34;); let columns = masonry.querySelectorAll(\u0026#34;.masonry-column\u0026#34;); let minHeightColumn = columns[0]; // æ‹¿åˆ°é«˜åº¦æœ€ä½çš„åˆ— columns.forEach(ele =\u0026gt; { if (ele.scrollHeight \u0026lt; minHeightColumn.scrollHeight) { minHeightColumn = ele; } }); // åˆ›å»ºä¸€ä¸ªæ–°å…ƒç´  (è®¾ç½®é«˜åº¦, èƒŒæ™¯é¢œè‰²) let new_item = document.createElement(\u0026#39;div\u0026#39;); new_item.classList.add(\u0026#39;item\u0026#39;); new_item.style.height = `${Math.random() * 200 + 70}px`; new_item.style.backgroundColor = `rgb(${random(0, 255)},${random(0, 255)},${random(0, 255)})` // åœ¨é«˜åº¦æœ€ä½çš„åˆ—ä¸­æ·»åŠ å…ƒç´  minHeightColumn.appendChild(new_item); } var masonry_loop; function start_loop() { masonry_loop = setInterval(add_new, 50); } function stop_loop() { clearInterval(masonry_loop); } \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; CSS:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 /* ç€‘å¸ƒæµå®¹å™¨ */ #masonry { margin: 0 auto; width: 80vw; /* å±…ä¸­ */ display: grid; /* ç½‘æ ¼å¸ƒå±€ */ grid-template-columns: repeat(7, 1fr); /* æ€»å…± 7 åˆ— */ gap: 10px; /* é—´è· 10px */ } /* æŒ‡å®šåˆ—æ˜¯ç›¸å¯¹ä½ç½® (å…¶ä¸­çš„å…ƒç´ å¯ä»¥ç›¸å¯¹åˆ—æ¥å®šä½) */ #masonry .masonry-column { position: relative; } /* é™åˆ¶å†…å®¹çš„å®½åº¦å æ»¡åˆ—, åŠ ä¸Šè¾¹è·, åœ†è§’ */ #masonry .item { width: 100%; margin-top: 10px; border-radius: 1em; } åœ¨ CodePen ä¸ŠæŸ¥çœ‹: Simple Masonry\n","date":"2023-02-14T09:45:47+08:00","permalink":"https://slimenull.com/p/20230214094547/","title":"[Web] ç®€å•ç€‘å¸ƒæµå¸ƒå±€å®ç°"},{"content":"é¼ æ ‡æ­£å‘æ»šåŠ¨çš„æ—¶å€™, æ‹¿åˆ°çš„æ»šåŠ¨æ•°æ®æ˜¯å¤§äº 0 çš„, åä¹‹, å°äº 0.\nPow å‡½æ•°åœ¨ x ä¸ºæ­£æ•°çš„æ—¶å€™, è¿”å›å€¼æ˜¯å¤§äº 1 çš„, x ä¸ºè´Ÿæ•°çš„æ—¶å€™, è¿”å›å€¼æ˜¯å°äº 1 çš„, å¯ä»¥ç›´æ¥è®¾ç½®è¿™æ ·çš„ä¸€ä¸ªé€»è¾‘:\n1 ç¼©æ”¾ç³»æ•° = ç¼©æ”¾ç³»æ•° * Pow(10, é¼ æ ‡æ»šåŠ¨æ•°æ® / å‡å°‘æ»šåŠ¨é€Ÿåº¦); è¿™æ ·å°±èƒ½åšä¸€ä¸ªç®€å•çš„é¼ æ ‡ç¼©æ”¾äº†\n","date":"2023-01-31T21:36:23+08:00","permalink":"https://slimenull.com/p/20230131213623/","title":"[ç¬”è®°] å…³äºé€šè¿‡é¼ æ ‡æ»šè½®è®¾ç½®ç¼©æ”¾çš„æŠ€å·§"},{"content":"å†…å­˜å¸ƒå±€ ä¸€èˆ¬çš„, å†…å­˜å¸ƒå±€æˆ‘ä»¬æ˜¯ä¸éœ€è¦å…³å¿ƒçš„, å› ä¸ºæˆ‘ä»¬ç›´æ¥é€šè¿‡å­—æ®µæˆ–å±æ€§æ¥è®¿é—®ç»“æ„ä½“, ä½†æ˜¯ä¸éæ‰˜ç®¡åº“æ“ä½œçš„æ—¶å€™, æœ‰æ—¶å€™å°±éœ€è¦æ³¨æ„ç»“æ„ä½“å¸ƒå±€äº†, åªæœ‰ä¿è¯å¸ƒå±€ä¸€è‡´, æ‰èƒ½ä¿è¯ç›´æ¥ä¼ ç»“æ„ä½“æŒ‡é’ˆæ—¶, éæ‰˜ç®¡ä»£ç èƒ½æ­£å¸¸è®¿é—®åˆ°æˆå‘˜.\n1 2 3 [StructLayout(LayoutKind.Sequential)] // å£°æ˜ StructLayout struct MyStruct { } åºåˆ—å¸ƒå±€ (Sequential) é¡ºåºå¸ƒå±€å°±æ˜¯æŒ‰ç…§ä½ åœ¨ç»“æ„ä½“ä¸­å£°æ˜æˆå‘˜çš„é¡ºåº, ä¸€ä¸ªä¸ªå°†å®ƒä»¬æ”¾åˆ°å†…å­˜ä¸­, ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯, è¿™äº›æˆå‘˜ä¸æ˜¯ä¸€ä¸ªä¸ªç´§æŒ¨ç€çš„, ä»–ä»¬å¯èƒ½å­˜åœ¨å†…å­˜å¯¹é½, ä¸è¿‡è¿™ä¸ªæˆ‘ä»¬ä¸‹é¢ä¼šè¯¦ç»†è®²åˆ°.\næ˜¾å¼å¸ƒå±€ (Explicit) åœ¨è¿™ç§å¸ƒå±€ä¸­, ä½ éœ€è¦æŒ‡å®šç»“æ„ä½“ä¸­æ¯ä¸€ä¸ªå­—æ®µåœ¨è¿™ä¸ªç»“æ„ä½“ä¸­çš„åç§»é‡, ä¾‹å¦‚ä½ æœ‰ä¸€ä¸ªç»“æ„ä½“, å®ƒé‡Œé¢æœ‰ä¸¤ä¸ª int, ä½ å¸Œæœ›è¿™ä¸¤ä¸ª int ä¹‹é—´éš”å¼€ 2 å­—èŠ‚çš„å¤§å°, é‚£ä¹ˆåªéœ€è¦ä¸ºç¬¬ä¸€ä¸ªç»“æ„ä½“æŒ‡å®šåç§»é‡ä¸º 0, ç¬¬äºŒä¸ªç»“æ„ä½“åç§»é‡ä¸º 6 å³å¯.\nè‡ªåŠ¨å¸ƒå±€ (Auto) åœ¨è¿™ç§å¸ƒå±€ä¸­, ä½ ä¸åº”è¯¥è¿›è¡Œä¸éæ‰˜ç®¡çš„äº’æ“ä½œ, å› ä¸ºä¸ºäº†æ€§èƒ½, ç»“æ„ä½“ä¸­çš„æˆå‘˜é¡ºåºä¼šè¢«è‡ªåŠ¨è°ƒæ•´. ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªæ˜æ˜¾æ²¡åŠæ³•åœ¨ä¸è°ƒæ•´é¡ºåºä¸ä¸æ·»åŠ é—´éš”çš„æƒ…å†µä¸‹åšåˆ°å†…å­˜å¯¹é½çš„ç»“æ„ä½“, å®ƒçš„æˆå‘˜é¡ºåº, ä¼šè¢«è°ƒæ•´.\n1 2 3 4 5 6 7 8 9 [StructLayout(LayoutKind.Auto)] struct SomeIntegers { byte AByte; short AShortInteger; byte AnotherByte; // ä½ å®é™…å¾—åˆ°çš„å¯èƒ½æ˜¯ byte, byte, short è¿™æ ·çš„ä¸€ä¸ªç»“æ„ä½“ } å†…å­˜å¯¹é½ å½“ä½ ä½¿ç”¨åºåˆ—å¸ƒå±€çš„æ—¶å€™, ç»“æ„ä½“æˆå‘˜ä¼šæœ‰å†…å­˜å¯¹é½ç°è±¡, è€Œåœ¨è¿›è¡Œå†…å­˜å¯¹é½æ—¶, ä¼šæœ‰ä»¥ä¸‹è¡Œä¸º:\nä¸€ä¸ªæˆå‘˜çš„å†…å­˜åç§»é‡, åº”è¯¥èƒ½å¤Ÿè¢«å®ƒè‡ªèº«æ‰€å å¤§å°æ•´é™¤ å¦‚æœä¸€ä¸ªæˆå‘˜å ç”¨å†…å­˜å¤§äºåŒ…(Pack)çš„å¤§å°, é‚£ä¹ˆä¸å†è¦æ±‚å®ƒçš„åç§»é‡èƒ½è¢«å®ƒè‡ªèº«å¤§å°æ•´é™¤, è€Œæ˜¯èƒ½å¤Ÿè¢«åŒ…å¤§å°æ•´é™¤å³å¯. ä»€ä¹ˆæ˜¯åŒ… åŒ…å°±æ˜¯å†…å­˜å¯¹é½çš„è¦æ±‚å¤§å°, ä¾‹å¦‚åœ¨ Windows ä¸­é»˜è®¤æ˜¯ 8 å­—èŠ‚å¯¹é½, åƒæ˜¯ä¸€äº›å¤§äºå…«å­—èŠ‚çš„æ•°æ®, æŒ‰ç…§ 8 å­—èŠ‚åœ¨å†…å­˜ä¸­è¿›è¡Œå¯¹é½å³å¯.\nåç§»é‡è¦æ±‚ ä¸¾ä¸ªä¾‹å­, å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ª int(32ä½), é‚£ä¹ˆå®ƒçš„å†…å­˜åç§»é‡åº”è¯¥æ˜¯ 4, 8, 12 ç­‰è¿™äº›èƒ½å¤Ÿè¢« 4 æ•´é™¤çš„å€¼, åŒç†, long(64ä½) çš„åç§»é‡ä¹Ÿåº”è¯¥æ˜¯ 8, 16, 32 è¿™äº›.\nä¸¾ä¸ªä¾‹å­, ä¸‹é¢è¿™ä¸ªç»“æ„ä½“ä¸­, æˆå‘˜ B ä¸ºäº†å®ç°åç§»é‡ä¸º 2, åœ¨æˆå‘˜ A åäº§ç”Ÿäº† 1 å­—èŠ‚çš„ç©ºéš™.\n1 2 3 4 5 6 7 [StructLayout(LayoutKind.Sequential)] struct SomeIntegers { byte A; // 1 byte // 1 byte short B; // 2 bytes } æˆå‘˜å ç”¨å¤§äºåŒ… ä¸¾ä¸ªä¾‹å­, åœ¨ä½¿ç”¨ 8 å­—èŠ‚çš„åŒ…å¤§å°æ—¶, ä¸”åœ¨ä¸€ä¸ªåŒ…å†…, å·²ç»è¢«ä½¿ç”¨äº† 4 å­—èŠ‚, å¦‚æœä½ è¦è£…ä¸‹ä¸€ä¸ª long(8å­—èŠ‚), é‚£ä¹ˆæ˜¾ç„¶è¿™ä¸ªåŒ…å·²ç»è£…ä¸ä¸‹è¿™ä¸ªå­—æ®µäº†, é‚£ä¹ˆè¿™ä¸ªå­—æ®µä¼šæ”¾åˆ°ä¸‹ä¸€ä¸ªåŒ….\nä¸¾ä¸ªä¾‹å­, ä¸‹é¢è¿™ä¸ªç»“æ„ä½“ä¸­, æˆå‘˜ B ä¸ºäº†åšåˆ° 8 å­—èŠ‚çš„å¯¹é½, å®ƒä¸ç¬¬ä¸€ä¸ªæˆå‘˜ä¹‹é—´, äº§ç”Ÿäº† 4 å­—èŠ‚çš„ç©ºéš™.\n1 2 3 4 5 6 7 [StructLayout(LayoutKind.Sequential)] struct SomeIntegers { int A; // 4 bytes // 4 bytes long B; // 8 bytes } ä½†æ˜¯å½“ä½ æŒ‡å®š Pack ä¸º 4 æ—¶, è¿™ä¸ª long åˆ™ä¸å†è¦æ±‚åç§»é‡èƒ½è¢« 8 æ•´é™¤, è€Œæ˜¯è¢« 4 æ•´é™¤å³å¯.\n1 2 3 4 5 6 [StructLayout(LayoutKind.Sequential, Pack = 4)] struct SomeIntegers { int A; // 4 bytes long B; // 8 bytes (B ä¸ A ä¹‹é—´çš„ç©ºéš™æ²¡æœ‰äº†) } å› æ­¤, å½“ä½ ä¸å¸Œæœ›è¿™ä¸ªç»“æ„ä½“äº§ç”Ÿä»»ä½•ç©ºéš™, æˆ–è€…ä¸å¸Œæœ›è¿™ä¸ªç»“æ„ä½“æœ‰å†…å­˜å¯¹é½æ—¶, æŒ‡å®š Pack = 1 å°±å¯ä»¥è§£å†³é—®é¢˜. å› ä¸ºè¿™æ ·ä¼šå¯¼è‡´æ‰€æœ‰å­—æ®µçš„åç§»é‡èƒ½è¢« 1 æ•´é™¤å³å¯, äºæ˜¯ä»–ä»¬å¯¹äºåç§»é‡, å°±æ²¡æœ‰äº†ä»»ä½•è¦æ±‚.\næˆå‘˜å°¾éƒ¨ç•™ç©º ä¸€ä¸ªç»“æ„ä½“å°¾éƒ¨ä¹Ÿä¼šäº§ç”Ÿä¸€äº›ç©ºä½™çš„, ä¸è¢«ä½¿ç”¨çš„å­—èŠ‚, è¿™ä¸ªå­—èŠ‚å¤§å°å–å†³äºç»“æ„ä½“ä¸­æœ€å¤§çš„æˆå‘˜å¤§å°.\nä¾‹å¦‚æˆ‘ä¸€ä¸ªç»“æ„ä½“ä¸­, æœ‰ä¸€ä¸ª long, æœ‰ä¸€ä¸ª byte, æœ€å¤§æˆå‘˜å¤§å°ä¸º 8, æ‰€ä»¥ç»“æ„ä½“çš„å¤§å°ä¸€å®šæ˜¯ 8 çš„å€æ•°.\n1 2 3 4 5 6 7 [StructLayout(LayoutKind.Sequential)] struct TwoIntegers // å¤§å°å…±è®¡ 16 bytes { long A; // 8 bytes byte B; // 1 byte // 7 bytes } å½“ç»“æ„ä½“åµŒå¥— ä¾‹å¦‚æˆ‘ä¸€ä¸ªç»“æ„ä½“ä¸­åŒ…å«å¦å¤–ä¸€ä¸ªç»“æ„ä½“, é‚£ä¹ˆæ­¤æ—¶, å†…å­˜å¦‚ä½•å¯¹é½å‘¢?\nç»“æ„ä½“å­—æ®µä¸å‰ä¸€ä¸ªå­—æ®µä¹‹é—´ä¼šäº§ç”Ÿçš„é—´éš™, å–å†³äºç»“æ„ä½“ä¸­æœ€å¤§çš„å¯¹é½å¤§å°. ç»“æ„ä½“å­—æ®µè‡ªèº«æ‰€å­˜åœ¨çš„å°¾éƒ¨ç•™ç©ºå†…å­˜, ä»ç„¶ä¼šåœ¨å¤–å±‚ç»“æ„ä½“ä¸­ä¿ç•™ 1. ç»“æ„ä½“å­—æ®µå‰çš„é—´éš™ ä¾‹å¦‚ä¸€ä¸ªç»“æ„ä½“ä¸­, æœ‰ä¸€ä¸ª int å­—æ®µä»¥åŠä¸€ä¸ª byte å­—æ®µ, å®ƒçš„æœ€å¤§å¯¹å…¶å¤§å°æ˜¯ 4, ä¹Ÿå°±æ˜¯è¯´, è¿™ä¸ªç»“æ„ä½“åœ¨ä½œä¸ºå…¶ä»–ç»“æ„ä½“çš„æˆå‘˜æ—¶, ä¹Ÿä¼šä½¿ç”¨ 4 ä½œä¸ºå¯¹é½å¤§å°.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 [StructLayout(LayoutKind.Sequential)] struct SomeIntegers { public byte A; // 1 byte // 3 bytes (ç»“æ„ä½“æœ€å¤§å¯¹é½æ˜¯ 4, æ‰€ä»¥è¿™é‡Œç•™å‡ºäº† 4 - 1 = 3 ä¸ªå­—èŠ‚) public TwoIntegers B; // 8 bytes public byte C; // 1 byte // 3 bytes } [StructLayout(LayoutKind.Sequential)] struct TwoIntegers { int A; // 4 bytes byte B; // 1 } 2. ç»“æ„ä½“å°¾éƒ¨ç•™ç©º å³ä¾¿ç»“æ„ä½“æˆå‘˜å°¾éƒ¨çš„ç•™ç©ºèƒ½å¤Ÿè£…ä¸‹ä¸‹ä¸€ä¸ªæˆå‘˜, å®ƒä¹Ÿä¸ä¼šè¿™æ ·åš. \u0026ldquo;ç»“æ„ä½“è‡ªå·±çš„å†…å­˜ç©ºé—´å®Œæ•´ä¸å¯ä¾µçŠ¯\u0026rdquo;\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 [StructLayout(LayoutKind.Sequential)] struct SomeIntegers { public byte A; // 1 byte // 3 byte public TwoIntegers B; // 8 bytes public byte C; // 1 byte (å°½ç®¡ä¸Šä¸€ä¸ªç»“æ„ä½“å­—æ®µåæœ‰ç•™ç©º, ä½†è¿™æ®µç•™ç©ºä¸ä¼šè¢«é‡å¤åˆ©ç”¨) // 3 bytes (æ‰€æœ‰æˆå‘˜çš„æœ€å¤§å¤§å°æ˜¯ 4, soyiè¿™é‡Œç•™ } [StructLayout(LayoutKind.Sequential)] struct TwoIntegers { int A; // 4 bytes byte B; // 1 byte // 3 bytes } å®ç°è”åˆä½“ C++ ä¸­æœ‰è”åˆä½“è¿™ä¸ªä¸œè¥¿, å®ç°å¤šä¸ªå­—æ®µå…±ç”¨ä¸€äº›æ•°æ®, åœ¨ C# ä¸­, å¦‚æœä½ è¦å®ç°è¿™ä¸ª, ä½¿ç”¨æ˜¾å¼å¸ƒå±€å³å¯.\nä¸¾ä¸ªä¾‹å­, åœ¨ä¸‹é¢è¿™ä¸ª C++ å®šä¹‰çš„ç»“æ„ä½“ä¸­, å­˜åœ¨ä¸¤ä¸ªå­—æ®µ A å’Œ B, ä»–ä»¬å…±ç”¨ç›¸åŒçš„å†…å­˜åŒºåŸŸ.\n1 2 3 4 5 6 7 struct SomeIntegers { union { int A; int B; }; }; åœ¨ C# ä¸­å®ç°è¿™ä¸ª, ä½ å¯ä»¥ä½¿ç”¨:\n1 2 3 4 5 6 7 8 9 [StructLayout(LayoutKind.Explicit)] struct SomeIntegers { [FieldOffset(0)] int A; [FieldOffset(0)] int B; } æˆ–è€…è¿™æ ·çš„ C++ ç»“æ„ä½“:\n1 2 3 4 5 6 7 8 9 10 struct SomeIntegers { union { int A; struct { short Head; short Tail; }; }; }; å¯ä»¥è¿™æ ·ç”¨ C# è¿›è¡Œç¼–å†™:\n1 2 3 4 5 6 7 8 9 10 11 12 [StructLayout(LayoutKind.Explicit)] struct SomeIntegers { [FieldOffset(0)] int A; // å  4 å­—èŠ‚ [FieldOffset(0)] short Head; // å  2 å­—èŠ‚ [FieldOffset(2)] short Tail; // å  2 å­—èŠ‚ } ","date":"2023-01-11T03:16:53+08:00","permalink":"https://slimenull.com/p/20230111031653/","title":"[.NET] ç»“æ„ä½“å¸ƒå±€è¯¦è§£ä¸ç»“æ„ä½“å†…å­˜å¯¹é½å…·ä½“æ–¹å¼"},{"content":"é€šè¿‡å¯¹é™æ€å¤–éƒ¨æ–¹æ³•æ ‡è®° DllImport ç‰¹æ€§, æˆ‘ä»¬å¯ä»¥å®ç°ä½¿ç”¨ C# è°ƒç”¨éæ‰˜ç®¡åŠ¨æ€é“¾æ¥åº“çš„å‡½æ•°, è¿™ç§ä½¿ç”¨æ–¹å¼å°±å«åšå¹³å°è°ƒç”¨(Platform Invoke, æˆ– P/Invoke)\nåŸºæœ¬ä½¿ç”¨: ä¸‹é¢, æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªè·å–æ§åˆ¶å°çª—å£å¥æŸ„çš„å‡½æ•°æ¥æ¼”ç¤ºæœ€åŸºæœ¬çš„å¹³å°è°ƒç”¨\n1 2 3 4 5 6 7 using System.Runtime.InteropServices; [DllImport(\u0026#34;kernel32.dll\u0026#34;)] # DllImport ç‰¹æ€§ä¸å‡½æ•°æ‰€åœ¨é“¾æ¥åº“ static extern IntPtr GetConsoleWindow(); # æ–¹æ³•åŸºæœ¬å£°æ˜ (é™æ€å¤–éƒ¨æ–¹æ³•) IntPtr currentConsoleWindow = GetConsoleWindow(); Console.WriteLine($\u0026#34;å½“å‰æ§åˆ¶å°çš„çª—å£å¥æŸ„æ˜¯: 0x{currentConsoleWindow:X}\u0026#34;); DllImport ç‰¹æ€§æˆå‘˜å­—æ®µ 1. EntryPoint (å…¥å£ç‚¹) æŒ‡ç¤ºè¦è°ƒç”¨çš„ DLL å…¥å£ç‚¹çš„åç§°æˆ–åºå·ã€‚\nå¯ä»¥æŒ‡å®šå…¥å£ç‚¹å‡½æ•°åç§°, ä¹Ÿå¯ä»¥æŒ‰å…¥å£ç‚¹åºå·æ ‡è¯†å…¥å£ç‚¹. åºå·çš„å‰ç¼€ä¸º # ç¬¦å·ï¼Œä¾‹å¦‚ #1ã€‚ å¦‚æœçœç•¥æ­¤å­—æ®µ, CLR ä¼šä½¿ç”¨æ ‡è®°äº†å½“å‰ DllImport ç‰¹æ€§çš„æ–¹æ³•åç§°ä½œä¸ºå…¥å£ç‚¹åç§°\n2. CharSet (å­—ç¬¦é›†) æŒ‡ç¤ºæ–¹æ³•è°ƒç”¨æ—¶è¦ä½¿ç”¨çš„å­—ç¬¦é›†, CLR ä¼šå°†ä¼ å…¥çš„å­—ç¬¦ä¸²å‚æ•°æŒ‰ç…§æŒ‡å®šå­—ç¬¦é›†å°é€åˆ°å¯¹åº”å‡½æ•°.\nå°†æ­¤å­—æ®µä¸æšä¸¾çš„æˆå‘˜ CharSet ä¸€èµ·ä½¿ç”¨, å¯ä»¥æŒ‡å®šå­—ç¬¦ä¸²å‚æ•°çš„å°é€å¤„ç†è¡Œä¸º, å¹¶æŒ‡å®šè¦è°ƒç”¨çš„å…¥å£ç‚¹åç§° (ç»™å®šçš„ç¡®åˆ‡åç§°æˆ–ä»¥â€œAâ€æˆ–â€œWâ€ä¸ºåç¼€çš„åç§°). C# å’Œ Visual Basic çš„é»˜è®¤æšä¸¾æˆå‘˜æ˜¯ CharSet.Ansi , C++ çš„é»˜è®¤æšä¸¾æˆå‘˜æ˜¯ CharSet.None, è¿™ç­‰æ•ˆäº CharSet.Ansi. åœ¨ Visual Basic ä¸­, ä½¿ç”¨ Declare è¯­å¥æŒ‡å®š CharSet å­—æ®µ.\nä¸¾ä¸ªä¾‹å­, å½“ä½ å…¥å£ç‚¹åç§°ä¸º GetWindowText å¹¶ä¸” CharSet ä¸º Unicode æ—¶, å®é™…è°ƒç”¨çš„æ–¹æ³•æ˜¯ GetWindowTextW. (å› ä¸ºè™½ç„¶ä¸å­˜åœ¨ GetWindowText å‡½æ•°, ä½† CLR æœç´¢åˆ°äº† GetWindowTextW å‡½æ•°, æ‰€ä»¥å°±ä¼šè°ƒç”¨å®ƒ)\n3. SetLastError (è®¾ç½®æœ€åä¸€ä¸ªé”™è¯¯) æŒ‡å®šè°ƒç”¨æ–¹åœ¨è¿”å›ä¹‹å‰æ˜¯å¦è®¾ç½®ä¸€ä¸ªé”™è¯¯(åœ¨ Windows ä¸Šè°ƒç”¨ SetLastError æˆ–è€…å…¶ä»–å¹³å°ä¸Šè°ƒç”¨ errno).\nå¦‚æœè¿™ä¸ªå­—æ®µè®¾ç½®ä¸º true, è¿è¡Œæ—¶çš„å°é€æ‹†æ”¶å™¨^1^ä¼šè°ƒç”¨ GetLastError æˆ– errno å¹¶ç¼“å­˜è¿”å›å€¼ä»¥é¿å…å®ƒè¢«å…¶ä»–çš„ API è°ƒç”¨è¦†ç›–. ä½ å¯ä»¥åœ¨ .NET 6.0 åŠä»¥ä¸Šç‰ˆæœ¬ä¸­è°ƒç”¨ GetLastPInvokeError æˆ–åœ¨ .NET 5 åŠä»¥ä¸‹ç‰ˆæœ¬ä¸ .NET Framework ä¸­è°ƒç”¨ GetLastWin32Error æ¥æ¥æ”¶é”™è¯¯ç .\nåœ¨ .NET ä¸­, å½“è¿™ä¸ªå­—æ®µè®¾ç½®ä¸º true æ—¶, é”™è¯¯ä¿¡æ¯åœ¨è°ƒç”¨è¢«è°ƒç”¨æ–¹ä¹‹å‰ä¼šè¢«æ¸…é™¤(è®¾ç½®ä¸º0). ä½†åœ¨ .NET Framework ä¸­, é”™è¯¯ä¿¡æ¯åˆ™ä¸ä¼šè¢«æ¸…é™¤. è¿™æ„å‘³ç€ç”± GetLastPInvokeError å’Œ GetLastWin32Error è¿”å›çš„é”™è¯¯ä¿¡æ¯, åœ¨ .NET ä¸­åªè¡¨ç¤ºä¸Šä¸€ä¸ªæ‹¥æœ‰ DllImportAttribute.SetLastError å€¼è®¾å®šä¸º true çš„ DlllImport ç‰¹æ€§çš„å¹³å°è°ƒç”¨çš„é”™è¯¯ä¿¡æ¯. è€Œåœ¨ .NET Framework ä¸­, è¿™ä¸ªé”™è¯¯ä¿¡æ¯å¯ä»¥ç”±ä¸€ä¸ªå¹³å°è°ƒç”¨ä¿ç•™åˆ°ä¸‹ä¸€ä¸ª.\n4. ExtractSpelling (ç²¾å‡†æ‹¼å†™) æ§åˆ¶ CLR æ˜¯å¦æ ¹æ® CharSet å­—æ®µçš„å€¼æ¥åœ¨éæ‰˜ç®¡ DLL ä¸­æœç´¢å…¥å£ç‚¹åç§°, æˆ–ç›´æ¥ä½¿ç”¨æŒ‡å®šçš„å…¥å£ç‚¹åç§°.\nå½“å€¼ä¸º false, ä¸”åœ¨æ‰¾ä¸åˆ°æŒ‡å®šå…¥å£ç‚¹åç§°çš„å‡½æ•°æ—¶, CLR ä¼šæ ¹æ® CharSet å­—æ®µçš„å€¼æ¥æœç´¢å…¥å£ç‚¹åç§°. æ­¤æ—¶, å½“ CharSet ä¸º CharSet.Ansi æ—¶, ä¼šå°è¯•è°ƒç”¨å°¾éƒ¨è¿½åŠ å­—æ¯ \u0026lsquo;A\u0026rsquo; çš„å…¥å£ç‚¹åç§°, å½“ CharSet ä¸º CharSet.Unicode æ—¶, åˆ™ä¼šå°è¯•è°ƒç”¨å°¾éƒ¨è¿½åŠ å­—æ¯ \u0026lsquo;W\u0026rsquo; çš„å…¥å£ç‚¹åç§°. é€šå¸¸, æ‰˜ç®¡ç¼–è¯‘å™¨ä¼šè®¾å®šè¿™ä¸ªå­—æ®µçš„å€¼.\nåœ¨ VB ä»¥åŠ C# å’Œ C++ ä¸­, ExactSpelling çš„å€¼ä¼šæ ¹æ® CharSet çš„å€¼æœ‰ä¸åŒçš„è¡¨ç°.\nè¯­è¨€ ANSI Unicode Auto Visual Basic ExactSpelling := True ExactSpelling := True ExactSpelling := False C# ExactSpelling = false ExactSpelling = false ExactSpelling = false C++ ExactSpelling = false ExactSpelling = false ExactSpelling = false ä¹Ÿå°±æ˜¯è¯´, åœ¨ VB ä¸­, å¦‚æœä½ å°† CharSet è®¾ç½®ä¸ºç¡®åˆ‡çš„å­—ç¬¦é›†, ANSI æˆ–è€… Unicode æ—¶, ExactSpelling ä¼šæ˜¯ True, CLR ä¸ä¼šå†å»æœç´¢ä¸å­—ç¬¦é›†åŒ¹é…çš„åç§°, è€Œæ˜¯ç›´æ¥ä½¿ç”¨ä½ åŒ¹é…çš„åç§°. è€Œåœ¨ C# å’Œ C++ ä¸­, å³ä¾¿ä½ æŒ‡å®šäº†ç¡®åˆ‡çš„å­—ç¬¦é›†, CLR ä¹Ÿä¼šåœ¨æ‰¾ä¸åˆ°ä½ æŒ‡å®šçš„å…¥å£ç‚¹åç§°æ—¶, å°è¯•æœç´¢ä¸å­—ç¬¦é›†ç›¸åŒ¹é…çš„å‡½æ•°.\n5. CallingConvertion (è°ƒç”¨çº¦å®š) æŒ‡å®šå…¥å£ç‚¹çš„è°ƒç”¨çº¦å®š^2^\nä½ å¯ä»¥å°†å®ƒè®¾ç½®ä¸º CallingConvertion æšä¸¾çš„ä¸€ä¸ªæˆå‘˜. è¿™ä¸ª CallingConvertion å­—æ®µçš„é»˜è®¤å€¼æ˜¯ Winapi, å®ƒé»˜è®¤åœ¨ Windows å¹³å°ä¸Šæ˜¯ StdCall çº¦å®š, å¹¶ä¸”å…¶ä»–æ‰€æœ‰å¹³å°ä¸Šæ˜¯ Cdecl çº¦å®š.\n6. BestFitMapping (æœ€åˆé€‚æ˜ å°„) å°† Unicode å­—ç¬¦è½¬æ¢ä¸º ANSI å­—ç¬¦æ—¶, å¯ç”¨æˆ–ç¦ç”¨æœ€ä½³æ˜ å°„è¡Œä¸º.\n7. PreserveSig æŒ‡ç¤ºæ˜¯å¦ç›´æ¥è½¬æ¢å…·æœ‰ HRESULT è¿”å›å€¼çš„éæ‰˜ç®¡æ–¹æ³•ï¼Œæˆ–è€… HRESULT æ˜¯å¦è‡ªåŠ¨å°†è¿”å›å€¼è½¬æ¢ä¸ºå¼‚å¸¸.\n8. ThrowOnUnmappableChar å¯ç”¨æˆ–ç¦ç”¨åœ¨é‡åˆ°å·²è¢«è½¬æ¢ä¸º ANSI \u0026ldquo;?\u0026rdquo; å­—ç¬¦çš„æ— æ³•æ˜ å°„çš„ Unicode å­—ç¬¦æ—¶å¼•å‘å¼‚å¸¸.\nå¯¹äºå­—ç¬¦ä¸²çš„å¤„ç† 1. ä¼ å…¥å­—ç¬¦ä¸², ä½†ä¸æ›´æ”¹. ä¾‹å¦‚æˆ‘çš„åŠ¨æ€é“¾æ¥åº“ä¸­æœ‰ä»¥ä¸‹å‡½æ•°:\n1 2 3 4 5 #include \u0026lt;windows.h\u0026gt; extern \u0026#34;C\u0026#34; __declspec(dllexport) void PrintW(wchar_t* lpstr) { wprintf(L\u0026#34;%s\\n\u0026#34;, lpstr); } å®ƒæ¥æ”¶ä¸€ä¸ªå®½å­—ç¬¦ä¸²æŒ‡é’ˆ, å¹¶å°†å®ƒæ‰“å°åˆ°æ ‡å‡†è¾“å‡ºæµä¸­. ä¸‹é¢åˆ—ä¸¾å¸¸ç”¨çš„å­—ç¬¦ä¸²ä¼ å€¼æ–¹å¼\nç›´æ¥ä¼  string 1 2 [DllImport(\u0026#34;test.dll\u0026#34;, EntryPoint = \u0026#34;PrintW\u0026#34;, CharSet = CharSet.Unicode)] extern static void Print1(string str); ä¼  StringBuilder 1 2 [DllImport(\u0026#34;test.dll\u0026#34;, EntryPoint = \u0026#34;PrintW\u0026#34;, CharSet = CharSet.Unicode)] extern static void Print1(StringBuilder str); ä¼  char æ•°ç»„ 1 2 [DllImport(\u0026#34;test.dll\u0026#34;, EntryPoint = \u0026#34;PrintW\u0026#34;, CharSet = CharSet.Unicode)] extern static void Print1(char[] str); ä¼  char æŒ‡é’ˆ 1 2 [DllImport(\u0026#34;test.dll\u0026#34;, EntryPoint = \u0026#34;PrintW\u0026#34;, CharSet = CharSet.Unicode)] extern static void Print1(char* str); 2. ä¼ å…¥å­—ç¬¦ä¸²å¹¶åšæ›´æ”¹ æ³¨æ„, å¦‚æœåœ¨å‡½æ•°ä¸­æœ‰å¯¹å­—ç¬¦ä¸²æ›´æ”¹, é‚£ä¹ˆ, ä½ éœ€è¦æ³¨æ„, ä¼ å…¥çš„ string å¯èƒ½ä¼šè¢«æ›´æ”¹. ä¾‹å¦‚æˆ‘ä»¬æœ‰ä»¥ä¸‹å‡½æ•°:\n1 2 3 4 5 6 7 8 9 10 11 12 13 #define _CRT_SECURE_NO_WARNINGS #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;windows.h\u0026gt; extern \u0026#34;C\u0026#34; __declspec(dllexport) void FuckYouWorldW(wchar_t* lpstr) { wsprintf(lpstr, L\u0026#34;Fuck you world, æ’’æ¯”ä¸–ç•Œ\u0026#34;); } extern \u0026#34;C\u0026#34; __declspec(dllexport) void FuckYouWorldA(char* lpstr) { sprintf(lpstr, \u0026#34;Fuck you world, æ’’æ¯”ä¸–ç•Œ\u0026#34;); } å½“ä½¿ç”¨ Unicode æ‰€å¯¹åº”çš„å‡½æ•°æ—¶, string ä¼šè¢«æ›´æ”¹: 1 2 3 4 5 6 7 8 [DllImport(\u0026#34;test.dll\u0026#34;, EntryPoint = \u0026#34;FuckYouWorldW\u0026#34;,CharSet = CharSet.Unicode)] extern static void FuckYouWorldW(string str); string buf = new string(\u0026#39;\\0\u0026#39;, 32); // å£°æ˜ä¸€ä¸ªé•¿åº¦ä¸º 32 çš„å­—ç¬¦ä¸² FuckYouWorldW(buf); Console.WriteLine(buf); // ä½ ä¼šå¾—åˆ°ä¸€ä¸ª \u0026#34;Fuck you world, æ’’æ¯”ä¸–ç•Œ\u0026#34; // ä½†æ˜¯æ³¨æ„, buf å­—ç¬¦ä¸²åé¢è¿˜æ˜¯æœ‰å¾ˆå¤š \\0 çš„, åªæ˜¯æ²¡æ‰“å°å‡ºæ¥ ä½†æ˜¯å½“ä½ ä½¿ç”¨ ANSI æ‰€å¯¹åº”çš„å‡½æ•°æ—¶, ä¼ å…¥çš„ string å³ä¾¿è¢«æ›´æ”¹äº†, ä¹Ÿä¸ä¼šä½“ç°å‡ºæ¥: 1 2 3 4 5 6 7 8 9 10 [DllImport(\u0026#34;test.dll\u0026#34;, EntryPoint = \u0026#34;FuckYouWorldA\u0026#34;,CharSet = CharSet.Ansi)] extern static void FuckYouWorldA(string str); string buf = new string(\u0026#39;\\0\u0026#39;, 32); // å£°æ˜ä¸€ä¸ªé•¿åº¦ä¸º 32 çš„å­—ç¬¦ä¸² // åœ¨ä¼ å…¥ buf æ—¶, Marshaler ä¼šå¸®æˆ‘ä»¬å°†å­—ç¬¦ä¸²è½¬ä¸º ANSI å­—ç¬¦ä¸², å¹¶ä¼ å…¥æŒ‡é’ˆ FuckYouWorldA(buf); // è¿™å¯¼è‡´, è™½ç„¶å‡½æ•°å˜æ›´äº†æŒ‡é’ˆæŒ‡å‘çš„å­—ç¬¦ä¸²å€¼, ä½†æ²¡æœ‰å¯¹æˆ‘ä»¬åŸæ¥çš„å­—ç¬¦ä¸²æœ‰ä»»ä½•æ›´æ”¹ Console.WriteLine(buf); // ä½ ä»€ä¹ˆä¹Ÿçœ‹ä¸åˆ° å¦‚æœä½ ä½¿ç”¨ StringBuilder çš„æ—¶å€™, æ— è®ºæ˜¯ Unicode è¿˜æ˜¯ ANSI æ–¹æ³•, ä½ éƒ½èƒ½çœ‹åˆ°å‡½æ•°å¯¹å­—ç¬¦ä¸²çš„æ›´æ”¹, Marshal ä¼šå¸®åŠ©æˆ‘ä»¬å¤„ç† Unicode å­—ç¬¦ä¸²ä¸ ANSI å­—ç¬¦ä¸²çš„è½¬æ¢, å¹¶ä¸”å¤„ç†å­—ç¬¦ä¸²å˜æ›´åçš„ç»“æœ, æ‰€ä»¥ä½ æ— è®ºå¦‚ä½•éƒ½èƒ½çœ‹åˆ°å˜æ›´åçš„å­—ç¬¦ä¸². å¦‚æœä½ ä½¿ç”¨ char[], å®ƒçš„è¡¨ç°å’Œ string ä¸€æ ·, èƒ½å¦çœ‹åˆ°ç»“æœå–å†³äºä½ ä½¿ç”¨çš„å­—ç¬¦é›† å¦‚æœä½ ä½¿ç”¨ char*, è™½ç„¶åŸå§‹çš„æŒ‡é’ˆä¼šç›´æ¥ä¼ è¿›å», ä½†æ˜¯å¦‚æœä½ åœ¨ä½¿ç”¨ ANSI çš„å‡½æ•°, é‚£ä¹ˆè‚¯å®šçš„, ä½ å¾—åˆ°çš„æ›´æ”¹åçš„å­—ç¬¦ä¸²å¹¶ä¸ä¼šæ­£å¸¸æ˜¾ç¤º. å› ä¸ºå®ƒæ˜¯ ANSI æ ¼å¼çš„, è€Œ C# æŒ‰ç…§ Unicode æ¥è§£ç å­—ç¬¦ä¸². å‚è€ƒ: Marshaling between Managed and Unmanaged Code åŸæ–‡ä¼¼ä¹æ‰¾ä¸åˆ°äº†, åªæœ‰ CSDN çš„è½¬è½½\n3. æˆ‘åº”è¯¥ä½¿ç”¨å“ªç§æ–¹å¼ä¼ å­—ç¬¦ä¸²? å½“ä½ éœ€è¦å‘å‡½æ•°ä¼ å…¥å­—ç¬¦ä¸², å¹¶ä¸”è¿™ä¸ªå­—ç¬¦ä¸²ä¸ä¼šè¢«å‡½æ•°æ›´æ”¹æ—¶, æˆ‘å»ºè®®ä½ ç›´æ¥ä¼ å…¥ string, è¿™æ ·æœ€æ–¹ä¾¿. è€Œå½“ä½ éœ€è¦ä¼ å‡ºå­—ç¬¦ä¸²æ—¶, ä¹Ÿå°±æ˜¯è°ƒç”¨ç±»ä¼¼äº GetWindowTextW è¿™ç±»å‡½æ•°æ—¶, æˆ‘å»ºè®®ä½ ä½¿ç”¨ StringBuilder, æå‰è®¾ç½®å¥½å®¹é‡, å¹¶åœ¨è°ƒç”¨å‡½æ•°æ—¶, ä¼ å…¥è¿™ä¸ªå®¹é‡. è¿™æ ·å‡½æ•°å°±èƒ½å¤Ÿæ­£ç¡®çš„å¤„ç†, å¹¶ä¸”ä¸é€ æˆæœ‰å…³å†…å­˜è®¿é—®çš„å¼‚å¸¸.\nå½“ç„¶, ä¼ å…¥å…¶ä»–çš„ç±»å‹ä¹Ÿå®Œå…¨å¯ä»¥, è¿™å–å†³äºä½ çš„éœ€æ±‚, ä¾‹å¦‚ä½ å¤§é‡æ“ä½œéæ‰˜ç®¡çš„ç±»å‹, ä½ çš„ä»£ç å‘¨å›´å…¨éƒ½æ˜¯ä¸€äº›æŒ‡é’ˆ, é‚£ä¹ˆä½ å¤§å¯ä»¥å°†å‡½æ•°å£°æ˜ä¸ºæŒ‡é’ˆ, ç„¶åç›´æ¥è°ƒç”¨.\n4. å…³äºå­—ç¬¦ä¸²æ‹·è´ æœ‰äººè®¤ä¸º, åœ¨è°ƒç”¨éæ‰˜ç®¡åŠ¨æ€é“¾æ¥åº“çš„æ—¶å€™, CLR ä¼šæ‹·è´ä¸€ä»½ string ä¾›ä½¿ç”¨, è¿™å¹¶ä¸å®Œå…¨æ­£ç¡®.\nå¦‚æœä½ åœ¨ä½¿ç”¨ Unicode ç‰ˆæœ¬çš„å‡½æ•°(è®¾ç½®äº† CharSet ä¸º Unicode), é‚£ä¹ˆåœ¨è°ƒç”¨çš„æ—¶å€™, å®Œå…¨ä¸ä¼šæœ‰ä»»ä½•æ‹·è´, è€Œæ˜¯ç›´æ¥ä½¿ç”¨æºå­—ç¬¦ä¸², è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆè¿™ç§æƒ…å†µä¸‹å‡½æ•°å¯ä»¥å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ›´æ”¹å¹¶æ­£ç¡®å¾—åˆ°ç»“æœ\nå¦‚æœä½ åœ¨ä½¿ç”¨ ANSI ç‰ˆæœ¬çš„å‡½æ•°(è®¾ç½®äº† CharSet), é‚£ä¹ˆåœ¨è°ƒç”¨çš„æ—¶å€™, CLR ä¼šå¸®ä½ æŠŠ .NET å­—ç¬¦ä¸²è½¬ä¸ºéæ‰˜ç®¡çš„ ANSI å­—ç¬¦ä¸², å¹¶ä¼ å…¥æŒ‡é’ˆ, æ˜¾ç„¶è¿™ä¸ªè¿‡ç¨‹é€ æˆäº†å­—ç¬¦ä¸²æ‹·è´.\n5. æˆ‘åº”è¯¥ä½¿ç”¨å“ªä¸ªå­—ç¬¦é›†çš„å‡½æ•°? è‡³å°‘åœ¨ Windows å¹³å°ä¸­, ä½ æœ€å¥½ä½¿ç”¨ Unicode å­—ç¬¦é›†çš„å‡½æ•°, ä¹Ÿå°±æ˜¯åç¼€å¸¦ W çš„å‡½æ•°. å› ä¸ºåœ¨é«˜ç‰ˆæœ¬çš„ Windows å¹³å°å†…éƒ¨ä¹Ÿæ˜¯ä½¿ç”¨çš„å®½å­—ç¬¦ä¸²(Wide char string), è€Œä¸” C# çš„ string å¯ä»¥ç›´æ¥ä¼ å…¥, è€Œä¸ç»ä»»ä½•æ“ä½œ, è¿™æ ·æ€§èƒ½è¾ƒå¥½.\nå‚è€ƒ: Wide String vs String , Does it affect performance in Windows C++ è¿™é‡Œè¡¨æ˜, Windows å†…æ ¸ä½¿ç”¨çš„æ˜¯å®½å­—ç¬¦\næ³¨æ„: ä¸è¦å°è¯•ç›´æ¥å–å­—ç¬¦ä¸²åœ°å€å¹¶ä¼ å…¥, å› ä¸ºä½ å–çš„åœ°å€ä¸èƒ½ç›´æ¥ä½œä¸º wchar_t* ä½¿ç”¨, è€Œæ˜¯æ ˆä¸Šè¿™ä¸ªå˜é‡çš„åœ°å€, ä½ éœ€è¦è¿›è¡Œä¸€æ¬¡ æŒ‡é’ˆå–å€¼ æ“ä½œæ‰èƒ½æ‹¿åˆ°æ ˆä¸Šå­˜å‚¨çš„å­—ç¬¦ä¸²åœ°å€å€¼, å¹¶ä¸” string åœ¨å †ä¸Šçš„å­˜å‚¨å†…å®¹è¿˜åŒ…å«ä¸€ä¸ª \u0026ldquo;ç±»å‹å¤´\u0026rdquo;, ä½ è‡³å°‘éœ€è¦è®¡ç®—è¿™ä¸ªåç§»é‡æ‰å¯ä»¥. æ€»è€Œè¨€ä¹‹, å¾ˆå¤æ‚, ä¸è¦è¿™ä¹ˆåš.\nå¯¹äºæŒ‡é’ˆçš„å¤„ç† å¦‚æœä¸€ä¸ªåŠ¨æ€é“¾æ¥åº“çš„å‡½æ•°ä¼ å…¥ä¸€ä¸ª int æŒ‡é’ˆ, å¹¶ä¸”å®ƒå°†ä¼šæ›´æ”¹è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘çš„ int ä½œä¸ºè¿”å›å€¼, ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ C# çš„ out å…³é”®å­—æ¥å£°æ˜è¿™ä¸ªå‚æ•°:\n1 2 3 4 extern \u0026#34;C\u0026#34; __declspec(dllexport) void add(int a, int b, int* result) { *result = a + b; } 1 2 [DllImport(\u0026#34;test.dll\u0026#34;, EntryPoint = \u0026#34;add\u0026#34;)] extern static void add(int a, int b, out int result); åŒç†, å¦‚æœä¸€ä¸ªå‡½æ•°ä¼ å…¥ä¸€ä¸ª int æŒ‡é’ˆ, å®ƒä¼šè¯»å–è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘çš„ int å€¼, ä¹Ÿä¼šæ›´æ”¹æŒ‡é’ˆæŒ‡å‘çš„å€¼, é‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ C# çš„ ref å…³é”®å­—æ¥å£°æ˜è¿™ä¸ªå‚æ•°:\n1 2 3 4 extern \u0026#34;C\u0026#34; __declspec(dllexport) void add114514(int* val) { *val += 114514; } 1 2 [DllImport(\u0026#34;test.dll\u0026#34;, EntryPoint = \u0026#34;add\u0026#34;)] extern static void add114514(ref int val); ä½†æ˜¯æ³¨æ„, ä½ ä¸èƒ½ä½¿ç”¨ out string, è¿™ä¸ªé›€é£Ÿæ˜¯ä¸å¯ä»¥çš„, æƒ³è¦ä¼ å‡ºä¸€ä¸ªå­—ç¬¦ä¸², ä½ å¾—ç”¨ StringBuilder\nå¯¹äºç»“æ„ä½“çš„å¤„ç† äº‹å®ä¸Š, åœ¨è¿›è¡Œéæ‰˜ç®¡åŠ¨æ€é“¾æ¥åº“å‡½æ•°è°ƒç”¨çš„æ—¶å€™, CLR ä¼šå°†æ‰€æœ‰æˆ‘ä»¬ç”¨åˆ°çš„å€¼éƒ½è½¬æ¢ä¸ºéæ‰˜ç®¡çš„æ ¼å¼, ç„¶åè¿›è¡Œå°é€. ä¾‹å¦‚åœ¨ C# ä¸­, bool å ä¸€ä¸ªå­—èŠ‚, ä½†æ˜¯åœ¨ WinAPI ä¸­, bool å¯æ˜¯è¦å å››ä¸ªå­—èŠ‚çš„. è°ƒç”¨å‚æ•°çš„ä¼ å…¥ä¸è¿”å›å€¼çš„è¿”å›, éƒ½æœ‰ CLR å‚ä¸è¿™ä¸ªè½¬æ¢.\nä¾‹å¦‚æˆ‘ä»¬æœ‰è¿™æ ·çš„ä¸€ä¸ª C++ å‡½æ•°:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 struct StringWrapper { wchar_t* StrPtr; int Length; }; extern \u0026#34;C\u0026#34; __declspec(dllexport) void print(StringWrapper* str) { for (int i = 0; i \u0026lt; str-\u0026gt;Length; i++) { putwchar(str-\u0026gt;StrPtr[i]); } putwchar(L\u0026#39;\\n\u0026#39;); } é‚£ä¹ˆæˆ‘åœ¨ç¼–å†™ C# çš„æ—¶å€™, å°±å¯ä»¥è¿™æ ·å†™:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)] // æ³¨æ„, è¿™é‡Œéœ€è¦å†™æ˜å­—ç¬¦é›† struct StringWrapper { string _value; // å­—ç¬¦ä¸²ä¼šè‡ªåŠ¨è¢«è½¬æ¢ä¸ºæ­£ç¡®çš„ wchar_t æŒ‡é’ˆä»¥ä¾›ä½¿ç”¨ int _length; // æ•´æ•°çš„è¯, åˆ™æ˜¯åŸå°ä¸åŠ¨çš„ä¼ è¿‡å» public StringWrapper() { _value = string.Empty; _length = 0; } public StringWrapper(string value) { _value = value; _length = value.Length; } } [DllImport(\u0026#34;test.dll\u0026#34;, EntryPoint = \u0026#34;print\u0026#34;, CharSet = CharSet.Unicode)] private extern static void PrintString([In, Optional] ref StringWrapper str); ä½†æ˜¯æ³¨æ„, å½“å‚æ•°æ˜¯ç»“æ„ä½“æŒ‡é’ˆ, å¹¶ä¸”ä½ å¸Œæœ›è¿™ä¸ªç»“æ„ä½“èƒ½å¤Ÿè¢« CLR è¿›è¡Œå°é€, é‚£ä¹ˆä½ å¿…é¡»åœ¨ DllImport é‚£é‡Œ, å°†æ–¹æ³•å‚æ•°å£°æ˜ä¸º ref æˆ– out å‚æ•°, è€Œä¸æ˜¯ç›´æ¥å£°æ˜ä¸ºç»“æ„ä½“çš„æŒ‡é’ˆ.\nè¿˜æœ‰å°±æ˜¯, éå¸¸é‡è¦çš„ä¸€ç‚¹, å½“ç»“æ„ä½“è¿›è¡Œå°é€çš„æ—¶å€™, é‡Œé¢çš„å­—ç¬¦ä¸²ä¼šæ ¹æ®ç»“æ„ä½“çš„ StructLayout æ‰€æŒ‡å®šçš„ CharSet è¿›è¡Œå°é€, é»˜è®¤æ˜¯ ANSI, æ‰€ä»¥ä¼šè¢«å°é€ä¸º char*, å¦‚æœä½ è¦ä½¿ç”¨ wchar_t*, é‚£ä½ å¿…é¡»æŒ‡å®š CharSet ä¸º CharSet.Unicode\nå¦‚æœä½ å¸Œæœ›ä½ çš„ç»“æ„ä½“èƒ½å¤Ÿåœ¨ç›´æ¥ä¼ æŒ‡é’ˆçš„æƒ…å†µä¸‹ä»ç„¶å¯ç”¨, é‚£ä¹ˆä½ å¿…é¡»ä½¿ä½ çš„ç»“æ„ä½“å†…å­˜å¸ƒå±€ä¸éæ‰˜ç®¡ä¸­ç»“æ„ä½“çš„å†…å­˜å¸ƒå±€ä¿æŒä¸€è‡´. å‚è€ƒ: [.NET] ç»“æ„ä½“å¸ƒå±€è¯¦è§£ä¸ç»“æ„ä½“å†…å­˜å¯¹é½å…·ä½“æ–¹å¼\nå…¥å£ç‚¹æŸ¥æ‰¾å¤§æ¦‚é€»è¾‘ ä¸‹é¢æ˜¯ä¼ªä»£ç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 å¦‚æœå­˜åœ¨ Xxx å‡½æ•°: è°ƒç”¨ Xxx å‡½æ•°; è¿”å›; å¦åˆ™: å¦‚æœ ExactSpelling: // ç²¾ç¡®æ‹¼å†™ æŠ›å¼‚å¸¸(\u0026#34;å…¥å£ç‚¹æ‰¾ä¸åˆ°\u0026#34;); å¦åˆ™: å¦‚æœ CharSet æ˜¯ Auto: å¦‚æœæ˜¯é«˜ç³»ç»Ÿç‰ˆæœ¬: ç¡®è®¤ CharSet ä¸º Unicode; å¦åˆ™: ç¡®è®¤ CharSet ä¸º ANSI; å¦‚æœ CharSet æ˜¯ Unicode: å¦‚æœå­˜åœ¨ XxxW å‡½æ•°: // å°±æ˜¯åé¢åŠ äº†ä¸ª W åç¼€ è°ƒç”¨ XxxW å‡½æ•°; è¿”å›; å¦åˆ™: æŠ›å¼‚å¸¸(\u0026#34;å…¥å£ç‚¹æ‰¾ä¸åˆ°\u0026#34;); å¦åˆ™å¦‚æœ CharSet æ˜¯ ANSI: å¦‚æœå­˜åœ¨ XxxA å‡½æ•°: // å°±æ˜¯åé¢åŠ äº†ä¸ª A åç¼€ è°ƒç”¨ XxxA å‡½æ•°; è¿”å›; å¦åˆ™: æŠ›å¼‚å¸¸(\u0026#34;å…¥å£ç‚¹æ‰¾ä¸åˆ°\u0026#34;); å¦åˆ™: æŠ›å¼‚å¸¸(\u0026#34;å…¥å£ç‚¹æ‰¾ä¸åˆ°\u0026#34;); æ³¨è§£ å°é€æ‹†æ”¶å™¨: CLR åœ¨ä¸éæ‰˜ç®¡åŠ¨æ€é“¾æ¥åº“æ“ä½œæ—¶, è´Ÿè´£å°†æ‰˜ç®¡ç±»å‹è½¬æ¢ä¸ºéæ‰˜ç®¡æˆ–å°†éæ‰˜ç®¡ç±»å‹è½¬æ¢ä¸ºæ‰˜ç®¡ç±»å‹. è°ƒç”¨çº¦å®š: è°ƒç”¨çº¦å®šï¼ˆCalling Conventionï¼‰æ˜¯è§„å®šå­å‡½æ•°(è¿‡ç¨‹)å¦‚ä½•è·å–å‚æ•°ä»¥åŠå¦‚ä½•è¿”å›çš„æ–¹æ¡ˆ. å…¶é€šå¸¸ä¸æ¶æ„, ç¼–è¯‘å™¨ç­‰ç›¸å…³. æ–‡ç« ä¼šä¸å®šæ—¶æ›´æ–°, ä»¥ CSDN è¿™è¾¹å†…å®¹ä¸ºå‡†\n","date":"2023-01-06T03:59:30+08:00","permalink":"https://slimenull.com/p/20230106035930/","title":"[.NET] å¹³å°è°ƒç”¨(P/Invoke) ä¸ DllImport ä½¿ç”¨çš„ç›¸å…³è®²è§£ä¸æ³¨æ„äº‹é¡¹,"},{"content":"C++ ä¸­çš„ class, ç®€ç›´å’Œ C#/Java ä¸­çš„å®Œå…¨ä¸ä¸€æ ·äº†, å› ä¸º C++ çš„ class\u0026hellip; æ˜¯åˆ†é…åœ¨æ ˆä¸Šçš„.\nèµ‹å€¼æ—¶çš„æ‹·è´è¡Œä¸º ä¸€ä¸ªå•çº¯çš„ class, å…¶å®ä¹Ÿå’Œ int ä¸€æ ·, åœ¨è¢«èµ‹å€¼æ—¶, ä¼šè¢«æ‹·è´, ä½ å¯ä»¥ç†è§£ä¸º, ä»–å’Œç»“æ„ä½“å…¶å®æ²¡å•¥åŒºåˆ«, åªæ˜¯ class èƒ½å¤Ÿå£°æ˜æ–¹æ³•ç½¢äº†.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 #include \u0026lt;iostream\u0026gt; class something { public: int integer; }; int main() { something sth1 = something(); // æ–°å»ºä¸€ä¸ªå®ä¾‹ sth1.integer = 123; // æ”¹ integer çš„å€¼ something sth2 = sth1; // sth2 å°†æ˜¯ä¸€ä¸ªæ–°çš„å®ä¾‹, æ˜¯ sth1 çš„æ‹·è´ sth2.integer = 114514; // æ”¹ integer çš„å€¼ std::cout \u0026lt;\u0026lt; sth1.integer \u0026lt;\u0026lt; std::endl; // è¾“å‡º 123 std::cout \u0026lt;\u0026lt; sth2.integer \u0026lt;\u0026lt; std::endl; // è¾“å‡º 114514 } æ ‡å‡†åº“ä¸­çš„ç±»éƒ½ä¼šå°è¯•æ‹·è´æ‰€æœ‰å†…å®¹ å½“ä½ èµ‹å€¼ä¸€ä¸ª std::vector çš„æ—¶å€™, å®ƒä¹Ÿä¼šæ‹·è´è‡ªèº«, ç„¶è€Œå®ƒæ˜¯åŒ…å«éæ ˆä¸Šçš„å†…å®¹çš„(ç”¨åŠ¨æ€å†…å­˜å­˜å‚¨å€¼), å°½ç®¡å¦‚æ­¤, å®ƒä¹Ÿä¼šæ‹·è´æ‰€æœ‰çš„ä¸œè¥¿, åŒ…æ‹¬å®¹å™¨ä¸­çš„å…ƒç´ .\n1 2 3 4 5 6 7 8 9 10 11 12 13 #include \u0026lt;iostream\u0026gt; #include \u0026lt;vector\u0026gt; int main() { std::vector\u0026lt;int\u0026gt; vec1 = std::vector\u0026lt;int\u0026gt;{ 1, 2, 3 }; std::vector\u0026lt;int\u0026gt; vec2 = vec1; // vec2 æ˜¯ vec1 çš„æ‹·è´ vec2.push_back(114514); std::cout \u0026lt;\u0026lt; vec1.size() \u0026lt;\u0026lt; std::endl; // è¾“å‡º 3 std::cout \u0026lt;\u0026lt; vec2.size() \u0026lt;\u0026lt; std::endl; // è¾“å‡º 4 } é€šè¿‡ \u0026amp; æ¥ä½¿ç”¨å¼•ç”¨ å¦‚æœä½ ä¸å¸Œæœ›åœ¨å˜é‡èµ‹å€¼æ—¶è¿›è¡Œæ‹·è´, å¯ä»¥ä½¿ç”¨ \u0026amp; å¯¹å˜é‡è¿›è¡Œä¿®é¥°, åŸºæœ¬çš„æ•°æ®ç±»å‹, è¯¸å¦‚ int, char æ˜¯å¯ä»¥çš„, åŒæ ·, class å’Œ struct ä¹Ÿä¸€æ ·\nå¯ä»¥é€šè¿‡æŒ‡é’ˆçš„æ¦‚å¿µæ¥å¸®åŠ©ç†è§£ \u0026ldquo;å¼•ç”¨\u0026rdquo;\n1 2 3 4 5 6 7 8 9 10 11 12 #include \u0026lt;iostream\u0026gt; int main() { int integer = 123; int\u0026amp; ref_integer = integer; ref_integer = 114514; std::cout \u0026lt;\u0026lt; integer \u0026lt;\u0026lt; std::endl; // è¾“å‡º 114514 std::cout \u0026lt;\u0026lt; ref_integer \u0026lt;\u0026lt; std::endl; // è¾“å‡º 114514 } ç±»é»˜è®¤åªä¼šè¿›è¡Œæµ…æ‹·è´ ä¾‹å¦‚æˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ªç±», ç±»ä¸­å£°æ˜ä¸€ä¸ªæŒ‡é’ˆ, åœ¨ç±»è¿›è¡Œæ‹·è´æ—¶, æŒ‡é’ˆä¼šè¢«æ‹·è´, ç„¶è€Œæ–°çš„æŒ‡é’ˆè¿˜æ˜¯æŒ‡å‘äº†åŸæ¥çš„å€¼.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 #include \u0026lt;iostream\u0026gt; #include \u0026lt;vector\u0026gt; class something { public: int* p_integer; // ä¸€ä¸ªæŒ‡é’ˆæˆå‘˜ }; int main() { int integer = 123; // å…ˆå®šä¹‰ä¸€ä¸ªæ•´æ•° something sth1 = something(); // å®šä¹‰ä¸€ä¸ª sth1 sth1.p_integer = \u0026amp;integer; // æ”¹å®ƒçš„ p_integer something sth2 = sth1; // è·å–å®ƒçš„æ‹·è´ *sth2.p_integer = 114514; // å¯¹ sth2 çš„æŒ‡é’ˆç›®æ ‡å€¼è¿›è¡Œæ›´æ”¹ std::cout \u0026lt;\u0026lt; *sth1.p_integer \u0026lt;\u0026lt; std::endl; // è¾“å‡º 114514 std::cout \u0026lt;\u0026lt; *sth2.p_integer \u0026lt;\u0026lt; std::endl; // è¾“å‡º 114514 } é€šè¿‡è‡ªå·±å£°æ˜æ‹·è´æ„é€ å‡½æ•°æ¥å®ç°æ·±æ‹·è´ å¦‚æœè¦å®ç°å¯¹æŸäº›æŒ‡é’ˆæˆå‘˜çš„æ·±æ‹·è´, å°±éœ€è¦è‡ªå·±å®šä¹‰ä¸€ä¸ªæ‹·è´æ„é€ å‡½æ•°äº†, åªéœ€è¦å£°æ˜ä¸€ä¸ªå‚æ•°ä¸ºç›¸åŒç±»å‹å¼•ç”¨çš„æ„é€ å‡½æ•°å³å¯. (ä½ ä¹Ÿå¯ä»¥æ·»åŠ  const ä¿®é¥°)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 #include \u0026lt;iostream\u0026gt; #include \u0026lt;vector\u0026gt; class something { public: int* p_integer; something(); // æ— å‚æ„é€ å‡½æ•° something(const something\u0026amp; origin); // æ‹·è´æ„é€ å‡½æ•° (ä¼ å…¥ç›¸åŒç±»å‹çš„å¼•ç”¨ }; int main() { int integer = 123; something sth1 = something(); sth1.p_integer = \u0026amp;integer; something sth2 = sth1; *sth2.p_integer = 114514; std::cout \u0026lt;\u0026lt; *sth1.p_integer \u0026lt;\u0026lt; std::endl; // è¾“å‡º 123 std::cout \u0026lt;\u0026lt; *sth2.p_integer \u0026lt;\u0026lt; std::endl; // è¾“å‡º 114514 } something::something() { p_integer = NULL; } something::something(const something\u0026amp; origin) // æ‹·è´æ„é€  { p_integer = NULL; if (origin.p_integer != NULL) { p_integer = (int*)malloc(sizeof(int)); // åœ¨å †ä¸­åˆ†é…ä¸€ä¸ª int if (p_integer != NULL) // å¦‚æœå†…å­˜åˆ†é…æˆåŠŸ { *p_integer = *origin.p_integer; // æŠŠæŒ‡é’ˆç›®æ ‡å€¼æ‹·è´äº† } } } ç±»ä¸­åŒ…å«å¦ä¸€ä¸ªç±»æˆå‘˜, æˆå‘˜ä¹Ÿä¼šè¢«æ­£ç¡®æ‹·è´ ä¾‹å¦‚æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç±», ç„¶åè¿™ä¸ªç±»ä¸­ç”¨äº† std::vector æˆå‘˜, åœ¨æ‹·è´æ—¶, è¿™ä¸ªæˆå‘˜ä¹Ÿä¼šè¢« C++ é»˜è®¤çš„æ‹·è´æ„é€ æ¥è¿›è¡Œæ‹·è´\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 #include \u0026lt;iostream\u0026gt; #include \u0026lt;vector\u0026gt; class something { public: std::vector\u0026lt;int\u0026gt; vec; }; int main() { something sth1 = something(); sth1.vec = std::vector\u0026lt;int\u0026gt;{ 1, 2, 3 }; // è®¾ç½® sth1 çš„ vec ä¸º 3 ä¸ªå…ƒç´  something sth2 = sth1; // æ‹·è´ä¸€ä»½ sth1 sth2.vec.push_back(114514); // å¾€ sth2 çš„ vec ä¸­æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´  std::cout \u0026lt;\u0026lt; sth1.vec.size() \u0026lt;\u0026lt; std::endl; // è¾“å‡º 3 std::cout \u0026lt;\u0026lt; sth2.vec.size() \u0026lt;\u0026lt; std::endl; // è¾“å‡º 4 } è¦åƒä¸‡å°å¿ƒé‡æŒ‡é’ˆé—®é¢˜ å› ä¸ºç±»çš„å®ä¾‹æ˜¯ç›´æ¥åˆ†é…åœ¨æ ˆä¸Šçš„, æ‰€ä»¥åƒä¸‡ä¸èƒ½ç›´æ¥è¿”å›å®ƒçš„æŒ‡é’ˆ, å¦åˆ™,,, å°±é‡æŒ‡é’ˆäº†\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #include \u0026lt;iostream\u0026gt; #include \u0026lt;vector\u0026gt; std::vector\u0026lt;int\u0026gt;* new_vector() { std::vector\u0026lt;int\u0026gt; vec = std::vector\u0026lt;int\u0026gt;{ 1, 2, 3 }; // è¿™ä¸ª vector ä¼šåœ¨æ ˆä¸Š return \u0026amp;vec; // è¿”å›å®ƒçš„æŒ‡é’ˆ } int main() { std::vector\u0026lt;int\u0026gt;* p_vec = new_vector(); // ä½ è™½ç„¶æ‹¿åˆ°äº†æŒ‡é’ˆ, ä½†æ˜¯æ ˆå·²ç»å¼¹å‡ºäº† std::cout \u0026lt;\u0026lt; p_vec-\u0026gt;size() \u0026lt;\u0026lt; std::endl; // è¾“å‡º 0 (ä¹Ÿæœ‰å¯èƒ½æ˜¯å…¶ä»–çš„å€¼ } // æ€»ä¹‹ä¸ä¼šè¾“å‡ºæ­£ç¡®çš„å€¼ é€šè¿‡ new æ¥å°†ç±»åˆ†é…åˆ°å †ä¸­ ä¸ºäº†é¿å…ä¸Šé¢çš„é‡æŒ‡é’ˆé—®é¢˜, æˆ‘ä»¬éœ€è¦æŠŠç±»å‹å®ä¾‹å­˜å‚¨åˆ°å †ä¸­, è€Œä¸æ˜¯æ ˆä¸­\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #include \u0026lt;iostream\u0026gt; #include \u0026lt;vector\u0026gt; std::vector\u0026lt;int\u0026gt;* new_vector() { std::vector\u0026lt;int\u0026gt;* vec = new std::vector\u0026lt;int\u0026gt;{ 1, 2, 3 }; // ä½¿ç”¨ new å°†å®ä¾‹å­˜å‚¨åˆ°å †ä¸­ return vec; // è¿”å›å®ƒ } int main() { std::vector\u0026lt;int\u0026gt;* p_vec = new_vector(); std::cout \u0026lt;\u0026lt; p_vec-\u0026gt;size() \u0026lt;\u0026lt; std::endl; // è¾“å‡º 3 } å½“ç„¶, ä½ ä¹Ÿå¯ä»¥é…åˆ \u0026ldquo;å¼•ç”¨\u0026rdquo; æ¥é£Ÿç”¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #include \u0026lt;iostream\u0026gt; #include \u0026lt;vector\u0026gt; std::vector\u0026lt;int\u0026gt;\u0026amp; new_vector() { std::vector\u0026lt;int\u0026gt;* vec = new std::vector\u0026lt;int\u0026gt;{ 1, 2, 3 }; return *vec; } int main() { std::vector\u0026lt;int\u0026gt;\u0026amp; p_vec = new_vector(); // æ³¨æ„, è¿™é‡Œå¿…é¡»å†™ std::vector\u0026lt;int\u0026gt;\u0026amp; std::cout \u0026lt;\u0026lt; p_vec.size() \u0026lt;\u0026lt; std::endl; // è¾“å‡º 3 } ","date":"2022-11-15T12:50:40+08:00","permalink":"https://slimenull.com/p/20221115125040/","title":"[C++] æ ˆä¸Šå­˜å‚¨ä»¥åŠå †ä¸­å­˜å‚¨, å€¼å¼•ç”¨, ç±»å‹æ‹·è´ä»¥åŠæ‹·è´æ„é€ å‡½æ•°, å°†ç±»åˆ†é…åˆ°å †ä¸­"},{"content":"åœ¨ C++ ä¸­, const è™½ç„¶æ˜¯å¸¸é‡, ç„¶è€Œè¿™ä¸ªå¸¸é‡æ¯”èµ· C#/Java ä¸­çš„å¸¸é‡, ä¼¼ä¹åˆæœ‰ç‚¹ä¸å¯¹åŠ²\næ–‡ç« é¢å‘çš„äººç¾¤æ˜¯æ‹¥æœ‰ C#/Java åŸºç¡€çš„ç¨‹åºå‘˜\nè¿è¡Œæ—¶èµ‹å€¼ C++ çš„å¸¸é‡ä¸æ˜¯åœ¨ç¼–è¯‘æ—¶å°±ç›´æ¥ç¡®å®šå€¼çš„, ä½ åœ¨è¿è¡Œæ—¶ä¹Ÿå¯ä»¥åˆå§‹åŒ–å®ƒ, ä¸‹é¢æ˜¯ç¤ºä¾‹ä»£ç :\n1 2 3 4 5 6 7 8 9 10 #include \u0026lt;iostream\u0026gt; int main() { int input; std::cin \u0026gt;\u0026gt; input; const int unchangable_integer = input; std::cout \u0026lt;\u0026lt; unchangable_integer \u0026lt;\u0026lt; std::endl; } ä¸å¯ç›´æ¥å˜æ›´ const å˜é‡ä¸€æ—¦åˆå§‹åŒ–ä¹‹å, å°±ä¸å†å¯ä»¥ç›´æ¥æ›´æ”¹ (ç›´æ¥å¯¹å…¶èµ‹å€¼)\n1 2 3 4 5 6 7 8 9 10 11 #include \u0026lt;iostream\u0026gt; int main() { int input; std::cin \u0026gt;\u0026gt; input; const int unchangable_integer = input; unchangable_integer = 114514; // è¿™é‡Œç¼–è¯‘é”™è¯¯ } å¼ºåˆ¶æ›´æ”¹å¸¸é‡ å¦‚æœä¸€ä¸ªå¸¸é‡æ˜¯åœ¨è¿è¡Œæ—¶ç¡®è®¤å€¼çš„, é‚£ä¹ˆå¯ä»¥é€šè¿‡æŒ‡é’ˆå¼ºåˆ¶æ›´æ”¹, å¹¶ä¸”åœ¨äºŒæ¬¡å–å€¼çš„æ—¶å€™ä¹Ÿèƒ½å¤Ÿæ‹¿åˆ°æ›´æ”¹åçš„å€¼.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 #include \u0026lt;iostream\u0026gt; int main() { int input; std::cout \u0026lt;\u0026lt; \u0026#34;:\u0026#34;; std::cin \u0026gt;\u0026gt; input; // è¾“å…¥ 123 const int unchangable_integer = input; std::cout \u0026lt;\u0026lt; unchangable_integer \u0026lt;\u0026lt; std::endl; // è¾“å‡º 123 int* changable_integer = (int*)\u0026amp;unchangable_integer; // è½¬ä¸ºæŒ‡é’ˆ *changable_integer = 114514; // èµ‹å€¼ std::cout \u0026lt;\u0026lt; unchangable_integer \u0026lt;\u0026lt; std::endl; // è¾“å‡º 114514 (å€¼è¢«æˆåŠŸæ›´æ”¹äº†) std::cout \u0026lt;\u0026lt; *changable_integer \u0026lt;\u0026lt; std::endl; // è¾“å‡º 114514 } å¦‚æœä¸€ä¸ªå¸¸é‡æ˜¯åœ¨ç¼–è¯‘æ—¶å°±ç¡®è®¤å€¼äº†, è™½ç„¶ä¹Ÿå¯ä»¥æ›´æ”¹, ä½†æ˜¯å´æœ‰äº›å¥‡æ€ªè¡¨ç°\u0026hellip;\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 #include \u0026lt;iostream\u0026gt; int main() { const int integer = 123; int* mutable_integer = (int*)\u0026amp;integer; // å–å¯æ›´æ”¹çš„æŒ‡é’ˆ *mutable_integer = 114514; // æ”¹å€¼ const int* p_integer = \u0026amp;integer; std::cout \u0026lt;\u0026lt; integer \u0026lt;\u0026lt; std::endl; // ç›´æ¥è¾“å‡º, ç»“æœæ˜¯ 123 std::cout \u0026lt;\u0026lt; *mutable_integer \u0026lt;\u0026lt; std::endl; // è¾“å‡ºæŒ‡é’ˆç›®æ ‡å€¼, ç»“æœæ˜¯ 114514 std::cout \u0026lt;\u0026lt; *\u0026amp;integer \u0026lt;\u0026lt; std::endl; // å–åœ°å€ç„¶åè¾“å‡ºç›®æ ‡å€¼, ç»“æœæ˜¯ 13 std::cout \u0026lt;\u0026lt; *p_integer \u0026lt;\u0026lt; std::endl; // å–ä¿å­˜ä¸ºå˜é‡çš„åœ°å€çš„ç›®æ ‡å€¼, ç»“æœæ˜¯ 114514 std::cout \u0026lt;\u0026lt; \u0026amp;integer \u0026lt;\u0026lt; std::endl; // å–åœ°å€, ç»“æœæ˜¯ 0073FDE0 std::cout \u0026lt;\u0026lt; mutable_integer \u0026lt;\u0026lt; std::endl; // æ‰“å°ä¹‹å‰çš„æŒ‡é’ˆ, ç»“æœæ˜¯ 0073FDE0 } å¯¹äºä¸Šé¢è¿™äº›å¥‡æ€ªçš„è¡¨ç°, ç¬”è€…è®¤ä¸º, åœ¨ç¼–è¯‘æ—¶ç›´æ¥ç¡®è®¤å€¼çš„å¸¸é‡, å¯¹å…¶çš„ç›´æ¥å¼•ç”¨ä¼šè¢«ç¼–è¯‘å™¨ä¼˜åŒ–ä¸ºå¸¸é‡, è€Œä¸ä¼šå»å–å­˜å‚¨äº†çš„å¸¸é‡å€¼.\nç”šè‡³, å¦‚æœè¿™ä¸ªå¸¸é‡å‹æ ¹å°±æ²¡æœ‰å–åœ°å€æ“ä½œ, é‚£ä¹ˆåœ¨ç¨‹åºç¼–è¯‘åå‹æ ¹å°±ä¸ä¼šæœ‰å­˜å‚¨è¿™ä¸ªå˜é‡çš„, æ ˆä¸Šçš„å†…å­˜ç©ºé—´, å®ƒç›´æ¥å°±æ˜¯å­—é¢é‡, å­˜å‚¨åœ¨ç¨‹åº rdata æ®µ(åªè¯»æ•°æ®æ®µ), å®Œå…¨æ— æ³•å˜æ›´.\næˆ‘ä¸ä¼šå¯¹å®ƒè¿›è¡Œèµ‹å€¼ å¦‚æœä½ åœ¨ä¸€ä¸ªå‡½æ•°ä¸­å£°æ˜ä¸€ä¸ªå‚æ•°, è€Œè¿™ä¸ªå‚æ•°æ˜¯ const, é‚£åœ¨è¿™é‡Œ, const è¡¨ç¤ºçš„æ˜¯, ä½ ä¸æ‰“ç®—å¯¹è¿™ä¸ªå˜é‡è¿›è¡Œèµ‹å€¼(æ›´æ”¹).\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #include \u0026lt;iostream\u0026gt; void print_int(const int number) { printf(\u0026#34;%d\\n\u0026#34;, number); } int main() { const int integer = 123; int mutable_integer = 123; print_int(integer); // å¯ä»¥ä¼ å…¥åªè¯»æ•´æ•° print_int(mutable_integer); // ä¹Ÿå¯ä»¥ä¼ å…¥æ™®é€šæ•´æ•° } æ ‡è®°äº†å‚æ•°ä¸º const çš„å‚æ•°, å°±è¡¨ç¤ºå‡½æ•°ä¸ä¼šå¯¹ä»–è¿›è¡Œå˜æ›´, è¿™æ—¶è°ƒç”¨æ–¹ä¹Ÿèƒ½æ”¾å¿ƒçš„ä½¿ç”¨å®ƒ.\næ‰€ä»¥, å¯¹äºæˆ‘ä»¬å¹³å¸¸æ‰€ç¼–å†™çš„å‡½æ•°, å¦‚æœä¸ä¼šå¯¹å‚æ•°è¿›è¡Œå˜æ›´, ä¹Ÿå¯ä»¥åŠ ä¸Š const ä¿®é¥°ç¬¦æ¥ä½¿å‡½æ•°çš„åŠŸèƒ½æ›´åŠ æ¸…æ™°å¯è¯».\nç»“è¯­ å¸Œæœ›è¿™äº›ç®€çŸ­çš„ä»‹ç»èƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¥½çš„è®¤è¯† C++, æ¯•ç«Ÿ C#/Java å’Œ C++ çš„å·®åˆ«è¿˜æ˜¯éå¸¸éå¸¸å¤§çš„\nå¦å¤–, å¦‚æœä¸Šè¿°å†…å®¹æœ‰é”™è¯¯, æ¬¢è¿åœ¨è¯„è®ºåŒºæŒ‡å‡º\n","date":"2022-11-15T11:06:33+08:00","permalink":"https://slimenull.com/p/20221115110633/","title":"[C++] C++ çš„å¸¸é‡ç©¶ç«Ÿæ˜¯ä»€ä¹ˆ? å®ƒä¸ C# å’Œ Java ä¸­çš„å¸¸é‡æœ‰ä»€ä¹ˆåŒºåˆ«? åº”è¯¥å¦‚ä½•ç†è§£å¸¸é‡?"},{"content":"ä¸å¯ç”¨è™šæ‹Ÿç»ˆç«¯ä¼šå¯¼è‡´:\næ— æ³•ä½¿ç”¨ ANSI è½¬ä¹‰åºåˆ—, æ— æ³•é€šè¿‡ \\e \\1b é€ƒé€¸å­—ç¬¦æ‰“å°å½©è‰²æˆ–æ ¼å¼åŒ–å†…å®¹\né€šè¿‡ä»¥ä¸‹ä»£ç æ¥åœ¨ Windows ä¸Šå¯ç”¨:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 internal class PlatformUtils { private const int STD_OUTPUT_HANDLE = -11; private const uint ENABLE_VIRTUAL_TERMINAL_PROCESSING = 0x0004; private const uint DISABLE_NEWLINE_AUTO_RETURN = 0x0008; [DllImport(\u0026#34;kernel32.dll\u0026#34;)] private static extern bool GetConsoleMode(IntPtr hConsoleHandle, out uint lpMode); [DllImport(\u0026#34;kernel32.dll\u0026#34;)] private static extern bool SetConsoleMode(IntPtr hConsoleHandle, uint dwMode); [DllImport(\u0026#34;kernel32.dll\u0026#34;, SetLastError = true)] private static extern IntPtr GetStdHandle(int nStdHandle); [DllImport(\u0026#34;kernel32.dll\u0026#34;)] private static extern uint GetLastError(); public static uint EnableVirtualTerminalProcessingOnWindows() { var iStdOut = GetStdHandle(STD_OUTPUT_HANDLE); if (!GetConsoleMode(iStdOut, out uint outConsoleMode)) { return GetLastError(); } outConsoleMode |= ENABLE_VIRTUAL_TERMINAL_PROCESSING | DISABLE_NEWLINE_AUTO_RETURN; if (!SetConsoleMode(iStdOut, outConsoleMode)) { return GetLastError(); } return 0; } } åœ¨è¿è¡Œå‰åŠ ä¸Šä»¥ä¸‹ä»£ç å³å¯:\n1 2 if (RuntimeInformation.IsOSPlatform(OSPlatform.Windows)) PlatformUtils.EnableVirtualTerminalProcessingOnWindows(); ","date":"2022-11-07T06:00:11+08:00","permalink":"https://slimenull.com/p/20221107060011/","title":"[C#, ç¬”è®°] å¯ç”¨è™šæ‹Ÿç»ˆç«¯å¤„ç† (ä½¿ç”¨ ANSI è½¬ä¹‰åºåˆ—å‰éœ€å¯ç”¨)"},{"content":"forward æ˜¯æ˜¯å¦å¯¹ç»“æœå–å¹³å‡å€¼ (é™¤ä»¥æ ·æœ¬æ•°), è¿™æ ·æ ·æœ¬æ•°é‡å°±ä¸ä¼šå½±å“ç»“æœå€¼çš„å¤§å°. m æ˜¯è¦è¿›è¡Œå˜æ¢çš„æ•°é‡, ä½†æ˜¯æ˜¯ 2 çš„æŒ‡æ•°, ä¹Ÿå°±æ˜¯è¯´ 2^m å¿…é¡»å°äºç­‰äºæ ·æœ¬æ•° å› ä¸ºå‚…é‡Œå¶å˜æ¢åªèƒ½è¿›è¡Œ 2^m ä¸ªæ•°æ®çš„å‚…é‡Œå¶å˜æ¢\n","date":"2022-10-25T07:48:33+08:00","permalink":"https://slimenull.com/p/20221025074833/","title":"[C#,ç¬”è®°] NAudio å‚…é‡Œå¶å˜æ¢çš„ forward å‚æ•°ä¸ m å‚æ•°"},{"content":"è¿™ç¯‡æ–‡ç« è®²è§£æ‰‹æœºåˆ·æœº, Root çš„æ•™ç¨‹, ä»¥åŠè¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„å¤§å¤šæ•°é—®é¢˜.\nä½ å¯èƒ½éœ€è¦å¯¹ç”µè„‘é‡è£…ç³»ç»Ÿæœ‰äº›äº†è§£, çŸ¥é“åˆ†åŒº, è®¾å¤‡, é©±åŠ¨æ˜¯ä»€ä¹ˆä¸œè¥¿, å¹¶ä¸”èƒ½å¤Ÿç†Ÿæ‚‰ä½¿ç”¨ç”µè„‘, ä»¥åŠåœ¨å‘½ä»¤çª—å£ä¸­æ‰§è¡Œå‘½ä»¤\næ¦‚è¿° æ‰‹æœºåˆ·æœº, å½“ç„¶ä¹Ÿå¯ä»¥è¯´æˆé‡è£…ç³»ç»Ÿ. ä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨ç”µè„‘é‡è£…ç³»ç»Ÿçš„æ—¶å€™, éƒ½æ˜¯é€šè¿‡ PE æˆ–è€…å†™å…¥äº†å®‰è£…é•œåƒçš„å­˜å‚¨ä»‹è´¨, å¼•å¯¼, ç„¶åå®‰è£…, éå¸¸ç®€å•. ä½†æ˜¯æ‰‹æœºåˆ·æœºçš„è¿‡ç¨‹ä¸ç”µè„‘ä¸ä¸€æ ·.\nç”µè„‘ä¹‹æ‰€ä»¥èƒ½å¤Ÿéšä¾¿é‡è£…ç³»ç»Ÿ, é‚£æ˜¯å› ä¸ºç”µè„‘ä¸­çš„è®¾å¤‡, éƒ½æœ‰ç€ç›¸åŒçš„é€šè®¯åè®®, ä»¥åŠç”µè„‘æœ‰ç€å®Œå–„çš„é©±åŠ¨, å¯ä»¥éšä¾¿ä½¿ç”¨. ä¾‹å¦‚æˆ‘æ’å…¥äº†ä¸€ä¸ªç”µè„‘æ— æ³•è¯†åˆ«çš„è®¾å¤‡, é‚£ä¹ˆåªéœ€è¦ä»å®˜ç½‘ä¸‹è½½å…¶å¯¹åº”çš„é©±åŠ¨, é‚£ä¹ˆç”µè„‘å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªè®¾å¤‡äº†.\nè€Œä¸”ç”µè„‘ä¸­å¾ˆå¤šè®¾å¤‡, éƒ½æ˜¯é€šç”¨çš„åè®®, ä¾‹å¦‚å­˜å‚¨è®¾å¤‡, æ‘„åƒæœº, éŸ³é¢‘è®¾å¤‡ä¹‹ç±»çš„, è¿™äº›è®¾å¤‡å¾ˆå¤šéƒ½ä¸éœ€è¦ä¸ºå…¶å®‰è£…ä¸“ç”¨é©±åŠ¨å³å¯ç›´æ¥ä½¿ç”¨.\n1. åˆ†åŒº å¯¹äºç”µè„‘æ¥è®², ç”¨æˆ·å¯ä»¥éšæ„åˆ†åŒº, ä½†æ˜¯æ‰‹æœºçš„åˆ†åŒºéƒ½æ˜¯é¢„å…ˆåˆ†å¥½çš„, ä½¿ç”¨è€…åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­, ä¸€èˆ¬æ˜¯ä¸ä¼šå¯¹å…¶è¿›è¡Œé‡æ–°åˆ†åŒº, è€Œä¸”æ‰‹æœºä¸­çš„åˆ†åŒºä¹Ÿéƒ½æŒ‡å®šå¥½äº†ä½œç”¨.\næ‰‹æœºåˆ†åŒºåŒ…å«: modem, bootloader, boot, recovery, system, data, cache\nbootloader: å…¶ä¸­, bootloader åˆ†åŒº, å¦‚å…¶å, ç”¨æ¥å¼•å¯¼å¯åŠ¨, å¯ä»¥ç†è§£ä¸ºç±»ä¼¼äºç”µè„‘ä¸­ MBR æˆ–è€… GRUB çš„å­˜åœ¨, å…¶ä¸­å­˜æ”¾ç€ç”¨æ¥å¼•å¯¼å¯åŠ¨çš„ç¨‹åº.\nrecovery: recovery åˆ†åŒºåˆ™ç”¨æ¥è¿›è¡Œç³»ç»Ÿçš„ä¸€äº›é«˜çº§çš„ç»´æŠ¤, ä¾‹å¦‚æ¢å¤å‡ºå‚è®¾ç½®ä»€ä¹ˆçš„. ä¸€èˆ¬çš„, æ‰‹æœºé»˜è®¤æºå¸¦çš„ recovery åˆ†åŒºå†…çš„ç¨‹åº, ä¸åŒ…å«é«˜çº§åŠŸèƒ½, ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ·å…¥ç¬¬ä¸‰æ–¹çš„ recovery, å®ç°æ›´å¤šåŠŸèƒ½, è¿™ä¹Ÿæ˜¯åˆ·æœºçš„ä¸»è¦æ­¥éª¤.\nboot: boot åˆ†åŒºåŒ…å«ç³»ç»Ÿçš„å†…æ ¸ (Linux)\nsystem: ç³»ç»Ÿåˆ†åŒº, åŒ…å«äº†ç³»ç»Ÿæœ¬ä½“, é™¤äº†å†…æ ¸ä»¥å¤–çš„æ‰€æœ‰éƒ¨åˆ†\n2. é«˜æƒé™ å¯¹äºç”µè„‘æ¥è®², é€šè¿‡å¤–éƒ¨è®¾å¤‡å¼•å¯¼è¿›å…¥ PE, äºæ˜¯å°±èƒ½å¤Ÿéšå¿ƒæ‰€æ¬²çš„å¯¹ç‰©ç†æœºä¸­çš„å…¶ä»–è®¾å¤‡è¿›è¡Œä»»ä½•æ“ä½œ, ä¾‹å¦‚é‡æ–°åˆ†åŒº, å®‰è£…ç³»ç»Ÿä»€ä¹ˆçš„, ä½†æ˜¯å®‰å“ä¸èƒ½è¿™æ ·.\nå¯¹äºå®‰å“æ¥è®², é¦–å…ˆæˆ‘ä»¬è¦è¿›å…¥ bootloader, åœ¨å¼€æœºæ—¶é•¿æŒ‰ éŸ³é‡- å’Œ ç”µæº é”®, å³å¯è¿›å…¥ bootloader, æ­¤æ—¶é€šè¿‡æ•°æ®çº¿å°†ç”µè„‘ä¸æ‰‹æœºé“¾æ¥, ç„¶åç”µè„‘å°±å¯ä»¥é€šè¿‡ \u0026ldquo;fastboot\u0026rdquo; å·¥å…·å¯¹æ‰‹æœºè¿›è¡Œæ“ä½œ\nä½†æ˜¯æ‰‹æœºä¸€èˆ¬éƒ½ä¼šå¯¹ bootloader è¿›è¡Œé™åˆ¶, ä½¿ä½ æ— æ³•è¿›è¡Œå±é™©æ“ä½œ, ä¾‹å¦‚åˆ·å…¥ç¬¬ä¸‰æ–¹ recovery ä¹‹ç±»çš„, æ‰€ä»¥åœ¨ä½¿ç”¨ fastboot ä¹‹å‰, ä½ è¿˜éœ€è¦å°† BL é”ç»™è§£é™¤.\nç›®å‰ä¸€åŠ , å°ç±³è¿™ä¸¤ä¸ªå‚å•†å¼€æ”¾æ€§æ¯”è¾ƒå¼º, å®˜æ–¹æä¾›äº†è§£é™¤ BL é”çš„æ–¹æ¡ˆ, OPPO å’Œ VIVO åˆ™å°é—­, åŸºæœ¬ä¸Šæ²¡åŠæ³•åˆ·æœºä¸ ROOT (é™¤äº†æ—§æ‰‹æœº)\nè§£é™¤ BL é” å¯¹äºå¼€æ”¾æ€§æœ€å¼ºçš„ä¸€åŠ , è§£é™¤ BL é”æ²¡æœ‰ä»»ä½•éš¾åº¦, ä½†æ˜¯ä¸åŒå‹å·æœ‰ä¸åŒçš„è§£é™¤æ–¹å¼, æœ‰çš„åªéœ€è¦æ‰§è¡ŒæŒ‡ä»¤, æœ‰çš„åˆ™éœ€è¦è¿›å…¥å¼€å‘è€…é€‰é¡¹æ‰“å¼€ OEM è§£é”.\nå¯¹äº å°ç±³/çº¢ç±³ æ‰‹æœº, åˆ™éœ€è¦ä½¿ç”¨å®˜æ–¹çš„è§£é”å·¥å…·è¿›è¡Œè§£é”, å¹¶ä¸”è¿˜éœ€è¦å°†æ‰‹æœºä¸å°ç±³è´¦æˆ·ç»‘å®š, ç„¶åç­‰å¾…ä¸€ä¸ªæ˜ŸæœŸä»€ä¹ˆçš„, æ€»ä¹‹æŒºéº»çƒ¦çš„.\nOPPO / vivio çš„è¯, å°±å®Œå…¨ä¸ç”¨æƒ³åˆ·æœºäº†,,, å¾ˆéš¾çš„å•¦, å“¦å¯¹äº†, åä¸ºä¹Ÿä¸€æ ·\nåœ¨ä½¿ç”¨å®˜æ–¹æä¾›çš„è§£ BL é”å·¥å…·æ—¶, è®¾å¤‡å¯èƒ½è¯†åˆ«ä¸åˆ°, ä½ éœ€è¦å…ˆå®‰è£…è®¾å¤‡å¯¹åº”çš„é©±åŠ¨æ‰å¯ä»¥, è€Œå¯¹åº”å·¥å…·ä¸­ä¸€èˆ¬éƒ½æä¾›äº†è¿™ä¸ªåŠŸèƒ½.\nç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šå¼ºåˆ¶è§£ BL é”çš„å¥‡å¦™æ–¹æ³•, ç”šè‡³è¿ OPPO å¼ºè§£ BL é”çš„éƒ½æœ‰, ä½†æ˜¯ä¸é€‚ç”¨äºæ‰€æœ‰è®¾å¤‡, ä½ ä¹Ÿå¯ä»¥å°è¯•, ä½†æ˜¯è§£äº† BL é”, æœ€å¤šå¼„ä¸ª Root æƒé™, åˆ·ç¬¬ä¸‰æ–¹ç³»ç»Ÿå°±ç®—äº†, å› ä¸ºä»–ä»¬ä¸é€‚é… OPPO / vivo çš„è®¾å¤‡\nå‡†å¤‡å·¥ä½œ ä¸‹è½½å®‰å“å¹³å°å·¥å…· (ADB å’Œ FastBoot):\nå®˜ç½‘: https://developer.android.google.cn/studio/releases/platform-tools\nåœ¨é‡Œé¢ä¸‹è½½é€‚ç”¨äºä½ ç”µè„‘çš„å·¥å…·, ç„¶åè§£å‹å³å¯. ä¸‹è½½åˆ°çš„å†…å®¹è‡³å°‘åº”è¯¥åŒ…å« adb.exe å’Œ fastboot.exe\nä¸‹è½½ä½ æ‰€éœ€è¦çš„åˆ·æœºåŒ…:\nå¸¸ç”¨çš„åˆ·æœºåŒ…éƒ½æ˜¯å¡åˆ·åŒ…(zipæ ¼å¼), å®ƒå¯ä»¥é€šè¿‡ TWRP ç›´æ¥è¿›è¡Œå®‰è£…, ä¹Ÿå¯ä»¥åœ¨ç”µè„‘ä¸Šé€šè¿‡ ADB æ—åŠ è½½çš„æ–¹å¼è¿›è¡Œå®‰è£….\nä¸‹é¢ä»‹ç»çš„é€šè¿‡ ADB æµ‹åŠ è½½çš„æ–¹å¼å®‰è£…å¡åˆ·åŒ…çš„æ–¹å¼.\nå¡åˆ·åŒ…çš„åç§°ç”±æ¥\u0026hellip; æ—©æœŸéƒ½æ˜¯æŠŠåˆ·æœºåŒ…å­˜åˆ°å­˜å‚¨å¡é‡Œ, ç„¶åè£…ç³»ç»Ÿçš„æ—¶å€™, ç›´æ¥åœ¨ TWRP ä¸­é€‰æ‹©å­˜å‚¨å¡ä¸­çš„åˆ·æœºåŒ…, å°±å¯ä»¥å®‰è£…, é™¤äº†åˆ·å…¥ TWRP çš„è¿‡ç¨‹, å…¶ä»–è¿‡ç¨‹éƒ½ä¸éœ€è¦ç”µè„‘è¿›è¡Œæ“ä½œ.\nçº¿åˆ·åŒ…æ˜¯ç›´æ¥é€šè¿‡ FastBoot å°±èƒ½ç›´æ¥å®‰è£…çš„åˆ·æœºåŒ…, ä¸éœ€è¦åˆ·å…¥ TWRP, ä½†æ˜¯ç¬¬ä¸‰æ–¹ç³»ç»Ÿæ˜¯ä¸ä¼šåšè¿™ç§åˆ·æœºåŒ…çš„, ä¸€èˆ¬éƒ½æ˜¯å®˜æ–¹æä¾›çº¿åˆ·åŒ…, ç”¨æ¥æ•‘ç –(çº¿åˆ·åŒ…æ˜¯åŸºæœ¬ä¸ä¼šå¤±è´¥çš„åˆ·æœºæ–¹å¼)\nåˆ·å…¥ TWRP TWRP å…¨ç§° Team Win Recovery Project, æ˜¯ä¸€ä¸ªå¼€æ”¾æºç è½¯ä»¶çš„å®šåˆ¶Recoveryæ˜ åƒ, ä¾›åŸºäºå®‰å“çš„è®¾å¤‡ä½¿ç”¨. å®ƒæä¾›äº†ä¸€ä¸ªæ”¯æŒè§¦æ‘¸å±çš„ç•Œé¢, æœ‰å¾ˆå¤šå¥‡å¦™çš„å°åŠŸèƒ½, ä¾‹å¦‚æ“¦é™¤æ‰‹æœºæ•°æ®, å®‰è£…ç³»ç»Ÿ, å¤‡ä»½ç³»ç»Ÿ, é€šè¿‡æ—åŠ è½½è®©ç”µè„‘ ADB åˆ·å…¥ç³»ç»Ÿä»€ä¹ˆçš„. æ€»è€Œè¨€ä¹‹, åˆ·æœºå¿…ç”¨. (Root ä¹Ÿæ˜¯)\nå®˜ç½‘: https://twrp.me/\nä½ éœ€è¦åœ¨ TWRP çš„å®˜ç½‘ä¸‹è½½ä¸è‡ªå·±è®¾å¤‡å¯¹åº”çš„ TWRP é•œåƒ (imgæ–‡ä»¶)\næ‰‹æœºè¿›å…¥ BootLoader (å…³æœºçŠ¶æ€ä¸‹, é•¿æŒ‰ éŸ³é‡- å’Œ ç”µæº ) è¿æ¥æ‰‹æœºä¸ç”µè„‘ ç°åœ¨åœ¨ç”µè„‘ä¸Šä½¿ç”¨å‘½ä»¤è¡Œ, æ‰§è¡Œ fastboot devices æŸ¥çœ‹è¿æ¥æ˜¯å¦æ­£å¸¸, ä½ çš„æ§åˆ¶å°åº”è¯¥è¾“å‡ºç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„ä¿¡æ¯:\n1 hyxobieieaqgcinr fastboot å·¦ä¾§æ—¶æ‰‹æœºåç§°, å³ä¾§æ˜¯æ‰‹æœºå½“å‰æ‰€å¤„äºçš„çŠ¶æ€.\nç°åœ¨æ‰§è¡Œ fastboot flash recovery twrp.img æŒ‡ä»¤, å…¶ä¸­ twrp.img åº”è¯¥æ˜¯ä½ ä¸‹è½½ä¸‹æ¥çš„ TWRP é•œåƒæ–‡ä»¶è·¯å¾„. å¦‚æœæˆåŠŸåˆ·å…¥, ä½ çš„æ§åˆ¶å°åº”è¯¥è¾“å‡ºç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„ä¿¡æ¯:\n1 2 3 Sending \u0026#39;recovery\u0026#39; (65536 KB) OKAY [ 1.670s] Writing \u0026#39;recovery\u0026#39; OKAY [ 0.538s] Finished. Total time: 2.228s æ‰§è¡Œå®Œä¸Šè¿°æ­¥éª¤ä¹‹å, TWRP å°±æˆåŠŸåˆ·å…¥åˆ°ä½ çš„æ‰‹æœºä¸­äº†, ä½†æ˜¯æ³¨æ„, TWRP æ˜¯å¯èƒ½ä¼šè¢«ä½ çš„æ‰‹æœºç³»ç»Ÿé‡æ–°è¦†ç›–æ‰, å¦‚æœæ­¤æ—¶ä½ é‡å¯æ‰‹æœº, è¿›å…¥æ‰‹æœºç³»ç»Ÿ, ä½ çš„ TWRP å¯èƒ½ä¼šä¸¢çš„ (MIUI å°±å–œæ¬¢å¹²è¿™äº‹å„¿)\næ‰§è¡Œ fastboot reboot recovery ä»¥ä½¿æ‰‹æœºç›´æ¥é‡å¯åˆ° recovery ä¸­ å¦‚æœæˆåŠŸè¿›å…¥, ä½ çš„å±å¹•ä¸Šä¼šæ˜¾ç¤º TEAMWIN çš„å­—æ · (æ ·å­æ€ªæ€ªçš„, åˆšå¼€å§‹æˆ‘æ˜¯æ²¡è®¤å‡ºæ¥çš„)\næ¸…é™¤æ‰‹æœºæ•°æ® ç½‘ä¸Šæœ‰ç€å¾ˆå¤š, ä¾‹å¦‚åŒæ¸…, ä¸‰æ¸…, å››æ¸…å•¥çš„, å…¶å®å°±æ˜¯æ¸…é™¤å‡ ä¸ªåˆ†åŒºçš„æ•°æ®ç½¢äº†. å…·ä½“å®‰è£…ç³»ç»Ÿçš„æ—¶å€™è¿˜æ˜¯è¦ä»¥è¯¥ç³»ç»Ÿå®‰è£…çš„å®˜æ–¹æ•™ç¨‹ä¸ºå‡†, ä¾‹å¦‚ Pixel Experience åªéœ€è¦æ¸…é™¤ Data åˆ†åŒºçš„æ•°æ®å³å¯\nåœ¨ TWRP ä¸»é¡µé¢é€‰æ‹© æ¸…é™¤(Wipe) ç„¶åé‡Œé¢æœ‰é»˜è®¤çš„ä¸‰æ¸…ä»¥åŠå³ä¾§çš„æ ¼å¼åŒ– Data.\nç½‘ä¸Šå¯¹äºåŒæ¸…çš„è¯´æ³•ä¹Ÿä¸åŒ, æœ‰çš„äººè¯´æ¸…é™¤ Data + Cache, æœ‰çš„äººè¯´æ¸…é™¤ Cache + Dalvik, ç¬”è€…ä¹Ÿä¸æ¸…æ¥šå…·ä½“æ€ä¹ˆç§°å‘¼, æ€»è€Œè¨€ä¹‹, æŒ‰éœ€æ¸…é™¤. å¤§å¤šæ•°è£…ç³»ç»Ÿéƒ½æ˜¯æ¸…é™¤ Data + Cache + Dalvik\nå¦‚æœè¦æ¸…é™¤æ›´å¤šæ•°æ®, ä¾‹å¦‚å°† System åˆ†åŒºå’Œ Internal Storage åˆ†åŒºæ¸…é™¤, ä½¿ç”¨å·¦è¾¹çš„é«˜çº§æŒ‰é’®å°±å®Œäº‹å„¿äº†.\næˆ‘æ˜¯ä¸ªæ†¨æ‰¹,,, è¿™æ–‡ç« å†™ç€å†™ç€, ä¸å°å¿ƒå°±æ“ä½œä¸Šäº†, ç„¶åæˆ‘æ‰‹æœºæ•°æ®å°±è¢«æˆ‘æ‰‹è´±, æ¸…é™¤æ‰äº†! (è¿™ä¹ˆæƒ¨äº†, è¿˜ä¸ç‚¹ä¸ªèµ\u0026hellip;)\nä¾§åŠ è½½åˆ·æœºåŒ… ç°åœ¨, åœ¨ç”µè„‘æ‰“å¼€å‘½ä»¤è¡Œ, æ‰§è¡Œ adb devices, å¦‚æœè®¾å¤‡è¿æ¥æ­£å¸¸, åˆ™ä¼šæ˜¾ç¤ºä»¥ä¸‹å†…å®¹:\n1 2 List of devices attached hyxobieieaqgcinr recovery åœ¨æ‰‹æœºçš„ TWRP ä¸»é¡µé¢ä¸­, ç‚¹å‡»å·¦ä¸‹è§’çš„ é«˜çº§(Advanced), å†ç‚¹å‡» ADB Sideload, ç„¶åæ»‘åŠ¨æ»‘å—, å¼€å§‹ Sideload\nç„¶ååœ¨ç”µè„‘ä¸Šæ‰§è¡Œ adb sideload xxx.zip, å…¶ä¸­ xxx.zip æ˜¯ä½ ä¸‹è½½çš„å¡åˆ·åŒ….\nç­‰å¾…å®Œæˆ, ç„¶åé‡å¯æ‰‹æœºå³å¯ (æ‰‹æœºä¸Šæœ‰ é‡å¯ç³»ç»Ÿ(Reboot System) æŒ‰é’®, ä¹Ÿå¯ä»¥åœ¨ç”µè„‘ä¸Šæ‰§è¡Œ adb reboot é‡å¯æ‰‹æœº\né‡å¯å®Œæ¯•å, å¦‚æœä¸€åˆ‡æ“ä½œæ²¡æœ‰é—®é¢˜, twrp å’Œåˆ·æœºåŒ…éƒ½æ˜¯ä¸æ‰‹æœºé€‚é…çš„, é‚£ä¹ˆä½ ç°åœ¨å¤§æŠµæ˜¯å·²ç»è¿›å…¥äº†ç³»ç»Ÿäº†.\nMagisk ä¸ Root Magiskï¼ˆä¹Ÿè¢«ç§°ä½œé¢å…·ï¼‰æ˜¯ä¸€å¥—å¼€æ”¾æºä»£ç çš„Androidï¼ˆ5.0ä»¥ä¸Šç‰ˆæœ¬ï¼‰è‡ªå®šä¹‰å·¥å…·å¥—ç»„ï¼Œå†…ç½®äº†Magisk Managerï¼ˆå›¾å½¢åŒ–ç®¡ç†ç•Œé¢ï¼‰ã€Rootã€å¯åŠ¨è„šæœ¬ã€SElinuxè¡¥ä¸å’Œå¯åŠ¨æ—¶è®¤è¯/dm-verity/å¼ºåˆ¶åŠ å¯†ç§»é™¤åŠŸèƒ½.\nç®€è€Œè¨€ä¹‹, è¿™ç©æ„å„¿å¯ä»¥ç”¨æ¥æ‹¿ Root æƒé™, è€Œä¸”æ“ä½œæ­¥éª¤æå…¶ç®€å•.\nä¸‹è½½ Magisk çš„å®‰è£…åŒ… (æ˜¯ä¸€ä¸ª apk æ–‡ä»¶) å°† apk æ–‡ä»¶å¤åˆ¶å‡ºæ¥ä¸€ä»½, åç¼€æ”¹ä¸º zip æ‰‹æœºè¿›å…¥ Recovery, å¹¶å‡†å¤‡ sideload ç”µè„‘æ‰§è¡Œ adb sideload magisk.zip æ²¡é”™, Magisk çš„åˆ·å…¥, å’Œåˆ·å…¥ç³»ç»Ÿä¸€æ ·, éƒ½æ˜¯é€šè¿‡ä¾§åŠ è½½è¿›è¡Œçš„. (æ³¨æ„, ä¸éœ€è¦æ¸…é™¤æ•°æ®)\næ“ä½œå®Œæ¯•å¹¶é‡å¯å, ä½ çš„æ‰‹æœºä¸Šå°±ä¼šå¤šä¸€ä¸ªå›¾æ ‡å¾ˆå¥‡æ€ªçš„ Magisk è½¯ä»¶, ç‚¹å‡»å®ƒ, å®ƒä¼šæç¤ºä½  \u0026ldquo;å®‰è£…å®Œæ•´ Magisk\u0026rdquo; å•¥çš„, ä¸‹ä¸€æ­¥å°±æ˜¯ç›´æ¥åœ¨æ‰‹æœºä¸Šå®‰è£… Magisk è¿™ä¸ªè½¯ä»¶äº†, ä½ å¯ä»¥ç›´æ¥æ‹¿åˆšåˆšçš„å®‰è£…åŒ…ç”¨æ¥å®‰è£…, å½“ç„¶æ›´ç®€å•çš„æ–¹å¼æ˜¯:\nç”µè„‘æ‰§è¡Œ adb install magisk.apk, ç„¶åæ‰‹æœºå°±ç›´æ¥è£…ä¸Š Magisk è½¯ä»¶äº†. åœ¨ä»¥ä¸Šæ­¥éª¤å®Œæˆä¹‹å, ä½ çš„æ‰‹æœºå°±æˆåŠŸ Root äº†, åˆ«çš„è½¯ä»¶å¯ä»¥è¯·æ±‚ Root æƒé™, è€Œä½ éœ€è¦çš„åªæ˜¯åœ¨ Magisk å†…åŒæ„æˆ–è€…æ‹’ç»å³å¯.\n9008 è¿™ä¸œè¥¿æ˜¯ä»…éªé¾™å¤„ç†å™¨æ”¯æŒçš„åˆ·æœºæ–¹å¼, é€šè¿‡çŸ­æ¥ä¸»æ¿ä¸Šçš„æŒ‡å®šè§¦ç‚¹æˆ–è€…é€šè¿‡å¥‡å¦™çš„æ·±åº¦åˆ·æœºçº¿çŸ­æ¥ä¸¤æ ¹çº¿æ¥è¿›å…¥å¯¹åº”æ¨¡å¼\nå› ä¸ºæˆ‘è¿˜æ²¡é€è¿‡è¿™ä¸ªæ–¹å¼(æˆ‘æ‰‹æœºçº¢ç±³ Note 8 Pro, æ˜¯è”å‘ç§‘çš„å¤„ç†å™¨), æ‰€ä»¥è¿™é‡Œå°±ä¸è®²äº†, ç½‘ä¸Šå·²ç»æœ‰å®Œå–„çš„æ•™ç¨‹äº†.\nç»•è¿‡ FRP å¦‚æœä½ åˆ·å…¥çš„æ˜¯å›½é™…ç‰ˆçš„æ‰‹æœºç³»ç»Ÿ, å¹¶ä¸”å®ƒéœ€è¦è°·æ­ŒéªŒè¯, ä¾‹å¦‚ Pixel Experience è¿™ç§ç±»åŸç”Ÿç³»ç»Ÿ, ä½ å¯èƒ½ä¼šé‡åˆ°æ— æ³•éªŒè¯çš„é—®é¢˜. æ¯•ç«Ÿå›½å†…æ— æ³•æ­£å¸¸è®¿é—®è°·æ­Œçš„æœåŠ¡.\nè¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºåœ¨ä¹‹å‰çš„æ—§ç³»ç»Ÿä¸­, æœ‰ç™»é™†è°·æ­Œè´¦æˆ·, å¹¶ä¸”åœ¨åˆ·æœºå‰æ²¡æœ‰æ¸…é™¤è¿™ä¸ªæ•°æ®. ä¸‹é¢ç»™å‡ºå‚è€ƒçš„è§£å†³æ–¹æ¡ˆ:\næ‰‹æœºè¿æ¥ç”µè„‘ WiFi å¹¶ä½¿ç”¨ç”µè„‘ä¸Šçš„ä»£ç†. (ç§‘å­¦ä¸Šç½‘) ç›´æ¥æ¸…ç©º FRP æ•°æ®, åªéœ€è¦ä½¿ç”¨ adb, æ‰§è¡Œ adb shell è¿›å…¥æ‰‹æœºå‘½ä»¤è¡Œ, æ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤: 1 2 dd if=/dev/zero of=/dev/block/bootdevice/by-name/frp dd if=/dev/zero of=/dev/block/bootdevice/by-name/config åœ¨è°·æ­Œè´¦æˆ·ç®¡ç†ä¸­, æ‰¾åˆ°è‡ªå·±ç™»é™†è¿‡è°·æ­Œè´¦æˆ·çš„è®¾å¤‡(å½“å‰æ‰‹æœº), ç„¶åé€€å‡ºè´¦æˆ·. ä»¥ä¸Šæ–¹æ¡ˆä»»æ„ä¸€ä¸ªéƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨, ä½†æ˜¯ä¸ä¿è¯æ‰€æœ‰æ‰‹æœºéƒ½å¯ä»¥ç»•è¿‡. ä¾‹å¦‚æˆ‘å®æµ‹ç¬¬ä¸‰ä¸ªæ–¹æ¡ˆæ˜¯ä¸èƒ½ç”¨çš„, ç¬¬äºŒä¸ªæ–¹æ¡ˆå¯ä»¥ç›´æ¥ä½¿ç”¨, ä½†æ˜¯æœ‰äº›åˆ«çš„ç”¨æˆ·ååº”, åœ¨ Android 13 ä¸Šéœ€è¦ä½¿ç”¨æ–¹æ¡ˆä¸‰æ¥è§£å†³. æ–¹æ¡ˆä¸€åœ¨æˆ‘è¿™é‡Œä¹Ÿæ²¡æœ‰é€šè¿‡æµ‹è¯•, ä½†æ˜¯ç†è®ºä¸Šè¿™ä¸ªæ˜¯å®Œå…¨å¯ä»¥ä½¿ç”¨çš„\nå¦‚æœåœ¨æ‰§è¡Œ dd if=/dev/zero of=/dev/block/bootdevice/by-name/frp æ—¶æ‰§è¡Œå¤±è´¥, å¯ä»¥åŠ ä¸Šé¢å¤–çš„å‚æ•°, å¦‚ä¸‹: dd if=/dev/zero of=/dev/block/bootdevice/by-name/frp bs=512 count=1024\næ€»ç»“ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 flowchat st=\u0026gt;start: å¼€å§‹ e=\u0026gt;end: ç»“æŸ bl=\u0026gt;operation: è§£ BL é” blok=\u0026gt;condition: æˆåŠŸ? ready=\u0026gt;operation: å‡†å¤‡å·¥ä½œ(ä¸‹è½½æ‰€éœ€ TWRP å’Œåˆ·æœºåŒ…) twrp=\u0026gt;operation: åˆ·å…¥ TWRP wipe=\u0026gt;operation: æ¸…é™¤æ‰‹æœºæ•°æ® sideload=\u0026gt;operation: é€šè¿‡ä¾§åŠ è½½åˆ·å…¥åˆ·æœºåŒ… hasbl=\u0026gt;condition: æ‰‹æœºæœ‰ BL é”? st-\u0026gt;hasbl hasbl(yes)-\u0026gt;bl-\u0026gt;blok hasbl(no)-\u0026gt;ready blok(yes)-\u0026gt;ready blok(no)-\u0026gt;bl ready-\u0026gt;twrp-\u0026gt;wipe-\u0026gt;sideload-\u0026gt;e ","date":"2022-10-22T10:43:02+08:00","permalink":"https://slimenull.com/p/20221022104302/","title":"[å…¨è§£] åˆ·æœº, BL é”, Bootloader, Recovery, Magisk, Root, ADB, çº¿åˆ·, å¡åˆ·, 9008, ç»•è¿‡ FRP"},{"content":"QQ é¢‘é“è¢« QQ å¼ºåˆ¶æ†ç»‘, å¾ˆå¤šäººç”¨ä¸åˆ°, è€Œä¸”è¿˜ä¸èƒ½å®Œå…¨å…æ‰“æ‰°, ç‚¹å‡»æ¶ˆæ¯çš„æ—¶å€™, QQ é¢‘é“å°±ä¼šè·³å‡ºæ¥, éå¸¸çš„çƒ¦äºº.\næ­¥éª¤ å…³é—­æ‰ QQ. ç„¶åæ‰¾åˆ° QQ é¢‘é“çš„æœ¬ä½“ç›®å½•:\nä½¿ç”¨ %LOCALAPPDATA%\\Tencent å¯ä»¥å¿«é€Ÿè·³è½¬åˆ°è¿™é‡Œ\næ‰“å¼€æ–‡ä»¶å¤¹å±æ€§, è½¬åˆ° \u0026ldquo;å®‰å…¨\u0026rdquo; é€‰é¡¹å¡, ç„¶åç‚¹å‡» \u0026ldquo;é«˜çº§\u0026rdquo;\nç¦ç”¨æ‰ç»§æ‰¿, åˆ æ‰æ‰€æœ‰ç”¨æˆ·çš„æƒé™, é‡æ–°æ·»åŠ å½“å‰ç”¨æˆ·çš„æƒé™, ç‚¹å‡»å±•ç¤ºé«˜çº§æƒé™, ç„¶åæŒ‡å®šä»¥ä¸‹æƒé™(å¤§éƒ¨åˆ†éƒ½å…è®¸, ä½†æ˜¯ä¸å…è®¸æ‰§è¡Œæ–‡ä»¶):\nç„¶åæµ‹è¯•QQé¢‘é“æœ¬ä½“æ‰“å¼€æ—¶æ˜¯å¦èƒ½å¤Ÿæ‰§è¡Œ, å¦‚æœæƒé™è®¾ç½®æ­£ç¡®, åˆ™ä¼šæ˜¾ç¤ºä»¥ä¸‹æŠ¥é”™:\næ³¨: ç¦ç”¨ç»§æ‰¿æ˜¯ä¸ºäº†æ˜¯ QQGuild ç›®å½•ä¸‹ç›´æ¥ç»§æ‰¿ QQGuild çš„æƒé™, å› ä¸ºé»˜è®¤ QQGuild ç»§æ‰¿è‡ªä¸Šå±‚çš„ç›®å½• ç„¶åä¸º QQGuild è®¾ç½®å®ƒè‡ªå·±çš„æƒé™, äºæ˜¯ QQGuild ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶éƒ½ç»§æ‰¿äº†æˆ‘ä»¬è®¾ç½®çš„æƒé™\næœ€å, å¯åŠ¨ QQ, ä½ ä¼šå‘ç°, çƒ¦äººçš„ QQ é¢‘é“æœ¨æœ‰äº†~\nå¦å¤– ç½‘ä¸Šä¹Ÿæœ‰å…¶ä»–çš„è§£å†³æ–¹æ¡ˆ, å°±æ˜¯ç›´æ¥åˆ æ‰ QQGuild ç›®å½•, ä½†æ˜¯æˆªæ­¢åˆ° 2022/10/17 æ—¥, å·²ç»ä¸èƒ½ä½¿ç”¨. (è§†é¢‘é“¾æ¥ https://www.bilibili.com/video/av683996745/)\nå¦‚æœä¸ç»™æ–‡ä»¶è¯»å–å†™å…¥çš„æƒé™, QQ è¿˜ä¼šè¯†åˆ«ä¸å‡ºæ¥è¿™ä¸ªç¨‹åº, ç„¶ååˆä¼š \u0026ldquo;å°è¯•ä¸‹è½½å®‰è£…\u0026rdquo; åªä¸è¿‡æ–‡ä»¶å·²å­˜åœ¨å¹¶ä¸”æ— æ³•å†™å…¥, æ‰€ä»¥å®ƒæœ€ç»ˆä¸ä¼šåšåˆ°ä»€ä¹ˆæ“ä½œ, ä½†æ˜¯æ¯ä¸€æ¬¡å¯åŠ¨ QQ éƒ½ä¼šä¸‹è½½, å ç”¨ç½‘ç»œ, çƒ¦äºº, æ‰€ä»¥éœ€è¦ç»™ QQGuild å†™å…¥, è¯»å–, ä»¥åŠåˆ—ä¸¾æ–‡ä»¶å¤¹çš„æƒé™.\n","date":"2022-10-17T10:46:08+08:00","permalink":"https://slimenull.com/p/20221017104608/","title":"å¦‚ä½•å…³æ‰ PC QQ çƒ¦äººçš„ QQ é¢‘é“"},{"content":"ç›¸å…³çš„æŠ¥é”™ä¿¡æ¯: XMLHttpRequest is not defined at chrome-extension:\nåŸå›  æ˜¾ç„¶, Service Worker ä¸æ”¯æŒ XMLHttpRequest\nè§£å†³æ–¹æ¡ˆ ç”¨ fetch\nç›¸å…³èµ„æ–™ é€šè¿‡ fetch ä¸Šä¼  JSON æ•°æ®\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 const data = { username: \u0026#39;example\u0026#39; }; // å®šä¹‰æ•°æ® fetch(\u0026#39;https://example.com/profile\u0026#39;, { method: \u0026#39;POST\u0026#39;, // or \u0026#39;PUT\u0026#39; // æŒ‡å®šè¯·æ±‚æ–¹æ³• headers: { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39;, // æŒ‡å®šå†…å®¹ç±»å‹ }, body: JSON.stringify(data), // ä¼ å…¥å†…å®¹ }) .then((response) =\u0026gt; response.json()) // å–å“åº” json .then((data) =\u0026gt; { // å¯¹è§£æå®Œæˆçš„ json è¿›è¡Œæ“ä½œ console.log(\u0026#39;Success:\u0026#39;, data); }) .catch((error) =\u0026gt; { // æ•æ‰é”™è¯¯ console.error(\u0026#39;Error:\u0026#39;, error); }); æˆ–è€…æœ€ç®€å•çš„, ä»…ä»…ä¸Šä¼ , ä¸è€ƒè™‘å“åº”ä¸å¼‚å¸¸æƒ…å†µ\n1 2 3 4 5 6 7 8 9 const data = { username: \u0026#39;example\u0026#39; }; // å®šä¹‰æ•°æ® fetch(\u0026#39;https://example.com/profile\u0026#39;, { method: \u0026#39;POST\u0026#39;, // or \u0026#39;PUT\u0026#39; // æŒ‡å®šè¯·æ±‚æ–¹æ³• headers: { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39;, // æŒ‡å®šå†…å®¹ç±»å‹ }, body: JSON.stringify(data), // ä¼ å…¥å†…å®¹ }); ","date":"2022-10-15T11:17:04+08:00","permalink":"https://slimenull.com/p/20221015111704/","title":"Chrome æ‹“å±•å¼€å‘ Service Worker æ— æ³•ä½¿ç”¨ XMLHttpRequest å‘é€ HTTP è¯·æ±‚"},{"content":"é€šè¿‡ä»¥ä¸‹ä»£ç å‘å½“å‰é¡µé¢å‘é€ \u0026ldquo;start\u0026rdquo; æ¶ˆæ¯: 1 2 3 4 chrome.tabs.query({active: true,currentWindow: true}, tabs =\u0026gt; { let tab = tabs[0]; chrome.tabs.sendMessage(tab.id, \u0026#34;start\u0026#34;); }); æŠ¥é”™: 1 Uncaught (in promise) Error: Could not establish connection. Receiving end does not exist. å¯èƒ½çš„åŸå› : æ¥æ”¶ç«¯, ä¹Ÿå°±æ˜¯è¯´ç›®æ ‡é¡µé¢å¿…é¡»æœ‰ chrome.runtime.onMessage ç›‘å¬æ¶ˆæ¯, å¦‚æœ \u0026ldquo;content-script\u0026rdquo; æ²¡æœ‰æ³¨å…¥åˆ°é¡µé¢ä¸­, é‚£ä¹ˆè¿™ä¸ªé¡µé¢å°±æ— æ³•æ¥æ”¶æ¶ˆæ¯\nå¦‚æœä½ çš„æ’ä»¶åˆšåˆšåŠ è½½, å¹¶ä¸”åœ¨ä¸€ä¸ªå·²ç»åŠ è½½å®Œæ¯•çš„é¡µé¢ä¸­ä½¿ç”¨å®ƒ, åˆ™ä¼šå‡ºè¿™ä¸ªé—®é¢˜.\nå› ä¸ºè¿™ä¸ªé¡µé¢å·²ç»åŠ è½½å®Œäº†, å®ƒå¹¶æ²¡æœ‰è¢«æ³¨å…¥è„šæœ¬, ä½ éœ€è¦åˆ·æ–°é¡µé¢, ä½¿è„šæœ¬æ³¨å…¥åˆ°é¡µé¢ä¸­, ç„¶åæ‰å¯ä»¥å‘é€æ¶ˆæ¯\nå¹³å°ä¸å…è®¸æ–‡ç« å†…å®¹å¤ªå°‘, ä¸‹é¢æ˜¯æ°´ sendMessage chrome.tabs.sendMessage(integer tabId, any message, function responseCallback) å‘æŒ‡å®šæ ‡ç­¾é¡µä¸­çš„å†…å®¹è„šæœ¬å‘é€ä¸€ä¸ªæ¶ˆæ¯ï¼Œå½“å‘å›å“åº”æ—¶æ‰§è¡Œä¸€ä¸ªå¯é€‰çš„å›è°ƒå‡½æ•°ã€‚å½“å‰æ‰©å±•ç¨‹åºåœ¨æŒ‡å®šæ ‡ç­¾é¡µä¸­çš„æ¯ä¸€ä¸ªå†…å®¹è„šæœ¬éƒ½ä¼šæ”¶åˆ° runtime.onMessage äº‹ä»¶ã€‚\nå‚æ•° ç±»å‹ tabId integer message any responseCallback optional function å¦‚æœæ‚¨æŒ‡å®šäº† responseCallback å‚æ•°ï¼Œå®ƒåº”è¯¥æŒ‡å®šä¸€ä¸ªå¦‚ä¸‹å½¢å¼çš„å‡½æ•°ï¼š\nfunction(any response) {\u0026hellip;}; response ( any ) è¯·æ±‚å¤„ç†ç¨‹åºå‘å‡ºçš„ JSON å“åº”å¯¹è±¡ã€‚å¦‚æœè¿æ¥åˆ°æŒ‡å®šæ ‡ç­¾é¡µçš„è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œå°†ä¸ä¼ é€’å‚æ•°è°ƒç”¨å›è°ƒå‡½æ•°ï¼Œå¹¶å°† runtime.lastError è®¾ç½®ä¸ºé”™è¯¯æ¶ˆæ¯ã€‚\n","date":"2022-10-14T10:00:19+08:00","permalink":"https://slimenull.com/p/20221014100019/","title":"Google Chrome æ’ä»¶å¼€å‘: æ— æ³•å»ºç«‹è¿æ¥, æ¥æ”¶ç«¯ä¸å­˜åœ¨. Could not establish connection. Receiving end does not exist"},{"content":"ä½ çš„è§’è‰²åœ¨ç‰ˆæœ¬æ›´æ–°çš„æ¸¸æˆä¸­è¿è¡Œè¿‡, æ—§ç‰ˆæœ¬æ— æ³•æ‰“å¼€æ–°ç‰ˆæœ¬çš„è§’è‰². ä½ éœ€è¦ä½¿ç”¨æ–°ç‰ˆæœ¬æ¸¸æˆæ‰“å¼€å®ƒ\n","date":"2022-10-12T16:00:55+08:00","permalink":"https://slimenull.com/p/20221012160055/","title":"æ³°æ‹‰ç‘äºš æ¸¸æˆè§’è‰² Later version"},{"content":"GetRectFromCharacterIndex(int index) åªè¿”å›å­—ç¬¦å·¦è¾¹ç¼˜çš„ä¿¡æ¯, åŒ…å«ä½ç½®ä¸é«˜åº¦\n1 2 3 4 5 6 7 8 9 10 11 12 13 // // Summary: // è¿”å›æŒ‡å®šç´¢å¼•å¤„å­—ç¬¦å‰è¾¹ç¼˜çš„çŸ©å½¢ã€‚ // // Parameters: // charIndex: // è¦æ£€ç´¢å…¶çŸ©å½¢çš„å­—ç¬¦çš„ä»é›¶å¼€å§‹çš„å­—ç¬¦ç´¢å¼•ã€‚ // // Returns: // å­—ç¬¦å‰è¾¹ç¼˜å¤„æŒ‡å®šå­—ç¬¦å¤„çš„çŸ©å½¢ ç´¢å¼•ï¼Œæˆ– System.Windows.Rect.Emptyï¼ˆå¦‚æœæ— æ³•ç¡®å®šè¾¹ç•ŒçŸ©å½¢ï¼‰ // // public Rect GetRectFromCharacterIndex(int charIndex); å¦‚æœè¦è·å–æŸä¸ª index çš„å­—ç¬¦çš„ä½ç½®ä¸å¤§å°, å¯ä»¥é€šè¿‡ GetRectFromCharacterIndex çš„é‡è½½è·å–å­—ç¬¦å³è¾¹ç¼˜çš„ä¿¡æ¯, ç„¶åè®¡ç®—å®½åº¦\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 // // Summary: // è¿”å›å­—ç¬¦å‰ç¼˜æˆ–åè¾¹ç¼˜çš„çŸ©å½¢ æŒ‡å®šçš„ç´¢å¼•ã€‚ // // Parameters: // charIndex: // è¦æ£€ç´¢å…¶çŸ©å½¢çš„å­—ç¬¦çš„ä»é›¶å¼€å§‹çš„å­—ç¬¦ç´¢å¼•ã€‚ // // trailingEdge: // true ä»¥è·å¾—å­—ç¬¦çš„åè¾¹ç¼˜; false ä»¥è·å¾—å‰è¾¹ç¼˜çš„è§’è‰²ã€‚ // // Returns: // æŒ‡å®šå­—ç¬¦ç´¢å¼•å¤„å­—ç¬¦è¾¹è¾¹ç¼˜çš„çŸ©å½¢ï¼Œæˆ– System.Windows.Rect.Empty (å¦‚æœæ— æ³•ç¡®å®šè¾¹ç•ŒçŸ©å½¢) // // Exceptions: // T:System.ArgumentOutOfRangeException: // å­—ç¬¦ç´¢å¼•ä¸ºè´Ÿæ•°æˆ–å¤§äºå†…å®¹çš„é•¿åº¦ã€‚ public Rect GetRectFromCharacterIndex(int charIndex, bool trailingEdge); ","date":"2022-10-10T10:22:17+08:00","permalink":"https://slimenull.com/p/20221010102217/","title":"[ç¬”è®°] WPF TextBox GetRectFromCharacterIndex è¿”å› Width ä¸º 0"},{"content":"è¯¦ç»†çš„è®²è§£å…³äº Unity ä¸­ç¢°æ’çš„å„ç§ç»†èŠ‚, æ–‡ç« ä»¥ Unity2D ä¸ºä¸»è®²èµ·, å¹¶ä¸”é™„ä¸Šå…³äº Unity3D çš„ç›¸å…³ä»‹ç»\næ–‡ç« é•¿æœŸæ›´æ–°, ä¹Ÿæ¬¢è¿è¯„è®ºåŒºè¿›è¡Œçº æ­£æˆ–è¡¥å…… å¦å¤–, å¦‚æœä½ é‡åˆ°äº†ä¸€äº›é—®é¢˜, å»ºè®®çœ‹å®Œæ•´ç¯‡æ–‡ç« , åœ¨æœ«å°¾æœ‰ä¸€äº›å¸¸è§å°é—®é¢˜çš„æ ‡æ³¨\nç¢°æ’å™¨ / Collider ç¢°æ’å™¨æ˜¯æœ€åŸºæœ¬çš„ç”¨æ¥æ£€æµ‹ç¢°æ’çš„ç©æ„å„¿, ä¾‹å¦‚ä½ è¦åšç‰©ç†æ•ˆæœ, éœ€è¦ä¸€ä¸ªå¢™, ä¸€ä¸ªçƒæ‰”è¿‡å», å¢™æŒ¡ä½è¿™ä¸ªçƒ, è¿™ä¸ªè¿‡ç¨‹ä¸­å°±éœ€è¦åˆ¤æ–­å¢™ä¸çƒæ˜¯å¦ç¢°æ’\nç¢°æ’å™¨çš„ç±»å‹æœ‰å¾ˆå¤š, ä¾‹å¦‚ BoxCollider, CircleCollider ä»€ä¹ˆçš„, ä½†æ˜¯ç”¨é€”éƒ½ä¸€æ ·, åªä¸è¿‡æ£€æµ‹çš„èŒƒå›´å½¢çŠ¶ä¸ä¸€æ ·ç½¢äº†\nè§¦å‘å™¨ / Trigger ç¢°æ’å™¨ä¸­æœ‰ä¸€ä¸ª IsTrigger å±æ€§, å¯ä»¥è®¾å®šå½“å‰çš„ç¢°æ’å™¨æ˜¯å¦æ˜¯ \u0026ldquo;è§¦å‘å™¨\u0026rdquo;, å¦‚æœè®¾å®šäº† true, ä¹Ÿå°±æ˜¯å½“ä¸€ä¸ªç¢°æ’å™¨æ˜¯è§¦å‘å™¨æ—¶, é‚£ä¹ˆè¿™ä¸ªç‰©ä½“å°±ä¸å†å‚ä¸ä»»ä½•ç‰©ç†ç¢°æ’.\nä¾‹å¦‚, å¢™çš„ç¢°æ’å™¨è®¾ç½®äº† IsTrigger, é‚£ä¹ˆè¿™ä¸ªå¢™å°±ä¸èƒ½å†æŒ¡ä½ä¸€ä¸ªçƒ.\nè™½ç„¶è®¾ç½®äº†è§¦å‘å™¨çš„æ¸¸æˆç‰©ä½“ä¸å‚ä¸ç‰©ç†ç¢°æ’, ä½†æ˜¯å®ƒä»ç„¶æœ‰ç‰©ç†æ•ˆæœ, ä¾‹å¦‚ä½ å¯ä»¥è®¾ç½®ä»–çš„é€Ÿåº¦, é‡é‡, ä»€ä¹ˆçš„, è¿™äº›ä»ç„¶æ˜¯æœ‰æ•ˆçš„\nåˆšä½“ / RigidBody åˆšä½“æ˜¯ Unity ä¸­å®ç°ç‰©ç†æ•ˆæœçš„æœ€åŸºæœ¬ç»„ä»¶, ä¾‹å¦‚åŠ äº†åˆšä½“çš„æ¸¸æˆå¯¹è±¡å¯ä»¥å—é‡åŠ›å½±å“, ä¸¤ä¸ªåŠ äº†åˆšä½“çš„æ¸¸æˆå¯¹è±¡å†ç›¸æ’æ—¶, ä¼šåƒæ˜¾ç¤ºä¸€æ ·, \u0026ldquo;é˜»æ‹¦\u0026rdquo;, è€Œä¸æ˜¯ç©¿è¿‡å½¼æ­¤.\nåˆšä½“ä¾èµ–äºç¢°æ’å™¨, å½“ä½ æ·»åŠ åˆšä½“ç»„ä»¶çš„æ—¶å€™, ä»–ä¹Ÿä¼šé»˜è®¤æ·»åŠ ä¸€ä¸ªç¢°æ’å™¨, å¦‚æœä½ éœ€è¦åˆ«çš„ç¢°æ’å™¨, å¯ä»¥è‡ªå·±æ‰‹åŠ¨æ›´æ”¹\nåˆšä½“ä¸­æœ‰æœ€ä¸ºé‡è¦çš„ä¸€ä¸ªé€‰é¡¹ \u0026ldquo;Body Type\u0026rdquo;, å®ƒçš„å€¼å¯ä»¥æ˜¯ åŠ¨æ€çš„(Dynamic), è¿åŠ¨å­¦çš„(Kinematic), é™æ€çš„(Static)\nåœ¨ä¸‹é¢ä»‹ç»å„ç§ç±»å‹çš„åˆšä½“æ—¶, \u0026ldquo;æ˜¯å¦äº§ç”Ÿç¢°æ’\u0026quot;è¡¨ç¤ºæ˜¯å¦ä¼šè§¦å‘ \u0026ldquo;OnCollision\u0026rdquo; ç³»åˆ—çš„äº‹ä»¶. \u0026ldquo;å—å½±å“\u0026rdquo; æ ‡è¯†è¯¥åˆšä½“æ˜¯å¦ä¼šå—ç›®æ ‡åˆšä½“çš„åŠ›çš„å½±å“.\nä¾‹å¦‚, Dynamic ä¼šè¢« Kinematic åˆšä½“é˜»æ‹¦, Dynamic ä¹Ÿå¯ä»¥è¢« Kinematic æ’é£, ä½†æ˜¯ Kinematic ä¸ä¼šå— Dynamic åˆšä½“çš„å½±å“, æ‰€ä»¥ Kinematic ä¸å¯èƒ½è¢« Dynamic æ’é£\nå¦å¤–, å¦‚æœ A åˆšä½“ä¸ä¼šç©¿è¿‡ B åˆšä½“, é‚£ä¹ˆè¯´æ˜ B åˆšä½“å¯¹ A äº§ç”Ÿå½±å“, ä¹Ÿå°±æ˜¯è¯´, å½“ A åˆšä½“é™æ­¢æ—¶, B åˆšä½“ä»¥ä¸€å®šé€Ÿåº¦å†²å‘ A, é‚£ä¹ˆå¯èƒ½\nUnity 3D ä¸­æ²¡æœ‰ Static åˆšä½“.\nåŠ¨æ€çš„ / Dynamic å½“ä¸€ä¸ªåˆšä½“çš„ Body Type æ˜¯ Dynamic æ—¶, è¿™ä¸ªæ¸¸æˆå¯¹è±¡æ‹¥æœ‰å…¨éƒ¨çš„ç‰©ç†æ•ˆæœ, åŒ…æ‹¬é‡åŠ›, æ¸¸æˆå¯¹è±¡ä¹‹é—´çš„ä½œç”¨åŠ›. ä»–ä¼šä¸å…¶ä»–çš„æ‰€æœ‰åˆšä½“æœ‰ç‰©ç†ç¢°æ’æ•ˆæœ, å¹¶ä¸”èƒ½å¤Ÿä¸å…¶ä»–æ‰€æœ‰è§¦å‘ \u0026ldquo;OnCollision\u0026rdquo; ç³»åˆ—äº‹ä»¶.\nåœ¨å½“å‰æ¸¸æˆå¯¹è±¡ä¸ºåŠ¨æ€åˆšä½“æ—¶:\nå¦ä¸€å¯¹è±¡åˆšä½“ç±»å‹ æ˜¯å¦äº§ç”Ÿç¢°æ’ å—å½±å“ åŸå›  Dynamic O O åŠ¨æ€çš„åˆšä½“å—ä¸€åˆ‡åˆšä½“çš„å½±å“, å…·æœ‰æ‰€æœ‰ç‰©ç†ç‰¹æ€§ Kinematic O O åŒä¸Š Static O O åŒä¸Š åœ¨ Unity 3D ä¸­, ä¸€ä¸ªåˆšä½“çš„é»˜è®¤è¡Œä¸ºå°±æ˜¯ Dynamic\nè¿åŠ¨å­¦çš„ / Kinematic å½“ä¸€ä¸ªåˆšä½“çš„ Body Type æ˜¯ Kinematic æ—¶, è¿™ä¸ªæ¸¸æˆå¯¹è±¡ä»…æ‹¥æœ‰ä¸€éƒ¨åˆ†ç‰©ç†æ•ˆæœ, å¹¶ä¸”æ¶ˆè€—æ¯”åŠ¨æ€åˆšä½“æ›´å°‘çš„æ€§èƒ½.\nå®ƒä¸ä¼šå—é‡åŠ›æˆ–å…¶ä»–ä»»ä½•åŠ›å½±å“, ä½ å¯ä»¥ç†è§£ä¸ºå®ƒæ‹¥æœ‰æ— é™çš„è´¨é‡, å…¶ä»–ä»»ä½•æ¸¸æˆå¯¹è±¡æ’å‡»å®ƒçš„æ—¶å€™, éƒ½ä¸ä¼šåŠ¨æ‘‡ä»–çš„ä½ç½®.\nè€Œä¸”, ä¸ä¼šä¸å…¶ä»– Kinematic åˆšä½“äº§ç”Ÿç‰©ç†ç¢°æ’, å› ä¸º Kinematic æœ¬èº«å°±ä¸æ˜¯ä¸ºç¢°æ’è€Œè®¾è®¡çš„, å®ƒæ›´é€‚åˆåšå¢™æˆ–è€…éœ€è¦ç”¨è„šæœ¬æ‰‹åŠ¨æ“ä½œçš„æ¸¸æˆå¯¹è±¡, å½“ç„¶ä¹Ÿä¸ä¼šè§¦å‘ \u0026ldquo;OnCollision\u0026rdquo; ç³»åˆ—äº‹ä»¶.\nåœ¨å½“å‰æ¸¸æˆå¯¹è±¡ä¸ºè¿åŠ¨å­¦åˆšä½“æ—¶:\nå¦ä¸€å¯¹è±¡åˆšä½“ç±»å‹ æ˜¯å¦äº§ç”Ÿç¢°æ’ å—å½±å“ åŸå›  Dynamic X X Kinematic åªä¼šæ¨ªå†²ç›´æ’, é€Ÿåº¦, è§’åŠ¨é‡ä¸ä¼šå—ä»»ä½•å½±å“ (å‚è€ƒä¸‰ä½“ä¸­çš„æ°´æ»´) Kinematic O X åŒä¸Š Static O X åŒä¸Š åœ¨ Unity 3D ä¸­, å‹¾é€‰ IsKinematic é€‰é¡¹æ¥ä½¿å½“å‰åˆšä½“ä½œä¸ºè¿åŠ¨å­¦åˆšä½“\né™æ€çš„ / Static é™æ€çš„åˆšä½“ä¸åº”è¯¥è¢«ç§»åŠ¨, æˆ–è€…è¯´å®ƒçš„ç”¨é€”ä¹Ÿæ˜¯å¾ˆå°‘çš„, å› ä¸ºå®ƒåªä¼šä¸ Kinematic åˆšä½“äº§ç”Ÿç¢°æ’. åœ¨æ¸¸æˆä¸­, å®ƒåº”è¯¥ä½œä¸ºå¢™, æˆ–è€…åœ°é¢.\nåœ¨å½“å‰æ¸¸æˆå¯¹è±¡ä¸ºé™æ€åˆšä½“æ—¶:\nå¦ä¸€å¯¹è±¡åˆšä½“ç±»å‹ æ˜¯å¦äº§ç”Ÿç¢°æ’ å—å½±å“ åŸå›  Dynamic X X ä½ çš„å°ç¯®çƒè¿˜èƒ½æŠŠåœ°çƒæ’é£ä¸æˆ Kinematic O X Static åˆšä½“åªèƒ½ä¸ Dynamic 2D åˆšä½“ç¢°æ’ Static X X å› ä¸ºè¿™ç§åˆšä½“ä¸æ˜¯ä¸ºäº†ç§»åŠ¨è€Œè®¾è®¡çš„ ç¢°æ’äº‹ä»¶ / OnCollision ä¸¤ä¸ªåˆšä½“åœ¨ç¢°æ’çš„æ—¶å€™, å¯ä»¥äº§ç”Ÿç¢°æ’äº‹ä»¶, å…·ä½“å“ªäº›å¯¹è±¡å¯ä»¥äº§ç”Ÿç¢°æ’äº‹ä»¶, åœ¨ä¸Šé¢å·²ç»è¯´äº†.\néœ€è¦æ³¨æ„çš„æ˜¯, ä¸€æ—¦äº§ç”Ÿç¢°æ’äº‹ä»¶, åŒæ–¹éƒ½ä¼šè§¦å‘ OnCollision çš„ Unity æ¶ˆæ¯. è€Œä¸”æ‰€ä¼ å…¥çš„ Collision å‚æ•°ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„. ä½†æ˜¯æ— è®ºæ€æ ·, Collision çš„ collider å±æ€§éƒ½æ˜¯ä¸å½“å‰ç¢°æ’çš„ç¢°æ’ä½“å®ä¾‹ (otherCollider å±æ€§ä¸€èˆ¬å¾ˆå°‘ç”¨åˆ°)\nç¢°æ’äº‹ä»¶æœ‰ä¸‹é¢è¿™äº›\næ–¹æ³•å æè¿° OnCollisionEnter / OnCollisionEnter2D å½“è¯¥ç¢°æ’ä½“/åˆšä½“å·²å¼€å§‹æ¥è§¦å¦ä¸€ä¸ªåˆšä½“/ç¢°æ’ä½“æ—¶ï¼Œè°ƒç”¨ OnCollisionEnter OnCollisionStay / OnCollisionStay2D å¯¹äºæ¥è§¦å¦ä¸€ä¸ªç¢°æ’ä½“æˆ–åˆšä½“çš„æ¯ä¸ªç¢°æ’ä½“æˆ–åˆšä½“ï¼Œæ¯å¸§è°ƒç”¨ä¸€æ¬¡ OnCollisionStay OnCollisionExit / OnCollisionExit2D å½“è¯¥ç¢°æ’ä½“/åˆšä½“å·²åœæ­¢æ¥è§¦å¦ä¸€ä¸ªåˆšä½“/ç¢°æ’ä½“æ—¶ï¼Œè°ƒç”¨ OnCollisionExit è§¦å‘äº‹ä»¶ / OnTrigger ä½¿ç”¨è§¦å‘å™¨, å¹¶ä¸”è¦å¼•å‘è§¦å‘äº‹ä»¶, å¿…é¡»ä¿è¯: ä¸¤ä¸ªäº’ç›¸ç¢°æ’çš„ç‰©ä½“å‡åŒ…å«ç¢°æ’å™¨, å¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªç¢°æ’å™¨è®¾ç½®äº† IsTrigger ä¸º true, è‡³å°‘å…¶ä¸­ä¸€ä¸ªå¿…é¡»åŒ…å«éé™æ€(Static)åˆšä½“\nè§¦å‘äº‹ä»¶æœ‰ä¸‹é¢è¿™äº›\næ–¹æ³•å æè¿° ä½œè€…çš„å¤§ç™½è¯ OnTriggerEnter / OnTriggerEnter2D GameObject ä¸å¦ä¸€ä¸ª GameObject ç¢°æ’æ—¶ï¼ŒUnity ä¼šè°ƒç”¨ OnTriggerEnter ä¿©æ¸¸æˆå¯¹è±¡å¼€å§‹ç¢°æ’çš„æ—¶å€™è°ƒç”¨ OnTriggerStay / OnTriggerStay2D åœ¨å¦ä¸€ä¸ªå¯¹è±¡ä½äºé™„åŠ åˆ°è¯¥å¯¹è±¡çš„è§¦å‘å™¨ç¢°æ’ä½“ä¹‹å†…æ—¶, æ¯å¸§è°ƒç”¨ä¸€æ¬¡ åªè¦ä¿©ç¢°æ’ä½“è¿˜å¤„äºç¢°æ’çš„çŠ¶æ€, æ¯ä¸€å¸§å°±è°ƒç”¨ä¸€æ¬¡ OnTriggerExit / OnTriggerExit2D å½“å¦ä¸€ä¸ªå¯¹è±¡ç¦»å¼€é™„åŠ åˆ°å½“å‰å¯¹è±¡çš„è§¦å‘å™¨ç¢°æ’ä½“æ—¶è°ƒç”¨ ä¿©æ¸¸æˆå¯¹è±¡ä¸å†æ¿€æƒ…ç¢°æ’äº†å°±è°ƒç”¨ è‡³äºç½‘ä¸Šæ‰€è®²çš„, ä¸¤ç‰©ä½“éƒ½æœ‰ç¢°æ’å™¨, å¹¶ä¸”å…¶ä¸­ä¸€ä¸ªæ˜¯åˆšä½“, æ˜¯å› ä¸º Unity3D ä¸­æ²¡æœ‰é™æ€åˆšä½“, æ‰€ä»¥åªè¦æœ‰ä¸€ä¸ªåˆšä½“å°±èƒ½è§¦å‘. è€Œåœ¨ 2D ä¸­, é™æ€çš„åˆšä½“å¹¶ä¸ä¼šå¼•å‘è§¦å‘å™¨äº‹ä»¶.\næ ‡æ³¨ 3D çš„äº‹ä»¶ä¸ 2D çš„äº‹ä»¶æ˜¯ä¸èƒ½é€šç”¨çš„, å¦‚æœä½ æ˜¯ 2D æ¸¸æˆå¯¹è±¡, å¹¶ä¸”ä½¿ç”¨çš„ 2D ç¢°æ’å™¨ä¸åˆšä½“, é‚£ä¹ˆä½¿ç”¨ OnCollision å’Œ OnTrigger ä»€ä¹ˆçš„æ–¹æ³•æ—¶, å¿…é¡»ä½¿ç”¨å¸¦æœ‰ 2D åç¼€çš„æ–¹æ³• éœ€è¦æ³¨æ„çš„æ˜¯, ä¾‹å¦‚ä¸€ä¸ªåœ°é¢, åªæœ‰ä¸€ä¸ªç¢°æ’ä½“è€Œä¸åŒ…å«ä»»ä½•åˆšä½“, ä¸€ä¸ªå¸¦æœ‰ç¢°æ’ä½“å’Œåˆšä½“çš„æ¸¸æˆå¯¹è±¡å¯ä»¥ç«™ç«‹åœ¨è¿™ä¸ªåœ°é¢ä¸Š, å¹¶ä¸”èƒ½å¤Ÿæ­£å¸¸çš„è§¦å‘ç¢°æ’ç›¸å…³çš„äº‹ä»¶. å¦‚æœä½ åœ¨åšä¸€ä¸ªåœ°åˆºæ•ˆæœ, ç©å®¶ç«™ç«‹æ—¶ä¸æ–­å—åˆ°ä¼¤å®³, ä½†æ˜¯ OnTriggerStay å¯èƒ½ä¸ä¼šä¸€ç›´è§¦å‘, é»˜è®¤æ˜¯åœ¨ Enter çš„ 0.5s åå¯ä»¥æŒç»­è§¦å‘, ç„¶åè¿›å…¥ \u0026ldquo;Sleep\u0026rdquo; çŠ¶æ€, æ­¤æ—¶é™¤éç©å®¶ç§»åŠ¨, æ‰ä¼šå†æ¬¡è§¦å‘ TriggerStay çš„æ¶ˆæ¯. å¦‚æœä½ ä¸å¸Œæœ›å®ƒè¿›å…¥ç¡çœ çŠ¶æ€, é‚£ä¹ˆå°±æŠŠå¯¹åº”çš„åˆšä½“ä¸­, Sleep mode æ”¹ä¸º Never sleep. å¦‚æœä½ è¦å…¨å±€æ›´æ”¹è¿™ä¸ªæ—¶é—´, å¯ä»¥åœ¨ Project Settings ä¸­çš„ Physics2D ä¸­, å°† Time to Sleep æ”¹ä¸ºä½ æƒ³è¦çš„å€¼. å…³äºæ­¤æ–‡ç« ä»»ä½•é”™è¯¯ä¿¡æ¯æˆ–è€…æœ‰ä¸è¶³çš„åœ°æ–¹, æ¬¢è¿è¯„è®ºåŒºæŒ‡æ­£\n","date":"2022-09-27T14:51:27+08:00","permalink":"https://slimenull.com/p/20220927145127/","title":"[Unity] ç¢°æ’å™¨, è§¦å‘å™¨, åˆšä½“,Dynamic, Kinematic, Static, OnCollision, OnTrigger å…¨è®²"},{"content":"å¦‚æœä½ çš„ Unity è„šæœ¬æ˜¯è¿™ä¹ˆå†™çš„, é‚£ä¹ˆä½ éœ€è¦æ³¨æ„äº†\n1 2 3 4 5 6 7 8 9 10 using UnityEngine; public class MyScript : MonoBehaviour { SpriteRenderer spriteRenderer; void Start() { spriteRenderer = GetComponent\u0026lt;SpriteRenderer\u0026gt;(); } } Unity ç®¡çº¿ Unity ä¸æ˜¯å®Œå…¨æ¸²æŸ“å®Œ A ç„¶åå†å»æ¸²æŸ“ B çš„, è€Œæ˜¯å…ˆæ¸²æŸ“ A çš„ä¸€éƒ¨åˆ†, ç„¶åæ¸²æŸ“ B çš„ä¸€éƒ¨åˆ†, å†æ¸²æŸ“å…¶ä»–çš„ä¸€éƒ¨åˆ†.\nç„¶åå†æ¬¡æ¸²æŸ“ A çš„ä¸€éƒ¨åˆ†, æ¸²æŸ“ B çš„ä¸€éƒ¨åˆ†, æ¸²æŸ“å…¶ä»–çš„ä¸€éƒ¨åˆ†\næ¢åšè„šæœ¬, å‡è®¾æœ‰ ABC ä¸‰ä¸ªå¯¹è±¡, æ‰§è¡Œçš„é¡ºåºåº”è¯¥æ˜¯.\n1 2 3 4 5 6 7 8 9 10 11 A.Method1 B.Method1 C.Method1 A.Method2 B.Method2 C.Method2 A.Method3 B.Method3 C.Method3 Awake å’Œ Start Awake å’Œ Start å°±ç›¸å½“äºä¸Šé¢çš„ Method1, Method2, æ‰€æœ‰å¯¹è±¡çš„ Awake éƒ½è¢«è°ƒç”¨ä¸€éå, ç„¶åå†è°ƒç”¨æ‰€æœ‰å¯¹è±¡çš„ Start\nä¸åŒå¯¹è±¡é¡ºåº Unity æ˜¯å•çº¿ç¨‹, æ‰€ä»¥ ABC çš„ Method1 è¿™ç§, ä¹Ÿæ˜¯ä¾æ¬¡è°ƒç”¨çš„, ä¹Ÿå°±æ˜¯è¯´, A åœ¨è°ƒç”¨ Method1 çš„æ—¶å€™, B çš„ Method1 è¿˜æ²¡æœ‰è¢«è°ƒç”¨, åªèƒ½ A çš„æ‰§è¡Œå®Œä¹‹åè½®åˆ° B, ç„¶åè½®åˆ° C\næœªåˆå§‹åŒ–çš„å˜é‡ å¦‚æœä½ æŠŠä¸€äº›å˜é‡çš„åˆå§‹åŒ–æ”¾åœ¨ Start ä¸­, é‚£ä¹ˆåœ¨è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„ Start å‰, å®ƒçš„è¿™äº›å˜é‡, æ˜¯å®Œå…¨æ²¡æœ‰åˆå§‹åŒ–çš„, ä¸º null\nå¼•ç”¨æœªåˆå§‹åŒ–çš„å˜é‡ å¦‚æœä½ åœ¨æŸä¸ªå¯¹è±¡æ²¡æœ‰è°ƒç”¨ Start å‰, ä¹Ÿå°±æ˜¯å®ƒçš„å˜é‡æœªåˆå§‹åŒ–æ—¶, å°±è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„è„šæœ¬æš´éœ²å‡ºæ¥çš„ä¸€äº›å…¬å¼€æ–¹æ³•, ä¾‹å¦‚ä¾èµ–äº spriteRenderer çš„ \u0026ldquo;è§’è‰²å§¿æ€å˜æ¢\u0026rdquo;, é‚£ä¹ˆ, ç”±äº spriteRenderer æ²¡æœ‰åˆå§‹åŒ–, ä½ çš„ç¨‹åºå°±å¼•å‘ NullReferenceException äº†\nå‡è®¾ A çš„ Start ä¸­éœ€è¦è°ƒç”¨ B çš„ \u0026ldquo;MethodQwq\u0026rdquo;, åœ¨ B çš„ MethodQwq ä¸­, ç”¨åˆ°äº† B ç±»çš„å­—æ®µ \u0026ldquo;spriteRenderer\u0026rdquo;, ä½†æ˜¯, spriteRenderer æ˜¯åœ¨ B çš„ Start æ–¹æ³•ä¸­è¢«èµ‹å€¼çš„\nå½“ A Start æ‰§è¡Œæ—¶, æ­¤æ—¶ B çš„ Start è¿˜æ²¡æ‰§è¡Œ, B çš„ spriteRenderer ä¸º null\nA çš„ Start è°ƒç”¨ B çš„ MethodQwq, å› ä¸º spriteRenderer ä¸ºç©º, æ‰€ä»¥å¼•å‘äº† NullReferenceException\nè§£å†³æ–¹æ¡ˆ ç»Ÿä¸€åœ¨ Awake æ–¹æ³•ä¸­åšå˜é‡çš„åˆå§‹åŒ–, ç»Ÿä¸€åœ¨ Start ä¸­åšé€»è¾‘çš„å¼€å§‹æ‰§è¡Œ. è¿™æ ·åœ¨ Start è°ƒç”¨æ—¶, æ‰€æœ‰å¯¹è±¡çš„ Awake å·²ç»è°ƒç”¨è¿‡, å˜é‡ä¹Ÿå…¨éƒ¨åˆå§‹åŒ–, æ‰€ä»¥ä¸ä¼šå¼•å‘ä¸Šè¿°é—®é¢˜\n","date":"2022-09-27T14:16:18+08:00","permalink":"https://slimenull.com/p/20220927141618/","title":"[Unity] Awake ä¸ Start çš„ä½¿ç”¨, ä¸ºä»€ä¹ˆå°† GetComponent é€»è¾‘æ”¾åˆ° Awake ä¸­"},{"content":"åœ¨ System.Text.Json ä¸­ä½¿ç”¨æ„é€ å‡½æ•°è¿›è¡Œååºåˆ—åŒ– æœ‰çš„æ—¶å€™, æˆ‘ä»¬å¸Œæœ›ä¸€äº›ç±»å‹åœ¨å®ä¾‹åŒ–ä¹‹å, å°±æ— æ³•æ›´æ”¹, ä¹Ÿå°±æ˜¯è¯´, å±æ€§åªè¯», ä½†æ˜¯å¦‚æœè¿™æ ·, System.Text.Json å°±æ— æ³•å¯¹å±æ€§è¿›è¡Œèµ‹å€¼, å¯ä»¥è¿™æ ·:\n1 2 3 4 5 class UserModel { public static string Username { get; set; } public static string Password { get; set; } } æ”¹ä¸º:\n1 2 3 4 5 6 7 8 9 10 11 class UserModel { public UserModel(string username, string password) { Username = username; Password = password; } public static string Username { get; } public static string Password { get; } } è¿™é‡Œ, æˆ‘ä»¬æš´éœ²äº†ä¸€ä¸ªå…¬å…±çš„æ„é€ å‡½æ•°, ä¼ å…¥ username ä¸ password, å¹¶å¯¹åªè¯»å±æ€§è¿›è¡Œåˆå§‹åŒ–. è¿™é‡Œ, æ„é€ å‡½æ•°çš„å‚æ•°åå’Œå±æ€§åå¿…é¡»æ˜¯ä¸€ä¸€å¯¹åº”çš„, å…è®¸å¤§å°å†™ä¸åŒ.\néœ€è¦æ³¨æ„çš„æ˜¯, å¦‚æœä½ ä½¿ç”¨ JsonPropertyName å¯¹ JSON å±æ€§è¿›è¡Œé‡å‘½å, ä½ ä¹Ÿå¿…é¡»ä¿è¯æ„é€ å‡½æ•°å‚æ•°åå’Œå±æ€§åä¸€è‡´, å¦åˆ™ System.Text.Json å°†æ— æ³•è¿›è¡Œååºåˆ—åŒ–. ç¤ºä¾‹:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 class UserModel { public UserModel(string username, string password) { Username = username; Password = password; } [JsonPropertyName(\u0026#34;user\u0026#34;)] public static string Username { get; } [JsonPropertyName(\u0026#34;pwd\u0026#34;)] public static string Password { get; } } å¦å¤–, å¦‚æœä½ çš„å±æ€§ç±»å‹å’Œå‚æ•°ç±»å‹ä¸ä¸€è‡´, ä¾‹å¦‚æ„é€ å‡½æ•°è¦æ±‚ä¼ å…¥ string, è€Œå±æ€§æ˜¯ Uri çš„æ—¶å€™, ä¹Ÿæ˜¯ä¸å…è®¸çš„, System.Text.Json æ— æ³•è¯†åˆ«å®ƒ. ç¤ºä¾‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 class UserModel { public UserModel(string username, string password, string address) { Username = username; Password = password; Address = new Uri(address); } [JsonPropertyName(\u0026#34;user\u0026#34;)] public static string Username { get; } [JsonPropertyName(\u0026#34;pwd\u0026#34;)] public static string Password { get; } // è¿™é‡Œä¸æ„é€ å‡½æ•°ä¸åŒ, æ­¤ç±»å‹æ— æ³•æ­£å¸¸ååºåˆ—åŒ– [JsonPropertyName(\u0026#34;addr\u0026#34;)] public static Uri Address { get; } } ","date":"2022-09-14T13:11:37+08:00","permalink":"https://slimenull.com/p/20220914131137/","title":"åœ¨ System.Text.Json ä¸­ä½¿ç”¨æ„é€ å‡½æ•°è¿›è¡Œååºåˆ—åŒ–"},{"content":"UA æ ‡è¯† QQ:\nMozilla/5.0 (Linux; Android 11; Redmi Note 8 Pro Build/RP1A.200720.011; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/89.0.4389.72 MQQBrowser/6.2 TBS/045913 Mobile Safari/537.36 V1_AND_SQ_8.8.68_2538_YYB_D A_8086800 QQ/8.8.68.7265 NetType/WIFI WebP/0.3.0 Pixel/1080 StatusBarHeight/76 SimpleUISwitch/1 QQTheme/2971 InMagicWin/0 StudyMode/0 CurrentMode/1 CurrentFontScale/1.0 GlobalDensityScale/0.9818182 AppId/537112567 Edg/98.0.4758.102\nå¾®ä¿¡:\n[Mozilla/5.0 (Linux; Android 11; Redmi Note 8 Pro Build/RP1A.200720.011; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/86.0.4240.99 XWEB/3185 MMWEBSDK/20211001 Mobile Safari/537.36 MMWEBID/6210 MicroMessenger/8.0.16.2040(0x2800105F) Process/toolsmp WeChat/arm64 Weixin NetType/WIFI Language/zh_CN ABI/arm64] Edg/98.0.4758.102\nè·å– ä»¥ä¸Šä¿¡æ¯æ˜¯åœ¨ 2022 å¹´ 3 æœˆè·å–çš„, å¦‚æœè½¯ä»¶å‡çº§äº†ç‰ˆæœ¬, UA å˜æ›´å¯¼è‡´è¿™äº›ä¿¡å¿ƒä¸å†æœ‰æ•ˆ, ä½ å¯ä»¥æ‰‹åŠ¨è·å–è¿™äº›ä¿¡æ¯\nä½¿ç”¨ golang ç¼–å†™ä¸€ä¸ªç®€å•çš„æœåŠ¡ç«¯ç¨‹åº, ç›‘å¬ 8000 ç«¯å£, ç„¶åæŠŠ headers å’Œ cookies å…¨éƒ¨æ‰“å°å‡ºæ¥.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 package main import ( \u0026#34;fmt\u0026#34; \u0026#34;net/http\u0026#34; ) func main() { http.HandleFunc(\u0026#34;/\u0026#34;, func(writer http.ResponseWriter, request *http.Request) { writer.Write([]byte(\u0026#34;========== Headers ==========\\n\u0026#34;)) for k, v := range request.Header { writer.Write([]byte(fmt.Sprintf(\u0026#34;%s: %s;\\n\u0026#34;, k, v))) } writer.Write([]byte(\u0026#34;========== Cookies ==========\\n\u0026#34;)) for _, v := range request.Cookies() { writer.Write([]byte(fmt.Sprintf(\u0026#34;%s - %s: %s;\\n\u0026#34;, v.Domain, v.Name, v.Value))) } }) http.ListenAndServe(\u0026#34;:8000\u0026#34;, nil) } æ‰‹æœºè¿æ¥åˆ°ç”µè„‘æ‰€åœ¨å±€åŸŸç½‘, ç„¶åä½¿ç”¨QQå¾®ä¿¡è®¿é—®ç”µè„‘çš„ 8000 ç«¯å£å³å¯çœ‹åˆ° Headers å’Œ Cookies äº†.\n","date":"2022-03-01T17:43:03+08:00","permalink":"https://slimenull.com/p/20220301174303/","title":"2022å¹´QQå¾®ä¿¡å†…ç½®æµè§ˆå™¨ UA æ ‡è¯†, Header è·å–"},{"content":" ä»€ä¹ˆæ˜¯ DBNull é—®é¢˜ æŒ‡ä»æ•°æ®åº“å–å‡ºæ•°æ®æ—¶, æ•°æ®ä¸ºç©º, è¡¨ç°ä¸º DBNull æ— æ³•è½¬æ¢ä¸ºå…¶ä»–ç±»å‹ å¼‚å¸¸ç¤ºä¾‹: 1 2 // reader ä¸º DbDataReader DateTime dt = reader.GetDateTime(0); // åœ¨è¿™é‡Œå¦‚æœæ•°æ®ä¸ºç©º, åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ æ™®é€šçš„è§£å†³æ–¹å¼: 1 DateTime dt = reader.IsDBNull(0) ? default(DateTime) : reader.GetDateTime(0); ä¼˜é›…è€Œåˆç‰›å•¤çš„è§£å†³æ–¹å¼: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 // æ–°å»ºä¸€ä¸ªæ–‡ä»¶, å†™å…¥ä»¥ä¸‹å†…å®¹ using System; using System.Collections.Generic; using System.Linq; using System.Threading.Tasks; namespace NullLib.DbHelper { public static class DbExt { public static T Cast\u0026lt;T\u0026gt;(this object obj) // ä½¿ç”¨ default é»˜è®¤å€¼ { if (obj is T rst) return rst; return default; } public static T Cast\u0026lt;T\u0026gt;(this object obj, T dft) // ç”¨æˆ·æŒ‡å®šé»˜è®¤å€¼ { if (obj is T rst) return rst; return dft; } public static object CastDb(this object obj) // å°†CLRå¯¹è±¡è½¬æ¢ä¸ºæ•°æ®åº“ç±»å‹ { if (obj is null) return DBNull.Value; return obj; } } } ç„¶ååœ¨å–å€¼çš„æ—¶å€™è¿™æ ·åš: 1 DateTime dt = reader[0].Cast\u0026lt;DateTime\u0026gt;(); // å¦‚æœå–å€¼å¤±è´¥åˆ™ä¼šè¿”å› default(DateTime) ","date":"2021-07-14T23:38:02+08:00","permalink":"https://slimenull.com/p/20210714233802/","title":"[C#] å¦‚ä½•ä¼˜é›…çš„è§£å†³ DBNull é—®é¢˜"},{"content":"NullLib.TickAnimation ç”¨äºå®ç°å¯¹ä¸€ä¸ªå¯¹è±¡çš„å±æ€§(Property), ä»¥æŒ‡å®šçš„è®¡æ—¶å‡½æ•°, åœ¨ä¸€å®šæ—¶é—´å†…ä»ä¸€ä¸ªå€¼, å¹³æ»‘çš„è¿‡æ¸¡åˆ°å¦ä¸€ä¸ªå€¼. NullLib.TickAnimation.Drawing åŸºäº NullLib.TickAnimation, å¹¶æä¾›äº†å…³äºç»˜ç”»ç±»å‹çš„è¿‡æ¸¡åŠ¨ç”», ä¾‹å¦‚ ç‚¹, å°ºå¯¸, çŸ©å½¢åŒºåŸŸ, é¢œè‰²\nä¾‹å¦‚ä½ å¯ä»¥ä½¿ç”¨å®ƒå°†ä¸€ä¸ª WinForm çª—ä½“çš„ Bounds ä»ä¸€ä¸ªå€¼è¿‡æ¸¡åˆ°å¦ä¸€ä¸ªå€¼ä»¥å®ç°çª—ä½“ä½ç½®ä¸å°ºå¯¸çš„è¿‡æ¸¡åŠ¨ç”». ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•ç¤ºä¾‹:\nå¿«é€Ÿå¼€å§‹ é¦–å…ˆ, åˆ›å»ºä¸€ä¸ª WinForm é¡¹ç›®ç”¨äºæµ‹è¯•, å‘ä¸»çª—ä½“ä¸­æ·»åŠ ä¸€ä¸ªæŒ‰é’®, å¹¶ä¸ºæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶æ·»åŠ äº‹ä»¶å¤„ç†å™¨\nåœ¨è§£å†³æ–¹æ¡ˆç®¡ç†å™¨ä¸­å³å‡»é¡¹ç›®, é€‰æ‹© \u0026ldquo;ç®¡ç† nuget ç¨‹åºåŒ…\u0026rdquo;, ç„¶åå®‰è£… NullLib.TickAnimation.Drawing (å®ƒä¼šè‡ªåŠ¨å®‰è£…ä¾èµ–é¡¹ NullLib.TickAnimation)\nè½¬åˆ°ä¸»çª—ä½“çš„ä»£ç , åœ¨ using éƒ¨åˆ†æ·»åŠ  using NullLib.TickAnimation, è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä½¿ç”¨å…³äºåŠ¨ç”»çš„ä¸€äº›ç±»äº†\nç¼–è¾‘åˆšåˆšæ·»åŠ çš„æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å¤„ç†å™¨ä»£ç , æ·»åŠ ä»¥ä¸‹å†…å®¹:\n1 2 3 4 5 Rectangle workingArea = Screen.PrimaryScreen.WorkingArea; // è·å–ä¸»å±å¹•çš„å·¥ä½œåŒºçŸ©å½¢ DrawingTickAnimator animator = new DrawingTickAnimator(new SineTicker(), this, nameof(Bounds)); // åˆ›å»ºåŠ¨ç”»æ§åˆ¶å™¨å®ä¾‹ animator.SetPropertySetter((setAction) =\u0026gt; Invoke(setAction)); // è§£å†³çª—ä½“ç¨‹åºçš„è·¨çº¿ç¨‹èµ„æºè®¿é—®é—®é¢˜ animator.SetTickDelay(1); // åœ¨æ¯ä¸€å¸§åè¿›è¡Œ 1ms çš„å»¶æ—¶ animator.Animate(workingArea, 200); // è¿›è¡ŒåŠ¨ç”», æ—¶é—´æ˜¯ 200ms è¿è¡Œç¨‹åº, ç‚¹å‡»æŒ‰é’®, æŸ¥çœ‹æ•ˆæœ\næœ¬åº“å·²åœ¨ GitHub å¼€æº, github.com/SlimeNull/NullLib.TickAnimation\nåŸºæœ¬åŸç† åœ¨ NullLib.TickAnimator ä¸­, ITickAnimator æ˜¯æœ€åŸºæœ¬çš„, ç”¨äºè¿è¡ŒåŠ¨ç”»çš„æ¥å£, å®ƒä¾èµ–äº ITicker æ¥æä¾›è®¡æ—¶å‡½æ•°, ITIcker å¯è¡¨ç¤ºè¿åŠ¨æ›²çº¿, ä¸åŒçš„ç±»æœ‰ä¸åŒçš„ç‰¹å¾, ä¾‹å¦‚ä½¿ç”¨ BackTicker çš„ ITickAnimator è¿›è¡ŒåŠ¨ç”»æ—¶å°†å…·æœ‰å›å¼¹æ•ˆæœ, ä½¿ç”¨ BounceTicker çš„ ITickAnimator è¿›è¡ŒåŠ¨ç”»æ—¶å°†å…·æœ‰å¼¹è·³æ•ˆæœ.\nå…¶ä¸­çš„æŠ€æœ¯ç»†èŠ‚, å¯å‚è€ƒ CSS3 è¿‡æ¸¡ä¸­çš„ timing-function, WPF çª—ä½“ç¨‹åºä¸­çš„ EasingFunction. å¦å¤–, ä¹Ÿæ¨èå¯¹è´å¡å°”æ›²çº¿ä½œåŸºæœ¬äº†è§£, è¿™æ ·, ä½ å¯ä»¥é€šè¿‡åº“ä¸­æä¾›çš„ CubicBezierTicker æ¥åˆ›å»ºè‡ªå®šä¹‰çš„ä¸‰æ¬¡è´å¡å°”æ›²çº¿è®¡æ—¶å‡½æ•°, è¿›è€Œå®ç°è‡ªå®šä¹‰åŠ¨ç”»æ•ˆæœ.\næ¨èçš„åœ¨çº¿ä¸‰æ¬¡è´å¡å°”æ›²çº¿ç¼–è¾‘å·¥å…·: Cubic-Bezier\nç±»å‹ - ITicker ITicker æ˜¯åŠ¨ç”»è®¡æ—¶å‡½æ•°, å®ƒåˆ†ä¸ºä¸¤ç§, è´å¡å°”æ›²çº¿å‡½æ•°ä»¥åŠåŸç”Ÿå‡½æ•°, å…¶ä¸­è´å¡å°”æ›²çº¿æ˜¯å¯ä»¥ç”±ç”¨æˆ·æŒ‡å®šæ§åˆ¶ç‚¹ä»è€Œæ§åˆ¶æ›²çº¿å½¢çŠ¶çš„, åŸç”Ÿå‡½æ•°æ˜¯ä¸€äº›å®šä¹‰å¥½çš„, éµå¾ª ITicker æ¥å£çš„å‡½æ•°\nè´å¡å°”æ›²çº¿å‡½æ•°: åˆ†ä¸¤ç§, ä¸‰æ¬¡è´å¡å°”æ›²çº¿(CubicBezierTicker)ä¸äºŒæ¬¡è´å¡å°”æ›²çº¿(QuadraticBezierTicker), ä½ å¯ä»¥æ‰‹åŠ¨æŒ‡å®šæ§åˆ¶ç‚¹, ä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤æä¾›çš„ä¸€äº›æ›²çº¿, ä¾‹å¦‚ Ease, EaseIn, EaseOut, EaseInOut, InSine, OutSine ç­‰.\næŒ‡å®š EaseInOut çš„æ–¹å¼æ˜¯: æŒ‡å®š CubicBezierCurve.Ease ä¸ EasingMode.EaseInOut, åŒç†, æŒ‡å®š InOutBack çš„æ–¹å¼æ˜¯: CubicBezierCurve.Back ä¸ EasingMode.EaseInOut, éœ€è¦çŸ¥é“çš„æ˜¯, è¿™äº›æ›²çº¿éƒ½æ˜¯æºè‡ªäº CSS3 å†…ç½®æ›²çº¿(Ease, EaseIn, EaseOut, EaseInOut, Linear) ä»¥åŠ Microsoft Edge æµè§ˆå™¨è°ƒè¯•å·¥å…·ä¸­çš„é¢„è®¾æ›²çº¿(InSIne, OutSine, InOutSine, InBack, OutBack, \u0026hellip;\u0026hellip;)\nåŸç”Ÿå‡½æ•°: å®ƒä»¬éƒ½æ˜¯ä» WPF ä¸­ç§»æ¤è¿‡æ¥çš„, ä¾‹å¦‚ BounceTicker, å®ƒæ¥è‡ª WPF ä¸­çš„ BounceEase, å¹¶ä¸”ä¸å®ƒç®—æ³•å®Œå…¨ä¸€è‡´, å…³äºå®ƒä»¬çš„ä½¿ç”¨, æˆ‘å»ºè®®æŸ¥é˜… WPF åŠ¨ç”»ç¼“åŠ¨å‡½æ•°çš„ç›¸å…³æ–‡æ¡£.\næœ€ç®€å•çš„, ä½¿ç”¨ BackTicker å‡½æ•°å°±æ˜¯ç›´æ¥å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡, åœ¨è¿™é‡Œéœ€è¦æåˆ°çš„æ˜¯, å…³äº BackTicker å®ä¾‹çš„å±æ€§é»˜è®¤å€¼ä¹Ÿæ˜¯ä¸ WPF ä¸€è‡´çš„, è™½ç„¶ BackTicker å’Œ CubicBezierCurve.Back éƒ½æ˜¯è¡¨ç¤ºå¸¦æœ‰å›å¼¹æ•ˆæœçš„æ›²çº¿, ä½†æ˜¯ä¸¤è€…å¹¶ä¸ç›¸ç­‰, è´å¡å°”æ›²çº¿å‡½æ•°å’ŒåŸç”Ÿå‡½æ•°æ˜¯æˆªç„¶ä¸åŒçš„.\nå…³äº ITicker çš„æ›´å¤šä¿¡æ¯, æˆ‘å»ºè®®æŸ¥é˜…æºç , æˆ–è€…åœ¨ Visual Studio ä¸­ä½¿ç”¨å¯¹è±¡æµè§ˆå™¨æ¦‚è§ˆæ‰€æœ‰ç±»å‹.\n- ITickAnimator ITickAnimator æ˜¯é©±åŠ¨åŠ¨ç”»çš„æœ€ä¸»è¦çš„ç±», é»˜è®¤åŒ…å«çš„ TickAnimator ä¸­æ”¯æŒ double float int ä¸‰ç§æ•°å­—ç±»å‹çš„åŠ¨ç”»å¤„ç†, å®ƒå…¶ä¸­è¿˜åŒ…æ‹¬äº†å¯¹äºåŠ¨ç”»åŒæ—¶è¿›è¡Œæ—¶çš„ä¸­æ–­å¤„ç†, å½“ç„¶, å¦‚æœä½ è¦ä½¿ç”¨é’ˆå¯¹äºç»˜ç”»çš„åŠ¨ç”»å¤„ç†, ä¾‹å¦‚ç‚¹, å°ºå¯¸, çŸ©å½¢åŒºåŸŸ, é¢œè‰²è¿™ç±», å¯ä»¥ä½¿ç”¨ DrawingTickAnimator (nugetåŒ…: NullLib.TickAnimator.Drawing, å‘½åç©ºé—´: NullLib.TickAnimator)\nTickAnimator çš„åŠ¨ç”»å¤„ç†ä¸­åŒ…å«è¿™æ ·ä¸€ç‚¹: å½“ä¸€ä¸ªåŠ¨ç”»è¿˜æœªç»“æŸå°±å¯åŠ¨å¦ä¸€ä¸ªåŠ¨ç”», é‚£ä¹ˆç¬¬ä¸€ä¸ªåŠ¨ç”»ä¼šè‡ªåŠ¨åœæ­¢ä»¥ä¿è¯ä¸ä¼šé€ æˆå†²çª, è¿™æ˜¯å› ä¸ºä¸€ä¸ª TickAnimator åº”è¯¥é’ˆå¯¹äºå”¯ä¸€ä¸€ä¸ªå±æ€§, ä½†é’ˆå¯¹åŒä¸€ä¸ªå±æ€§çš„ä¸¤ä¸ªåŠ¨ç”»åŒæ—¶å¯åŠ¨, å°†ä¼šé€ æˆä¸¥é‡çš„å†²çªé—®é¢˜. (è¿™é‡Œéœ€è¦æä¸€ä¸‹, å¦‚æœä½ è¦åŒæ—¶å¯¹ä¸€ä¸ªæ§ä»¶è¿›è¡Œä½ç½®è¿‡æ¸¡å’Œå°ºå¯¸è¿‡æ¸¡, æˆ‘ä¸æ¨èä½ ä¸º Location å’Œ Size å±æ€§åˆ†åˆ«åˆ›å»ºä¸€ä¸ª ITickAnimator å®ä¾‹, WinForm çš„å†…éƒ¨å®ç°é—®é¢˜ä»ç„¶ä¼šå¯¼è‡´å†²çª, æ›´å®‰å…¨çš„åšæ³•æ˜¯ä¸º Bounds å±æ€§åˆ›å»º ITickAnimator å¹¶ä¸”ä½¿ç”¨é’ˆå¯¹ Rectangle çš„è¿‡æ¸¡)\n- TickAnimationProc TickAnimationProc æ˜¯ NullLib.TickAnimation ä¸­å¯¹äºåŠ¨ç”»é©±åŠ¨çš„æœ€æ ¸å¿ƒéƒ¨åˆ†, å®ƒæä¾›äº†æœ€ä¸ºåŸºæœ¬çš„åŠ¨ç”»å®ç°æ–¹å¼, é€šè¿‡æŒ‡å®š ITicker(è®¡æ—¶å‡½æ•°), Fucn\u0026lt;double, T\u0026gt;(tick pickerç”¨äºä»åŠ¨ç”»è¿›åº¦ä¸­å–å¾—å¯¹åº”ç±»å‹çš„å€¼), TimeSpan(åŠ¨ç”»çš„æ—¶é—´é—´éš”), Func\u0026lt;T, bool\u0026gt;(åŠ¨ç”»æ¯ä¸€å¸§çš„å›è°ƒå‡½æ•°, è¿”å›å€¼è¡¨ç¤ºåŠ¨ç”»æ˜¯å¦åº”è¯¥ç»§ç»­è¿›è¡Œ), è¿™å››ä¸ªå‚æ•°æ¥è¿è¡Œæœ€åŸºæœ¬çš„åŠ¨ç”». ä½†æ˜¯ä¸€èˆ¬çš„ä¸æ¨èä½¿ç”¨è¿™ä¸ª, å› ä¸ºå…¶ä¸­æ²¡æœ‰åƒ TickAnimator çš„äº’æ–¥æªæ–½.\n- TickAnimatorBase TickAnimator çš„åŸºç±», å…¶ä¸­åŒ…å«äº† TickAnimator åŸºç¡€åŠŸèƒ½çš„å®ç°, ä¾‹å¦‚å¯¹äºå€¼è¿‡æ¸¡çš„æ–¹æ³•å°è£…\nè‡ªå®šä¹‰ç±»å‹ å¦‚æœä½ è¦è‡ªå®šä¹‰ ITicker å®ç°ç±»æˆ–è€… ITickAnimator å®ç°ç±», åˆ™éœ€è¦éµå®ˆä¸‹é¢çš„ä¸€äº›è§„èŒƒ:\nå¯¹äº ITicker çš„å®ç°, å¿…é¡»ä¿è¯å¯¹äºæ–¹æ³• CalcTick(double x), x ä» 0 åˆ° 1 æ—¶, è¿”å›å€¼ä¹Ÿæ˜¯ä» 0 åˆ° 1, å³: CalcTick(0) åº”è¯¥è¿”å› 0, CalcTick(1) åº”è¯¥è¿”å› 1.\nå¹¶ä¸”, å¦‚æœä½ è¦åˆ›å»ºæ›´é«˜é˜¶çš„è´å¡å°”æ›²çº¿å‡½æ•°, å»ºè®®ç»§æ‰¿ BezierTickerBase, å¦‚æœä½ è¦åˆ›å»ºä¸€äº›éµå¾ª WPF åŸç”Ÿè¿‡æ¸¡å‡½æ•°è§„åˆ™çš„è‡ªå®šä¹‰å‡½æ•°, å¿…é¡»ç»§æ‰¿ FuncTickerBase å¹¶åœ¨å­—ç±»ä¸­é‡å†™ CalcInTick(double x) æ–¹æ³•.\nå¯¹äº ITickAnimator çš„å®ç°, æ¨èçš„æ–¹å¼æ˜¯ç›´æ¥ç»§æ‰¿ TickAnimator, å¹¶ä¸”åœ¨å®ç° Animate å’Œ SyncAnimate æ–¹æ³•æ—¶, åº”è¯¥é€šè¿‡è°ƒç”¨ TickAnimatorBase çš„ Animate å’Œ SyncAnimate æ–¹æ³•æ¥å®ç°åŠ¨ç”», è€Œè·å–å¯¹åº”å±æ€§çš„å½“å‰å€¼, ä¸åº”è¯¥ä½¿ç”¨ prop.GetValue æ–¹æ³•, è€Œæ˜¯ä½¿ç”¨ TickAnimatorBase çš„ GetPropertyValue æ–¹æ³•. ä¸‹é¢æ˜¯ TickAnimator ä¸­ double çš„åŠ¨ç”»å®ç°:\n1 2 3 4 5 6 7 8 9 10 11 12 13 public Task Animate(float start, float end, int dur) { double diff = end - start; return Animate((t) =\u0026gt; (float)(start + diff * t), TimeSpan.FromMilliseconds(dur)); // å†…éƒ¨è°ƒç”¨åŸºç±» TickAnimatorBase çš„æ–¹æ³• } public Task Animate(double end, int dur) =\u0026gt; Animate(GetPropertyValue\u0026lt;double\u0026gt;(), end, dur); // ä»å½“å‰å€¼å¼€å§‹æ‰§è¡ŒåŠ¨ç”», æŒ‰ç…§è§„ public ITickAnimator\u0026lt;double\u0026gt; SyncAnimate(double start, double end, int dur) // èŒƒ, ä½¿ç”¨ GetPropertyValue æ–¹æ³• { double diff = end - start; SyncAnimate((t) =\u0026gt; (double)(start + diff * t), TimeSpan.FromMilliseconds(dur)); // SyncAnimate ä¹Ÿä¸€æ · return this; } public ITickAnimator\u0026lt;double\u0026gt; SyncAnimate(double end, int dur) =\u0026gt; SyncAnimate(GetPropertyValue\u0026lt;double\u0026gt;(), end, dur); // ä¸€è‡´ ","date":"2021-06-30T02:45:05+08:00","permalink":"https://slimenull.com/p/20210630024505/","title":"[C#] ä½¿ç”¨ NullLib.TickAnimation.Drawing å®ç° WinForm è¿‡æ¸¡åŠ¨ç”»"},{"content":"æ‘˜è¦ä»‹ç» é€šè¿‡å‘½ä»¤è¡Œå­—ç¬¦ä¸²æ¥æ–¹ä¾¿å¿«æ·çš„è°ƒç”¨ C# ä¸­å®šä¹‰çš„æ–¹æ³•\nå‡†å¤‡ æ·»åŠ  nuget åŒ…: NullLib.CommandLine ä½¿ç”¨æ–¹å¼ é¦–å…ˆ, åœ¨ NullLib.CommandLine ä¸­ç”¨äºè°ƒç”¨æ–¹æ³•çš„æœ€åŸºæœ¬ç±»å‹æ˜¯ CommandObject, å®ƒåŒ…å«äº†æ–¹æ³•çš„å„ç§ä¿¡æ¯, ä¾‹å¦‚ MethodInfo, ParameterInfo, ä»¥åŠå±æ€§.\nç„¶å, ä½ éœ€è¦å®šä¹‰ä¸€ä¸ªåŒ…å«è¦è°ƒç”¨æ–¹æ³•çš„ç±», åœ¨è¿™ä¸ªç±»ä¸­, æ¯ä¸€ä¸ªå°†è¢«è°ƒç”¨çš„æ–¹æ³•éƒ½åº”è¯¥æœ‰ä¸€ä¸ª Command å±æ€§, ä¹‹åæˆ‘ä»¬å°†ç”¨è¿™ä¸ªç±»å‹å®ä¾‹åŒ–ä¸€ä¸ª CommandObject å®ä¾‹.\nä¸€ä¸ªç¤ºä¾‹ç±»å‹:\n1 2 3 4 5 6 7 8 public class AppCommands { [Command] public void HelloWorld() { Console.WriteLine(\u0026#34;Hello world!\u0026#34;); } } å®ä¾‹åŒ–ä¸€ä¸ª CommandObject å¯¹è±¡, ç„¶åå¾ªç¯æ‰§è¡ŒæŒ‡ä»¤.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 using System; using NullLib.CommandLine; class Program { static CommandObject\u0026lt;AppCommands\u0026gt; AppCommandObject = new CommandObject\u0026lt;AppCommands\u0026gt;(); // å®ä¾‹åŒ–ä¸€ä¸ª CommandObject å¯¹è±¡ static void Main(string[] args) { Console.WriteLine(\u0026#34;Now input commands.\u0026#34;); while (true) { Console.Write(\u0026#34;\u0026gt;\u0026gt;\u0026gt; \u0026#34;); // æç¤ºç¬¦ string cmdline = Console.ReadLine(); if (!AppCommandObject.TryExecuteCommand(cmdline, out var result)) { if (result != null) // å¦‚æœä¸€ä¸ªæ–¹æ³•æ²¡æœ‰è¿”å›å€¼, åˆ™ç»“æœæ˜¯ null. Console.WriteLine(result); } else { Console.WriteLine(\u0026#34;Command execute failed.\u0026#34;); } } } } è¿è¡Œç¨‹åº, å¹¶è¾“å…¥æŒ‡ä»¤:\n1 2 3 Now input commands. \u0026gt;\u0026gt;\u0026gt; HelloWorld Hello world! ä¸ºæ¯ä¸€ä¸ªå‚æ•°æŒ‡å®š ArgumentConverter ä»¥ä¼ é€’å‚æ•°åˆ°æ–¹æ³•.\né‚£ä¹ˆ, æˆ‘ä»¬å†è¯•è¯•å°†è¿™äº›æ–¹æ³•æ·»åŠ åˆ° AppCommands ä¸­\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 [Command(typeof(FloatArguConverter), typeof(FloatArguConverter))] // NullLib.CommandLine ä¸­çš„å†…ç½® ArgumentConverter public float Plus(float a, float b) { return a + b; } [Command(typeof(FloatArguConverter))] // å¦‚æœè·Ÿç€çš„è½¬æ¢å™¨ä¸ä¸Šä¸€ä¸ªæ˜¯ä¸€æ ·çš„, é‚£ä¹ˆä½ å¯ä»¥å¿½ç•¥å®ƒä»¬ public float Mul(float a, float b) { return a * b; } [Command(typeof(DoubleArguConverter))] public double Log(double n, double newBase = Math.E) // ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å¯é€‰å‚æ•° { return Math.Log(n, newBase); } [Command(typeof(ForeachArguConverter\u0026lt;FloatArguConverter\u0026gt;))] // æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦ä¸²éƒ½å°†è¢« FloatArguConverter è½¬æ¢ public float Sum(params float[] nums) // å¯å˜å‚æ•°çš„æ–¹æ³•ä¹Ÿæ˜¯å—æ”¯æŒçš„ { float result = 0; foreach (var i in nums) result += i; return result; } [Command(typeof(ArgutConverter))] // å¦‚æœä¸éœ€è¦åšä»»ä½•è½¬æ¢, åˆ™å¯ä»¥æŒ‡å®šä¸€ä¸ª \u0026#39;ArguConverter\u0026#39; public void Print(string txt) { Console.WriteLine(txt); } [Command] // é»˜è®¤çš„è½¬æ¢å™¨æ˜¯ \u0026#39;ArguConverter\u0026#39;, åœ¨è¿™ç§æƒ…å†µä¸‹ä½ å¯ä»¥å¿½ç•¥å®ƒä»¬ public bool StringEquals(string txt1, string txt2) // æˆ–è€…æŒ‡å®š \u0026#39;null\u0026#39; æ¥ä½¿ç”¨ä¸Šä¸€ä¸ªè½¬æ¢å™¨(åœ¨è¿™é‡ŒæŒ‡ ArguConverter) { return txt1.Equals(txt2); } [Command(typeof(EnumArguConverter\u0026lt;ConsoleColor\u0026gt;))] // EnumConverter å¯ä»¥ç”¨æ¥å°†å­—ç¬¦ä¸²è‡ªåŠ¨è½¬æ¢ä¸ºæšä¸¾ç±»å‹ public void SetBackground(ConsoleColor color) { Console.BackgroundColor = color; } Run and input:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 Now input commands. \u0026gt;\u0026gt;\u0026gt; Plus 1 1 2 \u0026gt;\u0026gt;\u0026gt; Mul 2 4 8 \u0026gt;\u0026gt;\u0026gt; Log 8 2 3 \u0026gt;\u0026gt;\u0026gt; Log 8 2.07944154167984 \u0026gt;\u0026gt;\u0026gt; Sum 1 2 3 4 10 \u0026gt;\u0026gt;\u0026gt; Print \u0026#34;ä¸€äº›æ–‡æœ¬\\tè½¬ä¹‰å­—ç¬¦ä¹Ÿæ˜¯å—æ”¯æŒçš„\u0026#34; ä¸€äº›æ–‡æœ¬ è½¬ä¹‰å­—ç¬¦ä¹Ÿæ˜¯å—æ”¯æŒçš„ \u0026gt;\u0026gt;\u0026gt; StringEquals qwq awa False \u0026gt;\u0026gt;\u0026gt; SetBackground White \u0026gt;\u0026gt;\u0026gt; SetBackground 0 æ›´å¤š é€šè¿‡è¿™ä¸ªåº“, ä½ å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå­—ç¬¦ä¸²æ–¹ä¾¿å¿«æ·çš„è°ƒç”¨ C# ä¸­å®šä¹‰çš„æ–¹æ³•, ç”šè‡³äºé€šè¿‡ä¸€äº›æ–¹æ³•å®ç°ç®€å•çš„, ç±»ä¼¼äº CMD å‘½ä»¤æç¤ºç¬¦çš„å‘½ä»¤è§£é‡Šå™¨, å®Œæ•´æ–‡æ¡£,\nNullLib.CommandLine é€šè¿‡å‘½ä»¤è¡Œå­—ç¬¦ä¸²æ¥æ–¹ä¾¿å¿«æ·çš„è°ƒç”¨ C# ä¸­å®šä¹‰çš„æ–¹æ³•\nä½¿ç”¨æ–¹å¼ é¦–å…ˆ, åœ¨ NullLib.CommandLine ä¸­ç”¨äºè°ƒç”¨æ–¹æ³•çš„æœ€åŸºæœ¬ç±»å‹æ˜¯ CommandObject, å®ƒåŒ…å«äº†æ–¹æ³•çš„å„ç§ä¿¡æ¯, ä¾‹å¦‚ MethodInfo, ParameterInfo, ä»¥åŠå±æ€§.\nç„¶å, ä½ éœ€è¦å®šä¹‰ä¸€ä¸ªåŒ…å«è¦è°ƒç”¨æ–¹æ³•çš„ç±», åœ¨è¿™ä¸ªç±»ä¸­, æ¯ä¸€ä¸ªå°†è¢«è°ƒç”¨çš„æ–¹æ³•éƒ½åº”è¯¥æœ‰ä¸€ä¸ª Command å±æ€§, ä¹‹åæˆ‘ä»¬å°†ç”¨è¿™ä¸ªç±»å‹å®ä¾‹åŒ–ä¸€ä¸ª CommandObject å®ä¾‹.\nä¸€ä¸ªç¤ºä¾‹ç±»å‹:\n1 2 3 4 5 6 7 8 public class AppCommands { [Command] public void HelloWorld() { Console.WriteLine(\u0026#34;Hello world!\u0026#34;); } } å®ä¾‹åŒ–ä¸€ä¸ª CommandObject å¯¹è±¡, ç„¶åå¾ªç¯æ‰§è¡ŒæŒ‡ä»¤.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 using System; using NullLib.CommandLine; class Program { static CommandObject\u0026lt;AppCommands\u0026gt; AppCommandObject = new CommandObject\u0026lt;AppCommands\u0026gt;(); // å®ä¾‹åŒ–ä¸€ä¸ª CommandObject å¯¹è±¡ static void Main(string[] args) { Console.WriteLine(\u0026#34;Now input commands.\u0026#34;); while (true) { Console.Write(\u0026#34;\u0026gt;\u0026gt;\u0026gt; \u0026#34;); // æç¤ºç¬¦ string cmdline = Console.ReadLine(); if (!AppCommandObject.TryExecuteCommand(cmdline, out var result)) { if (result != null) // å¦‚æœä¸€ä¸ªæ–¹æ³•æ²¡æœ‰è¿”å›å€¼, åˆ™ç»“æœæ˜¯ null. Console.WriteLine(result); } else { Console.WriteLine(\u0026#34;Command execute failed.\u0026#34;); } } } } è¿è¡Œç¨‹åº, å¹¶è¾“å…¥æŒ‡ä»¤:\n1 2 3 Now input commands. \u0026gt;\u0026gt;\u0026gt; HelloWorld Hello world! ä¸ºæ¯ä¸€ä¸ªå‚æ•°æŒ‡å®š ArgumentConverter æ¥ä»¥ä¼ é€’å‚æ•°åˆ°æ–¹æ³•.\né‚£ä¹ˆ, æˆ‘ä»¬å†è¯•è¯•å°†è¿™äº›æ–¹æ³•æ·»åŠ åˆ° AppCommands ä¸­\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 [Command(typeof(FloatArguConverter), typeof(FloatArguConverter))] // NullLib.CommandLine ä¸­çš„å†…ç½® ArgumentConverter public float Plus(float a, float b) { return a + b; } [Command(typeof(FloatArguConverter))] // å¦‚æœè·Ÿç€çš„è½¬æ¢å™¨ä¸ä¸Šä¸€ä¸ªæ˜¯ä¸€æ ·çš„, é‚£ä¹ˆä½ å¯ä»¥å¿½ç•¥å®ƒä»¬ public float Mul(float a, float b) { return a * b; } [Command(typeof(DoubleArguConverter))] public double Log(double n, double newBase = Math.E) // ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å¯é€‰å‚æ•° { return Math.Log(n, newBase); } [Command(typeof(ForeachArguConverter\u0026lt;FloatArguConverter\u0026gt;))] // æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦ä¸²éƒ½å°†è¢« FloatArguConverter è½¬æ¢ public float Sum(params float[] nums) // å¯å˜å‚æ•°çš„æ–¹æ³•ä¹Ÿæ˜¯å—æ”¯æŒçš„ { float result = 0; foreach (var i in nums) result += i; return result; } [Command(typeof(ArgutConverter))] // å¦‚æœä¸éœ€è¦åšä»»ä½•è½¬æ¢, åˆ™å¯ä»¥æŒ‡å®šä¸€ä¸ª \u0026#39;ArguConverter\u0026#39; public void Print(string txt) { Console.WriteLine(txt); } [Command] // é»˜è®¤çš„è½¬æ¢å™¨æ˜¯ \u0026#39;ArguConverter\u0026#39;, åœ¨è¿™ç§æƒ…å†µä¸‹ä½ å¯ä»¥å¿½ç•¥å®ƒä»¬ public bool StringEquals(string txt1, string txt2) // æˆ–è€…æŒ‡å®š \u0026#39;null\u0026#39; æ¥ä½¿ç”¨ä¸Šä¸€ä¸ªè½¬æ¢å™¨(åœ¨è¿™é‡ŒæŒ‡ ArguConverter) { return txt1.Equals(txt2); } [Command(typeof(EnumArguConverter\u0026lt;ConsoleColor\u0026gt;))] // EnumConverter å¯ä»¥ç”¨æ¥å°†å­—ç¬¦ä¸²è‡ªåŠ¨è½¬æ¢ä¸ºæšä¸¾ç±»å‹ public void SetBackground(ConsoleColor color) { Console.BackgroundColor = color; } Run and input:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 Now input commands. \u0026gt;\u0026gt;\u0026gt; Plus 1 1 2 \u0026gt;\u0026gt;\u0026gt; Mul 2 4 8 \u0026gt;\u0026gt;\u0026gt; Log 8 2 3 \u0026gt;\u0026gt;\u0026gt; Log 8 2.07944154167984 \u0026gt;\u0026gt;\u0026gt; Sum 1 2 3 4 10 \u0026gt;\u0026gt;\u0026gt; Print \u0026#34;ä¸€äº›æ–‡æœ¬\\tè½¬ä¹‰å­—ç¬¦ä¹Ÿæ˜¯å—æ”¯æŒçš„\u0026#34; ä¸€äº›æ–‡æœ¬ è½¬ä¹‰å­—ç¬¦ä¹Ÿæ˜¯å—æ”¯æŒçš„ \u0026gt;\u0026gt;\u0026gt; StringEquals qwq awa False \u0026gt;\u0026gt;\u0026gt; SetBackground White \u0026gt;\u0026gt;\u0026gt; SetBackground 0 \u0026gt;\u0026gt;\u0026gt; Print \u0026#34;ä½ å¯ä»¥é€šè¿‡ä¸€ä¸ªæšä¸¾ç±»å‹çš„åå­—æˆ–æ•´æ•°å€¼æ¥è¿›è¡Œè½¬æ¢\u0026#34; ä½ å¯ä»¥é€šè¿‡ä¸€ä¸ªæšä¸¾ç±»å‹çš„åå­—æˆ–æ•´æ•°å€¼æ¥è¿›è¡Œè½¬æ¢ Types CommandAttribute:\nå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå­—ç¬¦ä¸²æ‰§è¡Œçš„æ–¹æ³•å¿…é¡»æœ‰ä¸€ä¸ª CommandAttribute å±æ€§\nCommandObject:\nç”¨äºä½¿ç”¨å‘½ä»¤è¡Œå­—ç¬¦ä¸²è°ƒç”¨æ–¹æ³•çš„ç±»\nCommandInvoker:\nå¸®åŠ©é€šè¿‡ IArguments è°ƒç”¨æ–¹æ³•\nCommandParser:\nå¸®åŠ©åˆ†æå‘½ä»¤è¡Œå­—ç¬¦ä¸²ä»¥è°ƒç”¨æ–¹æ³•\nArgumentConverter:\nç»§æ‰¿ IArgumentConverter æ¥å£, æŠ½è±¡ç±», åº”è¯¥è¢«è‡ªå®šä¹‰è½¬æ¢å™¨ç»§æ‰¿\nArgumentConverterManager:\nå¸®åŠ©å¿«é€Ÿåˆ›å»º ArgumentConverter\nCommandLineSegment:\nå‘½ä»¤è¡Œå­—ç¬¦ä¸²çš„æ„æˆéƒ¨åˆ†\nArgumentParser:\nå¸®åŠ©å°† CommandLineSegment åˆ†æä¸º IArgument\nCommandLineSegment CommandLineSegment æ˜¯å‘½ä»¤è¡Œå­—ç¬¦ä¸²çš„ç»„æˆéƒ¨åˆ†\nä¾‹å¦‚, åœ¨ myprogram param1 \u0026quot;param2\u0026quot; ä¸­, æœ‰ä¸‰ä¸ª CommandLineSegment:\n{Quoted: false, Content: \u0026ldquo;myprogram\u0026rdquo;} {Quoted: false, Content: \u0026ldquo;param1\u0026rdquo;} {Quoted: true, Content: \u0026ldquo;\\\u0026ldquo;param2\\\u0026rdquo;\u0026rdquo;} å°†å‘½ä»¤è¡Œå­—ç¬¦ä¸²åˆ†å‰²ä¸º CommandLineSegment[], ä½¿ç”¨ CommandParser.SplitCommandLine(string str)\nArgument å‘½ä»¤çš„å‚æ•°, å¯æœ‰åç§°, ç»§æ‰¿ IArgument, å½“è°ƒç”¨æ–¹æ³•æ—¶, å°†ä¼šè¢«ä¼ é€’\nArgumentParser ä¸‹é¢æ˜¯æ‰€æœ‰å†…ç½®çš„ ArgumentParsers\nArguParser:\nå¯å°†ä»»ä½•éƒ¨åˆ†åˆ†æä¸ºä¸€ä¸ª Argument\nIdentifierArguParser:\nå¯å°†ä¸€ä¸ªæ ‡è¯†ç¬¦éƒ¨åˆ†åˆ†æä¸ºä¸€ä¸ª Argument. å¯¹åº”çš„æ­£åˆ™è¡¨è¾¾å¼æ˜¯ \u0026quot;{A-Za-z_}{A-Za-z0-9_}*\u0026quot;\nStringArguParser:\nå¯ä»¥å°†ä»»ä½• Quoted(è¢«åŒå¼•å·åŒ…å›´çš„) éƒ¨åˆ†åˆ†æä¸º Argument\nFieldArguParser:\nå¯ä»¥å°†åƒ name=value çš„ä¸€ä¸ªéƒ¨åˆ†, æˆ–è€…åƒ name= value çš„ä¸¤ä¸ªéƒ¨åˆ†åˆ†æä¸ºä¸€ä¸ª Argument, å¦å¤–, ä½ å¯ä»¥æŒ‡å®šåˆ†éš”ç¬¦, é»˜è®¤åˆ†éš”ç¬¦æ˜¯ \u0026lsquo;=\u0026rsquo;\nPropertyArguParser:\nå¯ä»¥å°†åƒ -name value çš„ä¸¤ä¸ªéƒ¨åˆ†åˆ†æä¸º Argument, å¹¶ä¸”ä½ ä¹Ÿå¯ä»¥æŒ‡å®š name çš„èµ·å§‹å­—ç¬¦ä¸², é»˜è®¤æ˜¯ \u0026ldquo;-\u0026rdquo;\nArgumentConverter Here is all build-in ArgumentConverter:\nArguConverter:\nä¸ä¼šåšä»»ä½•è½¬æ¢è€Œç›´æ¥è¿”å›æºå€¼çš„é»˜è®¤çš„ ArgumentConverter\nBoolArguConverter:\nå¸®åŠ©è½¬æ¢åˆ°å¸ƒå°”å€¼, ä½¿ç”¨ bool.Parse å’Œ bool.TryParse\nCharArguConverter:\nå¸®åŠ©è½¬æ¢åˆ°å­—ç¬¦, ä»…å½“å­—ç¬¦ä¸²æœ‰å”¯ä¸€ä¸€ä¸ªå­—ç¬¦æ—¶, è¿”å›è¿™ä¸ªå­—ç¬¦, å¦åˆ™è½¬æ¢å¤±è´¥\nByteArguConverter:\nShortArguConverter:\nIntArguConverter:\nLongArguConverter:\nFloatArguConverter:\nDoubleArguConverter:\nBigIntArguConverter:\nDecimalArguConverter:\nä¸Šé¢æåˆ°çš„è½¬æ¢å™¨å‡è¿”å›å¯¹åº”çš„æ•°å­—ç±»å‹, å¹¶ä¸”å®ƒä»¬éƒ½é€šè¿‡è°ƒç”¨å¯¹åº”ç±»å‹çš„ Parse å’Œ TryParse æ–¹æ³•å®ç°è½¬æ¢\nEnumArguConverter\u0026lt;T\u0026gt;:\nå¸®åŠ©è½¬æ¢åˆ°æšä¸¾ç±»å‹, T åº”è¯¥è¢«æŒ‡å®šä¸ºä¸€ä¸ªæšä¸¾ç±»å‹. å®ƒå¯ä»¥ä»æšä¸¾å€¼çš„åç§°æˆ–æ•°å­—å€¼æ¥è½¬æ¢\nForeachArguConverter\u0026lt;TConverter\u0026gt;:\nå¸®åŠ©è½¬æ¢åˆ°ä¸€ä¸ªæ•°ç»„, ä»…ç”¨äºå¯å˜å‚æ•°(ä½¿ç”¨ params ä¿®é¥°), TConverter å¿…é¡»å®ç° IArgumentConverter æ¥å£, æ¯ä¸ªå€¼éƒ½å°†è¢«æŒ‡å®šçš„è½¬æ¢å™¨è½¬æ¢, æœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå¯¹åº”ç±»å‹çš„æ•°ç»„.\nCharArrayArguConverter:\nå¸®åŠ©è½¬æ¢åˆ°å­—ç¬¦æ•°ç»„, å®ƒè°ƒç”¨ string.ToCharArray() æ¥è¿›è¡Œè½¬æ¢.\nAbout ArgumentParser Custom Parser: å®šä¹‰è‡ªå®šä¹‰çš„ ArgumentParser, ä½ éœ€è¦éµå®ˆä¸‹é¢çš„è§„åˆ™:\nå®ç° IArgumentParser æ¥å£ åœ¨åˆ†æå®Œæ¯•å, å¼•ç”¨å‚æ•° index å¿…é¡»ç¦»å¼€å‚æ•°ç»“æœ(IArgument)çš„åŒºåŸŸ, ä¾‹å¦‚, åœ¨ç´¢å¼• 3, åœ¨ä½ çš„è‡ªå®šä¹‰åˆ†æå™¨ä¸­, ä»–å°†è¿”å›ç»“æœ (ç»“æœè¢«æˆåŠŸåˆ†æ), å¹¶ä¸”åˆ†æç»“æœæ¥è‡ªäºä¸¤ä¸ª CommandLineSegment, æ‰€ä»¥ index å¿…é¡»æ˜¯ 5 (åœ¨ 3 å’Œ 4 ä¹‹å¤–). About ArgumentConverter è‡ªå®šä¹‰ Converter: å®šä¹‰è‡ªå®šä¹‰ ArgumentConverter çš„æ¨èæ–¹å¼æ˜¯è¿™æ ·:\n1 2 3 4 5 6 7 8 9 10 11 class MyConverter : ArgumentConverter\u0026lt;MyType\u0026gt; // ç»§æ‰¿ ArgumentConverter\u0026lt;T\u0026gt; è€Œä¸æ˜¯ IArgumentConverter\u0026lt;T\u0026gt; { public override MyType Convert(string argument) { // ä½ çš„ä»£ç  } public override bool TryConvert(string argument, out MyType result) { // ä½ çš„ä»£ç  } } ç»§æ‰¿ ArgumentConverter\u0026lt;T\u0026gt; è€Œä¸æ˜¯ IArgumentConverter\u0026lt;T\u0026gt; çš„åŸå› æ˜¯, åœ¨ ArgumentConverter\u0026lt;T\u0026gt; ä¸­, æ‰€æœ‰æ–¹æ³•é‡è½½å‡è°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•:\nT Convert(string argument); bool TryConverter(string argument, out T result); æ‰€ä»¥å¦‚æœç»§æ‰¿ ArgumentConverter\u0026lt;T\u0026gt;, ä½ åªéœ€è¦é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•.\nTips: ä¸è¦ä½¿ç”¨ new è¡¨è¾¾å¼æ¥åˆ›å»ºä¸€ä¸ª ArgumentConverter å®ä¾‹, è¯·ä½¿ç”¨ ArgumentConverterManager.GetConverter\u0026lt;T\u0026gt;(). FAQ å½“æˆ‘è°ƒç”¨ CommandObject.ExecuteCommand(IArgumentParser[] parsers, string cmdline) æ—¶, æŸäº›åˆ†æå™¨ä¸èƒ½æ­£å¸¸ä½¿ç”¨:\n1 2 3 4 5 6 7 8 // ä½ å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºæŒ‡å®šåˆ†æå™¨, å¦åˆ™å°±ä¼šè¿™æ ·: CommandObject\u0026lt;AppCommands\u0026gt; myCmds = new CommandObject\u0026lt;AppCommands\u0026gt;(); myCmds.ExecuteCommand(new IArgumentParser[] { new ArguParser(), // åœ¨è¿™ç§æƒ…å†µä¸‹, FieldArguParser å’Œ PropertyArguParser å°†ä¸èµ·ä½œç”¨. new FieldArguParser(), // è¿™æ˜¯å› ä¸º ArguParser å¯ä»¥åˆ†æä»»ä½• CommandLineSegments, æ‰€ä»¥ä½ åº”è¯¥ new PropertyArguParser() // å°† ArguParser ä½œä¸ºæœ€åä¸€ä¸ªåˆ†æå™¨, è¿™æ ·åˆ†æçš„æ—¶å€™å°±ä¼šå…ˆä½¿ç”¨å‰ä¸¤ä¸ª }, Console.ReadLine()); ","date":"2021-06-29T21:54:51+08:00","permalink":"https://slimenull.com/p/20210629215451/","title":"[C#] ä½¿ç”¨ NullLib.CommandLine åˆ†æå‘½ä»¤è¡Œå­—ç¬¦ä¸²å¹¶æ‰§è¡Œä¸ä»£ç ä¸­å®šä¹‰çš„æ–¹æ³•"},{"content":"é¢„è§ˆ: æœ€åˆç‰ˆæœ¬: æ›´æ–°: å†æ¬¡æ›´æ–° (è¿™æ¬¡ä¼˜åŒ–äº†ç®—æ³•):\n[video(video-meXn8OHU-1667173967679)(type-bilibili)(url-https://player.bilibili.com/player.html?aid=902039129)(image-https://img-blog.csdnimg.cn/img_convert/86ebcb2e350f1bce9383f671951f1fb7.jpeg)(title-[æ¼”ç¤º] C# NAudio Direct2D éŸ³é¢‘å¯è§†åŒ–)]\næ•æ‰å£°å¡è¾“å‡º: å®ç°éŸ³é¢‘å¯è§†åŒ–, ç¬¬ä¸€æ­¥å°±æ˜¯è·å¾—éŸ³é¢‘é‡‡æ ·, è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨è®¡ç®—æœºæ­£åœ¨æ’­æ”¾çš„éŸ³é¢‘ä½œä¸ºé‡‡æ ·æºè¿›è¡Œå¤„ç†:\nNAudio ä¸­, å¯ä»¥å€ŸåŠ© WasapiLoopbackCapture æ¥è¿›è¡Œæ•æ‰:\n1 2 3 4 5 6 7 8 9 10 WasapiLoopbackCapture cap = new WasapiLoopbackCapture(); cap.DataAvailable += (sender, e) =\u0026gt; // å½•åˆ¶æ•°æ®å¯ç”¨æ—¶è§¦å‘æ­¤äº‹ä»¶, å‚æ•°ä¸­åŒ…å«éŸ³é¢‘æ•°æ® { float[] allSamples = Enumerable // æå–æ•°æ®ä¸­çš„é‡‡æ · .Range(0, e.BytesRecorded / 4) // é™¤ä»¥å››æ˜¯å› ä¸º, ç¼“å†²åŒºå†…æ¯ 4 ä¸ªå­—èŠ‚æ„æˆä¸€ä¸ªæµ®ç‚¹æ•°, ä¸€ä¸ªæµ®ç‚¹æ•°æ˜¯ä¸€ä¸ªé‡‡æ · .Select(i =\u0026gt; BitConverter.ToSingle(e.Buffer, i * 4)) // è½¬æ¢ä¸º float .ToArray(); // è½¬æ¢ä¸ºæ•°ç»„ // è·å–é‡‡æ ·å, åœ¨è¿™é‡Œè¿›è¡Œè¯¦ç»†å¤„ç† } cap.StartRecording(); // å¼€å§‹å½•åˆ¶ åˆ†ç¦»å·¦å³é€šé“: è·å–å®Œé‡‡æ ·å, æˆ‘ä»¬è¿˜éœ€è¦å¯¹é‡‡æ ·è¿›è¡Œä¸€ç‚¹å°å¤„ç†, å› ä¸ºæ•è·çš„æ•°æ®æ˜¯åˆ†é€šé“çš„, ä¸€èˆ¬æ˜¯å·¦å³å£°é“:\n1 2 3 4 5 6 7 8 9 // è®¾å®šæˆ‘ä»¬å·²ç»å°†åˆšåˆšçš„é‡‡æ ·ä¿å­˜åˆ°äº†å˜é‡ AllSamples ä¸­, ç±»å‹ä¸º float[] int channelCount = cap.WaveFormat.Channels; // WasapiLoopbackCapture çš„ WaveFormat æŒ‡å®šäº†å½“å‰å£°éŸ³çš„æ³¢å½¢æ ¼å¼, å…¶ä¸­åŒ…å«å°±é€šé“æ•° float[][] channelSamples = Enumerable .Range(0, channelCount) .Select(channel =\u0026gt; Enumerable .Range(0, AllSamples.Length / channelCount) .Select(i =\u0026gt; AllSamples[channel + i * channelCount]) .ToArray()) .ToArray(); å–é€šé“å¹³å‡å€¼ å°†é‡‡æ ·åˆ†ä¸ºä¸€ä¸ªä¸ªé€šé“çš„é‡‡æ ·å, æˆ‘ä»¬å¯ä»¥å°†å…¶åˆå¹¶, å–å¹³å‡å€¼, ä»¥ä¾¿äºç»˜åˆ¶:\n1 2 3 4 5 6 7 8 9 // è®¾å®šæˆ‘ä»¬å·²ç»å°†åˆ†å¼€äº†çš„é‡‡æ ·ä¿å­˜åˆ°äº†å˜é‡ ChannelSamples ä¸­, ç±»å‹ä¸º float[][] // ä¾‹å¦‚é€šé“æ•°ä¸º2, é‚£ä¹ˆå·¦å£°é“çš„é‡‡æ ·ä¸º ChannelSamples[0], å³å£°é“ä¸º ChannelSamples[1] float[] averageSamples = Enumerable .Range(0, AllSamples.Length / channelCount) .Select(index =\u0026gt; Enumerable .Range(0, channelCount) .Select(channel =\u0026gt; ChannelSamples[channel][index]) .Average()) .ToArray(); ç»˜åˆ¶æ—¶åŸŸå›¾è±¡: å¤„ç†åˆšåˆšçš„é‡‡æ ·å, ä½ å¯ä»¥ç›´æ¥å°†å…¶ä½œä¸ºæ•°æ®ç»˜åˆ¶åˆ°çª—å£ä¸­, è¿™å³æ˜¯æ—¶åŸŸå›¾è±¡, è¿™é‡Œä½¿ç”¨æœ€ç®€å•çš„æŠ˜çº¿ç»˜åˆ¶.\n1 2 3 4 5 6 // è®¾å®š g ä¸ºçª—å£çš„ Graphics å¯¹è±¡, windowHeight ä¸ºçª—å£çš„æ˜¾ç¤ºåŒºåŸŸé«˜åº¦ // è®¾å®šé€šé“é‡‡æ ·å¹³å‡å€¼ä¸º AverageSamples, ç±»å‹ä¸º float[] Point[] points = AverageSamples .Select((v, i) =\u0026gt; new Point(i, windowHeight - v)) .ToArray(); // å°†æ•°æ®è½¬æ¢ä¸ºä¸€ä¸ªä¸ªçš„åæ ‡ç‚¹ g.DrawLines(Pens.Black, points); // è¿æ¥è¿™äº›ç‚¹, ç”»çº¿ å‚…é‡Œå¶å˜æ¢: NAudio ä¸­è¿˜æä¾›äº†å¿«é€Ÿå‚…é‡Œå¶å˜æ¢çš„æ–¹æ³•, é€šè¿‡å‚…é‡Œå¶å˜æ¢, å¯ä»¥å°†æ—¶åŸŸæ•°æ®è½¬æ¢ä¸ºé¢‘åŸŸæ•°æ®, ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„é¢‘è°±\n1 2 3 4 5 6 7 8 9 10 11 12 13 // æˆ‘ä»¬å°†å¯¹ AverageSamples è¿›è¡Œå‚…é‡Œå¶å˜æ¢, å¾—åˆ°ä¸€ä¸ªå¤æ•°æ•°ç»„ // å› ä¸ºå¯¹äºå¿«é€Ÿå‚…é‡Œå¶å˜æ¢ç®—æ³•, éœ€è¦æ•°æ®é•¿åº¦ä¸º 2 çš„ n æ¬¡æ–¹, è¿™é‡Œè¿›è¡Œ float log = Math.Ceiling(Math.Log(AverageSamples.Length, 2)); // å–å¯¹æ•°å¹¶å‘ä¸Šå–æ•´ int newLen = (int)Math.Pow(2, log); // è®¡ç®—æ–°é•¿åº¦ float[] filledSamples = new float[newLen]; Array.Copy(AverageSamples, filledSamples, AverageSamples.Length); // æ‹·è´åˆ°æ–°æ•°ç»„ Complex[] complexSrc = filledSamples .Select(v =\u0026gt; new Complex(){ X = v }) // å°†é‡‡æ ·è½¬æ¢ä¸ºå¤æ•° .ToArray(); FastFourierTransform(false, log, complexSrc); // è¿›è¡Œå‚…é‡Œå¶å˜æ¢ // å˜æ¢ä¹‹å, complexSrc åˆ™å·²ç»è¢«å¤„ç†è¿‡, å…¶ä¸­å­˜å‚¨äº†é¢‘åŸŸä¿¡æ¯ åˆ†æé¢‘åŸŸä¿¡æ¯: å¯¹äºå‚…é‡Œå¶å˜æ¢çš„é¢‘åŸŸä¿¡æ¯, éœ€è¦ç¨åŠ å¤„ç†æ‰å¯ä»¥æ–¹ä¾¿çš„ä½¿ç”¨, é¦–å…ˆæ˜¯æå–æœ‰ç”¨çš„ä¿¡æ¯:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 // NAudio çš„å‚…é‡Œå¶å˜æ¢ç»“æœä¸­, ä¼¼ä¹ä¸å­˜åœ¨ç›´æµåˆ†é‡(è¿™ä½¿æˆ‘ä»¬çš„å¤„ç†æ›´åŠ æ–¹ä¾¿äº†), ä½†å®ƒä¹Ÿæ˜¯æœ‰å…±è½­ä»€ä¹ˆçš„(ä¹Ÿå°±æ˜¯æ•°æ®å·¦å³å¯¹ç§°, åªæœ‰ä¸€åŠæ˜¯æœ‰ç”¨çš„) // ä»ç„¶ä½¿ç”¨åˆšåˆšçš„ complexSrc ä½œä¸ºå˜æ¢ç»“æœ, å®ƒçš„ç±»å‹æ˜¯ Complex[] Complex[] halfData = complexSrc .Take(complexSrc.Length / 2) .ToArray(); // ä¸€åŠçš„æ•°æ® float[] dftData = halfData .Select(v =\u0026gt; Math.Sqrt(v.X * v.X + v.Y * v.Y)) // å–å¤æ•°çš„æ¨¡ .ToArray(); // å°†å¤æ•°ç»“æœè½¬æ¢ä¸ºæˆ‘ä»¬æ‰€éœ€è¦çš„é¢‘ç‡å¹…åº¦ // å…¶å®, åˆ°è¿™é‡Œä½ å®Œå…¨å¯ä»¥æŠŠè¿™äº›æ•°æ®ç»˜åˆ¶åˆ°çª—å£ä¸Š, è¿™å·²ç»ç®—æ˜¯é¢‘åŸŸå›¾è±¡äº†, ä½†æ˜¯å¯¹äºéŸ³ä¹å¯è§†åŒ–æ¥è®², æŸäº›é¢‘ç‡çš„æ•°æ®æˆ‘ä»¬å®Œå…¨ä¸éœ€è¦ // ä¾‹å¦‚ 10000Hz çš„é¢‘ç‡, æˆ‘ä»¬å®Œå…¨æ²¡å¿…è¦å»ç»˜åˆ¶å®ƒ, å– æœ€å°é¢‘ç‡ ~ 2500Hz è¶³çŸ£ // å¯¹äºå˜æ¢ç»“æœ, æ¯ä¸¤ä¸ªæ•°æ®ä¹‹é—´æ‰€å·®çš„é¢‘ç‡è®¡ç®—å…¬å¼ä¸º é‡‡æ ·ç‡/é‡‡æ ·æ•°, é‚£ä¹ˆæˆ‘ä»¬è¦å–çš„ä¸ªæ•°ä¹Ÿå¯ä»¥ç”± 2500 / (é‡‡æ ·ç‡ / é‡‡æ ·æ•°) æ¥å¾—å‡º int count = 2500 / (cap.WaveFormat.SampleRate / filledSamples.Length); float[] finalData = dftData.Take(count).ToArray(); ç»˜åˆ¶é¢‘åŸŸå›¾è±¡: å¾—åˆ°ä¸Šé¢åˆ†æåçš„ finalData å, æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ç»˜åˆ¶å‡ºæ¥äº†, è¿™æ¬¡ä½¿ç”¨æŸ”å’Œçš„æ›²çº¿ç»˜åˆ¶\n1 2 3 4 5 // è®¾å®š g ä¸ºçª—å£çš„ Graphics å¯¹è±¡, height ä¸ºçª—å£é«˜åº¦ PointF[] points = finalData .Select((v, i) =\u0026gt; new PointF(i, height - v)) .ToArray(); g.DrawCurve(Pens.Purple, points); // Graphics å¯ä»¥ç›´æ¥ç»˜åˆ¶æ›²çº¿ æ›´ä¼˜çš„ç»˜åˆ¶: ä¸Šé¢çš„æ—¶åŸŸå’Œé¢‘åŸŸå›¾è±¡, æˆ‘ä»¬éƒ½æ˜¯ä¸€è‚¡è„‘çš„å°†æ•°æ®çš„ç´¢å¼•ä½œä¸º X åæ ‡, çª—å£é«˜åº¦å‡å»æ•°æ®å€¼ä½œä¸º Y åæ ‡, æœ‰ä¸¤ä¸ªçªå‡ºçš„é—®é¢˜:\næ•°æ®å¯èƒ½æ— æ³•å¡«æ»¡çª—å£çš„å®½åº¦æˆ–è€…è¶…å‡ºçª—å£çš„å®½åº¦èŒƒå›´ æ•°æ®å¤ªå¤§æ—¶, ä¹Ÿä¼šå¯¼è‡´ç»˜åˆ¶çš„çº¿æ¡è¶…å‡ºçª—å£é«˜åº¦ ç¬¬ä¸€ä¸ªé—®é¢˜å¥½è§£å†³, ç›´æ¥ä½¿ç´¢å¼•æ‰€å æ•°æ®é•¿åº¦çš„ç™¾åˆ†æ¯”æ°å¥½ç­‰äº X åæ ‡ç›¸å¯¹äºçª—å£å®½åº¦çš„ç™¾åˆ†æ¯”å³å¯: $$ x = index \\div dataLength * windowWidth $$ å¯¹äºç¬¬äºŒä¸ªé—®é¢˜, æœ‰ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆ, ä¸€æ˜¯ç›´æ¥ä¸ºæ•°æ®åŠ æƒé‡, ä¾‹å¦‚ç»Ÿä¸€ä¹˜ 0.5, ä½¿æ•°æ®å‡å°ä¸€èŠ‚, äºŒå°±æ˜¯å¥—ä¸€ä¸ªå‡½æ•°, ä¾‹å¦‚ log å‡½æ•°, æ¯•ç«Ÿ log å‡½æ•°åœ¨è¾ƒé«˜è‡ªå˜é‡çš„æƒ…å†µä¸‹, å› å˜é‡çš„å˜åŒ–è¶‹åŠ¿è¶Šæ¥è¶Šå°, æˆ‘ä»¬åªéœ€è¦å¯¹è¿™ä¸ª log å‡½æ•°è¿›è¡Œç¨åŠ å¤„ç†, å°±å¯ä»¥ç›´æ¥åº”ç”¨åˆ°æ•°æ®å˜æ¢æ•°æ®ä¸Š, ä½¿å…¶ä¸è¶…å‡ºçª—å£ç»˜å›¾åŒºåŸŸ\nå¦å¤–, æˆ‘ä»¬ä¹Ÿå¯ä»¥å¹³æ»‘é¢‘è°±æ˜¾ç¤º(æŒ‡åŠ¨ç”»å˜æ¢), å®ƒçš„åŸç†å¤§æ¦‚æ˜¯è¿™æ ·:\nä¾‹å¦‚è¿™æ¬¡è¿›è¡Œå‚…é‡Œå¶å˜æ¢çš„ç»“æœæ˜¯: {0, 100, 50},\nä¸‹ä¸€æ¬¡å‚…é‡Œå¶å˜æ¢çš„ç»“æœæ˜¯: {100, 0, 0},\nå¯ä»¥å¾—å‡º, å¢é‡ä¸º: {100, -100, -50},\nåœ¨æ›´æ–°å˜æ¢ç»“æœæ—¶, æˆ‘ä»¬ä¸å†ç›´æ¥å°†æ–°çš„ç»“æœæ›¿æ¢æ—§çš„ç»“æœ, è€Œæ˜¯åœ¨æ—§çš„ç»“æœçš„åŸºç¡€ä¸Š, åŠ ä¸Šå¢é‡Ã—æƒé‡\nä¾‹å¦‚æƒé‡æ˜¯ 0.5 æ—¶, é‚£ä¹ˆå®é™…å¢é‡æ˜¯: {50, -50, -25},\né‚£ä¹ˆå®é™…æ–°çš„å€¼æ˜¯: {50, 50, 25},\nå¦‚æœä¸‹ä¸€æ¬¡å˜æ¢çš„ç»“æœè¿˜æ˜¯ {100, 0, 0}, é‚£æˆ‘ä»¬å†æ¬¡ä» {50, 50, 25} å‘æ–°å€¼é€¼è¿‘, æƒé‡ä»ç„¶æ˜¯ 0.5, é‚£ä¹ˆå®é™…å¢é‡æ˜¯: {25, -25, -12.5},\næ³¨æ„åˆ°äº†å—? è¿™æ¬¡çš„å¢é‡æ˜¯ä¸Šæ¬¡å¢é‡çš„ä¸€åŠ, è¿™æ­£å¥½æ˜¯ä¸€ä¸ªå‡é€Ÿè¿åŠ¨, è€Œä¸”æ–°å€¼ä¸æ—§å€¼çš„å·®è¶Šå¤§, å˜åŒ–çš„å°±è¶Šå¿«, è€Œå®ƒä»¬ä¼šä¸æ–­é‡åˆ, å› è€Œé€Ÿåº¦ä¸æ–­å˜æ…¢, å½¢æˆå‡é€Ÿè¿åŠ¨çš„é¢‘è°±å›¾.\næ›´å¤šå†…å®¹: æ›´å¤šå…³äº NAudio çš„ä½¿ç”¨, å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« : [C#] NAudio çš„å„ç§å¸¸è§ä½¿ç”¨æ–¹å¼ æ’­æ”¾ å½•åˆ¶ è½¬ç  éŸ³é¢‘å¯è§†åŒ–\né¡¹ç›®å·²å¼€æº: å…³äºæœ¬æ–‡ç« æ¶‰åŠçš„å¤§éƒ¨åˆ†å†…å®¹, å‡åœ¨ github.com/SlimeNull/AudioTest ä»“åº“ä¸­çš„ Null.AudioVisualizer é¡¹ç›®ä¸­æœ‰å†™. (æ³¨é‡Šå¦¥å½“äº†)\nå¦‚æœæ˜¯ä¹‹åæ›´æ–°è¿‡çš„, ä¼˜åŒ–äº†ç®—æ³•çš„,å¯ä»¥åœ¨ github.com/SlimeNull/AudioVisualizer ä»“åº“æŸ¥çœ‹æºä»£ç . (æ³¨é‡Šå¦¥å½“äº†)\nå…¶å®éŸ³é¢‘å¯è§†åŒ–æˆ‘è€æ—©å°±æƒ³åšäº†, ä½†æ˜¯æœ¬äººæ•°å­¦ä¸æ˜¯éå¸¸çš„å¥½, ä¸è¿‡æœ€åæ€»ç®—æ˜¯åšæŒä¸‹æ¥äº†, å¼„å‡ºæ¥äº†å•Š, å¿ƒæƒ…è€æ¿€åŠ¨äº†\næ±‚ä¸ªèµ, æ±‚ä¸ªè¯„è®º~ ","date":"2021-05-09T23:49:18+08:00","permalink":"https://slimenull.com/p/20210509234918/","title":"[C#] ä½¿ç”¨ NAudio å®ç°éŸ³é¢‘å¯è§†åŒ–"},{"content":"éŸ³æ³¢: é¦–å…ˆæ˜¯åˆä¸­ç‰©ç†çŸ¥è¯†, å£°éŸ³æ˜¯ç‰©ä½“çš„æŒ¯åŠ¨é€ æˆçš„, æ‰€ä»¥ä»æ—¶é—´ä¸Šçœ‹, è¿™ä¸ªç‰©ä½“çš„ä½ç½®ä¸æ–­å˜åŠ¨, ä¸‹é¢è¿™ä¸ªå›¾è±¡, å°±æ˜¯éŸ³æ³¢äº†\né‡‡æ ·: å› ä¸ºè®¡ç®—æœºæ— æ³•å­˜å‚¨æ•´ä¸ªéŸ³æ³¢, åªèƒ½å­˜å‚¨éŸ³æ³¢ä¸Šä¸€ä¸ªä¸ªçš„ç‚¹, è€Œè¿™ä¸€ä¸ªä¸ªçš„ç‚¹, å°±æ˜¯é‡‡æ ·:\né‡‡æ ·ç‡: é‡‡æ ·ç‡å°±æ˜¯é‡‡æ ·çš„å¯†é›†ç¨‹åº¦, å¦‚æœå¤ªè¿‡å¯†é›†, é‚£ä¹ˆå ç”¨çš„å­˜å‚¨ç©ºé—´å°±ä¼šå¤§å¾ˆå¤š, ä½†å¦‚æœé‡‡æ ·ç‡å°äº†, é‚£ä¹ˆè¿™äº›é‡‡æ ·ä¸åŸæ³¢å½¢çš„å½¢çŠ¶å°±æœ‰æ‰€ä¸åŒäº†.\næ ·æœ¬å¤§å°: æ ·æœ¬å¤§å°è¡¨ç¤ºè®¡ç®—æœºåº”è¯¥ç”¨å¤šå¤§çš„å­˜å‚¨ç©ºé—´æ¥å­˜å‚¨ä¸€ä¸ªæ ·æœ¬, æœ‰ 8bit, 16bit, 32bit, å¸¸ç”¨çš„æ˜¯ 16bit å’Œ32bit, æ ·æœ¬å¤§å°è¿˜å†³å®šäº†è¿™ä¸ªæ ·æœ¬èƒ½è¡¨ç¤ºçš„å€¼çš„èŒƒå›´, ä¾‹å¦‚ 16 bit çš„æ ·æœ¬åªèƒ½è¡¨ç¤º -32768 åˆ° 32767 ä¹‹é—´çš„æ•´æ•°, å¦‚æœéŸ³é¢‘çš„æŸä¸ªéƒ¨åˆ†è¶…å‡ºäº†è¿™ä¸ªèŒƒå›´, é‚£ä¹ˆæ˜¾ç„¶è¿™ä¸ªé‡‡æ ·å°±ä¸ç²¾å‡†äº†, å¦‚ä¸‹å›¾, æ³¢å³°å¤„å°±å‡ºç°äº†è¯¯å·®.\næ ·æœ¬ç¼–ç  æ ·æœ¬ç¼–ç æŒ‡è®¡ç®—æœºç”¨ä»€ä¹ˆæ ·çš„æ ¼å¼æ¥å­˜å‚¨è¿™ä¸ªæ ·æœ¬, å¯¹äº 8bit, 16bit çš„æ ·æœ¬, ä¸€èˆ¬æ˜¯ç”¨æ•´æ•°, å¯¹äº 32bit çš„æ ·æœ¬, åˆ™æ˜¯ç”¨æµ®ç‚¹æ•°æ›´å¤š.\n","date":"2021-05-06T19:54:02+08:00","permalink":"https://slimenull.com/p/20210506195402/","title":"[éšç¬”] éŸ³é¢‘, é‡‡æ ·, é‡‡æ ·ç‡, æ ·æœ¬å¤§å°, æ ·æœ¬ç¼–ç "},{"content":"æ¦‚è¿° åœ¨ NAudio ä¸­, å¸¸ç”¨ç±»å‹æœ‰ WaveIn, WaveOut, WaveStream, WaveFileWriter, WaveFileReader, AudioFileReader ä»¥åŠæ¥å£: IWaveProvider, ISampleProvider, IWaveIn, IWavePlayer\nWaveIn è¡¨ç¤ºæ³¢å½¢è¾“å…¥, ç»§æ‰¿äº† IWaveIn, ä¾‹å¦‚éº¦å…‹é£è¾“å…¥, æˆ–è€…è®¡ç®—æœºæ­£åœ¨æ’­æ”¾çš„éŸ³é¢‘æµ. WaveOut è¡¨ç¤ºæ³¢å½¢è¾“å‡º, ç»§æ‰¿äº† IWavePlayer, ç”¨æ¥æ’­æ”¾æ³¢å½¢éŸ³ä¹, ä»¥ IWaveProvider ä½œä¸ºæ’­æ”¾æºæ’­æ”¾éŸ³é¢‘, é€šè¿‡æ‹“å±•æ–¹æ³•ä¹Ÿæ”¯æŒä»¥ ISampleProvider ä½œä¸ºæ’­æ”¾æºæ’­æ”¾éŸ³é¢‘ WaveStream è¡¨ç¤ºæ³¢å½¢æµ, å®ƒç»§æ‰¿äº† IWaveProvider, å¯ä»¥ç”¨æ¥ä½œä¸ºæ’­æ”¾æº. WaveFileReader ç»§æ‰¿äº† WaveStream, ç”¨æ¥è¯»å–æ³¢å½¢æ–‡ä»¶ WaveFileWriter ç»§æ‰¿äº†Stream, ç”¨æ¥å†™å…¥æ–‡ä»¶, å¸¸ç”¨äºä¿å­˜éŸ³é¢‘å½•åˆ¶çš„æ•°æ®. AudioFileReader é€šç”¨çš„éŸ³é¢‘æ–‡ä»¶è¯»å–å™¨, å¯ä»¥è¯»å–æ³¢å½¢æ–‡ä»¶, ä¹Ÿå¯ä»¥è¯»å–å…¶ä»–ç±»å‹çš„éŸ³é¢‘æ–‡ä»¶ä¾‹å¦‚ Aiff, MP3 IWaveProvider æ³¢å½¢æä¾›è€…, ä¸Šé¢å·²ç»æåˆ°, æ˜¯éŸ³é¢‘æ’­æ”¾çš„æä¾›è€…, é€šè¿‡æ‹“å±•æ–¹æ³•å¯ä»¥è½¬æ¢ä¸º ISampleProvider ISampleProvider é‡‡æ ·æä¾›è€…, ä¸Šé¢å·²ç»æåˆ°, é€šè¿‡æ‹“å±•æ–¹æ³•å¯ä»¥ä½œä¸º WaveOut çš„æ’­æ”¾æº æ’­æ”¾éŸ³é¢‘ å¸¸ç”¨çš„æ’­æ”¾éŸ³é¢‘æ–¹å¼æœ‰ä¸¤ç§, æ’­æ”¾æ³¢å½¢éŸ³ä¹, ä»¥åŠæ’­æ”¾ MP3 éŸ³ä¹\næ’­æ”¾æ³¢å½¢éŸ³ä¹:\n1 2 3 4 5 6 7 8 // NAudio ä¸­, é€šè¿‡ WaveFileReader æ¥è¯»å–æ³¢å½¢æ•°æ®, åœ¨å®ä¾‹åŒ–æ—¶, ä½ å¯ä»¥æŒ‡å®šæ–‡ä»¶åæˆ–è€…æ˜¯è¾“å…¥æµ, è¿™æ„å‘³ç€ä½ å¯ä»¥è¯»å–å†…å­˜æµä¸­çš„éŸ³é¢‘æ•°æ® // ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯, ä¸å¯ä»¥è¯»å–æ¥è‡ªç½‘ç»œæµçš„éŸ³é¢‘, å› ä¸ºç½‘ç»œæµä¸å¯ä»¥è¿›è¡Œ Seek æ“ä½œ. // æ­¤å¤„, å‡è®¾ ms ä¸ºä¸€ä¸ª MemoryStream, å†…å­˜æœ‰éŸ³é¢‘æ•°æ®. WaveFileReader reader = new WaveFileReader(ms); WaveOut wout = new WaveOut(); wout.Init(reader); // é€šè¿‡ IWaveProvider ä¸ºéŸ³é¢‘è¾“å‡ºåˆå§‹åŒ– wout.Play(); // è‡³æ­¤, wout å°†ä»æŒ‡å®šçš„ reader ä¸­æä¾›çš„æ•°æ®è¿›è¡Œæ’­æ”¾ æ’­æ”¾ MP3 éŸ³ä¹:\n1 2 3 4 5 6 7 8 // æ’­æ”¾ MP3 éŸ³ä¹å…¶å®ä¸æ’­æ”¾æ³¢å½¢éŸ³ä¹æ²¡æœ‰å¤ªå¤§åŒºåˆ«, åªä¸è¿‡å°† WaveFileReader æ¢æˆäº† Mp3FileReader ç½¢äº† // å¦å¤–, ä¹Ÿå¯ä»¥ä½¿ç”¨é€šç”¨çš„ Reader, MediaFoundationReader, å®ƒæ—¢å¯ä»¥è¯»å–æ³¢å½¢éŸ³ä¹, ä¹Ÿå¯ä»¥è¯»å– MP3 // æ­¤å¤„, å‡è®¾ ms ä¸ºä¸€ä¸ª MemoryStream, å†…å­˜æœ‰éŸ³é¢‘æ•°æ®. Mp3FileReader reader = new Mp3FileReader(ms); WaveOut wout = new WaveOut(); wout.Init(reader); wout.Play(); éŸ³é¢‘å½•åˆ¶ å½•åˆ¶éº¦å…‹é£è¾“å…¥\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 // å€ŸåŠ© WaveIn ç±», æˆ‘ä»¬å¯ä»¥è½»æ˜“çš„æ•è·éº¦å…‹é£è¾“å…¥, åœ¨æ¯ä¸€æ¬¡å½•åˆ¶åˆ°æ•°æ®æ—¶, å°†æ•°æ®å†™å…¥åˆ°æ–‡ä»¶æˆ–å…¶ä»–æµ, è¿™å°±å®ç°äº†ä¿å­˜å½•éŸ³ // åœ¨ä¿å­˜æ³¢å½¢æ–‡ä»¶æ—¶éœ€è¦å€ŸåŠ© WaveFileWriter, å½“ç„¶, å¦‚æœä½ æƒ³ä¿å­˜ä¸ºå…¶ä»–æ ¼å¼, ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶å®ƒçš„ Writer, ä¾‹å¦‚ CurWaveFileWriter ä»¥åŠ // AiffFileWriter, ç¾ä¸­ä¸è¶³çš„æ˜¯æ²¡æœ‰ç›´æ¥å†™å…¥åˆ° MP3 çš„ FileWriter // éœ€è¦æ³¨æ„çš„æ˜¯, å¦‚æœä½ æ˜¯ç”¨çš„æ¡Œé¢ç¨‹åº, é‚£ä¹ˆä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ WaveIn, å…¶å›è°ƒåŸºäº Windows æ¶ˆæ¯, æ‰€ä»¥æ— æ³•åœ¨æ§åˆ¶å°åº”ç”¨ä¸­ä½¿ç”¨ WaveIn // å¦‚æœè¦åœ¨æ§åˆ¶å°åº”ç”¨ä¸­å®ç°å½•éŸ³, åªéœ€è¦ä½¿ç”¨ WaveInEvent, å®ƒçš„å›è°ƒåŸºäºäº‹ä»¶è€Œä¸æ˜¯ Windows æ¶ˆæ¯, æ‰€ä»¥å¯ä»¥é€šç”¨ WaveIn cap = new WaveIn(); // cap, capture WaveFileWriter writer = new WaveFileWriter(); cap.DataAvailable += (s, args) =\u0026gt; writer.Write(args.Buffer, 0, args.BytesRecorded); // è®¢é˜…äº‹ä»¶ cap.StartRecording(); // å¼€å§‹å½•åˆ¶ // ç»“æŸå½•åˆ¶æ—¶: cap.StopRecording(); // åœæ­¢å½•åˆ¶ writer.Close(); // å…³é—­ FileWriter, ä¿å­˜æ•°æ® // å¦å¤–, é™¤äº†ä½¿ç”¨ WaveIn, ä½ è¿˜å¯ä»¥ä½¿ç”¨ WasapiCapture, å®ƒä¸ WaveIn çš„ä½¿ç”¨æ–¹å¼æ˜¯ä¸€è‡´çš„, å¯ä»¥ç”¨æ¥å½•åˆ¶éº¦å…‹é£ // Wasapi å…¨ç§° Windows Audio Session Application Programming Interface (WindowséŸ³é¢‘ä¼šè¯åº”ç”¨ç¼–ç¨‹æ¥å£) // å…·ä½“ WaveIn, WaveInEvent, WasapiCapture çš„æ€§èƒ½, ç¬”è€…è¿˜æ²¡æœ‰æµ‹è¯•è¿‡, ä½†ä¼°è®¡ä¸ä¼šæœ‰å¤ªå¤§å·®å¼‚. // æç¤º: WasapiCapture å’Œ WasapiLoopbackCapture ä½äº NAudio.Wave å‘½åç©ºé—´ä¸‹ å½•åˆ¶å£°å¡è¾“å‡º\n1 2 3 4 5 6 // å½•åˆ¶å£°å¡è¾“å‡º, ä¹Ÿå°±æ˜¯å½•åˆ¶è®¡ç®—æœºæ­£åœ¨æ’­æ”¾çš„å£°éŸ³, å€ŸåŠ© WasapiLoopbackCapture å³å¯ç®€å•å®ç°, ä½¿ç”¨æ–¹å¼ä¸ WasapiCapture æ— å¼‚ WasapiLoopbackCapture cap = new WasapiLoopbackCapture(); WaveFileWriter writer = new WaveFileWriter(); cap.DataAvailable += (s, args) =\u0026gt; writer.Write(args.Buffer, 0, args.BytesRecorded); cap.StartRecording(); é«˜çº§åº”ç”¨ è·å–è®¡ç®—æœºå®æ—¶æ’­æ”¾éŸ³é‡å¤§å°\n1 2 3 4 5 6 7 8 9 10 11 12 // å…¶å®è¿™ä¸ªæ˜¯åŸºäºåˆšåˆšçš„å½•åˆ¶å£°å¡è¾“å‡ºçš„, å½•åˆ¶æ—¶çš„å›è°ƒä¸­, Buffer, BytesRecorded æŒ‡å®šäº†æ­¤æ¬¡å½•åˆ¶çš„æ•°æ® (ç¼“å†²åŒºå’Œæ•°æ®é•¿åº¦) // è€Œè¿™äº›æ•°æ®, å…¶å®æ˜¯è®¡ç®—æœºå¯¹å£°éŸ³çš„é‡‡æ ·(Sample), å…·ä½“çš„é‡‡æ ·æ ¼å¼å¯ä»¥æŸ¥çœ‹ WasapiLoopbackCapture å®ä¾‹çš„ WaveForamt // æ³¢å½¢æ ¼å¼ä¸­çš„ Encoding ä¸ BitsPerSample æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„. ä¸€èˆ¬é»˜è®¤çš„ Encoding æ˜¯ IeeeFloat, ä¹Ÿå°±æ˜¯æ¯ä¸€ä¸ªé‡‡æ ·éƒ½æ˜¯ // ä¸€ä¸ªæµ®ç‚¹æ•°, è€Œ BitsPerSample ä¹Ÿå°±æ˜¯ 32 äº†. é€šè¿‡ BitConverter.ToSingle() æˆ‘ä»¬å¯ä»¥ä»ç¼“å†²åŒºä¸­å–å¾—æµ®ç‚¹æ•° // éå†, æ¯ 32 ä½ä¸€ä¸ªæµ®ç‚¹æ•°, æœ€ç»ˆå–æœ€å¤§å€¼, è¿™å°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„éŸ³é‡äº† float volume; WasapiLoopbackCapture cap = new WasapiLoopbackCapture(); cap.DataAvailable += (s, args) =\u0026gt; volume = Enumerable .Range(0, args.BytesRecorded / 4) // æ¯ä¸€ä¸ªé‡‡æ ·çš„ä½ç½® .Select(i =\u0026gt; BitConverter.ToSingle(args.Buffer, i * 4)) // è·å–æ¯ä¸€ä¸ªé‡‡æ · .Aggregate((v1, v2) =\u0026gt; v1 \u0026gt; v2 ? v1 : v2); // æ‰¾åˆ°å€¼æœ€å¤§çš„é‡‡æ · å®ç°éŸ³ä¹å¯è§†åŒ– å®Œæ•´ç‰ˆ NAudio å®ç°éŸ³ä¹å¯è§†åŒ–: [C#] ä½¿ç”¨ NAudio å®ç°éŸ³é¢‘å¯è§†åŒ–\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 // æ—¢ç„¶æˆ‘ä»¬å·²ç»çŸ¥é“äº†, é‚£äº›æ•°æ®éƒ½æ˜¯ä¸€ä¸ªä¸ªçš„é‡‡æ ·, è‡ªç„¶ä¹Ÿå¯ä»¥é€šè¿‡å®ƒä»¬æ¥ç»˜åˆ¶é¢‘è°±, åªéœ€è¦è¿›è¡Œå¿«é€Ÿå‚…é‡Œå¶å˜æ¢å³å¯ // è€Œä¸”æœ‰æ„æ€çš„æ˜¯, NAudio ä¹Ÿä¸ºæˆ‘ä»¬å‡†å¤‡å¥½äº†å¿«é€Ÿå‚…é‡Œå¶å˜æ¢çš„æ–¹æ³•, ä½äº NAudio.Dsp å‘½åç©ºé—´ä¸‹ // æç¤º: è¿›è¡Œå‚…é‡Œå¶å˜æ¢æ‰€éœ€è¦çš„å¤æ•°(Complex)ç±»ä¹Ÿä½äº NAudio.Dsp å‘½åç©ºé—´, å®ƒæœ‰ä¸¤ä¸ªå­—æ®µ, X(å®éƒ¨) ä¸ Y(è™šéƒ¨) // ä¸‹é¢ç»™å‡ºåœ¨ IeeeFloat æ ¼å¼ä¸‹çš„éŸ³ä¹å¯è§†åŒ–çš„ç®€å•ç¤ºä¾‹: WasapiLoopbackCapture cap = new WasapiLoopbackCapture(); cap.DataAvailable += (s, args) =\u0026gt; { float[] samples = Enumerable .Range(0, args.BytesRecorded / 4) .Select(i =\u0026gt; BitConverter.ToSingle(args.Buffer, i * 4)) .ToArray(); // è·å–é‡‡æ · int log = (int)Math.Ceiling(Math.Log(samples.Length, 2)); float[] filledSamples = new float[(int)Math.Pow(2, log)]; Array.Copy(samples, filledSamples, samples.Length); // å¡«å……æ•°æ® int sampleRate = (s as WasapiLoopbackCapture).WaveFormat.SampleRate; // è·å–é‡‡æ ·ç‡ Complex[] complexSrc = filledSamples.Select((v, i) =\u0026gt; { double deg = i / (double)sampleRate * Math.PI * 2; // è·å–å½“å‰é‡‡æ ·ç‡åœ¨åœ†ä¸Šå¯¹åº”çš„è§’åº¦ (å¼§åº¦åˆ¶) return new Complex() { X = (float)(Math.Cos(deg) * v), Y = (float)(Math.Sin(deg) * v) }; }).ToArray(); // å°†é‡‡æ ·è½¬æ¢ä¸ºå¯¹åº”çš„å¤æ•° (ç¼ ç»•åˆ°åœ†) FastFourierTransform.FFT(false, log, complexSrc); // è¿›è¡Œå‚…é‡Œå¶å˜æ¢ double[] result = complexSrc.Select(v =\u0026gt; Math.Sqrt(v.X * v.X + v.Y * v.Y)).ToArray(); // å–å¾—ç»“æœ }; éŸ³é¢‘æ ¼å¼è½¬æ¢\n1 2 3 4 5 6 7 8 9 // å¯¹äº Wave, CueWave, Aiff, è¿™äº›æ ¼å¼éƒ½æœ‰å…¶å¯¹åº”çš„ FileWriter, æˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨å…¶ Writer çš„ Create***File æ¥ // ä» IWaveProvider åˆ›å»ºå¯¹åº”æ ¼å¼çš„æ–‡ä»¶. å¯¹äº MP3 è¿™ç±»æ²¡æœ‰ FileWriter çš„æ ¼å¼, å¯ä»¥è°ƒç”¨ MediaFoundationEncoder // ä¾‹å¦‚ä¸€ä¸ªæ–‡ä»¶, \u0026#34;./Disconnected.mp3\u0026#34;, æˆ‘ä»¬è¦å°†å®ƒè½¬æ¢ä¸º wav æ ¼å¼, åªéœ€è¦ä½¿ç”¨ä¸‹é¢çš„ä»£ç , CurWave ä¸ Aiff åŒç† using (Mp3FileReader reader = new Mp3FileReader(\u0026#34;./Disconnected.mp3\u0026#34;)) WaveFileWriter.CreateWaveFile(\u0026#34;./Disconnected.wav\u0026#34;, reader); // ä» IWaveProvider åˆ›å»º MP3 æ–‡ä»¶, å‡å¦‚ä¸€ä¸ª WaveFileReader ä¸º src MediaFoundationEncoder.EncodeToMp3(src, \u0026#34;./NewMp3.mp3\u0026#34;); æç¤º å¯¹äºåˆšåˆšæ‰€è¯´çš„éŸ³é¢‘å½•åˆ¶, é‡‡æ ·çš„æ ¼å¼æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„, å°†æ•°æ®è½¬æ¢ä¸ºä¸€ä¸ª float æ•°ç»„å, å…¶ä¸­è¿˜éœ€è¦åŒºåˆ†éŸ³é¢‘é€šé“, ä¾‹å¦‚ä¸€èˆ¬éŸ³ä¹æ˜¯åŒé€šé“, WaveFormat çš„ Channel ä¸º 2, é‚£ä¹ˆåœ¨ float æ•°ç»„ä¸­, æ¯ä¸¤ä¸ªé‡‡æ ·ä¸ºä¸€ç»„, ä¸€ç»„é‡‡æ ·ä¸­æ¯ä¸€ä¸ªé‡‡æ ·éƒ½æ˜¯ä¸€ä¸ªé€šé“åœ¨å½“å‰æ—¶é—´å†…çš„é‡‡æ ·.\nä»¥åŒé€šé“è·ç¦», ä¸‹å›¾ä¸­, é‡‡æ ·æ•°æ®ä¸­æ¯ä¸€ä¸ªåœ†åœˆéƒ½è¡¨ç¤ºä¸€ä¸ª float å€¼, é‚£ä¹ˆæ¯ä¸¤ä¸ªé‡‡æ ·æ—¶é—´ç‚¹ç›¸åŒ, è€Œå„ä¸ªé€šé“çš„é‡‡æ ·å°±æ˜¯æ¯ä¸€ç»„ä¸­æ¯ä¸€ä¸ªé‡‡æ ·\næ‰€ä»¥å¯¹äºæˆ‘ä»¬åˆšåˆšè¿›è¡Œçš„éŸ³ä¹å¯è§†åŒ–, ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è®², è¿˜éœ€è¦åŒºåˆ†é€šé“\nç¤ºä¾‹ æœ¬æ–‡æåˆ°çš„éƒ¨åˆ†å†…å®¹åœ¨ github.com/SlimeNull/AudioTest ä»“åº“ä¸­æœ‰ç¤ºä¾‹, ä¾‹å¦‚éŸ³é¢‘å¯è§†åŒ–, éŸ³é¢‘å½•åˆ¶, ä»¥åŠå…¶ä»–é›¶æ˜Ÿçš„ç¤ºä¾‹\nå¦‚æœ‰é”™è¯¯, è¿˜è¯·æŒ‡å‡º\n","date":"2021-05-06T19:49:04+08:00","permalink":"https://slimenull.com/p/20210506194904/","title":"[C#] NAudio å„ç§å¸¸è§ä½¿ç”¨æ–¹å¼ æ’­æ”¾ å½•åˆ¶ è½¬ç  éŸ³é¢‘å¯è§†åŒ–"},{"content":"åœ¨ Y åˆ†é’Ÿå†…å­¦ä¼š Python è¿™æ˜¯ç¿»è¯‘, åŸæ–‡åœ°å€: Learn Python in Y Minutes\nåœ¨ 90 å¹´ä»£åˆ, Python ç”± Guido van Rossum åˆ›é€ , ç°åœ¨, å®ƒæ˜¯æœ€å—æ¬¢è¿çš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€. å› å…¶ç®€æ˜çš„è¯­æ³•, æˆ‘çˆ±ä¸Šäº†å®ƒ. è¯­æ³•åŸºæœ¬ä¸Šæ˜¯å¯ä»¥æ‰§è¡Œçš„ä¼ªä»£ç .\næç¤º: è¿™ç¯‡æ–‡ç« é€‚ç”¨äº Python 3, å¦‚æœä½ æƒ³è¦å­¦ä¹ æ—§ç‰ˆ Python 2.7, å•å‡»è¿™é‡Œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 523 524 525 526 527 528 529 530 531 532 533 534 535 536 537 538 539 540 541 542 543 544 545 546 547 548 549 550 551 552 553 554 555 556 557 558 559 560 561 562 563 564 565 566 567 568 569 570 571 572 573 574 575 576 577 578 579 580 581 582 583 584 585 586 587 588 589 590 591 592 593 594 595 596 597 598 599 600 601 602 603 604 605 606 607 608 609 610 611 612 613 614 615 616 617 618 619 620 621 622 623 624 625 626 627 628 629 630 631 632 633 634 635 636 637 638 639 640 641 642 643 644 645 646 647 648 649 650 651 652 653 654 655 656 657 658 659 660 661 662 663 664 665 666 667 668 669 670 671 672 673 674 675 676 677 678 679 680 681 682 683 684 685 686 687 688 689 690 691 692 693 694 695 696 697 698 699 700 701 702 703 704 705 706 707 708 709 710 711 712 713 714 715 716 717 718 719 720 721 722 723 724 725 726 727 728 729 730 731 732 733 734 735 736 737 738 739 740 741 742 743 744 745 746 747 748 749 750 751 752 753 754 755 756 757 758 759 760 761 762 763 764 765 766 767 768 769 770 771 772 773 774 775 776 777 778 779 780 781 782 783 784 785 786 787 788 789 790 791 792 793 794 795 796 797 798 799 800 801 802 803 804 805 806 807 808 809 810 811 812 813 814 815 816 817 818 819 820 821 822 823 824 825 826 827 828 829 830 831 832 833 834 835 836 837 838 839 840 841 842 843 844 845 846 847 848 849 850 851 852 853 854 855 856 857 858 859 860 861 862 863 864 865 866 867 868 869 870 871 872 873 874 875 876 877 878 879 880 881 882 883 884 885 886 887 888 889 890 891 892 893 894 895 896 897 898 899 900 901 902 903 904 905 906 907 908 909 910 911 912 913 914 915 916 917 918 919 920 921 922 923 924 925 926 927 928 929 930 931 932 933 934 935 936 937 938 939 940 941 942 943 944 945 946 947 948 949 950 951 952 953 954 955 956 957 958 959 960 961 962 963 964 965 966 967 968 969 970 971 972 973 974 975 976 977 978 979 980 981 982 983 984 985 986 987 988 989 990 991 992 993 994 995 996 997 998 999 1000 # å•è¡Œæ³¨é‡Šä»¥ \u0026#39;#\u0026#39; ä½œä¸ºå¼€å¤´ \u0026#34;\u0026#34;\u0026#34;å¤šè¡Œæ³¨é‡Šå¯ä»¥ä½¿ç”¨ä¸‰ä¸ªåŒå¼•å· å¹¶ä¸”ç»å¸¸ç”¨ä¸ä¹¦å†™æ–‡æ¡£ \u0026#34;\u0026#34;\u0026#34; #################################################### ## 1. åŸå§‹æ•°æ®ç±»å‹å’Œæ“ä½œç¬¦ #################################################### # ä½ å¯ä»¥ä½¿ç”¨æ•°å­— 3 # ç­‰åŒäº 3 # æ•°å­¦è¿ç®—ä¹Ÿæ˜¯ä½ å¸Œæœ›ä½¿ç”¨çš„å½¢å¼ 1 + 1 # ç»“æœæ˜¯ 2 8 - 1 # ç»“æœæ˜¯ 7 10 * 2 # ç»“æœæ˜¯ 20 35 / 5 # ç»“æœæ˜¯ 7.0 # æ­£è´Ÿæ•°çš„æ•´é™¤éƒ½ä¼šå‘ä¸‹å–æ•´ 5 // 3 # ç»“æœæ˜¯ 1 -5 // 3 # ç»“æœæ˜¯ -2 5.0 // 3.0 # ç»“æœæ˜¯ 1.0 # åœ¨æµ®ç‚¹è¿ç®—ä¸­ä¹ŸåŒæ ·ç”Ÿæ•ˆ -5.0 // 3.0 # ç»“æœæ˜¯ -2.0 # é™¤æ³•çš„è¿ç®—ç»“æœå§‹ç»ˆæ˜¯æµ®ç‚¹æ•° 10.0 / 3 # ç»“æœæ˜¯ 3.3333333333333335 # å–æ¨¡è¿ç®— 7 % 3 # ç»“æœæ˜¯ 1 # i % j ç»“æœçš„ç¬¦å·ä¸ j ç›¸åŒ, è¿™ä¸ C è¯­è¨€ä¸åŒ -7 % 3 # ç»“æœæ˜¯ 2 # å¹‚è¿ç®— (x**y, xçš„yæ¬¡æ–¹) 2 ** 3 # ç»“æœæ˜¯ 8 # ç”¨æ‹¬å·æ¥å¼ºåˆ¶ä¼˜å…ˆè¿ç®— 1 + 3 * 2 # ç»“æœæ˜¯ 7 (1 + 3) * 2 # ç»“æœæ˜¯ 8 # å¸ƒå°”å€¼æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ True # å€¼ä¸º çœŸ(true) False # å€¼ä¸º å‡(false) # ä½¿ç”¨ not æ¥è¿›è¡Œéè¿ç®— not True # ç»“æœæ˜¯ å‡ not False # ç»“æœæ˜¯ çœŸ # å¸ƒå°”å€¼æ“ä½œç¬¦: # æç¤º, \u0026#39;and\u0026#39; å’Œ \u0026#39;or\u0026#39; æ˜¯åŒºåˆ†å¤§å°å†™çš„ True and False # ç»“æœæ˜¯ å‡ False or True # ç»“æœæ˜¯ çœŸ # True å’Œ False äº‹å®ä¸Šä¹Ÿç­‰åŒäº 1 å’Œ 0, åªä¸è¿‡æ˜¯ä½¿ç”¨äº†ä¸åŒçš„å…³é”®å­— True + True # ç»“æœæ˜¯ 2 True * 8 # ç»“æœæ˜¯ 8 False - 5 # ç»“æœæ˜¯ -5 # æ¯”è¾ƒè¿ç®—ç¬¦ä¼šæ£€æŸ¥ True å’Œ False çš„æ•°å­—å€¼ 0 == False # ç»“æœæ˜¯ çœŸ 1 == True # ç»“æœæ˜¯ çœŸ 2 == True # ç»“æœæ˜¯ å‡ -5 != False # ç»“æœæ˜¯ çœŸ # å¯¹æ•´æ•°ä½¿ç”¨å¸ƒå°”é€»è¾‘æ“ä½œç¬¦, åˆ™ä¼šå°†å®ƒä»¬è½¬æ¢ä¸ºå¸ƒå°”å€¼ä»¥æ±‚å€¼ï¼Œä½†è¿”å›æœªè½¬æ¢çš„å€¼ # ä¸è¦æŠŠ bool(ints) å’Œ ä½è¿ç®— and/or ææ··äº† bool(0) # è¿”å› å‡ bool(4) # è¿”å› çœŸ bool(-6) # è¿”å› çœŸ 0 and 2 # è¿”å› 0 -5 or 0 # è¿”å› -5 # è¿ç®—ç¬¦ \u0026#39;ç­‰åŒäº\u0026#39; æ˜¯ == 1 == 1 # è¿”å› çœŸ 2 == 1 # è¿”å› å‡ # è¿ç®—ç¬¦ \u0026#39;ä¸ç­‰äº\u0026#39; æ˜¯ != 1 != 1 # è¿”å› å‡ 2 != 1 # è¿”å› çœŸ # æ›´å¤šæ¯”è¾ƒè¿ç®—ç¬¦ 1 \u0026lt; 10 # è¿”å› çœŸ 1 \u0026gt; 10 # è¿”å› å‡ 2 \u0026lt;= 2 # è¿”å›çœŸ 2 \u0026gt;= 2 # è¿”å›çœŸ # æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦åœ¨æŒ‡å®šèŒƒå›´å†… 1 \u0026lt; 2 and 2 \u0026lt; 3 # è¿”å› çœŸ 1 \u0026lt; 3 and 3 \u0026lt; 2 # è¿”å› å‡ # è¿æ¥èµ·æ¥, è¿™æ ·çœ‹èµ·æ¥ä¼šæ›´å¥½çœ‹äº› 1 \u0026lt; 2 \u0026lt; 3 # è¿”å› çœŸ 2 \u0026lt; 3 \u0026lt; 2 # è¿”å› å‡ # (is ä¸ ==) is å°†ä¼šæ£€æŸ¥ä¸¤ä¸ªå˜é‡æ˜¯å¦å¼•ç”¨äº†åŒä¸€ä¸ªå¯¹è±¡, ä½†æ˜¯ == æ£€æŸ¥ # ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦æŒ‡å‘äº†ç›¸åŒçš„å€¼ a = [1, 2, 3, 4] # ä½¿ a æŒ‡å‘ä¸€ä¸ªæ–°çš„åˆ—è¡¨, [1, 2, 3, 4] b = a # ä½¿ b æŒ‡å‘ a æ‰€æŒ‡å‘çš„å¯¹è±¡ b is a # è¿”å› çœŸ, a å’Œ b å¼•ç”¨çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ b == a # è¿”å› çœŸ, a å’Œ b çš„å¯¹è±¡æ˜¯ç›¸ç­‰çš„ b = [1, 2, 3, 4] # ä½¿ b æŒ‡å‘ä¸€ä¸ªæ–°çš„åˆ—è¡¨, [1, 2, 3, 4] b is a # è¿”å› å‡, a ä¸ b å¹¶ä¸å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ b == a # è¿”å› çœŸ, a å’Œ b çš„å¯¹è±¡ä½¿ç›¸ç­‰çš„ # å­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨ åŒå¼•å· \u0026#34; æˆ– å•å¼•å· \u0026#39; æ¥åˆ›å»º \u0026#34;è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²\u0026#34; \u0026#39;è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²\u0026#39; # å­—ç¬¦ä¸²å¯ä»¥ç›¸åŠ  \u0026#34;Hello \u0026#34; + \u0026#34;world!\u0026#34; # è¿”å› \u0026#34;Hello world!\u0026#34; \u0026#34;Hello \u0026#34; \u0026#34;world!\u0026#34; # ç­‰åŒäº \u0026#34;Hello world!\u0026#34; # å­—ç¬¦ä¸²å¯ä»¥ç”¨ä½œä¸€ä¸ªå­—ç¬¦åˆ—è¡¨ \u0026#34;Hello world!\u0026#34;[0] # è¿”å› \u0026#39;H\u0026#39; # ä½ å¯ä»¥è·å–å­—ç¬¦ä¸²çš„é•¿åº¦: len(\u0026#34;è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²\u0026#34;) # è¿”å› 7 # ä½ å¯ä»¥ä½¿ç”¨ f-å­—ç¬¦ä¸² æˆ– æ ¼å¼åŒ–å­—ç¬¦ä¸² æ¥å¯¹å­—ç¬¦ä¸²æ–‡æœ¬è¿›è¡Œæ ¼å¼åŒ– (åœ¨ Python 3.6 æˆ–æ›´é«˜ç‰ˆæœ¬) name = \u0026#34;å°çº¢\u0026#34; f\u0026#34;å¥¹è¯´å¥¹çš„åå­—æ˜¯{name}.\u0026#34; # è¿”å› \u0026#34;å¥¹è¯´å¥¹çš„åå­—æ˜¯å°çº¢.\u0026#34; # ä½ å¯ä»¥åŸºæœ¬çš„å°† Python è¡¨è¾¾å¼æ”¾åˆ°æ‹¬å·å†…, ç„¶åå®ƒå°±ä¼šè¢«è¾“å‡ºåˆ°å­—ç¬¦ä¸²ä¸­. f\u0026#34;{name}æ˜¯{len(name)}å­—ç¬¦é•¿.\u0026#34; # è¿”å› \u0026#34;å°çº¢æ˜¯ä¸¤ä¸ªå­—ç¬¦é•¿\u0026#34; # None æ˜¯ä¸€ä¸ªå¯¹è±¡ None # è¿”å› None # ä¸è¦ä½¿ç”¨ç­‰åŒäºè¿ç®—ç¬¦ \u0026#39;==\u0026#39; æ¥æ¯”è¾ƒå¯¹è±¡å’Œ None # ä½¿ç”¨ \u0026#39;is\u0026#39; æ¥ä»£æ›¿. è¿™ä¸ªä¼šæ£€æŸ¥å¯¹è±¡æ ‡è¯†æ˜¯å¦ç›¸åŒ. \u0026#34;etc\u0026#34; is None # è¿”å› å‡ None is None # è¿”å› çœŸ # None, 0, ä»¥åŠç©ºçš„å­—ç¬¦ä¸²/åˆ—è¡¨/å­—å…¸/å…ƒç»„, éƒ½è®¡ç®—ä¸º å‡ bool(0) # =\u0026gt; å‡ bool(\u0026#39;\u0026#39;) # =\u0026gt; å‡ bool([]) # =\u0026gt; å‡ bool({}) # =\u0026gt; å‡ bool(()) # =\u0026gt; å‡ #################################################### ## 2. å˜é‡å’Œé›†åˆ #################################################### # Python æœ‰ä¸€ä¸ª print å‡½æ•°, ç”¨äºæ ‡å‡†è¾“å‡º print(\u0026#34;æˆ‘æ˜¯Python, å¾ˆé«˜å…´è§åˆ°ä½ !\u0026#34;) # =\u0026gt; æˆ‘æ˜¯Python, å¾ˆé«˜å…´è§åˆ°ä½ ! # é»˜è®¤çš„, print å‡½æ•°è¿˜ä¼šåœ¨ç»“å°¾è¾“å‡ºä¸€ä¸ªæ¢è¡Œç¬¦ # ä½¿ç”¨å¯é€‰å‚æ•° \u0026#39;end\u0026#39; æ¥æ”¹å˜æœ«å°¾çš„å­—ç¬¦ä¸². print(\u0026#34;Hello, world\u0026#34;, end=\u0026#34;!\u0026#34;) # =\u0026gt; Hello, world! # è¾“å‡ºåæ²¡æœ‰æ¢è¡Œ # ä»æ§åˆ¶å°è·å–è¾“å…¥æ•°æ®çš„ç®€å•æ–¹å¼: input_string_var = input(\u0026#34;Enter some data:\u0026#34;) # ä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¿”å›è¾“å…¥æ•°æ® # Python ä¸­æ²¡æœ‰å˜é‡çš„å£°æ˜, åªæœ‰èµ‹å€¼. # å‘½åè§„èŒƒæ˜¯ä½¿ç”¨å°å†™ä»¥åŠä¸‹åˆ’çº¿, å°±åƒè¿™æ ·: lower_case_with_underscores some_var = 5 some_var # =\u0026gt; 5 # è®¿é—®ä¸€ä¸ªæ²¡æœ‰ç”Ÿå‘½çš„å˜é‡æ˜¯é”™è¯¯çš„ # æŸ¥çœ‹æ§åˆ¶æµæ¥è·å–æ›´å¤šå¼‚å¸¸æ•æ‰ä¿¡æ¯ some_unknown_var # è¿™æ˜¯ä¸€ä¸ªä¸€ä¸ªæœªå®šä¹‰çš„å˜é‡, è¿è¡Œæ—¶å°†æŠ›å‡º NameError å¼‚å¸¸ # if ä¹Ÿå¯ç”¨ä½œä¸€ä¸ªè¡¨è¾¾å¼ # ç­‰åŒäº C è¯­è¨€ä¸­çš„ \u0026#39;?:\u0026#39; ä¸‰å…ƒè¿ç®—ç¬¦ \u0026#34;yay\u0026#34; if 0 \u0026gt; 1 else \u0026#34;nay!\u0026#34; # =\u0026gt; \u0026#34;nay\u0026#34; # åˆ—è¡¨å¯ä»¥å­˜å‚¨ä¸€ä¸ªåºåˆ—, å¯ä»¥è¿™æ ·å®šä¹‰: li = [] # ä½ å¯ä»¥ä¸ºå…¶æŒ‡å®šåˆå§‹å€¼ other_li = [4, 5, 6] # ä½¿ç”¨ append æ–¹æ³•åœ¨åˆ—è¡¨çš„æœ«å°¾æ·»åŠ ä¸€äº›ä»€ä¹ˆä¸œè¥¿ li.append(1) # ç°åœ¨ li çš„å€¼æ˜¯ [1] li.append(2) # ç°åœ¨ li çš„å€¼æ˜¯ [1, 2] li.append(4) # ç°åœ¨ li çš„å€¼æ˜¯ [1, 2, 4] li.append(3) # ç°åœ¨ li çš„å€¼æ˜¯ [1, 2, 4, 3] # ä½¿ç”¨ pop æ–¹æ³•ä»åˆ—è¡¨çš„æœ«å°¾ç§»é™¤å…ƒç´  li.pop() # è¿”å› 3, å¹¶ä¸”ç°åœ¨ li çš„å€¼æ˜¯ [1, 2, 4] # é‡æ–°å°†å®ƒæ”¾å›å» li.append(3) # ç°åœ¨ li åˆå˜æˆ [1, 2, 4, 3] äº† # åƒè®¿é—®æ•°ç»„ä¸€æ ·è®¿é—®ä¸€ä¸ªåˆ—è¡¨ li[0] # =\u0026gt; 1 # è®¿é—®åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´  li[-1] # =\u0026gt; 3 # å¦‚æœç´¢å¼•è¶…å‡ºç•Œé™, é‚£ä¹ˆä¼šæŠ›å‡º IndexError å¼‚å¸¸ li[4] # æŠ›å‡º IndexError å¼‚å¸¸ # ä½ å¯ä»¥ä½¿ç”¨åˆ‡ç‰‡è¯­æ³•æ¥æŸ¥çœ‹ä¸€ä¸ªèŒƒå›´å†…çš„å…ƒç´  # èµ·å§‹ç´¢å¼•åŒ…å«åœ¨å†…, ä½†ç»“æŸç´¢å¼•ä¸åŒ…å«åœ¨å†… # (å¯¹äºæ•°å­¦ç±»å‹æ¥è®², å®ƒæ˜¯ä¸€ä¸ª é—­/å¼€ åŒºé—´) li[1:3] # è¿”å›ä»ç´¢å¼•1åˆ°3çš„ä¸€ä¸ªåˆ—è¡¨ =\u0026gt; [2, 4] li[2:] # è¿”å›ä»ç´¢å¼•2å¼€å§‹çš„åˆ—è¡¨ =\u0026gt; [4, 3] li[:3] # è¿”å›ä»å¼€å§‹åˆ°ç´¢å¼•3çš„åˆ—è¡¨ =\u0026gt; [1, 2, 4] li[::2] # è¿”å›ä¸€ä¸ªæ¯ä¸¤ä¸ªå…ƒç´ é€‰æ‹©ä¸€ä¸ªçš„åˆ—è¡¨ =\u0026gt; [1, 4] li[::-1] # è¿”å›åå‘æ’åˆ—çš„åˆ—è¡¨ =\u0026gt; [3, 4, 2, 1] # ä½¿ç”¨ä»»æ„ç»„åˆæ¥å®ç°é«˜çº§åˆ‡ç‰‡ # li[èµ·å§‹:ç»“æŸ:æ­¥é•¿] # ä½¿ç”¨åˆ‡ç‰‡æ¥åˆ›å»ºä¸€ä¸ªå•å±‚çš„æ·±åº¦æ‹·è´ li2 = li[:] # ä½¿ç”¨ \u0026#34;del\u0026#34; æ¥åˆ é™¤ä»»æ„å…ƒç´  del li[2] # ç°åœ¨ li çš„å€¼æ˜¯ [1, 2, 3] # åˆ é™¤ç¬¬ä¸€ä¸ªåŒ¹é…å€¼çš„å…ƒç´  li.remove(2) # ç°åœ¨ li çš„å€¼æ˜¯ [1, 3] li.remove(2) # æŠ›å‡º ValueError å¼‚å¸¸, 2 å¹¶ä¸åœ¨è¿™ä¸ªåˆ—è¡¨ä¸­ # åœ¨æŒ‡å®šç´¢å¼•å¤„æ’å…¥å…ƒç´ , åˆ—è¡¨.insert(ç´¢å¼•, å…ƒç´ ) li.insert(1, 2) # ç°åœ¨ li çš„å€¼åˆæ˜¯ [1, 2, 3] äº† # è·å–ç¬¬ä¸€ä¸ªåŒ¹é…å…ƒç´ çš„ç´¢å¼• li.index(2) # =\u0026gt; 1 li.index(4) # æŠ›å‡º ValueError å¼‚å¸¸, 4 ä¸åœ¨è¿™ä¸ªåˆ—è¡¨ä¸­ # ä½ å¯ä»¥å°†åˆ—è¡¨ç›¸åŠ  # æç¤º: values å’Œ other_li çš„å€¼ä¸ä¼šè¢«ä¿®æ”¹ li + other_li # =\u0026gt; [1, 2, 3, 4, 5, 6] # ä½¿ç”¨ \u0026#34;extend()\u0026#34; è¿æ¥åˆ—è¡¨, extend çš„æ„æ€æ˜¯æ‹“å±• li.extend(other_li) # ç°åœ¨ li çš„å€¼æ˜¯ [1, 2, 3, 4, 5, 6] # ä½¿ç”¨ \u0026#34;in\u0026#34; æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨äºåˆ—è¡¨ä¸­ 1 in li # =\u0026gt; True # ä½¿ç”¨ \u0026#34;len()\u0026#34; æ£€æŸ¥åˆ—è¡¨çš„é•¿åº¦ len(li) # =\u0026gt; 6 # å…ƒç»„ä¸åˆ—è¡¨ç›¸åƒ, ä½†æ˜¯ä¸å¯æ›´æ”¹ tup = (1, 2, 3) tup[0] # =\u0026gt; 1 tup[0] = 3 # æŠ›å‡ºä¸€ä¸ª TypeError # æç¤º, é•¿åº¦ä¸ºä¸€çš„å…ƒç»„çš„æœ€åä¸€ä¸ªå…ƒç´ å¿…é¡»æœ‰ä¸€ä¸ªé€—å·è·Ÿéš, ä½†æ˜¯ # å…¶ä»–é•¿åº¦çš„å…ƒç»„, å°½ç®¡æ˜¯0, ä¹Ÿä¸éœ€è¦ type((1)) # =\u0026gt; \u0026lt;class \u0026#39;int\u0026#39;\u0026gt; type((1,)) # =\u0026gt; \u0026lt;class \u0026#39;tuple\u0026#39;\u0026gt; type(()) # =\u0026gt; \u0026lt;class \u0026#39;tuple\u0026#39;\u0026gt; # å¤§å¤šæ•°çš„åˆ—è¡¨æ“ä½œç¬¦éƒ½å¯ä»¥åœ¨å…ƒç»„ä¸Šä½¿ç”¨ len(tup) # =\u0026gt; 3 tup + (4, 5, 6) # =\u0026gt; (1, 2, 3, 4, 5, 6) tup[:2] # =\u0026gt; (1, 2) 2 in tup # =\u0026gt; True # ä½ å¯ä»¥å°†å…ƒç»„(æˆ–è€…åˆ—è¡¨)è§£åŒ…ä¸ºå˜é‡ a, b, c = (1, 2, 3) # ç°åœ¨, a æ˜¯ 1, b æ˜¯ 2, c æ˜¯ 3 # ä½ è¿˜å¯ä»¥ä½¿ç”¨æ‹“å±•è§£åŒ… a, *b, c = (1, 2, 3, 4) # ç°åœ¨, a æ˜¯ 1, b æ˜¯ [2, 3], c æ˜¯ 4 # é»˜è®¤æƒ…å†µä¸‹, å³ä¾¿ä½ å¿½ç•¥æ‹¬å·, ä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªå…ƒç»„ d, e, f = 4, 5, 6 # å…ƒç»„ 4, 5, 6 è¢«è§£åŒ…ä¸ºå˜é‡ d, e, f # å˜é‡å€¼åˆ†åˆ«å¦‚ä¸‹: d = 4, e = 5 ä»¥åŠ f = 6 # é‚£ä¹ˆçœ‹çœ‹äº¤æ¢ä¸¤ä¸ªå€¼æ˜¯å¤šä¹ˆçš„ç®€å• e, d = d, e # å­—å…¸ç”¨äºå­˜å‚¨ä»é”®åˆ°å€¼çš„æ˜ å°„ empty_dict = {} # åˆ›å»ºäº†ä¸€ä¸ªç©ºå­—å…¸ # ä¸‹é¢æ˜¯ä¸€ä¸ªå¸¦æœ‰åˆå§‹å€¼çš„å­—å…¸ filled_dict = {\u0026#34;one\u0026#34;: 1, \u0026#34;two\u0026#34;: 2, \u0026#34;three\u0026#34;: 3} # æç¤º: å­—å…¸çš„é”®å¿…é¡»æ˜¯ä¸å¯å˜çš„ç±»å‹. è¿™æ˜¯ä¸ºäº†ç¡®ä¿ # é”®èƒ½å¤Ÿè½¬æ¢ä¸ºç”¨äºå¿«é€ŸæŸ¥è¯¢çš„å¸¸é‡å“ˆå¸Œå€¼. # ä¸å¯å˜ç±»å‹åŒ…å«æ•´æ•°, æµ®ç‚¹æ•°, å­—ç¬¦ä¸², å…ƒç»„ invalid_dict = {[1, 2, 3]: \u0026#34;123\u0026#34;} # æŠ›å‡º TypeError: unhashable type: \u0026#39;list\u0026#39; å¼‚å¸¸. (ç±»å‹é”™è¯¯: æ— æ³•è¿›è¡Œå“ˆå¸ŒåŒ–çš„ç±»å‹: \u0026#39;åˆ—è¡¨\u0026#39;) valid_dict = {(1, 2, 3): [1, 2, 3]} # ç„¶è€Œ, å€¼å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ # ä½¿ç”¨ [] æ¥æŸ¥è¯¢å€¼ filled_dict[\u0026#34;one\u0026#34;] # =\u0026gt; 1 # ä½¿ç”¨ \u0026#34;keys()\u0026#34; æ¥è·å–æ‰€æœ‰çš„é”®å¹¶ä½œä¸ºä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡è¿”å›. æˆ‘ä»¬éœ€è¦åœ¨ list() ä¸­å°†è°ƒç”¨ç»“æœè½¬æ¢ # ä¸ºä¸€ä¸ªåˆ—è¡¨. è¿™ä¸ªç¨åå†è®². æç¤º - åœ¨ Python ä½äº 3.7 çš„ç‰ˆæœ¬ä¸­ # å­—å…¸é”®ç´¢å¼•çš„é¡ºåºæ˜¯æ— æ³•ä¿è¯çš„. ä½ çš„ç»“æœå¯èƒ½ä¸ä¸ä¸‹é¢çš„ä¾‹å­å®Œå…¨ç›¸ç­‰. ç„¶è€Œ, åœ¨ Python 3.7 ä¸­, å­—å…¸ # å…ƒç´ ä¼šä¿æŒå®ƒä»¬è¢«æ’å…¥åˆ°å­—å…¸çš„é¡ºåº list(filled_dict.keys()) # =\u0026gt; [\u0026#34;three\u0026#34;, \u0026#34;two\u0026#34;, \u0026#34;one\u0026#34;] åœ¨ä½äº 3.7 çš„ Python ç‰ˆæœ¬ä¸­ list(filled_dict.keys()) # =\u0026gt; [\u0026#34;one\u0026#34;, \u0026#34;two\u0026#34;, \u0026#34;three\u0026#34;] åœ¨ 3.7 æˆ–æ›´é«˜çš„ Python ç‰ˆæœ¬ä¸­ # ä½¿ç”¨ \u0026#34;values()\u0026#34; æ¥è·å–æ‰€æœ‰çš„å€¼å¹¶ä½œä¸ºå¯è¿­ä»£å¯¹è±¡è¿”å›. åŒæ ·, æˆ‘ä»¬éœ€è¦å°†å…¶åœ¨ # list() ä¸­è½¬æ¢, ä»¥å–å‡ºè¿™ä¸ªå¯è¿­ä»£å¯¹è±¡çš„å€¼. æç¤º - å’Œä¸Šé¢é”®çš„é¡ºåºæ˜¯ä¸€æ ·çš„ list(filled_dict.values()) # =\u0026gt; [3, 2, 1] åœ¨ä½äº 3.7 çš„ Python ç‰ˆæœ¬ä¸­ list(filled_dict.values()) # =\u0026gt; [1, 2, 3] åœ¨ 3.7 æˆ–æ›´é«˜çš„ Python ç‰ˆæœ¬ä¸­ # ä½¿ç”¨ \u0026#34;in\u0026#34; æ¥æ£€æŸ¥é”®æ˜¯å¦åœ¨å­—å…¸ä¸­ \u0026#34;one\u0026#34; in filled_dict # =\u0026gt; True 1 in filled_dict # =\u0026gt; False # é€šè¿‡ä¸å­˜åœ¨çš„é”®æ¥æŸ¥æ‰¾å­—å…¸, ä¼šæŠ›å‡º KeyError å¼‚å¸¸ filled_dict[\u0026#34;four\u0026#34;] # KeyError # ä½¿ç”¨ \u0026#34;get()\u0026#34; æ–¹æ³•æ¥é¿å… KeyError å¼‚å¸¸ filled_dict.get(\u0026#34;one\u0026#34;) # =\u0026gt; 1 filled_dict.get(\u0026#34;four\u0026#34;) # =\u0026gt; None # è¿™ä¸ªæ–¹æ³•æ”¯æŒå½“æ‰¾ä¸åˆ°å€¼æ—¶è¿”å›æŒ‡å®šçš„é»˜è®¤å€¼ filled_dict.get(\u0026#34;one\u0026#34;, 4) # =\u0026gt; 1 filled_dict.get(\u0026#34;four\u0026#34;, 4) # =\u0026gt; 4 # \u0026#34;setdefault()\u0026#34; åªæœ‰åœ¨ç»™å®šé”®ä¸å­˜åœ¨çš„æ—¶å€™å°†å€¼æ’å…¥åˆ°å­—å…¸ filled_dict.setdefault(\u0026#34;five\u0026#34;, 5) # filled_dict[\u0026#34;five\u0026#34;] è¢«è®¾ç½®ä¸ºäº† 5 filled_dict.setdefault(\u0026#34;five\u0026#34;, 6) # filled_dict[\u0026#34;five\u0026#34;] ä»ç„¶æ˜¯ 5 # å‘å­—å…¸ä¸­æ·»åŠ å†…å®¹ filled_dict.update({\u0026#34;four\u0026#34;: 4}) # =\u0026gt; {\u0026#34;one\u0026#34;: 1, \u0026#34;two\u0026#34;: 2, \u0026#34;three\u0026#34;: 3, \u0026#34;four\u0026#34;: 4} filled_dict[\u0026#34;four\u0026#34;] = 4 # å‘å­—å…¸ä¸­æ·»åŠ çš„å¦ä¸€ç§æ–¹å¼ # è‡ª Python 3.5 ä»¥æ¥, ä½ è¿˜å¯ä»¥ä½¿ç”¨æ‹“å±•è§£åŒ…é€‰é¡¹ {\u0026#39;a\u0026#39;: 1, **{\u0026#39;b\u0026#39;: 2}} # =\u0026gt; {\u0026#39;a\u0026#39;: 1, \u0026#39;b\u0026#39;: 2} {\u0026#39;a\u0026#39;: 1, **{\u0026#39;a\u0026#39;: 2}} # =\u0026gt; {\u0026#39;a\u0026#39;: 2} # é›†åˆç”¨æ¥å­˜å‚¨ ... é¢, é›†åˆ empty_set = set() # ç©ºé›†åˆ # ç”¨ä¸€ç»„å€¼æ¥åˆå§‹åŒ–ä¸€ä¸ªé›†åˆ, å—¯, çœ‹èµ·æ¥æœ‰ç‚¹åƒå­—å…¸, æŠ±æ­‰ some_set = {1, 1, 2, 2, 3, 4} # some_set ç°åœ¨çš„å€¼æ˜¯ {1, 2, 3, 4} # ä¸å­—å…¸ä¸­çš„é”®ç›¸ä¼¼, é›†åˆçš„å…ƒç´ å¿…é¡»æ˜¯ä¸å¯å˜çš„ invalid_set = {[1], 1} # =\u0026gt; æŠ›å‡ºä¸€ä¸ª TypeError: unhashable type: \u0026#39;list\u0026#39; (ç±»å‹é”™è¯¯: æ— æ³•è¿›è¡Œå“ˆå¸ŒåŒ–çš„ç±»å‹: \u0026#39;åˆ—è¡¨\u0026#39;) valid_set = {(1,), 1} # å‘é›†åˆä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæ¡ç›® filled_set = some_set filled_set.add(5) # filled_set ç°åœ¨æ˜¯ {1, 2, 3, 4, 5} # é›†åˆæ˜¯ä¸åŒ…å«é‡å¤å…ƒç´ çš„ filled_set.add(5) # è¿˜æ˜¯ä¸ä¹‹å‰ä¸€æ · {1, 2, 3, 4, 5} # ä½¿ç”¨ \u0026amp; å–äº¤é›† other_set = {3, 4, 5, 6} filled_set \u0026amp; other_set # =\u0026gt; {3, 4, 5} # ä½¿ç”¨ | å–å¹¶é›† filled_set | other_set # =\u0026gt; {1, 2, 3, 4, 5, 6} # ä½¿ç”¨ - å–å·®é›† {1, 2, 3, 4} - {2, 3, 5} # =\u0026gt; {1, 4} # ä½¿ç”¨ ^ å–å¯¹ç§°å·®é›† {1, 2, 3, 4} - {2, 3, 5} # =\u0026gt; {1, 4, 5} # æ£€æŸ¥å·¦ä¾§çš„é›†åˆæ˜¯å¦æ˜¯å³ä¾§é›†åˆçš„è¶…é›† {1, 2} \u0026gt;= {1, 2, 3} # =\u0026gt; False # æ£€æŸ¥å·¦ä¾§çš„é›†åˆæ˜¯å¦æ˜¯å³ä¾§é›†åˆçš„å­é›† {1, 2} \u0026lt;= {1, 2, 3} # =\u0026gt; True # ä½¿ç”¨ in æ¥æ£€æŸ¥æ˜¯å¦å­˜åœ¨äºé›†åˆä¸­ 2 in filled_set # =\u0026gt; True 10 in filled_set # =\u0026gt; False # ç”Ÿæˆä¸€ä¸ªå•å±‚çš„æ·±å±‚å‰¯æœ¬ filled_set = some_set.copy() # filled_set æ˜¯ {1, 2, 3, 4, 5} filled_set is some_set # =\u0026gt; False #################################################### ## 3. æ§åˆ¶æµå’Œå¯è¿­ä»£å¯¹è±¡ #################################################### # é¦–å…ˆæˆ‘ä»¬å£°æ˜ä¸€ä¸ªå˜é‡ some_var = 5 # è¿™æ˜¯ä¸€ä¸ª if è¯­å¥, ç¼©è¿›åœ¨ Python ä¸­éå¸¸é‡è¦ # çº¦å®šè¯­æ³•æ˜¯ä½¿ç”¨å››ä¸ªç©ºæ ¼, è€Œä¸æ˜¯æ°´å¹³åˆ¶è¡¨ç¬¦(tab) # è¿™ä¸ªå°†ä¼šæ‰“å° \u0026#34;some_var æ¯” 10 å°\u0026#34; if some_var \u0026gt; 10: print(\u0026#34;some_var æ¯” 10 å¤§\u0026#34;) elif some_var \u0026lt; 10: # è¿™ä¸ª elif è¯­å¥æ˜¯å¯é€‰çš„ print(\u0026#34;some_var æ¯” 10 å°\u0026#34;) else: # è¿™ä¸ªä¹Ÿæ˜¯å¯é€‰çš„ print(\u0026#34;some_var ä¸ 10 ç›¸ç­‰\u0026#34;) \u0026#34;\u0026#34;\u0026#34; for è¯­å¥ç”¨æ¥å¾ªç¯éå†åˆ—è¡¨ å°†ä¼šæ‰“å°: ç‹—æ˜¯å“ºä¹³åŠ¨ç‰© çŒ«æ˜¯å“ºä¹³åŠ¨ç‰© è€é¼ æ˜¯å“ºä¹³åŠ¨ç‰© \u0026#34;\u0026#34;\u0026#34; for animal in [\u0026#34;ç‹—\u0026#34;, \u0026#34;çŒ«\u0026#34;, \u0026#34;è€é¼ \u0026#34;]: # ä½ å¯ä»¥ä½¿ç”¨ format() æ¥æ’å…¥æ ¼å¼åŒ–å­—ç¬¦ä¸² print(\u0026#34;{}æ˜¯å“ºä¹³åŠ¨ç‰©\u0026#34;.format(animal)) \u0026#34;\u0026#34;\u0026#34; \u0026#34;range(æ•°å­—)\u0026#34; è¿”å›ä¸€ä¸ªæ•°å­—çš„å¯è¿­ä»£å¯¹è±¡ ä»0åˆ°ç»™å®šæ•°å­— å°†ä¼šæ‰“å°: 0 1 2 3 \u0026#34;\u0026#34;\u0026#34; for i in range(4): print(i) \u0026#34;\u0026#34;\u0026#34; \u0026#34;range(è¾ƒå°çš„æ•°, è¾ƒå¤§çš„æ•°)\u0026#34; è¿”å›ä¸€ä¸ªæ•°å­—çš„å¯è¿­ä»£å¯¹è±¡ ä»è¾ƒå°çš„æ•°å­—åˆ°è¾ƒå¤§çš„æ•°å­— å°†ä¼šæ‰“å°: 4 5 6 7 \u0026#34;\u0026#34;\u0026#34; for i in range(4, 8): print(i) \u0026#34;\u0026#34;\u0026#34; \u0026#34;range(è¾ƒå°çš„æ•°, è¾ƒå¤§çš„æ•°, æ­¥é•¿)\u0026#34; è¿”å›ä¸€ä¸ªæ•°å­—çš„å¯è¿­ä»£å¯¹è±¡ ä»è¾ƒå°çš„æ•°åˆ°è¾ƒå¤§çš„æ•°, ä»¥æ­¥é•¿æœªæ¯æ¬¡å¢é•¿çš„å€¼ å¦‚æœæ­¥é•¿æ²¡æœ‰æŒ‡å®š, é»˜è®¤å€¼åˆ™æ˜¯ 1 å°†ä¼šæ‰“å°: 4 6 \u0026#34;\u0026#34;\u0026#34; for i in range(4, 8, 2): print(i) \u0026#34;\u0026#34;\u0026#34; å¾ªç¯ä¸€ä¸ªåˆ—è¡¨, å¹¶ä¸”åŒæ—¶æ£€ç´¢åˆ—è¡¨ä¸­æ¯ä¸€ä¸ªæ¡ç›®çš„ç´¢å¼•å’Œå€¼ å°†ä¼šæ‰“å°: 0 ç‹— 1 çŒ« 2 è€é¼  \u0026#34;\u0026#34;\u0026#34; animals = [\u0026#34;ç‹—\u0026#34;, \u0026#34;çŒ«\u0026#34;, \u0026#34;è€é¼ \u0026#34;] for i, value in enumerate(animals): print(i, value) \u0026#34;\u0026#34;\u0026#34; while å¾ªç¯å°†ä¸€ç›´è¿›è¡Œåˆ°æ¡ä»¶ä¸å†æ»¡è¶³ä¸ºæ­¢ å°†ä¼šæ‰“å°: 0 1 2 3 \u0026#34;\u0026#34;\u0026#34; x = 0 while x \u0026lt; 4: print(x) x += 1 # x = x + 1 çš„ç®€å†™ # ä½¿ç”¨ try/except è¯­å¥å—æ¥å¤„ç†å¼‚å¸¸ try: # ä½¿ç”¨ \u0026#34;raise\u0026#34; æ¥æŠ›å‡ºå¼‚å¸¸ raise IndexError(\u0026#34;è¿™æ˜¯ä¸€ä¸ªç´¢å¼•é”™è¯¯\u0026#34;) except IndexError as e: pass # pass åªæ˜¯ä¸€ä¸ªå ä½ç¬¦(ä¸è¿›è¡Œä»»ä½•æ“ä½œ). é€šå¸¸ä½ éœ€è¦åœ¨è¿™é‡Œå¯¹å¼‚å¸¸è¿›è¡Œå¤„ç† except (TypeError, NameError): pass # å¦‚æœéœ€è¦, ä½ å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªå¼‚å¸¸. else: # try/except è¯­å¥å—çš„å¯é€‰è¯­å¥. å¿…é¡»åœ¨æ‰€æœ‰ except è¯­å¥å—çš„åé¢ print(\u0026#34;ä¸€åˆ‡æ­£å¸¸!\u0026#34;) # ä»…åœ¨ try è¯­å¥å†…æ²¡æœ‰ä»»ä½•å¼‚å¸¸æ—¶è¿è¡Œ finally: # åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¼šæ‰§è¡Œ print(\u0026#34;æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œèµ„æºæ¸…ç†\u0026#34;) # ä½ å¯ä»¥ä½¿ç”¨ with è¯­å¥ä»£æ›¿ try/finally æ¥æ¸…ç†èµ„æº with open(\u0026#34;æˆ‘çš„æ–‡ä»¶.txt\u0026#34;) as f: for line in f: print(line) # å‘æ–‡ä»¶ä¸­å†™å…¥å†…å®¹ contents = {\u0026#34;aa\u0026#34;: 12, \u0026#34;bb\u0026#34;: 21} with open(\u0026#34;æˆ‘çš„æ–‡ä»¶1.txt\u0026#34;, \u0026#34;w+\u0026#34;) as file: file.write(str(content)) # å‘æ–‡ä»¶ä¸­å†™å…¥å­—ç¬¦ä¸² with open(\u0026#34;æˆ‘çš„æ–‡ä»¶2.txt\u0026#34;, \u0026#34;w+\u0026#34;) as file: file.write(json.dumps(content)) # å‘æ–‡ä»¶ä¸­å†™å…¥ä¸€ä¸ªå¯¹è±¡ # ä»æ–‡ä»¶ä¸­è¯»å– with open(\u0026#34;æˆ‘çš„æ–‡ä»¶1.txt\u0026#34;, \u0026#34;r+\u0026#34;) as file: contents = file.read() # ä»æ–‡ä»¶ä¸­è¯»å–ä¸€ä¸ªå­—ç¬¦ä¸² print(contents) # æ‰“å°: {\u0026#34;aa\u0026#34;, 12, \u0026#34;bb\u0026#34;: 21} with open(\u0026#34;æˆ‘çš„æ–‡ä»¶2.txt\u0026#34;, \u0026#34;r+\u0026#34;) as file: contents = json.load(file) # ä»æ–‡ä»¶ä¸­è¯»å–ä¸€ä¸ªjsonå¯¹è±¡ print(contents) # print: {\u0026#34;aa\u0026#34;: 12, \u0026#34;bb\u0026#34;: 21} # Python æä¾›äº†ä¸€ä¸ªå«åš Iterable(å¯è¿­ä»£çš„) çš„åŸºæœ¬æŠ½è±¡ # ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡æ˜¯ä¸€ä¸ªå¯è§†ä¸ºåºåˆ—çš„å¯¹è±¡ # range å‡½æ•°è¿”å›çš„å¯¹è±¡å°±æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ filled_dict = {\u0026#34;one\u0026#34;: 1, \u0026#34;two\u0026#34;: 2, \u0026#34;three\u0026#34;: 3} our_iterable = filled_dict.keys() print(our_iterable) # =\u0026gt; dict_keys([\u0026#39;one\u0026#39;, \u0026#39;two\u0026#39;, \u0026#39;three\u0026#39;]). è¿™æ˜¯ä¸€ä¸ªå®ç°äº† Iterable æ¥å£çš„å¯¹è±¡ # æˆ‘ä»¬å¯ä»¥æ£€ç´¢å®ƒ for i in our_iterable: print(i) # æ‰“å° one, two, three # ç„¶è€Œ, æˆ‘ä»¬ä¸å¯ä»¥é€šè¿‡ç´¢å¼•æ¥æ‰¾åˆ°å…ƒç´  our_iterable[1] # æŠ›å‡º TypeError å¼‚å¸¸ # ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡å³ä¸ºèƒ½å¤Ÿåˆ›å»ºè¿­ä»£å™¨çš„å¯¹è±¡ our_iterator = iter(our_iterable) # è¿­ä»£å™¨æ˜¯ä¸€ä¸ªèƒ½å¤Ÿè®°ä½å½“å‰é€šè¿‡å®ƒè¿­ä»£çŠ¶æ€çš„å¯¹è±¡ # æˆ‘ä»¬å¯ä»¥é€šè¿‡ \u0026#34;next()\u0026#34; æ¥è·å–ä¸‹ä¸€ä¸ªå¯¹è±¡ next(our_iterator) # =\u0026gt; \u0026#34;one\u0026#34; # å®ƒä¼šä¿æŒæˆ‘ä»¬éå†çš„çŠ¶æ€ next(our_iterator) # =\u0026gt; \u0026#34;two\u0026#34; next(our_iterator) # =\u0026gt; \u0026#34;three\u0026#34; # åœ¨è¿­ä»£å™¨å·²ç»è¿”å›å®Œæ‰€æœ‰çš„æ•°æ®å, å°†ä¼šæŠ›å‡º StopIteration å¼‚å¸¸ next(our_iterator) # æŠ›å‡º StopIteration å¼‚å¸¸ # æˆ‘ä»¬ä¹Ÿå¯ä»¥æ£€ç´¢å®ƒ, äº‹å®ä¸Š, \u0026#34;for\u0026#34; è¯­å¥å°±æ˜¯éšå¼çš„æ‰§è¡Œäº†è¿™ä¸ªæ“ä½œ our_iterator = iter(our_iterable) for i in iterator: print(i) # ä½ å¯ä»¥é€šè¿‡è°ƒç”¨ list() æ¥è·å–å¯è¿­ä»£å¯¹è±¡æˆ–è¿­ä»£å™¨çš„æ‰€æœ‰å…ƒç´ . list(our_iterable) # =\u0026gt; è¿”å› [\u0026#34;one\u0026#34;, \u0026#34;two\u0026#34;, \u0026#34;three\u0026#34;] list(our_iterator) # =\u0026gt; è¿”å› [] å› ä¸ºè¿­ä»£çŠ¶æ€å·²ç»è¢«ä¿å­˜ä¸‹æ¥ #################################################### ## 4. å‡½æ•° #################################################### # ä½¿ç”¨ \u0026#34;def\u0026#34; æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•° def add(x, y): print(\u0026#34;x æ˜¯ {} ä»¥åŠ y is {}\u0026#34;.format(x, y)) return x + y # è°ƒç”¨å¸¦å‚æ•°çš„å‡½æ•° add(5, 6) # =\u0026gt; è¾“å‡º \u0026#34;x æ˜¯ 5 ä»¥åŠ y æ˜¯ 6\u0026#34;, å¹¶è¿”å› 11 # è°ƒç”¨å‡½æ•°çš„å¦ä¸€ç§æ–¹å¼æ˜¯å¸¦æœ‰å…³é”®å­—å‚æ•° add(y=6, x=5) # å…³é”®å­—å‚æ•°å¯ä»¥åœ¨ä»»ä½•é¡ºåºä¸‹æ­£å¸¸è¿è¡Œ # ä½ å¯ä»¥å®šä¹‰æ¥å—æ•°é‡å¯å˜çš„ä½ç½®å‚æ•°çš„å‡½æ•° def varargs(*args): return args varargs(1, 2, 3) # =\u0026gt; (1, 2, 3) # åŒæ ·, ä½ å¯ä»¥å®šä¹‰æ¥å—æ•°é‡å¯å˜çš„å…³é”®å­—å‚æ•°çš„å‡½æ•° def keyword_args(**kwargs): return kwargs # æ¥è°ƒç”¨ä¸€ä¸‹, ç„¶åçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆ keyword_args(big=\u0026#34;foot\u0026#34;, loch=\u0026#34;ness\u0026#34;) # =\u0026gt; {\u0026#34;big\u0026#34;: \u0026#34;foot\u0026#34;, \u0026#34;loch\u0026#34;: \u0026#34;ness\u0026#34;} # åªè¦ä½ æƒ³, ä½ ä¹Ÿå¯ä»¥åŒæ—¶ä½¿ç”¨å®ƒä»¬ä¸¤ä¸ª def all_the_args(*args, **kwargs): print(args) print(kwargs) \u0026#34;\u0026#34;\u0026#34; all_the_args(1, 2, a=3, b=4) å°†ä¼šæ‰“å°: (1, 2) {\u0026#34;a\u0026#34;: 3, \u0026#34;b\u0026#34;: 4} \u0026#34;\u0026#34;\u0026#34; # åœ¨è°ƒç”¨å‡½æ•°æ—¶, ä½ å¯ä»¥åšç›¸åçš„ args/kwargs! # ä½¿ç”¨ * æ¥æ‹“å±•å…ƒç»„, ä»¥åŠä½¿ç”¨ ** æ¥æ‹“å±• kwargs. args = (1, 2, 3, 4) kwargs = {\u0026#34;a\u0026#34;: 3, \u0026#34;b\u0026#34;: 4} all_the_args(*args) # ç­‰åŒäº all_the_args(1, 2, 3, 4) all_the_args(**kwargs) # ç­‰åŒäº all_the_args(a=3, b=4) all_the_args(*args, **kwargs) # ç­‰åŒäº all_the_args(1, 2, 3, 4, a=3, b=4) # è¿”å›å¤šä¸ªå€¼(é€šè¿‡èµ‹å€¼å…ƒç»„) def swap(x, y): return y, x # é€šè¿‡æ²¡æœ‰æ‹¬å·çš„å…ƒç»„æ¥è¿”å›å¤šä¸ªå€¼ # (æç¤º: æ‹¬å·è™½ç„¶æ²¡æœ‰å†™, ä½†æ˜¯ä¹Ÿå¯ä»¥æ·»åŠ ä¸Š) x = 1 y = 2 x, y = swap(x, y) # =\u0026gt; x = 2, y = 1 # (x, y) = swap(x,y) # åŒæ ·, æ‹¬å·è™½æ²¡æœ‰å†™, ä½†æ˜¯ä¹Ÿå¯ä»¥æ·»åŠ ä¸Š # å‡½æ•°ä½œç”¨åŸŸ x = 5 def set_x(num): # å±€éƒ¨å˜é‡ x ä¸å…¨å±€å˜é‡ x æ˜¯ä¸åŒçš„ x = num # =\u0026gt; 43 print(x) # =\u0026gt; 43 def set_global_x(num): global x print(x) # =\u0026gt; 5 x = num # =\u0026gt; å…¨å±€å˜é‡ x ç°åœ¨è¢«è®¾ç½®ä¸º 6 äº† print(x) # =\u0026gt; 6 set_x(43) set_global_x(6) # Python æ”¯æŒæœ¬åœ°å‡½æ•° def create_adder(x): def adder(y): return x + y return adder add_10 = create_adder(10) add_10(3) # =\u0026gt; 13 # ä¹Ÿæ”¯æŒåŒ¿åå‡½æ•° (lambda x: x \u0026gt; 2)(3) # =\u0026gt; True (lambda x, y: x ** 2 + y ** 2)(2, 1) # =\u0026gt; 5 # ä¸‹é¢æ˜¯ä¸€äº›å†…ç½®çš„é«˜é˜¶å‡½æ•° list(map(add_10, [1, 2, 3])) # =\u0026gt; [11, 12, 13] list(map(max, [1, 2, 3], [4, 2, 1])) # =\u0026gt; [4, 2, 3] list(filter(lambda x: x \u0026gt; 5, [3, 4, 5, 6, 7])) # =\u0026gt; [6, 7] # ä½ å¯ä»¥ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼æ¥å®ç°ä¼˜ç§€çš„æ˜ å°„ä¸è¿‡æ»¤ # åˆ—è¡¨æ¨å¯¼å¼å­˜å‚¨å¯åµŒå¥—çš„åˆ—è¡¨ä»¥è¾“å‡º [add_10(i) for i in [1, 2, 3]] # =\u0026gt; [11, 12, 13] [x for x in [3, 4, 5, 6, 7] if x \u0026gt; 5] # =\u0026gt; [6, 7] # åŒæ ·, ä½ å¯ä»¥æ„å»ºé›†åˆå’Œå­—å…¸æ¨å¯¼å¼ {x for x in \u0026#39;abcddeef\u0026#39; if x not in \u0026#39;abc\u0026#39;} # =\u0026gt; {\u0026#39;d\u0026#39;, \u0026#39;e\u0026#39;, \u0026#39;f\u0026#39;} {x: x ** 2 for x in range(5)} # =\u0026gt; {0: 0, 1: 1, 2: 4, 3: 9, 4: 16} #################################################### ## 5. æ¨¡å— #################################################### # å¯¼å…¥æ¨¡å—, è°ƒç”¨æ¨¡å—ä¸­çš„å‡½æ•° import math print(math.sqrt(16)) # =\u0026gt; è¿”å›4.0 # ä½ å¯ä»¥ä»æ¨¡å—ä¸­è·å–æŒ‡å®šçš„å‡½æ•° from math import ceil, floor print(ceil(3.7)) # =\u0026gt; 4.0 print(floor(4.7)) # =\u0026gt; 3.0 # ä½ å¯ä»¥ä»æ¨¡å—ä¸­å¯¼å…¥æ‰€æœ‰å‡½æ•° # è­¦å‘Š: ä¸æ¨èè¿™ä¹ˆåš from math import * # ä½ å¯ä»¥åœ¨å¯¼å…¥æ¨¡å—æ—¶, ä¸ºå…¶èµ·ä¸€ä¸ªåˆ«å import math as m math.sqrt(16) == m.sqrt(16) # =\u0026gt; True # Python æ¨¡å—åªæ˜¯æ™®é€šçš„ Python æ–‡ä»¶. ä½  # å¯ä»¥ç¼–å†™ä½ è‡ªå·±çš„æ¨¡å—, ç„¶åå¯¼å…¥å®ƒä»¬. æ¨¡å— # çš„åå­—ä¸æ–‡ä»¶åæ˜¯ç›¸åŒçš„ # ä½ å¯ä»¥æŸ¥æ‰¾æ¨¡å—å†…å®šä¹‰çš„å‡½æ•°å’Œå±æ€§ import math dir(math) # å¦‚æœæœ‰ä¸€ä¸ªåä¸º math.py çš„ Python è„šæœ¬ä¸ # å½“å‰è„šæœ¬åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹, é‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶å°†ä¼š # ä»£æ›¿ Python å†…å»ºæ¨¡å—ä»¥åŠ è½½. # è¿™æ˜¯å› ä¸ºæœ¬åœ°ç›®å½•æœ‰æ¯” Python çš„å†…å»ºåº“æ›´é«˜ # çš„ä¼˜å…ˆçº§. #################################################### ## 6. ç±» #################################################### # ä½¿ç”¨ \u0026#34;class\u0026#34; è¯­å¥æ¥åˆ›å»ºä¸€ä¸ªç±» class Human: # ç±»çš„å±æ€§. å°†åœ¨ç±»çš„æ‰€æœ‰å®ä¾‹ä¸­å…±äº« species = \u0026#34;SlimeNull\u0026#34; # åŸºæœ¬çš„åˆå§‹åŒ–å™¨, è¿™ä¸ªå°†ä¼šåœ¨ç±»å®ä¾‹åŒ–æ—¶è°ƒç”¨ # æç¤º, åŒå‰ç½®å’Œåç½®ä¸‹åˆ’çº¿è¡¨ç¤º Python ä½¿ç”¨ # çš„å¯¹è±¡æˆ–å±æ€§, ä½†æ˜¯å®ƒä»¬å­˜åœ¨äºç”¨æˆ·æ§åˆ¶çš„å‘½å # ç©ºé—´. æ–¹æ³•(æˆ–è€…æ˜¯å¯¹è±¡, å±æ€§) åƒ __init__, __str__, # __repr__ ç­‰ç­‰, è¢«ç§°ä¸ºç‰¹æ®Šæ–¹æ³•(æœ‰æ—¶ä¹Ÿæˆä¸ºé­”æ³•æ–¹æ³•) # ä½ ä¸åº”è¯¥åˆ›å»ºä½ è‡ªå·±çš„, ä¸å®ƒä»¬é‡åçš„æˆå‘˜ def __init__(self, name): # å°†å‚æ•°èµ‹å€¼ç»™å®ä¾‹çš„ name å±æ€§ self.name = name # åˆå§‹åŒ–å±æ€§ self._age = 0 # å®ä¾‹çš„æ–¹æ³•. æ‰€æœ‰çš„æ–¹æ³•éƒ½éœ€è¦ä½¿ç”¨ \u0026#34;self\u0026#34; ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•° def say(self, msg): print(\u0026#34;{name}: {message}\u0026#34;.format(name=self.name, message=msg)) # å®ä¾‹çš„å¦ä¸€ä¸ªæ–¹æ³• def sing(self): return \u0026#39;å“Ÿ... å“Ÿ... éº¦å…‹é£æ£€æŸ¥... one... one two...\u0026#39; # ç±»çš„æ–¹æ³•, æ‰€æœ‰çš„å®ä¾‹éƒ½èƒ½å¤Ÿè®¿é—® # å®ƒä»¬è¢«è°ƒç”¨æ—¶, è°ƒç”¨å®ƒçš„ç±»å°†ä½œä¸ºè°ƒç”¨çš„ç¬¬ä¸€ä¸ªå‚æ•° @classmethod def get_species(cls): return cls.species; # é™æ€æ–¹æ³•åœ¨è°ƒç”¨æ—¶, ä¸ä¼šæœ‰ç±»æˆ–å®ä¾‹çš„å¼•ç”¨ä¼ å…¥ @staticmethod def grunt(): return \u0026#34;*å’•å™œå’•å™œ*\u0026#34; # å±æ€§å°±åƒä¸€ä¸ªè·å–å™¨(getter) # å®ƒå°†è¿™ä¸ªæ–¹æ³• age() ä½œä¸ºä¸€ä¸ªåŒåçš„, åªè¯»çš„å±æ€§è¿”å› # ä½†æ˜¯, åœ¨ Python ä¸­ä¸éœ€è¦å†™ç¹ççš„è·å–å™¨å’Œè®¾ç½®å™¨(setter) @property def age(self): return self._age # è¿™ä¸ªå°†å…è®¸å±æ€§è¢«è®¾ç½® @age.setter def age(self, age): self._age = age # è¿™ä¸ªå°†å…è®¸å±æ€§è¢«åˆ é™¤ @age.deleter def age(self): del self._age # å½“ Python è§£é‡Šå™¨è¯»å–æºæ–‡ä»¶å¹¶æ‰§è¡Œæ—¶ # __name__ ä¼šç¡®ä¿è¿™ä¸ªä»£ç å—åœ¨æ¨¡å—ä¸­ # æ˜¯ä½œä¸ºä¸»ç¨‹åºæ‰§è¡Œçš„ if __name__ == \u0026#39;__main__\u0026#39;: # å®ä¾‹åŒ–ç±» i = Human(name=\u0026#34;å°æ˜\u0026#34;) i.say(\u0026#34;å—¨~\u0026#34;) j = Human(\u0026#34;å°çº¢\u0026#34;) j.say(\u0026#34;ä½ å¥½å“‡~\u0026#34;) # i å’Œ j æ˜¯ç±»å‹ Human çš„å®ä¾‹, æ¢å¥è¯è¯´, ä»–ä»¬éƒ½æ˜¯ Human å¯¹è±¡ # è°ƒç”¨ç±»çš„æ–¹æ³• i.say(i.get_species()) # =\u0026gt; \u0026#34;å°æ˜: SlimeNull\u0026#34; # æ›´æ”¹å…±äº«å±æ€§ Human.species = \u0026#34;Little Wuâ™‚ Fairy\u0026#34; i.say(i.get_species()) # =\u0026gt; \u0026#34;å°æ˜: Little Wuâ™‚ Fairy\u0026#34; j.say(j.get_species()) # =\u0026gt; \u0026#34;å°çº¢: Little Wuâ™‚ Fairy\u0026#34; # è°ƒç”¨é™æ€æ–¹æ³• print(Human.grunt()) # =\u0026gt; \u0026#34;*å’•å™œå’•å™œ*\u0026#34; # é™æ€æ–¹æ³•ä¹Ÿå¯ä»¥é€šè¿‡å®ä¾‹æ¥è°ƒç”¨ print(i.grunt()) # =\u0026gt; \u0026#34;*å’•å™œå’•å™œ*\u0026#34; # ä¸ºè¿™ä¸ªå®ä¾‹æ›´æ–°å±æ€§ i.age = 42 # è·å–å±æ€§ i.say(i.age) # =\u0026gt; \u0026#34;å°æ˜: 42\u0026#34; j.say(j.age) # =\u0026gt; \u0026#34;å°çº¢: 0\u0026#34; # åˆ é™¤å±æ€§ del i.age # i.age # =\u0026gt; å°†ä¼šæŠ›å‡º AttributeError å¼‚å¸¸ #################################################### ## 6.1 ç»§æ‰¿ #################################################### # ç»§æ‰¿å…è®¸å®šä¹‰çš„æ–°çš„å­ç±»ä»çˆ¶ç±»ç»§æ‰¿ # æ–¹æ³•ä¸å˜é‡ # ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„ Human ç±»ä½œä¸ºåŸºç±»(çˆ¶ç±»), æˆ‘ä»¬å¯ä»¥å®šä¹‰ # ä¸€ä¸ªå­ç±», Superhero, å®ƒå°†ç»§æ‰¿ Human ç±»çš„å˜é‡, ä¾‹å¦‚ # \u0026#34;species\u0026#34;, \u0026#34;name\u0026#34;, ä»¥åŠ \u0026#34;age\u0026#34;, æ–¹æ³•ä¹Ÿæ˜¯å¦‚æ­¤, ä¾‹å¦‚ # \u0026#34;sing\u0026#34; ä¸ \u0026#34;grunt\u0026#34;. ä½†åŒæ—¶å®ƒä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„ç‰¹æ®Šå±æ€§. # ä½ å¯ä»¥å°†ä¸Šé¢çš„ç±»å­˜å‚¨åˆ°å®ƒä»¬è‡ªå·±çš„æ–‡ä»¶ä¸­æ¥é‡‡ç”¨æ¨¡å—åŒ–æ–‡ä»¶çš„ä¼˜ç‚¹ # å‘½åä¸º, human.py # ä»åˆ«çš„æ–‡ä»¶ä¸­å¯¼å…¥å‡½æ•°, éœ€è¦ä½¿ç”¨ä¸‹é¢çš„æ ¼å¼ # from \u0026#34;æ²¡æœ‰åç¼€çš„æ–‡ä»¶å\u0026#34; import \u0026#34;å‡½æ•°æˆ–è€…ç±»\u0026#34; from human import Human # åœ¨ç±»å‹å®šä¹‰å¤„ä»¥å‚æ•°çš„å½¢å¼æŒ‡å®šçˆ¶ç±» class Superhero(Human): # å¦‚æœå­—ç±»ä»…ä»…æ˜¯ä»çˆ¶ç±»ç»§æ‰¿æ‰€æœ‰å®šä¹‰, ä¸”æ²¡æœ‰ # ä»»ä½•æ›´æ”¹, ä½ å¯ä»¥åªåœ¨è¿™é‡Œå†™ä¸€ä¸ª \u0026#34;pass\u0026#34; å…³é”®å­— (åˆ«çš„ä¸éœ€è¦å†™) # ä½†åœ¨æˆ‘ä»¬è¿™ç§æƒ…å†µä¸‹, pass å°±è¦è¢«æ³¨é‡Šæ‰ä»¥ä¸º Superhero ç±»åˆ›å»º # å®ƒç‰¹æœ‰çš„å†…å®¹ # pass # å­—ç±»å¯ä»¥è¦†ç›–çˆ¶ç±»çš„å±æ€§ species = \u0026#34;Superhuman\u0026#34; # å­—ç±»ä¼šè‡ªåŠ¨çš„ä»çˆ¶ç±»ç»§æ‰¿æ„é€ å‡½æ•°, åŒ…æ‹¬ # å®ƒçš„å‚æ•°, ä½†æ˜¯ä¹Ÿå¯ä»¥å®šä¹‰å¦å¤–çš„å‚æ•°, æˆ–è€…å®šä¹‰ # ç„¶åè¦†ç›–å®ƒçš„æ–¹æ³•, ä¾‹å¦‚è¿™ä¸ªç±»çš„æ„é€ å‡½æ•° # è¿™ä¸ªæ„é€ å‡½æ•°ä» Human ç±»ç»§æ‰¿äº† \u0026#34;name\u0026#34; å‚æ•°å¹¶ä¸” # æ·»åŠ äº† \u0026#34;superpower\u0026#34; å’Œ \u0026#34;movie\u0026#34; å‚æ•° def __init__(self, name, movie=False, superpowers = [\u0026#34;åŠ›å¤§æ— ç©·\u0026#34;, \u0026#34;é‡‘åˆšä¸åä¹‹èº«\u0026#34;]): # æ·»åŠ é¢å¤–çš„ç±»å‹å±æ€§ self.fictional = True self.movie = movie # æ³¨æ„å¯å˜çš„é»˜è®¤å€¼, å› ä¸ºå®ƒä»¬é»˜è®¤æ˜¯å…±äº«çš„ self.superpowers = superpowers # \u0026#34;super\u0026#34; å‡½æ•°ä½¿ä½ å¯ä»¥è®¿é—®è¢«å­—ç±»é‡å†™äº†çš„ # çˆ¶ç±»çš„æ–¹æ³•, åœ¨è¿™é‡Œ, æˆ‘ä»¬è¦ä½¿ç”¨ \u0026#34;__init__\u0026#34; # è¿™å°†ä¼šè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•° super().__init__(name) # è¦†ç›– sing æ–¹æ³• def sing(self): return \u0026#34;Dun, dun, DUN!\u0026#34; # æ·»åŠ é™„åŠ çš„å®ä¾‹æ–¹æ³• def boast(self): for power in self.superpowers: print(\u0026#34;æˆ‘æœ‰{pow}çš„èƒ½åŠ›!\u0026#34;.format(pow=power)) if __name__ == \u0026#39;__main__\u0026#39;: sup = Superhero(name=\u0026#34;è’‚å…‹\u0026#34;) # å®ä¾‹ç±»å‹æ£€æŸ¥ if isinstance(sup, Human): print(\u0026#34;æˆ‘æ˜¯äººç±»\u0026#34;) if type(sup) is Superhero: print(\u0026#34;æˆ‘æ˜¯ä¸€ä¸ªè¶…çº§è‹±é›„\u0026#34;) # é€šè¿‡ä½¿ç”¨ getattr() å’Œ super() æ¥è·å–æ–¹æ³•è§£ææœç´¢é¡ºåº # è¿™ä¸ªå±æ€§æ˜¯åŠ¨æ€çš„, å¹¶ä¸”å¯ä»¥è¢«æ›´æ–° print(Superhero.__mro__) # =\u0026gt; (\u0026lt;class \u0026#39;__main__.Superhero\u0026#39;\u0026gt;, # =\u0026gt; \u0026lt;class \u0026#39;human.Human\u0026#39;\u0026gt;, \u0026lt;class \u0026#39;object\u0026#39;\u0026gt;) # é€šè¿‡å®ƒè‡ªå·±çš„ç±»å‹å±æ€§æ¥è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³• print(sup.get_species()) # =\u0026gt; Superhuman # è°ƒç”¨è¢«é‡å†™äº†çš„æ–¹æ³• print(sup.sing()) # =\u0026gt; Dun, dun, DUN! # è°ƒç”¨ Human çš„æ–¹æ³• sup.say(\u0026#34;å‹ºå­?\u0026#34;) # =\u0026gt; è’‚å…‹: å‹ºå­? # è°ƒç”¨ä»…å­˜åœ¨äº Superhero ä¸­çš„æ–¹æ³• sup.boast() # =\u0026gt; æˆ‘æœ‰åŠ›å¤§æ— ç©·çš„èƒ½åŠ›! # =\u0026gt; æˆ‘æœ‰é‡‘åˆšä¸åä¹‹èº«çš„èƒ½åŠ›! # ç»§æ‰¿çš„ç±»å‹å±æ€§ sup.age = 32 print(sup.age) # =\u0026gt; 32 # ä»…åœ¨ Superhero ä¸­å­˜åœ¨çš„å±æ€§ print(\u0026#39;æˆ‘èƒ½è·å¾—å¥¥æ–¯å¡å¥–å—?\u0026#39; + str(sup.movie)) #################################################### ## 6.2 å¤šé‡ç»§æ‰¿ #################################################### # å¦ä¸€ä¸ªç±»çš„å®šä¹‰ # bat.py class Bat: species = \u0026#39;è´è’‚\u0026#39; def __init__(self, can_fly=True): self.fly = can_fly # è¿™ä¸ªç±»ä¹Ÿæœ‰ä¸€ä¸ªè¯´çš„æ–¹æ³• def say(self, msg): msg = \u0026#39;... ... ...\u0026#39; return msg # å¹¶ä¸”å®ƒä¹Ÿæœ‰è‡ªå·±çš„æ–¹æ³• def sonar(self): return \u0026#39;))) ... (((\u0026#39; if __name__ == \u0026#39;__main__\u0026#39;: b = Bat() print(b.say(\u0026#39;ä½ å¥½\u0026#39;)) print(b.fly) # ç„¶åç°åœ¨å¦ä¸€ä¸ªç±»å‹å®šä¹‰ç»§æ‰¿è‡ª Superhero å’Œ Bat # superhero.py from superhero import Superhero from bat import Bat # å®šä¹‰ Batman å¹¶åŒæ—¶ç»§æ‰¿ Superhero å’Œ Bat class Batman(Superhero, Bat): def __init__(self, *args, **kwargs): # ç»§æ‰¿å±æ€§é€šå¸¸éœ€è¦ super # super(Batman, self).__init__(*args, **kwargs) # ç„¶è€Œåœ¨è¿™é‡Œå¤„ç†å¤šç»§æ‰¿, æ‰€ä»¥ super() # ä»…ä»…é€‚ç”¨äº MRO åˆ—è¡¨çš„ä¸‹ä¸€ä¸ªåŸºç±» # æ‰€ä»¥, æˆ‘ä»¬éœ€è¦ä¸ºæ‰€æœ‰çˆ¶ç±»æ˜¾å¼çš„è°ƒç”¨ __init__ # *args å’Œ **kwargs å…è®¸ä½¿ç”¨éå¸¸ç®€æ´çš„æ–¹å¼ä¼ é€’æ‰€æœ‰å‚æ•°, # æ¯ä¸€ä¸ªçˆ¶ç±»éƒ½ \u0026#34;ç»™æ´‹è‘±å‰¥ä¸€å±‚çš®\u0026#34; Superhero.__init__(self, \u0026#39;anonymous\u0026#39;, movie=True, superpowers=[\u0026#39;Wealthy\u0026#39;], *args, **kwargs) Bat.__init__(self, *args, can_fly=False, **kwargs) # è¦†ç›–ç›¸åŒåç§°çš„å±æ€§çš„å€¼ self.name = \u0026#34;æ‚²ä¼¤çš„é˜¿å¼—è±å…‹\u0026#34; def sing(self): return \u0026#34;å‘ å‘ å‘ å‘ å‘ è™è ä¾ !\u0026#34; if __name__ == \u0026#39;__main__\u0026#39;: sup = Batman() # é€šè¿‡ä½¿ç”¨ getattr() å’Œ super() æ¥è·å–æ–¹æ³•è§£ææœç´¢é¡ºåº # è¿™ä¸ªå±æ€§æ˜¯åŠ¨æ€çš„, å¹¶ä¸”å¯ä»¥è¢«æ›´æ–° print(Batman.__mro__) # =\u0026gt; (\u0026lt;class \u0026#39;__main__.Batman\u0026#39;\u0026gt;, # =\u0026gt; \u0026lt;class \u0026#39;superhero.Superhero\u0026#39;\u0026gt;, # =\u0026gt; \u0026lt;class \u0026#39;human.Human\u0026#39;\u0026gt;, # =\u0026gt; \u0026lt;class \u0026#39;bat.Bat\u0026#39;\u0026gt;, \u0026lt;class \u0026#39;object\u0026#39;\u0026gt;) # é€šè¿‡å®ƒè‡ªå·±çš„ç±»å‹å±æ€§æ¥è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³• print(sup.get_species()) # =\u0026gt; Superhuman # è°ƒç”¨è¢«é‡å†™äº†çš„æ–¹æ³• print(sup.sing()) # =\u0026gt; å‘ å‘ å‘ å‘ å‘ è™è ä¾ ! # è°ƒç”¨ Human çš„æ–¹æ³•, åŸå› æ˜¯ç»§æ‰¿é—®é¢˜ sup.say(\u0026#39;æˆ‘åŒæ„\u0026#39;) # =\u0026gt; æ‚²ä¼¤çš„é˜¿å¼—è±å…‹: æˆ‘åŒæ„ # è°ƒç”¨å­˜åœ¨äºç¬¬äºŒä¸ªç¥–å…ˆçš„æ–¹æ³• print(sup.sonar()) # =\u0026gt; ))) ... ((( # ç»§æ‰¿äº†çš„ç±»å‹å±æ€§ sup.age = 100 print(sup.age) # =\u0026gt; 100 # ä»ç¬¬äºŒä¸ªç¥–å…ˆç»§æ‰¿çš„é»˜è®¤å€¼è¢«é‡å†™äº†çš„å±æ€§ print(\u0026#39;æˆ‘èƒ½é£å—?\u0026#39; + str(sup.fly)) # =\u0026gt; æˆ‘èƒ½é£å—? ä¸èƒ½ #################################################### ## 7. é«˜çº§ #################################################### # ç”Ÿæˆå™¨å¯ä»¥å¸®åŠ©ä½ å†™ä¸€äº›æ›´ç®€ä¾¿çš„ä»£ç  (å·æ‡’) def double_numbers(iterable): for i in iterable: yield i + i # ç”Ÿæˆå™¨æ˜¯ é«˜æ•ˆå†…å­˜ çš„, å› ä¸ºå®ƒä»¬åªåŠ è½½éœ€è¦çš„æ•°æ® # å¤„ç†å¯è¿­ä»£å¯¹è±¡çš„ä¸‹ä¸€ä¸ªå€¼, è¿™ä½¿ä»–ä»¬å¯ä»¥åœ¨éå¸¸å¤§ # çš„å€¼åŸŸä¸Šæ‰§è¡Œæ“ä½œ. # æç¤º: `range` åœ¨ Python3 ä¸­å–ä»£äº† `xrange` for i in double_numbers(range(1, 900000000)): # `range` æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ print(i) if (i \u0026gt; 30): break # å°±åƒä½ èƒ½åˆ›å»ºåˆ—è¡¨æ¨å¯¼å¼ä¸€æ ·, ä½ ä¹Ÿå¯ä»¥åˆ›å»º # ç”Ÿæˆå™¨æ¨å¯¼å¼ values = (-x for x in [1,2,3,4,5]) for x in values: print(x) # æ‰“å° -1 -2 -3 -4 -5 åˆ° æ§åˆ¶å°/ç»ˆç«¯ # ä½ ä¹Ÿå¯ä»¥å°†ç”Ÿæˆå™¨æ¨å¯¼å¼è½¬æ¢ä¸ºä¸€ä¸ªåˆ—è¡¨ values = (-x for x in [1,2,3,4,5]) gen_to_list = list(values) print(gen_to_list) # =\u0026gt; [-1, -2, -3, -4, -5] # è£…é¥°å™¨ # åœ¨è¿™ä¸ªä¾‹å­ä¸­, `beg` ä¸ `say` äº¤æ¢. å¦‚æœ say_please æ˜¯ True, é‚£ä¹ˆå®ƒ # å°†ä¼šæ”¹å˜è¿”å›çš„æ¶ˆæ¯ from functools import wraps def beg(target_function): @wraps(target_function) def wrapper(*args, **kwargs): msg, say_please = target_function(*args, **kwargs) if say_please: return \u0026#34;{} {}\u0026#34;.format(msg, \u0026#34;æ±‚ä½ äº†, æˆ‘å¾ˆç©· :(\u0026#34;) return msg return wrapper @beg def say(say_please=False): msg = \u0026#34;èƒ½ä¸ºæˆ‘ä¹°ç“¶å•¤é…’å—?\u0026#34; return msg, say_please print(say()) # èƒ½ä¸ºæˆ‘ä¹°ç“¶å•¤é…’å—? print(say(say_please=True)) # èƒ½ä¸ºæˆ‘ä¹°ç“¶å•¤é…’å—? æ±‚ä½ äº†, æˆ‘å¾ˆç©· :( ","date":"2021-05-05T18:44:21+08:00","permalink":"https://slimenull.com/p/20210505184421/","title":"[æ•™ç¨‹] åœ¨ Y åˆ†é’Ÿå†…å­¦ä¼š Python"},{"content":" è¿™ç¯‡æ–‡ç« , å¯ä»¥å¸®åŠ©ä½ å€ŸåŠ© C# çš„çŸ¥è¯†å¿«é€Ÿå…¥é—¨ Java, å¹¶ä¸”è¯¦ç»†ä»‹ç» C# ä¸ Java çš„é‡è¦å·®å¼‚\n1. æ•°æ®ç±»å‹ åœ¨ C# ä¸­, åŸºæœ¬çš„æ•°æ®ç±»å‹éƒ½æœ‰åˆ«å, ä¾‹å¦‚å­—ç¬¦ä¸² String, å¯ä»¥ç®€å†™ä¸º string, Int32 å¯ä»¥ç®€å†™ä¸º int, ä½†æ˜¯åœ¨ Java ä¸­, ä¸å­˜åœ¨è¿™äº›. ä½¿ç”¨å­—ç¬¦ä¸², å¿…é¡»è¦é¦–å­—æ¯å¤§å†™, ä½¿ç”¨å¸ƒå°”å€¼å¿…é¡»è¦ç”¨ boolean. åœ¨ C# ä¸­, String æ•°æ®åŸºæœ¬æ•°æ®ç±»å‹, è€Œåœ¨ Java ä¸­, ä¸¥æ ¼æ¥è®², å®ƒä¸å±äºåŸºæœ¬æ•°æ®ç±»å‹. Java ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹æ›´åƒæ˜¯ C# ä¸­çš„å€¼ç±»å‹, åªæœ‰ int, char, boolean è¿™äº›ç›´æ¥å­˜å‚¨çš„æ•°æ®ç±»å‹æ‰æ˜¯åŸºæœ¬æ•°æ®ç±»å‹. 1 String str = \u0026#34;è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²\u0026#34;; // æ­£ç¡® åœ¨ C# ä¸­, int å°±æ˜¯ int, å®ƒä¸å…¶ä»–å¤æ‚çš„æ•°æ®ç±»å‹ä¾‹å¦‚ StringBuilder å·®å¼‚å¹¶ä¸å¤§, ä½†æ˜¯åœ¨ Java ä¸­, int, char, boolean è¿™ç±»åŸºæœ¬æ•°æ®ç±»å‹ä¸å¯ä»¥ä½œä¸ºæ³›å‹å‚æ•°æ¥ä½¿ç”¨, ä¾‹å¦‚ä½ ä¸èƒ½åˆ›å»ºä¸€ä¸ªå­˜å‚¨ int çš„ List, å¦‚æœè¦åˆ›å»ºå­˜å‚¨ int çš„ List, ä½ éœ€è¦ä½¿ç”¨ int çš„åŒ…è£…ç±» Integer, åˆ›å»º ArrayList\u0026lt;Integer\u0026gt;. 1 2 var v = new ArrayList\u0026lt;int\u0026gt;(); // é”™è¯¯ var v = new ArrayList\u0026lt;Integer\u0026gt;(); // æ­£ç¡® Java ä¸å­˜åœ¨å€¼ç±»å‹, åªæœ‰åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨å¯¹è±¡ç±»å‹, ä¸¤è€…ç”¨æ³•ä¸åŒ. Java çš„åŸºæœ¬æ•°æ®ç±»å‹ä¸å­˜åœ¨æˆå‘˜, ä¾‹å¦‚åœ¨ C# ä¸­, int æœ‰é™æ€å¸¸é‡ MaxValue, ä½†æ˜¯ Java ä¸­çš„ int æ²¡æœ‰, å¦‚æœè¦è·å–æ•´æ•°çš„æœ€å¤§å€¼, éœ€è¦ä½¿ç”¨ int çš„åŒ…è£…ç±» Integer 1 2 int v = int.MAX_VALUE; // é”™è¯¯ int v = Integer.MAX_VALUE; // æ­£ç¡® 2. æšä¸¾ åœ¨ C# ä¸­, æšä¸¾æ˜¯ç‰¹æ®Šçš„å€¼ç±»å‹, æœ¬è´¨æ˜¯ int, å®šä¹‰èµ·æ¥éå¸¸ç®€å•, åœ¨ Java ä¸­, å¦‚æœè¦è‡ªå®šä¹‰æ¯ä¸€ä¸ªæšä¸¾æˆå‘˜æ‰€å¯¹åº”çš„ int å€¼, åˆ™å®šä¹‰èµ·æ¥éå¸¸ç¹ç: 1 2 3 4 5 6 7 8 9 10 11 public enum ColumnAlignment { Left(1), Right(2); private int value; private ColumnAlignment(int value) { this.value = value; } public int value(){ return this.value; } } 3. Linq ä¸ Stream åœ¨ C# ä¸­, å¯¹äºå¯è¿­ä»£å¯¹è±¡çš„æ‰¹é‡å¤„ç†, æˆ‘ä»¬ç»å¸¸ä½¿ç”¨ Linq, ä½†æ˜¯åœ¨ Java ä¸­, æ˜¯ä¸æ”¯æŒæ‹“å±•å‡½æ•°çš„, æ‰€ä»¥è‡ªç„¶æ— æ³•å®ç° Linq è¿™ç±»æ–¹ä¾¿çš„æ“ä½œç±», Stream å‹‰å¼ºå¯ä»¥ä½œä¸º Linq çš„æ›¿ä»£å“, ä¾‹å¦‚ä¸ Linq ä¸­ Select æ–¹æ³•å¯¹åº”çš„ Stream.map: 1 2 // C#: List\u0026lt;string\u0026gt; strs = new int[]{1,2,3,4,5,6,7,8,9,0}.Select(v =\u0026gt; v.ToString()).ToList(); 1 2 // Java: List\u0026lt;String\u0026gt; strs = Arrays.stream(new int[]{1, 2, 3, 4, 5, 6, 7, 8, 9, 0}).map(v -\u0026gt; v.toString()).collect(Collectors.toList()); ä¸è¿‡åœ¨å®é™…ä½¿ç”¨ä¸­, ç”±äº Java åŒºåˆ† int å’Œ Integer, æ‰€ä»¥ä¼šæœ‰è¯¸å¤šä¸ä¾¿, ä½†å¤§å¤šéƒ½æœ‰è§£å†³æ–¹æ¡ˆ, æ‰€ä»¥ Java åªæ˜¯ä¼šè®©äººæ„Ÿåˆ°æœ‰äº›æŠ“ç‹‚ç½¢äº†.\n4. Lambda: åŒ¿åå‡½æ•°, è¿™ç»å¯¹æ˜¯æœ€èˆ’æœçš„ä¸œè¥¿ä¹‹ä¸€äº†, åœ¨ä½¿ç”¨ Linq çš„æ—¶å€™è‚¯å®šæ— æ—¶æ— åˆ»ä½¿ç”¨ lambda çš„.\nåœ¨ C# ä¸­, lambda è¡¨è¾¾å¼çš„æ“ä½œç¬¦æ˜¯: =\u0026gt;, è€Œ Java ä¸­æ˜¯ -\u0026gt; åœ¨ C# ä¸­, lambda å¯ä»¥ä½¿ç”¨å§”æ‰˜æ¥å­˜å‚¨ 1 2 3 4 Action action = () =\u0026gt; { Console.WriteLine(\u0026#34;F**k you, world\u0026#34;); }; åœ¨ Java ä¸­, éœ€è¦ä½¿ç”¨æ¥å£æ¥å­˜å‚¨å§”æ‰˜ 1 2 3 4 5 6 7 interface Action{ void execute(); // æ–¹æ³•åéšæ„ } Action action = () -\u0026gt; { System.out.println(\u0026#34;F**k you, world\u0026#34;); } 5. æ³›å‹ è¿™ç»å¯¹æ˜¯ Java ä¸­æœ€è®©äººä¸çˆ½çš„åœ°æ–¹äº†.\nä½ æ— æ³•åˆ›å»ºæ³›å‹æ•°ç»„ 1 2 3 static \u0026lt;T\u0026gt; T[] createArray(int len){ return new T[len]; // ä¼šæŠ¥é”™, \u0026#39;ç±»å‹å‚æ•° T æ— æ³•ç›´æ¥å®ä¾‹åŒ–\u0026#39; } ä½ æ— æ³•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªæ³›å‹ç±»å‹ 1 2 3 4 static \u0026lt;T\u0026gt; boolean isType(Object obj){ return obj instanceof T; // ä¼šæŠ¥é”™ // åŒæ ·, T.class ä¹Ÿæ˜¯ä¸å¯ç”¨çš„ } ä½ æ— æ³•åœ¨ä½¿ç”¨å¦‚ä¸‹é‡è½½: 1 2 3 4 public class Test\u0026lt;T\u0026gt; { void Action(List\u0026lt;T\u0026gt; list){}; void Action(List\u0026lt;Integer\u0026gt; list){}; // ä¼šæŠ¥é”™:ä¸¤ä¸ªæ–¹æ³•å…·æœ‰åŒæ ·çš„æ“¦é™¤ } ","date":"2021-04-18T11:07:46+08:00","permalink":"https://slimenull.com/p/20210418110746/","title":"[C#] C# ä¸ Java çš„ä¸€äº›å·®å¼‚"},{"content":"ç›´æ¥è´´ä»£ç äº†, å¤åˆ¶å³å¯ç”¨, æºç éƒ¨åˆ†æ¥è‡ªç½‘ç»œ.\nå¦‚æœè¦è®¡ç®—å­—ç¬¦ä¸²çš„ MD5 å€¼, ç›´æ¥ Encoding.UTF8.GetBytes() ç„¶åå°±å¯ä»¥äº†\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 using System; using System.IO; using System.Linq; namespace NullLib.HashCalc { public class HashHelper { public static string CalcMd5x32(byte[] bytValue) { return CalcMd5x32(new MemoryStream(bytValue)); } public static string CalcMd5x16(byte[] bytValue) { return CalcMd5x16(new MemoryStream(bytValue)); } public static string CalcShax1(byte[] bytValue) { return CalcShax1(new MemoryStream(bytValue)); } public static string CalcShax256(byte[] bytValue) { return CalcShax256(new MemoryStream(bytValue)); } public static string CalcShax384(byte[] bytValue) { return CalcShax384(new MemoryStream(bytValue)); } public static string CalcShax512(byte[] bytValue) { return CalcShax512(new MemoryStream(bytValue)); } public static string CalcMd5x32(Stream stream) { var MD5CSP = new System.Security.Cryptography.MD5CryptoServiceProvider(); byte[] bytHash = MD5CSP.ComputeHash(stream); MD5CSP.Clear(); string sHash = BytesToHex(bytHash); return sHash; } public static string CalcMd5x16(Stream stream) { return CalcMd5x32(stream).Substring(8, 16); } public static string CalcShax1(Stream stream) { var SHA1CSP = new System.Security.Cryptography.SHA1CryptoServiceProvider(); byte[] bytHash = SHA1CSP.ComputeHash(stream); SHA1CSP.Clear(); string sHash = BytesToHex(bytHash); return sHash; } public static string CalcShax256(Stream stream) { var SHA256CSP = new System.Security.Cryptography.SHA256CryptoServiceProvider(); byte[] bytHash = SHA256CSP.ComputeHash(stream); SHA256CSP.Clear(); string sHash = BytesToHex(bytHash); return sHash; } public static string CalcShax384(Stream stream) { var SHA384CSP = new System.Security.Cryptography.SHA384CryptoServiceProvider(); byte[] bytHash = SHA384CSP.ComputeHash(stream); SHA384CSP.Clear(); string sHash = BytesToHex(bytHash); return sHash; } public static string CalcShax512(Stream stream) { var SHA512CSP = new System.Security.Cryptography.SHA512CryptoServiceProvider(); byte[] bytHash = SHA512CSP.ComputeHash(stream); SHA512CSP.Clear(); string sHash = BytesToHex(bytHash); return sHash; } public static string CalcCrcx32(Stream stream) { Crc32 calculator = new Crc32(); byte[] buffer = calculator.ComputeHash(stream); calculator.Clear(); //å°†å­—èŠ‚æ•°ç»„è½¬æ¢æˆåå…­è¿›åˆ¶çš„å­—ç¬¦ä¸²å½¢å¼ string sHash = BytesToHex(buffer); return sHash; } private static string BytesToHex(byte[] array) { return string.Join(null, array.Select(v =\u0026gt; Convert.ToString(v, 16).PadLeft(2, \u0026#39;0\u0026#39;))); } /// \u0026lt;summary\u0026gt; /// æä¾› CRC32 ç®—æ³•çš„å®ç° /// \u0026lt;/summary\u0026gt; private class Crc32 : System.Security.Cryptography.HashAlgorithm { public const uint DefaultPolynomial = 0xedb88320; public const uint DefaultSeed = 0xffffffff; private uint hash; private uint seed; private uint[] table; private static uint[] defaultTable; public Crc32() { table = InitializeTable(DefaultPolynomial); seed = DefaultSeed; Initialize(); } public Crc32(uint polynomial, uint seed) { table = InitializeTable(polynomial); this.seed = seed; Initialize(); } public override void Initialize() { hash = seed; } protected override void HashCore(byte[] buffer, int start, int length) { hash = CalculateHash(table, hash, buffer, start, length); } protected override byte[] HashFinal() { byte[] hashBuffer = uintToBigEndianBytes(~hash); this.HashValue = hashBuffer; return hashBuffer; } public static uint Compute(byte[] buffer) { return ~CalculateHash(InitializeTable(DefaultPolynomial), DefaultSeed, buffer, 0, buffer.Length); } public static uint Compute(uint seed, byte[] buffer) { return ~CalculateHash(InitializeTable(DefaultPolynomial), seed, buffer, 0, buffer.Length); } public static uint Compute(uint polynomial, uint seed, byte[] buffer) { return ~CalculateHash(InitializeTable(polynomial), seed, buffer, 0, buffer.Length); } private static uint[] InitializeTable(uint polynomial) { if (polynomial == DefaultPolynomial \u0026amp;\u0026amp; defaultTable != null) { return defaultTable; } uint[] createTable = new uint[256]; for (int i = 0; i \u0026lt; 256; i++) { uint entry = (uint)i; for (int j = 0; j \u0026lt; 8; j++) { if ((entry \u0026amp; 1) == 1) entry = (entry \u0026gt;\u0026gt; 1) ^ polynomial; else entry = entry \u0026gt;\u0026gt; 1; } createTable[i] = entry; } if (polynomial == DefaultPolynomial) { defaultTable = createTable; } return createTable; } private static uint CalculateHash(uint[] table, uint seed, byte[] buffer, int start, int size) { uint crc = seed; for (int i = start; i \u0026lt; size; i++) { unchecked { crc = (crc \u0026gt;\u0026gt; 8) ^ table[buffer[i] ^ crc \u0026amp; 0xff]; } } return crc; } private byte[] uintToBigEndianBytes(uint x) { return new byte[] { (byte)((x \u0026gt;\u0026gt; 24) \u0026amp; 0xff), (byte)((x \u0026gt;\u0026gt; 16) \u0026amp; 0xff), (byte)((x \u0026gt;\u0026gt; 8) \u0026amp; 0xff), (byte)(x \u0026amp; 0xff) }; } } } } ","date":"2021-04-18T02:38:55+08:00","permalink":"https://slimenull.com/p/20210418023855/","title":"[C#] è®¡ç®— MD5 SHA1 SHA256 SHA384 SHA512 CRC32"},{"content":" å¶ç„¶å‘ç°, åœ¨ä½¿ç”¨ Linq çš„ Select æ–¹æ³•æ—¶, å¦‚æœå¯¹è¢«è¿­ä»£å¯¹è±¡è¿›è¡Œæ›´æ”¹, é‚£ä¹ˆè¿™ä¸ªæ›´æ”¹æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 // å®šä¹‰æˆ‘ä»¬è‡ªå·±è¦ç”¨çš„ç±»å‹ class QWQ { public int qwq; public string awa; public QWQ(){} public QWQ(int qwq){this.qwq=qwq;} } // ç”¨æ¥æ‰§è¡Œçš„æ–¹æ³• static void LinqExTest() { List\u0026lt;QWQ\u0026gt; qwqs = Enumerable.Range(0, 10).Select(v =\u0026gt; new QWQ(v)).ToList(); // åœ¨è¿­ä»£çš„åŒæ—¶, å¯¹åŸå¯¹è±¡è¿›è¡Œæ›´æ”¹: qwqs.Select(v =\u0026gt; v.awa = v.qwq.ToString()); // æ‰“å°å¯¹è±¡ Console.WriteLine(string.Join(\u0026#34;\\n\u0026#34;, qwqs.Select(v =\u0026gt; $\u0026#34;qwq:{v.qwq}, awa:{v.awa}\u0026#34;))); } æœ€ç»ˆæ‰§è¡Œæ•ˆæœæ˜¯:\n1 2 3 4 5 6 7 8 9 10 qwq:0, awa: qwq:1, awa: qwq:2, awa: qwq:3, awa: qwq:4, awa: qwq:5, awa: qwq:6, awa: qwq:7, awa: qwq:8, awa: qwq:9, awa: æ˜¾ç„¶, å¯¹åŸå¯¹è±¡çš„æ›´æ”¹æ²¡æœ‰ç”Ÿæ•ˆ! å³ä¾¿æ˜¯æ”¹ä¸ºé€šè¿‡ç´¢å¼•æ¥è®¿é—®, ä¹Ÿæ˜¯ä¸å½³äº:\n1 qwqs.Select((v, i) =\u0026gt; qwqs[i].awa = v.qwq.ToString()); 1 2 3 4 5 6 7 8 9 10 qwq:0, awa: qwq:1, awa: qwq:2, awa: qwq:3, awa: qwq:4, awa: qwq:5, awa: qwq:6, awa: qwq:7, awa: qwq:8, awa: qwq:9, awa: ä½†æ˜¯å¦‚æœå°† Select è¯­å¥æ”¹ä¸º foreach è¯­å¥, åˆ™ä¼šæˆåŠŸè¿è¡Œ:\n1 2 foreach(var v in qwqs) v.awa = v.qwq.ToString(); 1 2 3 4 5 6 7 8 9 10 qwq:0, awa:0 qwq:1, awa:1 qwq:2, awa:2 qwq:3, awa:3 qwq:4, awa:4 qwq:5, awa:5 qwq:6, awa:6 qwq:7, awa:7 qwq:8, awa:8 qwq:9, awa:9 ","date":"2021-04-09T10:09:35+08:00","permalink":"https://slimenull.com/p/20210409100935/","title":"[C#] å…³äº Linq æ‹“å±•å‡½æ•°å¯¹è¿­ä»£å¯¹è±¡è¿›è¡Œæ›´æ”¹ä¸ç”Ÿæ•ˆçš„é—®é¢˜"},{"content":"åœ¨æºç ä¸­: C# ä¸­å…è®¸åœ¨ä»£ç ä¸­ä½¿ç”¨ 0x å¼€å¤´çš„åå…­è¿›åˆ¶æ•°å­—, ä»¥åŠ 0b å¼€å¤´çš„äºŒè¿›åˆ¶æ•°å­—æ¥è¡¨ç¤ºä¸€ä¸ªæ•´æ•°. ä¸‹é¢çš„è¯­æ³•æ˜¯åˆç†çš„.\n1 2 3 int a = 123; int b = 0xFF; int c = 0b10010; ä»æ•°å­—è½¬æ¢ å°†ä¸€ä¸ªæ•°å­—è½¬æ¢ä¸ºæŸè¿›åˆ¶çš„å­—ç¬¦ä¸², æœ‰ä¸¤ç§æ–¹å¼:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 // ç¬¬ä¸€ç§: ä½¿ç”¨ Convert ç±». å¯è½¬æ¢ä¸º äºŒè¿›åˆ¶ å…«è¿›åˆ¶ åè¿›åˆ¶ åå…­è¿›åˆ¶ Convert.ToString(10, 2); // äºŒè¿›åˆ¶, è¿”å› \u0026#34;1010\u0026#34; Convert.ToString(10, 8); // å…«è¿›åˆ¶, è¿”å› \u0026#34;12\u0026#34; Convert.ToString(10, 10); // åè¿›åˆ¶, è¿”å› \u0026#34;10\u0026#34; Convert.ToString(10, 16); // åå…­è¿›åˆ¶, è¿”å› \u0026#34;a\u0026#34; // ç¬¬äºŒç§: ä½¿ç”¨å¯¹è±¡çš„ ToString() æ–¹æ³•. åªèƒ½è½¬æ¢ä¸º åå…­è¿›åˆ¶ 10.ToString(\u0026#34;x\u0026#34;); // è¿”å› \u0026#34;a\u0026#34; 10.ToString(\u0026#34;X\u0026#34;); // è¿”å› \u0026#34;A\u0026#34; 10.ToString(\u0026#34;x2\u0026#34;); // è¿”å› \u0026#34;0a\u0026#34; 10.ToString(\u0026#34;X2\u0026#34;); // è¿”å› \u0026#34;0A\u0026#34; // ç¬¬ä¸‰ç§: ä½¿ç”¨ String çš„é™æ€æ–¹æ³• Format, åªèƒ½è½¬æ¢ä¸º åå…­è¿›åˆ¶ string.Format(\u0026#34;{0:x}\u0026#34;, 10) // è¿”å› \u0026#34;a\u0026#34; string.Format(\u0026#34;{0:X}\u0026#34;, 10) // è¿”å› \u0026#34;A\u0026#34; string.Format(\u0026#34;{0:x2}\u0026#34;, 10) // è¿”å› \u0026#34;0a\u0026#34;, å³å¡«å……è‡³å®½2 string.Format(\u0026#34;{0:X2}\u0026#34;, 10) // è¿”å› \u0026#34;0A\u0026#34;, åŒæ ·å¡«å…… ä»å­—ç¬¦ä¸²è½¬æ¢ å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯¹åº”çš„æ•°æ®, æœ‰ä¸¤ç§æ–¹å¼\n1 2 3 4 5 // ç¬¬ä¸€ç§: ä½¿ç”¨ Convertç±». å¯è½¬æ¢ äºŒè¿›åˆ¶ å…«è¿›åˆ¶ åè¿›åˆ¶ åå…­è¿›åˆ¶, è¿™é‡Œä»¥ int ä¸ºä¾‹ Convert.ToInt32(\u0026#34;1010\u0026#34;, 2); // äºŒè¿›åˆ¶, è¿”å› 10 Convert.ToInt32(\u0026#34;12\u0026#34;, 8); // å…«è¿›åˆ¶, è¿”å› 10 Convert.ToInt32(\u0026#34;10\u0026#34;, 10); // åè¿›åˆ¶, è¿”å› 10 Convert.ToInt32(\u0026#34;A\u0026#34;, 16); // åå…­è¿›åˆ¶, è¿”å› 10 1 2 // ç¬¬äºŒç§: ä½¿ç”¨å¯¹åº”æ•°æ®ç±»å‹çš„ Parse æ–¹æ³•, åªæ”¯æŒ åå…­è¿›åˆ¶, è¿™é‡Œä»¥ int ä¸ºä¾‹ int.Parse(\u0026#34;A\u0026#34;, NumberStyles.HexNumber); // è¿”å› 10 ä»å­—ç¬¦æ•°ç»„è½¬æ¢ æœ€å¸¸ç”¨çš„å°±æ˜¯å°†å­—ç¬¦æ•°ç»„è½¬æ¢ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²äº†, Linq å¯ä»¥å¸®åˆ°æˆ‘ä»¬è®¸å¤š\n1 2 3 4 5 6 7 8 9 10 byte[] array; // å‡å®šè¿™ä¸ªæ•°ç»„æœ‰å€¼ // ç¬¬ä¸€ç§: å¯¹åº”ä¸Šé¢çš„ Convert ç±»é™æ€æ–¹æ³•, ä¹Ÿæ˜¯ä¸ªäººæ¯”è¾ƒæ¨èçš„ string.Join(null, array.Select(v =\u0026gt; Convert.ToString(v, 16).PadLeft(2, \u0026#39;0\u0026#39;))); // è¿”å›å°å†™çš„ // ç¬¬äºŒç§: å¯¹åº”æ ¼å¼åŒ–æ–¹æ³• string.Join(null, array.Select(v =\u0026gt; v.ToString(\u0026#34;X2\u0026#34;))); // ç¬¬ä¸‰ç§: å¯¹åº” String é™æ€ Format æ–¹æ³• string.Join(null, array.Select(v =\u0026gt; string.Format(\u0026#34;{0:X2}\u0026#34;, v))); ","date":"2021-04-06T22:37:59+08:00","permalink":"https://slimenull.com/p/20210406223759/","title":"[C#] äºŒè¿›åˆ¶, åè¿›åˆ¶, åå…­è¿›åˆ¶, è¿›åˆ¶è½¬æ¢"},{"content":"PowerShell å¿«é€Ÿå…¥é—¨ å¼€å§‹ä¹‹å‰, æˆ‘ä»¬è®¤å®šä½ å·²ç»æœ‰ä¸€å®šçš„ç¼–ç¨‹åŸºç¡€, ç†Ÿæ‚‰ .NET ä¸­çš„ç±»å‹ä¸å¯¹è±¡.\næ­¤æ–‡ç« å¯¹äº .NET å¼€å‘è€…æ¥è¯´æ›´ç®€å•å“¦!\nåœ¨ PowerShell ä¸­, å‡ ä¹ä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡. ä¸ CMD æœ‰å¾ˆå¤§ä¸åŒ. PowerShell æ˜¯å¼ºç±»å‹çš„, å®ƒåŸºäº .NET, æ•…, PowerShell å¯ä»¥è¿‘ä¹å®Œç¾çš„è°ƒç”¨ .NET çš„æ ‡å‡†åº“.\n0. å‡†å¤‡å·¥ä½œ - å®˜æ–¹æ–‡æ¡£ æ—¢ç„¶è¦å­¦æ–°ä¸œè¥¿, è‚¯å®šè¦ä¼šæŸ¥é˜…å®˜æ–¹æ–‡æ¡£æ‰å½³äºå‘€! æœ¬æ–‡ç« å‚é˜…å®˜æ–¹æ–‡æ¡£, å¹¶ä½¿ç”¨æ›´ç®€å•çš„è¯­è¨€è®²è¿°ç»™è¯»è€…, åœ¨æ¯ä¸€éƒ¨åˆ†éƒ½ä¼šæœ‰æ¨èçš„å®˜æ–¹æ–‡æ¡£é“¾æ¥ç›®å½•, ç‚¹å‡»å³å¯è·³è½¬.\nMSDocs PowerShell : å¦‚ä½•ä½¿ç”¨ PowerShell å®˜æ–¹æ–‡æ¡£\nMSDocs PowerShell : PowerShell æ˜¯ä»€ä¹ˆ\nMSDocs PowerShell : å…³äºä¸»é¢˜ (æ¶µç›–æœ‰å…³ PowerShell çš„ä¸€ç³»åˆ—æ¦‚å¿µ)\nå¦å¤–, åœ¨æ–‡æ¡£çš„ä¸­æ–‡é¡µé¢çš„å·¦ä¾§ç´¢å¼•éƒ¨åˆ†, ä½ æ— æ³•çœ‹åˆ°æ‰€æœ‰çš„å†…å®¹, ä¾‹å¦‚ Reference åˆ†ç±», å…¶ä¸­åŒ…å«äº†éå¸¸å¤šçš„ \u0026lsquo;éšè—\u0026rsquo; å†…å®¹, åªæœ‰ä½ åˆ‡æ¢åˆ°è‹±æ–‡é¡µé¢æ‰å¯ä»¥çœ‹åˆ°å®ƒä»¬.\nè‡³äºå¦‚ä½•åˆ‡æ¢é¡µé¢è¯­è¨€, ä¹Ÿç®€å•, åªéœ€è¦å°†åœ°å€æ ä¸­çš„ \u0026lsquo;zh-cn\u0026rsquo; æ”¹ä¸º \u0026rsquo;en-us\u0026rsquo; å³å¯, åŒç†, å¦‚æœæŸä¸ªé¡µé¢ä½ çœ‹ä¸æ‡‚, æƒ³è¦åˆ‡æ¢åˆ°ä¸­æ–‡, å¯ä»¥å°† \u0026rsquo;en-us\u0026rsquo; æ”¹ä¸º \u0026lsquo;zh-cn\u0026rsquo;, ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯, éƒ¨åˆ†é¡µé¢æ˜¯æ²¡æœ‰æä¾›ä¸­æ–‡ç¿»è¯‘çš„.\nä¸ºäº†æ–¹ä¾¿, æœ¬æ–‡æ¶‰åŠåˆ°çš„æ‰€æœ‰æ–‡æ¡£é“¾æ¥å‡ä¸ºè‹±æ–‡ç›´é“¾, å¦‚éœ€è®¿é—®ä¸­æ–‡é¡µé¢, è¯·è‡ªè¡Œä¿®æ”¹é“¾æ¥åœ°å€.\n- å¯åŠ¨ PowerShell PowerShell åŒ CMD ä¸€æ ·æœ‰è®¸å¤šå¯åŠ¨æ–¹å¼, å‡†å¤‡å¥½å¼€å§‹äº†å—? é‚£ä¹ˆå¼€å§‹å§!\næŒ‰ä¸‹ \u0026ldquo;Win\u0026rdquo; + \u0026ldquo;R\u0026rdquo; æ‰“å¼€ \u0026lsquo;è¿è¡Œ\u0026rsquo; çª—å£, é”®å…¥ \u0026lsquo;PowerShell\u0026rsquo; å¹¶ç¡®è®¤.\næŒ‰ \u0026ldquo;Win\u0026rdquo; + X, ç„¶åæŒ‰ \u0026lsquo;I\u0026rsquo;, æˆ–è€…æŒ‰ \u0026lsquo;A\u0026rsquo;(ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ).\nåœ¨æ¡Œé¢æˆ–èµ„æºç®¡ç†å™¨, ä¸é€‰ä¸­ä»»ä½•æ¡ç›®, æŒ‰ä½ Shift, å³å‡»èƒŒæ™¯, åœ¨å¼¹å‡ºçš„èœå•ä¸­é€‰æ‹© \u0026lsquo;åœ¨æ­¤å¤„å¯åŠ¨ PowerShell\u0026rsquo;.\nåœ¨èµ„æºç®¡ç†å™¨ä¸­, åœ¨åœ°å€æ è¾“å…¥ \u0026lsquo;PowerShell\u0026rsquo; å¹¶æŒ‰ Enter é”®ç¡®è®¤.\næ¥ä¸‹æ¥, å‡ºç°çš„è“åº•ç™½å­—çš„æ§åˆ¶å°é¡µé¢å°±æ˜¯ PowerShell çš„ä¸»ç¨‹åºäº†! åœ¨å…¶ä¸­è¾“å…¥æŒ‡ä»¤(ä»£ç )å¯ä»¥è¿è¡Œä¸€äº›ä¸œè¥¿.\n1. åŸºæœ¬è¯­æ³• - æ ‡å‡†è¾“å‡º è®©æˆ‘ä»¬ä»ä¸€ä¸ª \u0026lsquo;hello world\u0026rsquo; çš„è¾“å‡ºå¼€å§‹å§, ä¸ CMD, Bash ä¸€æ ·, ä½¿ç”¨ echo æŒ‡ä»¤æ˜¯å¯ä»¥è¾“å‡ºå†…å®¹çš„.\n1 echo \u0026#34;Hello World!\u0026#34; è¾“å‡º:\n1 Hello World! - è·å–å¸®åŠ©: æ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤æ¥è·å–å…³äº echo çš„å¸®åŠ©å†…å®¹.\n1 Get-Help echo è¾“å‡º:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 NAME Write-Output SYNTAX Write-Output [-InputObject] \u0026lt;psobject[]\u0026gt; [-NoEnumerate] [\u0026lt;CommonParameters\u0026gt;] ALIASES write echo REMARKS Get-Help cannot find the Help files for this cmdlet on this computer. It is displaying only partial help. -- To download and install Help files for the module that includes this cmdlet, use Update-Help. -- To view the Help topic for this cmdlet online, type: \u0026#34;Get-Help Write-Output -Online\u0026#34; or go to https://go.microsoft.com/fwlink/?LinkID=113427. çœ‹åˆ°ç»“æœ, ä½ æ‡‚äº†å§, echo å®é™…ä¸Šæ˜¯ Write-Output çš„åˆ«å, åŒæ—¶ä¹Ÿå¯ä»¥ç”¨ write æ¥æ‰§è¡Œ.\nå¦å¤–, PowerShell çš„æŒ‡ä»¤æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„, æ‰€ä»¥ Write-Output ä¸ wRITE-oUTPUT æ˜¯ä¸€æ ·æ‰§è¡Œæ•ˆæœçš„\n- å®šä¹‰å˜é‡ PowerShell å®˜æ–¹æ–‡æ¡£ : å…³äºå˜é‡\nå®šä¹‰å˜é‡çš„æ–¹å¼ä¸ Bash å·®ä¸å¤š, éƒ½æ˜¯ç”¨ $ å¼€å¤´, åè·Ÿå˜é‡å\n1 2 $var = 123 echo $var è¾“å‡º:\n1 123 - å›ºå®šå¸¸é‡ PowerShell ä¸­æœ‰ä¸€äº›å¸¸é‡, ä¸å¯è¢«èµ‹å€¼ (å¦‚æœå¯¹å…¶èµ‹å€¼, ä¸ä¼šäº§ç”Ÿä»»ä½•ä½œç”¨, ä¸”ä¸ä¼šæŠ›å‡ºå¼‚å¸¸)\nå¸¸é‡å ç±»å‹ å€¼ $null object null $true bool true $false bool false å¦‚æœè®¿é—®ä¸€äº›æœªå®šä¹‰çš„å˜é‡, è¿”å›çš„å€¼åŒæ ·æ˜¯ null\n- ç±»å‹æ¦‚å¿µ PowerShell æ˜¯å¼ºç±»å‹çš„. ä¾‹å¦‚åˆšåˆšæˆ‘ä»¬å®šä¹‰çš„å˜é‡, å…¶å®å°±æ˜¯ä¸€ä¸ª int å˜é‡. ç¤ºä¾‹:\n1 2 3 4 $a = 123 $b = 321 $c = $a + $b echo $c è¾“å‡º:\n1 444 æ•°å­—æ”¯æŒè¿ç®—, æ‰€ä»¥ç†æ‰€å½“ç„¶çš„å¯ä»¥è¿›è¡Œè¿ç®—.\n- è¡¨è¾¾å¼ä¸æŒ‡ä»¤ åˆšåˆšæˆ‘ä»¬æ‰€ç”¨çš„ echo æŒ‡ä»¤, åŒæ—¶å¯ä»¥è¯´æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼. è€Œåˆšåˆšæˆ‘ä»¬è¿›è¡ŒåŠ æ³•è¿ç®—æ—¶, æ‰€ä½¿ç”¨çš„ \u0026lsquo;$a + $b\u0026rsquo; é€šç”¨\næˆ‘æ²¡çŒœé”™çš„è¯, åœ¨åˆšåˆšçš„å˜é‡éƒ¨åˆ†, ä¹ŸåŒæ ·æœ‰äººè¿™ä¹ˆæ‰§è¡Œ:\n1 2 3 $a = 123 $b = 321 echo $a + $b ç„¶åç»“æœå°±æ˜¯, è¾“å‡ºäº†\n1 $a + $b è€Œè§£å†³åŠæ³•å°±æ˜¯, ä¸ºè¿™ä¸ªè¡¨è¾¾å¼åŠ ä¸Šæ‹¬å·, ä¼˜å…ˆè¿ç®—è¿™ä¸ªè¡¨è¾¾å¼, äºæ˜¯å°±æ­£å¸¸äº†, æˆ–è€…ä½ å¯ä»¥ç›´æ¥ echo ä¸€ä¸ªè¡¨è¾¾å¼:\n1 echo (123+321) è¾“å‡º\n1 444 - è¿ç®—ç¬¦ åˆšåˆšæˆ‘ä»¬ä»å°è¯•äº†åŠ æ³•è¿ç®—, åŒæ—¶åœ¨ PowerShell ä¸­, ä¹Ÿæ˜¯æ”¯æŒå‡æ³•, ä¹˜æ³•, é™¤æ³•çš„, é™¤æ­¤ä¹‹å¤–è¿˜æœ‰å°äº, å¤§äº, ç­‰äº, å¤§äºç­‰äº, å°äºç­‰äº:\n1 echo (1 -lt 10) è¾“å‡º:\n1 True è¿ç®—ç¬¦ æè¿° -eq ç­‰äº -ne ä¸ç­‰äº -lt å°äº -gt å¤§äº -le å°äºç­‰äº -ge å¤§äºç­‰äº 2. æµç¨‹æ§åˆ¶: - åŸºæœ¬åˆ¤æ–­ MSDocs PowerShell : å…³äº If\nåˆ¤æ–­çš„è¯, æ¯‹åº¸ç½®ç–‘æ˜¯ if è¯­å¥. å½“ç„¶, æ— éæ˜¯ \u0026lsquo;if\u0026rsquo; \u0026rsquo;else\u0026rsquo; \u0026rsquo;else if\u0026rsquo;\nåœ¨ PowerShell ä¸­, if è¯­å¥çš„è¯­æ³•å¯ä»¥æ˜¯è¿™æ ·:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 if (exp) { statement block } elseif { statement block } else { statement block } # ç¤ºä¾‹ : $randint = (New-Object Random).Next() # ç”Ÿæˆä¸€ä¸ªéšæœºæ•°, å¹¶èµ‹å€¼ç»™ randint å˜é‡ if ($randint -eq 114514) { echo \u0026#34;å—¯å“¼å“¼å“¼å•Šå•Šå•Šå•Šå•Šå•Šå•Šå•Š\u0026#34; } elseif ($randint -gt 114514) { echo \u0026#34;å”å±äº†ä½ , æ¢éå‡¡!\u0026#34; } else { echo \u0026#34;å¬ä¸è§! å°±è¿™ç‚¹å£°éŸ³è¿˜æƒ³å¼€å†›èˆ°!?\u0026#34; } æ²¡é”™, PowerShell ä¸­, \u0026rsquo;else if\u0026rsquo; çš„è¯æ˜¯ä¸å…è®¸å¸¦ç©ºæ ¼çš„. å¹¶ä¸”éœ€è¦æ³¨æ„çš„æ˜¯, è¿™ä¸ªå¤§æ‹¬å·ä¸å…è®¸çœç•¥.\n- å¾ªç¯è¯­å¥ for å¾ªç¯\nMSDocs PowerShell : å…³äº For\n1 2 3 4 5 6 7 8 9 10 11 12 13 for (exp; exp; exp) { statement block } # ç¤ºä¾‹ : for ($i = 0; $i -lt 10; $i++) { echo $i } for ($i = 1; $i -lt 10; $i++) { for ($j = 1; $j -le $i; $j++) { [Console]::Write((\u0026#34;{0}x{1}={2}`t\u0026#34; -f ($j, $i, $i * $j))) # ä¸æ¢è¡Œè¾“å‡º } [Console]::WriteLine() # æ¢è¡Œ } foreach å¾ªç¯\nMSDocs PowerShell : å…³äº Foreach\n1 2 3 4 5 6 7 foreach ($var in enumerable object) { statement block } # ç¤ºä¾‹ : foreach ($num in @(1..5)) { echo $num } while å¾ªç¯\nMSDocs PowerShell : å…³äº While\n1 2 3 while (exp) { statement block } æ‰“ç ´å¾ªç¯:\nMSDocs PowerShell : å…³äº Break\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 # åœ¨ for ä¸­æ‰“ç ´å¾ªç¯ : for ($i = 0; $i -lt 10; $i++) { if ($i -eq 5) { break } echo $i } # åœ¨ foreach è¯­å¥ä¸­æ‰“ç ´å¾ªç¯ : foreach ($i in @(1..10)) { if ($i -eq 5) { break } echo $i } # åœ¨ while è¯­å¥ä¸­æ‰“ç ´å¾ªç¯ : $i = 0 while ($true) { if ($i -eq 5) { break } echo $i $i++ } 3. å¸¸ç”¨ç±»å‹ - å¯¹è±¡æ•°ç»„ MSDocs PowerShell : å…³äºæ•°ç»„\nMSDocs PowerShell : å…³äºæ•°ç»„çš„å„é¡¹é¡»çŸ¥å†…å®¹\nåœ¨ PowerShell ä¸­, å½“ç„¶ä¹Ÿå­˜åœ¨æ•°ç»„, é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥åˆ›å»º:\n1 2 3 4 5 6 7 8 9 10 11 # è¯­æ³• 1: $var = @(element 1, element 2, element 3, ...., element n) # ç¤ºä¾‹: $array = @(1, 3, 4, 5) # è¯­æ³• 2: $var = start..end # ç¤ºä¾‹: $array = @(1..5) # ç”Ÿæˆçš„æ•°ç»„ç­‰åŒäº: @(1, 2, 3, 4, 5) # æç¤º, @() æ˜¯å¯ä»¥çœç•¥çš„. ä¸è¿‡å¦‚æœè¦åˆ›å»ºç©ºæ•°ç»„, ä¸å¯çœç•¥ æ•°ç»„çš„è®¿é—®, ä¸å…¶ä»–å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸€è‡´, é€šè¿‡ä¸­æ‹¬å·å°±å¯ä»¥:\n1 echo @(1..4)[2] # è¾“å‡º 3 1 2 3 $array = @(1..4) $array[2] = 114514 echo $array[2] # è¾“å‡º 114514 PowerShell çš„æ•°ç»„è¿˜æ”¯æŒè·å–å¤šä¸ªå€¼, å®ƒè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„:\n1 2 3 4 $array = @(1..4) $array2 = $array[0, 2] echo $array2[0] # è¾“å‡º 1 echo $array2[1] # è¾“å‡º 3 æ·»åŠ å…ƒç´ , å¯ä»¥ç”¨ \u0026lsquo;+=\u0026rsquo; è¿ç®—ç¬¦, ä½†æ³¨æ„, ä¸æ¨èè¿™ä¹ˆåš, å› ä¸ºæ¯ä¸ºæ•°ç»„æ·»åŠ å…ƒç´ , å®é™…ä¸Šéƒ½æ˜¯é‡æ–°åˆ›å»ºäº†æ–°çš„æ•°ç»„, å¦‚æœéœ€è¦æ›´çµæ´»çš„æ•°ç»„, è¯·ä½¿ç”¨ æ³›å‹List\n1 2 3 $array = @(1..4) $array += 114514 echo $array[4] # è¾“å‡º 114514 å¦‚æœè·å–æ•°ç»„å…ƒç´ å€¼æ—¶, ç´¢å¼•è¶…å‡ºç•Œé™, ä¸ä¼šæŠ›å‡ºå¼‚å¸¸, ä¼šè¿”å› null:\n1 2 $array = @(1..4) echo $array[114514] # ä¸ä¼šæœ‰ä»»ä½•è¾“å‡º, å› ä¸ºå€¼æ˜¯null å¦‚æœå¯¹ä¸€ä¸ªä¸æ˜¯æ•°ç»„çš„å˜é‡ä½¿ç”¨ç´¢å¼•æ“ä½œç¬¦, åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸:\n1 2 $test = $null $test[0] # æŠ›å‡ºå¼‚å¸¸ ä¸¤ä¸ªæ•°ç»„ç›¸åŠ , è¿”å›æ•°ç»„è¿æ¥åçš„ç»“æœ:\n1 2 3 $array1 = @(1..3) $array2 = @(3..1) echo ($array1 + $array2) è¾“å‡º:\n1 2 3 4 5 6 1 2 3 3 2 1 ä½¿ç”¨ -contains æ“ä½œç¬¦æ¥åˆ¤æ–­æ•°ç»„æ˜¯å¦åŒ…å«æŸå…ƒç´ :\n1 2 $array = @(1..4) echo ($array -contains 2) # è¾“å‡º True åœ¨ PowerShell çš„æ•°ç»„ä¸­, -eq æ“ä½œç¬¦å°†å¯¹æ‰€æœ‰å…ƒç´ è¿›è¡Œåˆ¤æ–­, å³, éå†å†…å®¹, é€ä¸€è¿›è¡Œ -eq è¿ç®—, å¦‚è‹¥æœ‰ä»»ä½•å…ƒç´ è¿ç®—è¿”å› True, åˆ™è¡¨è¾¾å¼è¿”å›çœŸ.\n1 2 $array = @(1..4) echo ($array -eq 3) # è¿”å› True å¦‚æœåˆ¤æ–­ä¸€ä¸ªå˜é‡(å¯èƒ½æ˜¯æ•°ç»„)ä¸ºç©º, è¯·ä¸è¦å°†è¿™ä¸ªå˜é‡æ”¾åœ¨å·¦ä¾§:\n1 2 $array -eq $null # ä¸è¦è¿™æ ·ä½¿ç”¨ $null -eq $array # æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼ ä½¿ç”¨ Count æ¥è·å–ä¸€ä¸ªæ•°ç»„çš„é•¿åº¦, ä½†æ³¨æ„, å¦‚æœä¸€ä¸ªå˜é‡å€¼ä¸ºnull, åŒæ ·å¯ä»¥ä½¿ç”¨ count æ¥è·å–é•¿åº¦, å®ƒè¿”å› 0:\n1 2 3 $array = @(1..4) echo $array.Count # è¿”å› 4 echo $null.Count # è¿”å› 0 ä½ ä¹Ÿå¯ä»¥é€šè¿‡ Length æ¥è·å–ä¸€ä¸ªæ•°ç»„çš„é•¿åº¦, å®ƒä¸ Count ç”¨æ³•ä¸€æ ·, å¹¶ä¸”å¦‚æœæ˜¯ $null, åŒæ ·è¿”å› 0.\n- å“ˆå¸Œè¡¨ MSDocs PowerShell : å…³äºå“ˆå¸Œè¡¨\nMSDocs PowerShell : å…³äºå“ˆå¸Œè¡¨çš„ä¸€äº›æ³¨æ„äº‹é¡¹\nå“ˆå¸Œè¡¨, å³ HashTable. åœ¨ PowerShell ä¸­è¿™æ ·åˆ›å»º HashTable:\n1 2 3 4 5 6 7 8 9 10 11 12 $table = @{ key = value key = value } # ç¤ºä¾‹ : $table = @{} # åˆ›å»ºç©ºè¡¨ $table = @{ # åˆ›å»ºæœ‰åˆå§‹å€¼çš„è¡¨, ä¸‹é¢çš„ç¤ºä¾‹å°†ä½¿ç”¨è¿™ä¸ªè¡¨ \u0026#34;NullSlime\u0026#34; = 100 \u0026#34;MoYuro\u0026#34; = 96 \u0026#34;Muchen\u0026#34; = 94 \u0026#34;KingHans\u0026#34; = 88 } è®¿é—®å“ˆå¸Œè¡¨, é€šè¿‡ç´¢å¼•è¿ç®—ç¬¦, æŒ‡å®šé”®:\n1 2 3 4 # ä½¿ç”¨åˆšåˆšåˆ›å»ºçš„ table echo $table[\u0026#34;MoYuro\u0026#34;] # è¾“å‡º 96 $table[\u0026#34;MoYuro\u0026#34;] = 97 echo $table[\u0026#34;MoYuro\u0026#34;] # è¾“å‡º 97 å‘è¡¨ä¸­æ·»åŠ é”®å€¼å¯¹, ä½¿ç”¨ Add æ–¹æ³•:\n1 2 3 $table.Add(key, value) # ç¤ºä¾‹ : $table.Add(\u0026#34;KunLong\u0026#34;, 76) åˆ é™¤è¡¨ä¸­çš„æŸä¸ªé”®å€¼å¯¹, ä½¿ç”¨ Remove æ–¹æ³•:\n1 2 3 $table.Remove(key) # ç¤ºä¾‹ : $table.Remove(\u0026#34;KingHans\u0026#34;) å“ˆå¸Œè¡¨å’Œæ•°ç»„ä¸€æ ·æ”¯æŒé€‰æ‹©å¤šä¸ªå€¼, åªéœ€è¦åœ¨ç´¢å¼•è¿ç®—ç¬¦ä¸­æŒ‡å®šå¤šä¸ªé”®:\n1 2 3 4 5 6 7 $table[key1, key2, ... , key n] $table[(key1, key2, ... , key n)] $table[@(key1, key2, ... , key n)] # ç¤ºä¾‹ : $values = $table[\u0026#34;NullSlime\u0026#34;, \u0026#34;MoYuro\u0026#34;] # è¿”å›ä¸€ä¸ªæ•°ç»„ echo $values[0] # è¾“å‡º 100 echo $values[1] # è¾“å‡º 96 é€šè¿‡ Keys ä¸ Values æ¥è·å–è¿™ä¸ªå“ˆå¸Œè¡¨çš„æ‰€æœ‰é”®ä»¥åŠå€¼\n1 2 $keys = $tables.Keys # è¿”å›å“ˆå¸Œè¡¨çš„æ‰€æœ‰é”® $values = $tables.Values # è¿”å›å“ˆå¸Œè¡¨çš„æ‰€æœ‰å€¼ å¯ä»¥é€šè¿‡å¯¹å“ˆå¸Œè¡¨çš„æšä¸¾å™¨æ¥è¿›è¡Œå¾ªç¯å“ˆå¸Œè¡¨çš„æ¯ä¸€ä¸ªé”®å€¼å¯¹:\n1 2 3 foreach ($pair in $table.GetEnumerator()) { echo (\u0026#34;{0}: {1}\u0026#34; -f ($pair.Key, $pair.Value)) } å½“é€šè¿‡foreachå¯¹å“ˆå¸Œè¡¨è¿›è¡Œè¿­ä»£æ—¶, ä¸å¯ä»¥å¯¹å“ˆå¸Œè¡¨è¿›è¡Œåˆ å‡:\n4. è„šæœ¬å‡½æ•° - å…³äºå‡½æ•° PowerShell å®˜æ–¹æ–‡æ¡£ : å…³äºå‡½æ•°\nPowerShell ä¸­å®šä¹‰å‡½æ•°å¾ˆç®€å•, å®ƒçš„æœ¬è´¨æ˜¯è„šæœ¬å—(ScriptBlock):\n1 2 3 4 5 6 7 function name(parameters) { statement block } # ç¤ºä¾‹ : function myFunc($a, $b) { echo ($a + $b) } è°ƒç”¨ PowerShell ä¸­å®šä¹‰çš„å‡½æ•°, è¯­æ³•å¦‚ä¸‹:\n1 2 3 name argv1 argv2 argv3 .... argv n # ç¤ºä¾‹ : myFunc 114000 514 # è¾“å‡º 114514 å¦‚æœè¦è·å–è¿™ä¸ªå‡½æ•°çš„å¯¹è±¡å¼•ç”¨ å¯ä»¥è¿™æ ·:\n1 2 3 $function:name # ç¤ºä¾‹ : echo $function:myFunc è¾“å‡º:\n1 2 3 param($a, $b) echo ($a + $b) é€šè¿‡å‡½æ•°çš„å¯¹è±¡å¼•ç”¨, å¯ä»¥ä½¿ç”¨ Invoke æ¥è°ƒç”¨:\n1 2 3 $function:name.Invoke(parameters) # ç¤ºä¾‹ : $function:myFunc.Invoke(114000, 514) # è¾“å‡º 114514 åˆ é™¤ä¸€ä¸ªä¸€å®šä¹‰çš„å‡½æ•°, å¯ä»¥ä½¿ç”¨ del è¯­å¥:\n1 2 3 4 del function:name # ç¤ºä¾‹ : del function:myFunc echo $function:myFunc # ç”±äºå‡½æ•°å·²åˆ é™¤, æ‰€ä»¥ä¸ä¼šæœ‰ä»»ä½•è¾“å‡º å‡½æ•°å¯ä»¥æœ‰è¿”å›å€¼, åªéœ€è¦ä½¿ç”¨ return è¯­å¥:\n1 2 3 function myFunc($a, $b) { return $a + $b; } $result = myFunc 114000 514 echo $result # è¾“å‡º 114514 5. é¢å‘å¯¹è±¡ - ä½¿ç”¨å¯¹è±¡ è‚¯å®šä¼šæœ‰äººæ‰§è¡Œè¿™ä¸ªæŒ‡ä»¤:\n1 echo Hello World! è™½ç„¶ä»…ä»…å°‘äº†ä¸€å¯¹åŒå¼•å·, ä½†æ˜¯, å®ƒè¡¨ç¤ºçš„æ„æ€å…¶å®è·Ÿä¹‹å‰æˆ‘ä»¬å†™çš„å®Œå…¨ä¸ä¸€æ ·. å¦‚æœä¸åŠ åŒå¼•å·, é‚£ä¹ˆåœ¨è¿™ä¸ªæŒ‡ä»¤ä¸­, Hello å’Œ World! ä¼šè¢«è®¤ä¸ºæ˜¯ä¸¤ä¸ªå‚æ•°! æˆ–è€…å‡†ç¡®æ¥è¯´, æ˜¯ä¸¤ä¸ªå¯¹è±¡!\nè¿™æ¡æ²¡æœ‰åŠ åŒå¼•å·çš„æŒ‡ä»¤, è¾“å‡ºç»“æœæ˜¯:\n1 2 Hello World! å¦å¤–, å‘½ä»¤çš„è¾“å‡ºåŒæ ·ä¹Ÿæ˜¯ä¸€ä¸ªä¸ªå¯¹è±¡, æ‰§è¡Œä¸‹é¢çš„æŒ‡ä»¤:\n1 1+1 è¾“å‡º\n1 2 - .NET äº’æ“ä½œ äº‹å®ä¸Š, PowerShell ä¸­çš„å¯¹è±¡éƒ½æ˜¯ .NET å¯¹è±¡. å¹¶ä¸”æˆ‘ä»¬å¯ä»¥è¿›è¡Œ .NET å¯¹è±¡ä¸­æ‰€æ”¯æŒçš„æ“ä½œ. æ‰§è¡Œä¸‹é¢çš„æŒ‡ä»¤:\n1 (1+1).GetType() è¾“å‡º:\n1 2 3 IsPublic IsSerial Name BaseType -------- -------- ---- -------- True True Int32 System.ValueType è¿™ç†Ÿæ‚‰çš„å‘½åç©ºé—´, å¯ä¸å°±æ˜¯ .NET å—?\nè¯•è¯•ä»¥ä¸‹æŒ‡ä»¤:\n1 (echo 123).GetType() è¾“å‡º:\n1 2 3 IsPublic IsSerial Name BaseType -------- -------- ---- -------- True True Int32 System.ValueType å¥½å®¶ä¼™, åŸæ¥ echo ç›´æ¥å°±æ˜¯æŠŠè¿™ä¸ªå¯¹è±¡è¾“å‡ºå‡ºæ¥å¯¹å§!\nè€Œäº‹å®ä¸Š, ä¸€ä¸ªè¡¨è¾¾å¼çš„è¿ç®—ç»“æœ(è¿”å›å€¼), æ˜¯ä¼šæ‰“å°åˆ°æ§åˆ¶å°çš„, è¿™ç‚¹ä¸ Python ä¸€æ ·.\næ‰€ä»¥å¦‚æœä½ æ‰§è¡Œä¸€ä¸ª \u0026lsquo;1+1\u0026rsquo;, è¿™ä¸ªè¡¨è¾¾å¼çš„è¿ç®—ç»“æœæ˜¯ 2, åˆ™ 2 ä¼šè¢«æ‰“å°åˆ°æ§åˆ¶å°.\n1 1+1 # è¾“å‡º 2 å¦‚æœä½ ä¸å¸Œæœ›ä¸€ä¸ªè¯­å¥çš„è¿”å›å€¼è¢«æ‰“å°åˆ°æ§åˆ¶å°, å¯ä»¥åœ¨é¦–éƒ¨æ·»åŠ  [void], å®ƒè¡¨ç¤ºå°†è¯­å¥çš„è¿”å›å€¼å¼ºåˆ¶è½¬æ¢ä¸º void ä»¥ä¿è¯æ²¡æœ‰è¾“å‡º\n1 [void](1+1) # æ²¡æœ‰è¾“å‡º ä½¿ç”¨ New-Object å¯ä»¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡, æŒ‡å®š .NET å¯¹è±¡çš„å…¨åå³å¯åˆ›å»º:\n1 2 3 $random = New-Object System.Random $randint = $random.Next() # è°ƒç”¨ System.Random å¯¹è±¡çš„ Next æ–¹æ³• echo $randint # è¾“å‡ºä¸€ä¸ªéšæœºçš„æ•°å­— å¦‚æœéœ€è¦å¸¦å‚æ•°çš„åˆ›å»º .NET å¯¹è±¡, ç›´æ¥åœ¨ New-Object è¯­å¥åæ·»åŠ å‚æ•°æ•°ç»„å³å¯:\n1 2 $str = New-Object String (\u0026#39;è‰\u0026#39;, 20) # ç”Ÿè‰ echo $str # è¿”å› \u0026#39;è‰è‰è‰è‰è‰è‰è‰è‰è‰è‰è‰è‰è‰è‰è‰è‰è‰è‰è‰è‰\u0026#39; PowerShell ä¸­çš„å¼ºåˆ¶ç±»å‹è½¬æ¢æ˜¯è¿™æ ·ä½¿ç”¨çš„:\n1 2 3 [ç±»å‹]å¯¹è±¡ # ç¤ºä¾‹ : $numArray = [int[]](1..4) # å°† object[] è½¬æ¢ä¸º int[] è°ƒç”¨ .NET ç±»çš„é™æ€æ–¹æ³•, ä½¿ç”¨ä¸‹é¢çš„è¯­æ³•:\n1 2 3 [ç±»çš„å…¨å]::æ–¹æ³•å(å‚æ•°) # ç¤ºä¾‹ : [Console]::WriteLine(\u0026#34;Hello world!\u0026#34;) # è¾“å‡º Hello world è®¿é—®å­—æ®µ, ä¹Ÿæ˜¯ä¸€æ ·çš„\n1 $ansi = [System.Text.Encoding]::Default å¦‚æœè¦ä½¿ç”¨æŸä¸ªå‘½åç©ºé—´, ä½¿ç”¨ä¸‹é¢çš„è¯­å¥:\n1 2 using namespace System.Text $ansi = [Encoding]::Default å€¼å¾—é«˜å…´çš„æ˜¯, é€šè¿‡è°ƒç”¨ .NET çš„ç»„ä»¶, ä½ ç”šè‡³å¯ä»¥åœ¨ PowerShell ä¸­åˆ›å»º UI çª—ä½“, ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 Add-Type -AssemblyName System.Windows.Forms Add-Type -AssemblyName System.Drawing $form = New-Object System.Windows.Forms.Form $form.Text = \u0026#39;Select a Computer\u0026#39; $form.Size = New-Object System.Drawing.Size(300,200) $form.StartPosition = \u0026#39;CenterScreen\u0026#39; $okButton = New-Object System.Windows.Forms.Button $okButton.Anchor = [System.Windows.Forms.AnchorStyles]::Bottom -bor [System.Windows.Forms.AnchorStyles]::Right $okButton.Location = New-Object System.Drawing.Point(75,120) $okButton.Size = New-Object System.Drawing.Size(75,23) $okButton.Text = \u0026#39;OK\u0026#39; $okButton.DialogResult = [System.Windows.Forms.DialogResult]::OK $form.AcceptButton = $okButton $form.Controls.Add($okButton) $cancelButton = New-Object System.Windows.Forms.Button $cancelButton.Anchor = [System.Windows.Forms.AnchorStyles]::Bottom -bor [System.Windows.Forms.AnchorStyles]::Right $cancelButton.Location = New-Object System.Drawing.Point(150,120) $cancelButton.Size = New-Object System.Drawing.Size(75,23) $cancelButton.Text = \u0026#39;Cancel\u0026#39; $cancelButton.DialogResult = [System.Windows.Forms.DialogResult]::Cancel $form.CancelButton = $cancelButton $form.Controls.Add($cancelButton) $label = New-Object System.Windows.Forms.Label $label.Anchor = [System.Windows.Forms.AnchorStyles]::Top -bor [System.Windows.Forms.AnchorStyles]::Left $label.Location = New-Object System.Drawing.Point(10,20) $label.Size = New-Object System.Drawing.Size(280,20) $label.Text = \u0026#39;Please select a computer:\u0026#39; $form.Controls.Add($label) $listBox = New-Object System.Windows.Forms.ListBox $listBox.Anchor = [System.Windows.Forms.AnchorStyles]::Top -bor [System.Windows.Forms.AnchorStyles]::Left -bor [System.Windows.Forms.AnchorStyles]::Bottom -bor [System.Windows.Forms.AnchorStyles]::Right $listBox.Location = New-Object System.Drawing.Point(10,40) $listBox.Size = New-Object System.Drawing.Size(260,20) $listBox.Height = 80 [void] $listBox.Items.Add(\u0026#39;atl-dc-001\u0026#39;) [void] $listBox.Items.Add(\u0026#39;atl-dc-002\u0026#39;) [void] $listBox.Items.Add(\u0026#39;atl-dc-003\u0026#39;) [void] $listBox.Items.Add(\u0026#39;atl-dc-004\u0026#39;) [void] $listBox.Items.Add(\u0026#39;atl-dc-005\u0026#39;) [void] $listBox.Items.Add(\u0026#39;atl-dc-006\u0026#39;) [void] $listBox.Items.Add(\u0026#39;atl-dc-007\u0026#39;) $form.Controls.Add($listBox) $form.Topmost = $true $result = $form.ShowDialog() if ($result -eq [System.Windows.Forms.DialogResult]::OK) { $x = $listBox.SelectedItem [System.Windows.Forms.MessageBox]::Show(\u0026#34;ä½ é€‰æ‹©äº†:\u0026#34; + $x.ToString()) } else { [System.Windows.Forms.MessageBox]::Show(\u0026#34;ä½ æ²¡æœ‰é€‰æ‹©ä»»ä½•æ¡ç›®\u0026#34;) } ","date":"2021-03-24T15:42:12+08:00","permalink":"https://slimenull.com/p/20210324154212/","title":"[PowerShell] å¿«é€Ÿå…¥é—¨, åŸºæœ¬è¯­æ³•, å¸¸ç”¨ç±»å‹, å‡½æ•°, .NET äº’æ“ä½œ"},{"content":"åœ¨å¼€å§‹ä¹‹å‰, è¯·å…ˆé˜…è¯»è¿™ç¯‡æ–‡ç« : [C#] WPF Preview äº‹ä»¶ä¸æ™®é€šäº‹ä»¶çš„åŒºåˆ«\næˆ‘ä»¬çŸ¥é“, æŸäº›æ§ä»¶ä¼šå¯¹äº‹ä»¶è¿›è¡Œå¤„ç†, å¯¼è‡´éƒ¨åˆ†äº‹ä»¶æˆ‘ä»¬æ— æ³•æ­£å¸¸ä½¿ç”¨, å¯¹äº TextBox, æ˜¾è€Œæ˜“è§çš„æ˜¯å…³äºæ‹–æ‹½çš„äº‹ä»¶å®Œå…¨ä¸èƒ½æ­£å¸¸ä½¿ç”¨. å› è€Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ Preview äº‹ä»¶.\nå¯¹äºä¸€å¥—æ‹–æ‹½æ“ä½œ, æœ‰ä»¥ä¸‹è¿‡ç¨‹:\nç”¨æˆ·æ‹–æ‹½æ•°æ®è¿›å…¥æ§ä»¶ (DragEnter) ç”¨æˆ·æ‹–æ‹½æ•°æ®åœ¨æ§ä»¶ä¸Šç§»åŠ¨ (DragOver) ç”¨æˆ·æ‹–æ‹½æ•°æ®åœ¨æ§ä»¶ä¸Šæ¾å¼€é¼ æ ‡ (Drop) å¯¹äºä¸€ä¸ªæ§ä»¶, å¿…é¡»æŒ‡å®šè¿™ä¸ªæ§ä»¶çš„ AllowDrop å±æ€§ä¸º true, è¿™ä¸ªæ§ä»¶æ‰å¯ä»¥æ¥å—æ‹–æ‹½æ“ä½œ\nå¯¹äºä¸Šè¿° 3 ä¸ªäº‹ä»¶:\nDragEnter ä¸­, æˆ‘ä»¬éœ€è¦å†™çš„æ˜¯åˆ¤æ–­æ‹–æ‹½çš„æ•°æ®çš„ç±»å‹, å¹¶è®¾å®šæ‹–æ‹½æ•ˆæœ(DragDropEffects), æŒ‡å®šæ˜¯å¦å·²ç»å¤„ç†å½“å‰äº‹ä»¶(Handled) DragOver ä¸­, ä¸ DragEnter ä¸­ä¸€è‡´. æ‰€ä»¥è¿™ä¸¤ä¸ªäº‹ä»¶, å¯ä»¥é€šè¿‡åŒä¸€ä¸ªæ–¹æ³•æ¥è¿›è¡Œè®¢é˜… Drop ä¸­, åº”è¯¥å†™å¯¹æ•°æ®çš„å¤„ç†, ä¾‹å¦‚å°†æ•°æ®æ·»åŠ åˆ°ç•Œé¢ä¸­ æ³¨æ„! åœ¨ DragEnter å’Œ DragOver ä¸­, å¿…é¡»æŒ‡å®š DragDropEffects æ‰è¡¨ç¤ºå…è®¸æ‹–æ‹½. å¦‚æœä¸å¯¹ Effects è¿›è¡Œèµ‹å€¼, é‚£ä¹ˆ Drop æ–¹æ³•å°†ä¸ä¼šè¢«è§¦å‘.\nç›¸ä¿¡çœ‹å®Œä¸Šé¢çš„å†…å®¹, ä½ å·²ç»å¯ä»¥è§£å†³ä½ çš„é—®é¢˜äº†, å¦‚æœæ— æ³•è§£å†³é—®é¢˜, è¯·åœ¨ä¸‹æ–¹è¯„è®º, æˆ‘ä¼šç»§ç»­å®Œå–„è¿™ç¯‡æ–‡ç« \n","date":"2021-03-19T19:44:01+08:00","permalink":"https://slimenull.com/p/20210319194401/","title":"[C#] WPF TextBox åœ¨ PreviewDragEnter ä¸­æŒ‡å®š Effect ä¸”æŒ‡å®š Handled ä¸º true, ä»ç„¶æ— æ³•æ­£å¸¸å®ç°æ‹–æ‹½æ“ä½œ."},{"content":"å¾ˆå¤šæ–‡ç« éƒ½æåˆ°äº†å†’æ³¡äº‹ä»¶å’Œéš§ç©¿äº‹ä»¶, æˆ‘æ˜¯æ²¡æœ‰å»æµ‹è¯•è¿‡è¿™ä¸¤ä¸ªçš„, ä½†æ˜¯æœ‰ä¸€ä¸ªéå¸¸éå¸¸é‡è¦çš„ç‚¹å¾ˆå¤šäººéƒ½å¿½ç•¥äº†.\nå·²é¢„å¤„ç†äº‹ä»¶çš„æ§ä»¶ åœ¨ WPF ä¸­, éƒ¨åˆ†æ§ä»¶å·²ç»å¯¹æŸäº›äº‹ä»¶è¿›è¡Œäº†å¤„ç†, ä¾‹å¦‚ä¸€ä¸ª Button, å®ƒæä¾›äº† Click äº‹ä»¶, è€Œ Click çš„æœ¬è´¨æ˜¯ MouseDown å’Œ MouseUp, å› è€Œ, Button çš„ MouseDown å’Œ MouseUp äº‹ä»¶æ˜¯æ²¡åŠæ³•æ­£å¸¸ä½¿ç”¨çš„\u0026hellip;\nå¦‚æœéœ€è¦ä½¿ç”¨å®ƒä»¬, ä½ å¾—ä½¿ç”¨ PreviewMouseDown å’Œ PreviewMouseUp.\nåŒæ ·, æœ‰å¾ˆå¤šæ§ä»¶éƒ½æ˜¯è¿™æ ·çš„, ä¾‹å¦‚ TextBox, ä¸€ä¸ªæ”¯æŒè¾“å…¥æ–‡æœ¬çš„æ§ä»¶, åŒæ ·è¿˜æ”¯æŒæ‹–æ‹½äº‹ä»¶, ä½ å¯ä»¥å‘å…¶ä¸­æ‹–æ‹½æ–‡æœ¬, ä½†æ˜¯ä½ ä¸å¯ä»¥å‘å…¶ä¸­æ‹–æ‹½å›¾ç‰‡, è¿™ä¹Ÿæ˜¯å› ä¸º TextBox å¯¹æ‹–æ‹½äº‹ä»¶è¿›è¡Œäº†å¤„ç†.\nä¹Ÿæ­£å› ä¸ºå¦‚æ­¤, å³ä¾¿ä½  TextBox çš„ DragEnter äº‹ä»¶ä¸­æŒ‡å®šäº†å…è®¸æ‹–æ‹½, ä½ ä¹Ÿæ˜¯ä¸å¯ä»¥è¿›è¡Œæ‹–æ‹½çš„! å› ä¸º WPF å·²ç»å¯¹è¿™ä¸ªäº‹ä»¶è¿›è¡Œå¤„ç†äº†, æˆ‘ä»¬çš„é€»è¾‘ä¸ä¼šèµ·ä½œç”¨.\n","date":"2021-03-19T19:30:01+08:00","permalink":"https://slimenull.com/p/20210319193001/","title":"[C#] WPF Preview äº‹ä»¶ä¸æ™®é€šäº‹ä»¶çš„åŒºåˆ«."},{"content":"ä¹‹å‰\u0026hellip; æˆ‘çŸ¥é“äº† Python æœ‰ç€å†…ç½®çš„ç½‘ç»œåº“, ç”šè‡³å¯ä»¥ç›´æ¥ç”¨æ¥åŸåœ°å¼€ä¸€ä¸ª http æœåŠ¡å™¨!\næœ€è¿‘\u0026hellip; é¢‘ç¹çš„éœ€è¦åœ¨å±€åŸŸç½‘å†…ä¼ è¾“å¤§æ–‡ä»¶\u0026hellip; ç”¨ U ç›˜å½“ç„¶å¯ä»¥, ä½†å®Œå…¨æ²¡å¿…è¦,,, å¤ªæµªè´¹äº† ä¹Ÿè¯•ç€ç”¨ Python çš„å¥—æ¥å­—æ¥æ‰‹åŠ¨å°†æ–‡ä»¶æ•°æ®å‘é€åˆ°å¦ä¸€å°æœºå™¨, ç„¶åå¦ä¸€å°æœºå™¨ä¹Ÿç”¨ Python å¥—æ¥å­—æ¥æ¥æ”¶, å¹¶ç›´æ¥å†™å…¥åˆ°æ–‡ä»¶\u0026hellip; å¥½å§æˆ‘çŸ¥é“å¾ˆéº»çƒ¦æ²¡é”™\nç„¶å\u0026hellip; æˆ‘çªç„¶æƒ³èµ·\u0026hellip; Python å¼€é‚£ä¸ª HTTP æœåŠ¡å™¨å¯ä¸å°±èƒ½ç›´æ¥ç”¨æ¥åˆ†äº«æ–‡ä»¶å•Šå§æ§½?\näºæ˜¯\u0026hellip;\n1 python -m http.server æˆåŠŸäº†\u0026hellip; è€Œä¸”é€Ÿåº¦ä¸èµ–~\n","date":"2021-03-19T18:42:42+08:00","permalink":"https://slimenull.com/p/20210319184242/","title":"[Python] å·§ç”¨! å±€åŸŸç½‘ä¼ è¾“æ–‡ä»¶! è¿˜å¯ä»¥è¿™ä¹ˆç©!!!"},{"content":"å¦‚æœæ„Ÿå…´è¶£, å¯ä»¥è¯•è¯•ä¸‹é¢çš„åº“\nåç§° æ ‡ç­¾ æè¿° Newtonsoft.Json JSONåˆ†æ, æ–‡æœ¬å¤„ç† éå¸¸æµè¡Œçš„JSONæ“ä½œåº“, æ•™ç¨‹ä¹Ÿèƒ½å¤Ÿè½»æ¾åœ¨ç½‘ä¸Šæ‰¾åˆ°, é€Ÿåº¦ä¹Ÿå¾ˆä¸é”™, æ˜¯ ASP.NET ä¸­ Json åºåˆ—åŒ–ååºåˆ—åŒ–çš„é»˜è®¤ä½¿ç”¨æ–¹å¼ NAudio éŸ³é¢‘å¤„ç†, å½•éŸ³, æ’­æ”¾éŸ³é¢‘ æµè¡Œè€Œåˆå¼ºå¤§çš„éŸ³é¢‘æ“ä½œåº“, æ”¯æŒéŸ³é¢‘æ’­æ”¾, å½•åˆ¶, è½¬ç , ä»¥åŠéŸ³é¢‘å¯è§†åŒ–, NAudio å„ç§ä½¿ç”¨æ–¹å¼, NAudio å®ç°éŸ³é¢‘å¯è§†åŒ– Costura.Fody ç¨‹åºæ‰“åŒ… ä»…éœ€å®‰è£…è¿™ä¸ªåº“, å³å¯ç›´æ¥ä½¿æ‰€æœ‰éœ€è¦çš„ç¨‹åºé›†å†…åµŒå…¥ä½ çš„ç¨‹åº, å®ç°å•æ–‡ä»¶ç¨‹åº System.CommandLine å‘½ä»¤è¡Œå‚æ•°åˆ†æ å¾®è½¯å®˜æ–¹æ¨å‡ºçš„å‘½ä»¤è¡Œåˆ†æ, æˆªæ­¢åˆ°ç›®å‰, å·²ç»æœ‰äº†é¢„å‘å¸ƒç‰ˆæœ¬ PropertyChanged.Fody è‡ªåŠ¨å¤„ç† å®‰è£…è¿™ä¸ªåº“å, æ‰€æœ‰ç»§æ‰¿ INotifyPropertyChanged æ¥å£çš„ç±»éƒ½å°†è‡ªåŠ¨æ·»åŠ é€šçŸ¥å±æ€§å˜æ›´çš„é€»è¾‘ WinApi Win32 C# çš„ WinApi å°è£…, æ¶µç›–çš„æ–¹é¢éå¸¸å¹¿, é¡¹ç›®åœ°å€æ˜¯: github.com/prasannavl/WinApi, ä¸‹é¢æœ‰å¾ˆå¤šä½¿ç”¨ç¤ºä¾‹ ConsoleGUI æ§åˆ¶å°åº”ç”¨ é€‚ç”¨äºæ§åˆ¶å°ç¨‹åºçš„ç•Œé¢åº“, èƒ½å¤Ÿå®ç°æ§åˆ¶å°ä¸Šçš„å„ç§ UI æ§ä»¶, ä¾‹å¦‚æ–‡æœ¬æ¡†, TabControl, å¯æ»šåŠ¨çš„æ–‡æœ¬æ¡†, è¾“å…¥æ¡†, æ¶ˆæ¯æ¡†, è¿˜æœ‰å„ç§å¸ƒå±€æ–¹å¼ä¾›ä½¿ç”¨ Html Agility Pack HTMLè§£æ éå¸¸æ–¹ä¾¿çš„HTMLè§£æåº“, æ”¯æŒé€šè¿‡XPathæ¥æŸ¥æ‰¾èŠ‚ç‚¹ System.Drawing.Common å›¾åƒå¤„ç† ä½ å¯èƒ½ä¼šå‘ç° .NET Core ä¸å†…ç½® System.Drawing ç¨‹åºé›† ,é‚£ä¹ˆå®‰è£…è¿™ä¸ªå§, è¿™ä¸ªæ˜¯ç”±å¾®è½¯å®˜æ–¹å‘å¸ƒçš„åŠŸèƒ½ç­‰åŒäº System.Drawing çš„åº“ FiddlerCore è‘—åæŠ“åŒ…ç¥å™¨ Fiddler çš„æ ¸å¿ƒ è¿™ä¸ªåœ¨ nuget.org ä¸­æœç´¢ä¸åˆ°, ä½†ä»–å­˜åœ¨, åªæ˜¯è¢«éšè—äº†, ä½ å¯ä»¥è®¿é—® nuget.org/packages/FiddlerCore æŸ¥çœ‹ä»–çš„ä¿¡æ¯, é€šè¿‡ nuget æ§åˆ¶å°æ¥æ‰‹åŠ¨å®‰è£…å®ƒ NullLib.TickAnimation åŠ¨ç”» è¿™ä¸ªä¸¥æ ¼æ¥è¯´, åªæ˜¯å¯¹å±æ€§æŒ‰ç…§ä¸€å®šæ—¶é—´å‡½æ•°è®¾ç½®å€¼, ä½†è¿™æ­£æ˜¯å…³é”®å¸§åŠ¨ç”», ä¾‹å¦‚é€šè¿‡è¿™ä¸ª, ä½ å¯ä»¥å®ç°è‡ªåŠ¨ä» 0 è®¾ç½® 1, ä¸­é—´æœ‰æ— æ•°è¿‡æ¸¡å€¼, è€Œä¸”å¯ä»¥æŒ‡å®šæ—¶é—´å‡½æ•°, è·Ÿå‰ç«¯çš„è´å¡å°”æ›²çº¿ä¸€æ ·, æ‰€ä»¥å¾ˆæ¨èç”¨è¿™ä¸ªæ¥å®ç° WinForm ç¨‹åºçš„åŠ¨ç”»å®ç°. é¡¹ç›®åœ°å€: github.com/SlimeNull/NullLib.TickAnimation, å…¶ä¸­åŒ…å«äº†å®Œæ•´çš„ä¸­æ–‡ä½¿ç”¨æ–‡æ¡£. NullLib.ConsoleEx æ§åˆ¶å°æ“ä½œæ‹“å±• æ”¯æŒä½ åœ¨è¯»å–ç”¨æˆ·è¾“å…¥æ—¶å°±è·å–ç”¨æˆ·çš„è¾“å…¥å†…å®¹, å¹¶ä¸”æ”¯æŒå­—ç¬¦çš„è¿‡æ»¤, ç§»åŠ¨è¾“å…¥å†…å®¹åˆ°ä»»æ„ä½ç½®ç­‰åŠŸèƒ½; æˆ–è€…æµ‹é‡ä¸€æ®µæ–‡æœ¬åœ¨æ§åˆ¶å°ä¸­çš„æ˜¾ç¤ºé•¿åº¦(ä¸­æ–‡, æ—¥æ–‡ç­‰å­—ç¬¦ä¸º2, å­—æ¯æ•°å­—ä¸º1ä¹‹ç±»çš„) NullLib.CommandLine å‘½ä»¤è¡Œå·¥å…· å¦‚æœä½ åœ¨å¼€å‘ä¸€ä¸ªæœåŠ¡ç«¯ç¨‹åº, å¹¶ä¸”æƒ³è¦ä½¿ç”¨æˆ·èƒ½åœ¨æœåŠ¡ç«¯è¿è¡Œæ—¶å¯ä»¥é€šè¿‡è¾“å…¥å‘½ä»¤è¡Œæ¥å®ç°ç‰¹å®šæ“ä½œ, è¿™ä¸ªæ˜¯éå¸¸æ–¹ä¾¿çš„ NullLib.PhantomTank å¹»å½±å¦å…‹ å¥½è€¶! æ˜¯å¹»å½±å¦å…‹! æ¥è¯•è¯•ç”¨è¿™ä¸ªåº“æ¥å¿«æ·ç”Ÿæˆå¹»å½±å¦å…‹å›¾ç‰‡å§! EleCho.Json JSON ç®€å•æ–¹ä¾¿ä¸å¿«æ·çš„ç¬¬ä¸‰æ–¹ JSON åº“, æ”¯æŒå¼±ç±»å‹æ“ä½œ Microsoft.EntityFrameworkCore ORM å¯¹è±¡å…³ç³»æ˜ å°„, æ‡’å¾—å†™ SQL çš„è¯, å°±ç›´æ¥ç”¨è¿™ä¸ªå§ Dapper ORM å¦‚æœè§‰å¾— EFCore æ€§èƒ½ä¸å¤Ÿ, å¯ä»¥è¯•è¯•è¿™ä¸ª, ä½†æ˜¯éœ€è¦æ‰‹å†™ SQL, è€Œä¸”å­—æ®µå’Œåˆ—åå¿…é¡»ä¿æŒä¸€è‡´ Microsoft.Playwright è‡ªåŠ¨åŒ–æµ‹è¯• ç”¨æ¥åšçˆ¬è™«çš„è¯, ä¹Ÿæ˜¯éå¸¸æ–¹ä¾¿çš„, æ„Ÿè§‰ä½¿ç”¨èµ·æ¥è¦æ¯” Puppeteer è¦å¥½ç”¨äº› å¦‚æœä½ çŸ¥é“æœ‰æ„æ€çš„åº“, åœ¨è¯„è®ºä¸‹ç•™ä¸‹å®ƒçš„åå­—, æˆ‘ä»¬ä¸€èµ·å®Œå–„è¿™ä¸ªæ”¶é›†.\n","date":"2021-03-19T12:12:04+08:00","permalink":"https://slimenull.com/p/20210319121204/","title":"[.NET] æ‹“å±•åº“, å¼€æºåº“, nugetåº“æ”¶é›†. (é•¿æœŸæ›´æ–°)"},{"content":"æ¦‚è¿°: .NET Core ä¸æ”¯æŒå§”æ‰˜çš„ BeginInvoke æ–¹æ³•, ä½¿ç”¨åˆ«çš„æ–¹æ³•, ä¾‹å¦‚ Task æ¥æ›¿ä»£å®ƒ!\nè¿™ä»¶äº‹: é¦–å…ˆæ˜¯\u0026hellip; æŠ¥äº†ä¸€å † \u0026ldquo;å¹³å°ä¸æ”¯æŒçš„\u0026rdquo; é”™è¯¯.\nå †æ ˆæ˜¾ç¤ºä¹Ÿçœ‹ä¸å‡ºæ¥æ˜¯å“ªé‡Œçš„é—®é¢˜, ä½†æˆ‘çœ‹åˆ°äº† Threading è¿™ç©æ„å„¿\u0026hellip;:\næœ€åé€šè¿‡ \u0026ldquo;æ­»äº¡æ–­ç‚¹\u0026rdquo; å‘ç°æ˜¯è¿™é‡Œå‡ºçš„é—®é¢˜, è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„å›è°ƒå‡½æ•°.\nè¿›ä¸€æ­¥è°ƒè¯•, å‘ç°æ˜¯è¿™é‡Œ, è¿™é‡Œåˆä¼š Invoke ä¸€ä¸ªäº‹ä»¶:\nå¥½å®¶ä¼™, åˆæ˜¯ä¸€ä¸ªäº‹ä»¶\u0026hellip; ç„¶åæˆ‘çœ‹äº†çœ‹è®¢é˜…äº†è¿™ä¸ªäº‹ä»¶çš„åœ°æ–¹\u0026hellip;\nä¹ä¸€çœ‹,,,, æ²¡å•¥æ¯›ç—…! ä½†é—®é¢˜ç¡®å®å‡ºåœ¨è¿™é‡Œ! (æˆ‘å®åœ¨æ˜¯å¤ªèœäº†) æœ€å\u0026hellip; æˆ‘æ€è€ƒäº†ä¸‹, æˆ‘åœ¨ Invoke è°ƒç”¨çš„å§”æ‰˜é‡Œé¢, æ•´äº†å¼‚æ­¥çš„æ“ä½œ\u0026hellip;\u0026hellip; äºæ˜¯æˆ‘è¯•ç€å°† BeginInvoke æ¢æˆ Invoke, ç„¶å\u0026hellip;. é—®é¢˜è§£å†³äº†!!!\nåæ¥åˆåŒå’å•é‡åˆ°äº†è¿™ä¸ªé—®é¢˜,,, ç„¶åä»”ç»†æœç´¢äº†ä¸‹èµ„æ–™. æ‡‚äº†. åŸæ¥ .NET Core ä¸æ”¯æŒå§”æ‰˜çš„ BeginInvoke æ–¹æ³•. è€Œäº‹ä»¶çš„æœ¬è´¨å°±æ˜¯å¤šæ’­å§”æ‰˜!\n","date":"2021-03-09T21:48:03+08:00","permalink":"https://slimenull.com/p/20210309214803/","title":"[ç¬”è®°] è®°å½•ä¸€æ¬¡è¯¥æ­»çš„ â€œç„å­¦â€œ Bug, èµ¶ç´§çœ‹çœ‹é¿å¼€è¿™ä¸ªå‘!!! .NET Core, Delegate.BeginInvoke, PlatformNotSupportedException"},{"content":"å…³äºå‘é‡: 1. å‘é‡çš„åŸº åœ¨è®¡ç®—æœºç§‘å­¦ä¸­, å‘é‡, Vector, é€šå¸¸è¿™ä¹ˆè¡¨ç¤º: $$ \\left[ \\begin{array}{cc} x\\ y \\end{array} \\right] $$ å‘é‡æœ‰ä¸¤ä¸ª \u0026ldquo;åŸº\u0026rdquo;, $\\overline{i}$, å³ $\\overrightarrow{1, 0}$, $\\overline{j}$, å³ $\\overrightarrow{0, 1}$\nå‘é‡å¯ä»¥çœ‹ä½œè¿™äº›åŸºä¹˜ä»¥ä¸€ç»„æ•°çš„ç»“æœ, å³: $\\overline{v} = \\overline{i} \\times a + \\overline{j} \\times b$, ä¾‹å¦‚ $[1, 3]$, å°±æ˜¯: $$ \\overline{i} \\times 1 + \\overline{j} \\times 3 = [1, 0] \\times 1 + [0, 1] \\times 3 = [1, 0] + [0, 3] = [1, 3] $$\n2. æ”¹å˜å‘é‡çš„åŸº å½“æ”¹å˜å‘é‡çš„åŸºæ—¶, ç”±äºå‘é‡æ˜¯ä¸€ç»„æ•°ä¸åŸºçš„ä¹˜æ³•, æ‰€ä»¥å‘é‡ä¹Ÿä¼šéšä¹‹å˜åŒ–.\nä¾‹å¦‚æˆ‘ä»¬è®¾å®šä¸¤ä¸ªåŸºä¸ºå®ƒä»¬é¡ºæ—¶é’ˆæ—‹è½¬90Â°åçš„ç»“æœ, å³: $\\overline i = [0, -1], \\overline j = [1, 0]$, é‚£ä¹ˆ [1, 3] å°±å˜æˆäº†: $$ \\overline i \\times 1 + \\overline j \\times 3 = [0, -1] \\times 1 + [1, 0] \\times 3 = [0, -1] + [3, 0] =[3, -1] $$ ä½ ä¼šå‘ç°, è¿™ä¸ªå‘é‡ä¹Ÿéšä¹‹æ”¹å˜äº†, è€Œä¸”æ°å¥½æ˜¯é¡ºæ—¶é’ˆæ—‹è½¬90Â°\n3. çŸ©é˜µçš„ä¹˜æ³•: åœ¨è®¡ç®—æœºç§‘å­¦ä¸­, å‘é‡å¦‚æ­¤è¡¨ç¤º: $$ \\left[ \\begin{array}{c} x\\y \\end{array} \\right] $$ å¦‚æœæ˜¯ä¸¤ä¸ªå‘é‡, åˆ™æ˜¯è¿™æ ·, ç«–ç€çš„, æ˜¯ä¸€ä¸ªå‘é‡: $$ \\left[ \\begin{array}{c} x_1, \u0026amp; x_2\\ y_1, \u0026amp; y_2 \\end{array} \\right] $$ è€Œ, æˆ‘ä»¬åˆšåˆšè¿›è¡Œçš„ä¹˜æ³•, å…¶å®ä¹Ÿæ˜¯çŸ©é˜µä¹˜æ³•, å³: $$ \\left[ \\begin{array}{c} 0, \u0026amp; -1\\ 1, \u0026amp; 0 \\end{array} \\right] \\times \\left[ \\begin{array}{c} 1\\ 3 \\end{array} \\right]= \\left[ \\begin{array}{c} 3 \\ -1 \\end{array} \\right] $$\nçŸ©é˜µå˜æ¢ åœ¨ WPF ä¸­, ä¸€ä¸ªçŸ©é˜µ(Matrix)æœ‰ä»¥ä¸‹å±æ€§: M11, M12, M21, M22, OffsetX, OffsetY.\nå…¶ä¸­, M11, M12, M21, M22 è¡¨ç¤ºç¼©æ”¾æ—‹è½¬çŸ©é˜µ: $$ \\left[ \\begin{array}{c} M11, \u0026amp; M12 \\ M21, \u0026amp; M22 \\end{array} \\right] $$ å®ƒä»¬çš„é»˜è®¤å€¼æ˜¯: $$ \\left[ \\begin{array}{c} 1, \u0026amp; 0 \\ 0, \u0026amp; 1 \\end{array} \\right] $$ è€Œè¿›è¡ŒçŸ©é˜µå˜æ¢, ä¹Ÿå°±æ˜¯å°†æºå›¾å½¢çš„æ¯ä¸€ä¸ªç‚¹, ä¸è¿™ä¸ªçŸ©é˜µç›¸ä¹˜, æœ€ç»ˆå¾—åˆ°å¦ä¸€äº›ç‚¹, æ„æˆä¸€ä¸ªæ–°çš„å›¾å½¢.\nè€Œä¸é»˜è®¤çš„è¿™ä¸ªçŸ©é˜µç›¸ä¹˜, å½¢çŠ¶ä¸ä¼šæœ‰ä»»ä½•å˜åŒ–.\nè¿™ä¸ªçŸ©é˜µçš„ M11 å’Œ M21 å€¼, å¯ä»¥ç†è§£ä¸º $\\overline i$, M12 å’Œ M22 å¯ä»¥ç†è§£ä¸º $\\overline j$, ä¹‹å‰æˆ‘ä»¬æåˆ°, å¦‚æœå˜åŒ–è¿™ä¸¤ä¸ªåŸºçš„å€¼, é‚£ä¹ˆæœ€ç»ˆå‘é‡ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–, è€Œå½“æˆ‘ä»¬å°†åˆšåˆšæ—‹è½¬ 90Â° åçš„ $\\overline i$ å’Œ $\\overline j$ æ‹¿å‡ºæ¥ç›´æ¥ä»£å…¥, ä¹Ÿå¯ä»¥å‘ç°, å›¾å½¢ç›´æ¥æ—‹è½¬äº† 90Â°.\nçŸ©é˜µçš„åŸºæœ¬åŸç†å°±æ˜¯çŸ©é˜µçš„ä¹˜æ³•, ä½†å³ä¾¿ä½ ä¸ç†è§£çŸ©é˜µçš„ä¹˜æ³•, å»æ”¹å˜ Matrix ä¸­çš„ä¸¤ä¸ªåŸºå€¼, å½¢çŠ¶ä¹Ÿå°†è·ŸéšåŸºå€¼å‘ç”Ÿæ”¹å˜.\nè€Œ OffsetX å’Œ OffsetY, è¿™ä¸¤ä¸ªæŒ‡å®šäº†è¿™ä¸¤ä¸ªå›¾å½¢çš„å¹³ç§», OffsetX æ°´å¹³åç§»é‡, OffsetY å‚ç›´åç§»é‡.\n0. å‚è€ƒå†…å®¹: å“”å“©å“”å“© 3Blue1Brown çº¿æ€§ä»£æ•° ç†è§£çŸ©é˜µä¹˜æ³• - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— çŸ©é˜µä¹˜æ³• - endl ","date":"2021-03-08T11:59:48+08:00","permalink":"https://slimenull.com/p/20210308115948/","title":"[WPF] Matrix Transform, çŸ©é˜µå˜æ¢. æœ€æœ€æœ€åŸºç¡€çš„åŸç†è§£é‡Š."},{"content":" ä»Šå¤©æˆ‘ä¸€ä¸ªæœ‹å‹, çªç„¶é—®æˆ‘, åœ¨ç¨‹åºå…¥å£æ‰€ç”¨çš„ç±»ä¸­, ä¸ºä»€ä¹ˆå­—æ®µéœ€è¦åŠ static\u0026hellip;\nå¥½å®¶ä¼™, ä¸€å¬å°±æ˜¯æ²¡æ‡‚å•¥æ˜¯é¢å‘å¯¹è±¡! æˆ‘ä¹Ÿçœ‹äº†ç½‘ä¸Šçš„ä¸€å¤§å †ä¸œè¥¿, å•Šè¯´å•¥ç»§æ‰¿, å¤šæ€, åæ­£æˆ‘æ˜¯èœé¸Ÿçš„æ—¶å€™æ˜¯æ²¡å¬æ‡‚è¿™äº›ä¸œè¥¿, åæ¥è¿˜æ˜¯æˆ‘è‡ªå·±æ‘¸ç´¢å‡ºæ¥çš„ (å˜¤å˜¤å˜¤QAQ)\nå¥½çš„, æˆ‘ä»¬ä½¿ç”¨ C# æ¥åšæ¼”ç¤º, å¤§æ¦‚äº†è§£ä¸€ä¸‹ç±»çš„æœ€åŸºæœ¬æ¦‚å¿µ. æ¥æ•´ä¸€ä¸ª, æ•°ç»„æ‹“å±•.\næ¼”ç¤ºä»£ç ç‰‡: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 public class ArrayHelper { public int[] Source; // å­—æ®µ public static int InsCount = 0; public Arrayhelper() // æ„é€ å‡½æ•° { this.Source = new int[]{}; InsCount++; } public ArrayHelper(int[] arr) // æœ‰å‚æ•°çš„æ„é€ å‡½æ•° { this.Source = arr; InsCount++; } ~ ArrayHelper() // ææ„å‡½æ•° { InsCount--; } public void ResetInsCount() { InsCount = 0; } public int GetSum() // æ–¹æ³• { int sum = 0; foreach (var i in Source) sum += i; return sum; } public int GetAverage() // æ–¹æ³• { return GetSum() / Source.Length; } } 1. åŸºæœ¬æ¦‚å¿µ 1. å•¥æ˜¯å¯¹è±¡: å¯¹è±¡, å®ƒçš„è‹±æ–‡æ˜¯ object, å’±ä¹Ÿä¸æ‡‚ä¸ºå•¥å®ƒè¢«ç¿»è¯‘æˆè¿™ç§æœ‰æ­§ä¹‰çš„è¯, æ²¡é”™, å®ƒè·Ÿ \u0026lsquo;æƒ…äºº\u0026rsquo; æ²¡æœ‰ä»»ä½•å…³ç³». æ„æ€æ¥è¿‘ä¸º: \u0026ldquo;ç‰©ä½“\u0026rdquo;, \u0026ldquo;äº‹ç‰©\u0026rdquo;, ä¸‹é¢çš„å¥å­ä¸­, \u0026lsquo;å¯¹è±¡\u0026rsquo; ä¸€è¯æ˜¯æœ€æ¥è¿‘ç¼–ç¨‹ä¸­çš„ \u0026lsquo;å¯¹è±¡\u0026rsquo; çš„.\nä½ è¦å¸®åŠ©çš„å¯¹è±¡æ˜¯è°? æˆ‘ä»¬æœ¬æ¬¡æ•´æ”¹æ‰€é’ˆå¯¹çš„å¯¹è±¡, æ˜¯å‚é‡Œå¹²éƒ¨é‡äº‹å´ä¸ä½œä¸ºçš„äº‹ä»¶. ç”Ÿæ´»ä¸­ä¸€åˆ‡ä¸œè¥¿éƒ½å¯æˆä¸ºå¯¹è±¡, ä¾‹å¦‚ä¸€å°ç”µè„‘, å¯ä»¥è¯´æ˜¯ä¸€ä¸ªå¯¹è±¡, å®ƒæœ‰ä¸€äº›æˆå‘˜(å­—æ®µ, å±æ€§, æ–¹æ³•), ä¾‹å¦‚æ‰€è£…è½½çš„ç¡¬ä»¶. è€Œå¯¹è±¡éƒ½æœ‰è‡ªèº«çš„è¡Œä¸º(æ–¹æ³•), ä¾‹å¦‚, æ±½è½¦, æœ‰ç‚¹ç«è¿™ä¸ªè¡Œä¸º.\n2. ç¼–ç¨‹ä¸­çš„ç±»: ç¼–ç¨‹ä¸­çš„ç±», æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºæ¨¡æ¿, æˆ–è€…ç”Ÿäº§æœºå™¨, é€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡(ç±»çš„å®ä¾‹åŒ–). ä¸€ä¸ªç±»äº§ç”Ÿçš„å¯¹è±¡, å°±æ˜¯è¿™ä¸ªç±»çš„å®ä¾‹.\n1 ArrayHelper helper = new ArrayHelper(); // å®ä¾‹åŒ– ArrayHelper, helper å°±æ˜¯æˆ‘ä»¬ç¤ºä¾‹åŒ–äº§ç”Ÿçš„å¯¹è±¡ 3. æ„é€ å‡½æ•°: æ„é€ å‡½æ•°, å°±æ˜¯è¿™ä¸ªç±»åœ¨æ„é€ å¯¹è±¡çš„æ—¶å€™ä¼šè°ƒç”¨çš„å‡½æ•°, ä¾‹å¦‚åˆšåˆš new ArrayHelper() çš„æ—¶å€™, å¿…å®šä¼šè°ƒç”¨ç±»ä¸­çš„è¿™ä¸€ç‰‡ä»£ç :\n1 2 3 4 public Arrayhelper() // æ„é€ å‡½æ•° { this.Source = new int[]{}; } æˆ‘ä»¬å¯ä»¥å£°æ˜å¤šä¸ªæ„é€ å‡½æ•°, ä»¥ä½¿ç”¨ä¸åŒçš„æ–¹å¼æ¥åˆ›å»ºå¯¹è±¡.\n1 2 3 4 public ArrayHelper(int[] arr) // æœ‰å‚æ•°çš„æ„é€ å‡½æ•° { this.Source = arr; } è®©æˆ‘ä»¬æ¥ä½¿ç”¨ä¸‹è¿™ä¸ªå¸¦å‚æ•°çš„æ„é€ å‡½æ•°:\n1 2 int[] myArray = new int[] {1, 2, 3}; ArrayHelper helper = new ArrayHelper(myArray); 4. å¯¹è±¡çš„å­—æ®µ åœ¨æˆ‘ä»¬çš„å®ä¾‹ä»£ç ä¸­, ç±»ä¸­æœ‰å†™ä¸€ä¸ª int[] ç±»å‹çš„ Source å­—æ®µ. æˆ‘ä»¬ä¹Ÿè¯´è¿‡, ç±»å°±å¥½æ¯”ä¸€ä¸ªæ¨¡æ¿. å½“ä¸€ä¸ªå¯¹è±¡åˆ›å»ºå, å®ƒå°±æ‹¥æœ‰è¿™ä¸ªå­—æ®µ\nå½“æˆ‘ä»¬å®ä¾‹åŒ–ä¹‹å, æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å®ä¾‹, æ¥è®¿é—®æ–°ç”Ÿæˆçš„å¯¹è±¡çš„æˆå‘˜:\n1 2 ArrayHelper helper = new ArrayHelper(); Console.WriteLine(helper.Source); // å°† helper çš„ Source æˆå‘˜æ‰“å°å‡ºæ¥ è¿™ä¸ªæˆå‘˜, æ˜¯å¯¹è±¡æ‰€æ‹¥æœ‰çš„, è€Œä¸æ˜¯ç±»æœ¬èº«æ‰€æ‹¥æœ‰çš„, æ‰€ä»¥, ä¸‹é¢çš„ä»£ç æ˜¯é”™è¯¯çš„:\n1 Console.WriteLine(ArrayHelper.Source); // ä¼šæŠ¥é”™, å› ä¸ºæˆå‘˜æ˜¯å¯¹è±¡çš„. æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±ç‹¬è‡ªçš„æˆå‘˜, æ‰€ä»¥, ä¸åŒå®ä¾‹çš„æˆå‘˜, å€¼æ˜¯ä¸€å®šç›¸ä¸åŒçš„.\n5. å¯¹è±¡çš„æ–¹æ³• åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä»£ç ä¸­, ç±»ä¸­æœ‰å†™ä¸€ä¸ªè¿”å›å€¼ä¸º int çš„ GetSum æ–¹æ³•, åŒå­—æ®µä¸€æ ·, æ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±ç‹¬è‡ªçš„æ–¹æ³•, æ‰€ä»¥è°ƒç”¨å, è¿”å›å€¼æ˜¯ä¸ä¸€å®šç›¸åŒçš„.\nä¸‹é¢æ˜¯æ¼”ç¤º:\n1 2 3 4 5 6 int[] array1 = new[] {1, 2, 3}; int[] array2 = new[] {1, 2, 3, 4, 5}; ArrayHelper helper1 = new ArrayHelper(array1); ArrayHelper helper2 = new ArrayHelper(array2); Console.WriteLine(helper1.GetSum()); // ç»“æœæ˜¯6 Console.WriteLine(helper2.GetSum()); // ç»“æœæ˜¯15 åŒæ ·, å±äºå¯¹è±¡çš„æ–¹æ³•, æ˜¯ä¸èƒ½é€šè¿‡ç±»åæ¥è°ƒç”¨çš„, ä»¥ä¸‹ä»£ç æ˜¯é”™è¯¯çš„:\n1 Console.WriteLine(ArrayHelper.GetSum()); // æŠ¥é”™, å› ä¸ºæˆå‘˜æ˜¯å¯¹è±¡çš„ 6. ç±»çš„å­—æ®µ: ç±»ä¹Ÿæ˜¯å¯ä»¥æœ‰æˆå‘˜çš„, å®ƒä»¬ç‹¬å±äºæŸä¸ªå¯¹è±¡, å®ƒä»¬å±äºè¿™ä¸ªç±». è¿™ç§æˆå‘˜, è¢«ç§°ä¸ºé™æ€æˆå‘˜. ä¾‹å¦‚æˆ‘ä»¬ç¤ºä¾‹ä»£ç ä¸­çš„ InsCount å­—æ®µ.\né™æ€æˆå‘˜æ˜¯å¯ä»¥è¢«æ‰€æœ‰å®ä¾‹æ‰€è®¿é—®çš„, ä¾‹å¦‚æ„é€ å‡½æ•°é‡Œé¢æˆ‘ä»¬æŒ‡å®šäº†ä¸º InsCount çš„å€¼å¢åŠ 1, è¿™å°±æ„å‘³ç€, æˆ‘ä»¬æ¯å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡, è¿™ä¸ªç±»çš„ InsCount çš„å€¼éƒ½å°†å¢åŠ 1;\nè®¿é—®ç±»çš„é™æ€æˆå‘˜, éœ€è¦é€šè¿‡ç±»åæ¥è®¿é—®, æ¯•ç«Ÿè¿™ä¸ªé™æ€æˆå‘˜æ˜¯å±äºè¿™ä¸ªç±»çš„. ä¸å¯ä»¥ç”¨å®ä¾‹åæ¥è®¿é—®, å› ä¸ºä¸ç‹¬å±äºä»»ä½•ä¸€ä¸ªå®ä¾‹.\næ­£ç¡®ç¤ºä¾‹:\n1 Console.WriteLine(ArrayHelper.InsCount); // æ‰“å°ç±»çš„ InsCount å­—æ®µ é”™è¯¯ç¤ºä¾‹:\n1 2 ArrayHelper helper = new ArrayHelper(); Console.WriteLine(helper.InsCount); // æŠ¥é”™, å› ä¸ºæˆå‘˜å±äºç±»è€Œä¸æ˜¯å¯¹è±¡ 7. ç±»çš„æ–¹æ³•: é™æ€æ–¹æ³•, åŒé™æ€å­—æ®µä¸€æ ·, å±äºæ•´ä¸ªç±», æ‰€æœ‰å¯¹è±¡å¯è®¿é—®, åªèƒ½é€šè¿‡ç±»åè€Œæ— æ³•é€šè¿‡å¯¹è±¡åæ¥è®¿é—®.\nä¾‹å¦‚æˆ‘ä»¬çš„ç¤ºä¾‹ä»£ç ä¸­çš„ ResetInsCount å‡½æ•°.\næ­£ç¡®ç¤ºä¾‹:\n1 ArrayHelper.ResetInsCount(); é”™è¯¯ç¤ºä¾‹:\n1 2 ArrayHelper helper = new ArrayHelper(); helper.ResetInsCount(); 8. ææ„å‡½æ•°: ææ„å‡½æ•°ä¸æ„é€ å‡½æ•°ç›¸å¯¹åº”, ææ„å‡½æ•°å°†åœ¨å¯¹è±¡è¢«é‡Šæ”¾çš„æ—¶å€™æ‰§è¡Œ, ä¾‹å¦‚æˆ‘ä»¬ä»£ç ç‰‡ä¸­çš„ææ„å‡½æ•°:\n1 2 3 4 ~ ArrayHelper() { InsCount--; } å³, æ¯å½“ä¸€ä¸ªå¯¹è±¡è¢«é‡Šæ”¾, InsCount çš„å€¼éƒ½ä¼šå‡å°‘1. é…åˆæ„é€ å‡½æ•°æ¥çœ‹, é€ æˆçš„ç»“æœå°±æ˜¯, InsCount å­—æ®µå°†å§‹ç»ˆä¸å½“å‰çš„å®ä¾‹æ•°é‡ä¿æŒä¸€è‡´.\n9. this å…³é”®å­—: æœ‰æ—¶å€™å•Š, ä½ å¯èƒ½å†™å‡½æ•°çš„å‚æ•°å, å†™äº†ä¸ªè·Ÿæˆå‘˜ä¸€æ¨¡ä¸€æ ·çš„åå­—, ç»“æœä½ æƒ³ç»™å®ä¾‹æˆå‘˜èµ‹å€¼çš„æ—¶å€™, å‘ç°å®é™…ä¸Šç¡®æ˜¯ç»™æ–¹æ³•çš„å‚æ•°èµ‹å€¼äº†.\nåœ¨ä¸€ä¸ªç±»çš„éé™æ€æ–¹æ³•ä¸­, æƒ³è¦è®¿é—®å®ä¾‹çš„æˆå‘˜, ä½ å¯ä»¥ç”¨ this æ¥ä¿®é¥°ä»¥é¿å…æ­§ä¹‰.\nä¸‹é¢æ˜¯ä½¿ç”¨äº† this å…³é”®å­—çš„ç¤ºä¾‹ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 public class TestObj { int value; public void SetValue(int value) { this.value = value; } public int GetValue() { return this.value; } } 10. æˆå‘˜è®¿é—®é™åˆ¶: æˆå‘˜æœ‰è®¿é—®é™åˆ¶, å¸¸ç”¨çš„æœ‰ å…¬å…±çš„(public), ç§æœ‰çš„(private), å—ä¿æŠ¤çš„(protected), å¦‚æœä¸å†™ä¿®é¥°ç¬¦, é‚£ä¹ˆé»˜è®¤è®¿é—®é™åˆ¶å°±æ˜¯private, è¿™ä¸ªæˆ‘å¾—ç”¨ä¸€ä¸ªæ¯”è¾ƒé•¿çš„ä»£ç ç‰‡æ¥æ¼”ç¤ºäº†.\nä¿®é¥°ç¬¦ ç‰¹å¾ public å…¬æœ‰çš„, æ— è®ºè°éƒ½å¯ä»¥è®¿é—® internal å†…éƒ¨çš„, ä½äºåŒä¸€ç¨‹åºé›†çš„å¯ä»¥è¿›è¡Œè®¿é—® protected å—ä¿æŠ¤çš„, é™¤äº†è¿™ä¸ªç±»çš„æˆå‘˜, å­ç±»ä¹Ÿå¯ä»¥è¿›è¡Œè®¿é—® private ç§æœ‰çš„, ä»…æœ‰è¿™ä¸ªç±»çš„æˆå‘˜å¯ä»¥è®¿é—® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 using System; namespace Null.Tutorial { class TestObj{ { static int insCount = 0; // æ²¡æœ‰å†™è®¿é—®é™åˆ¶ä¿®é¥°ç¬¦, ä½†æ˜¯é»˜è®¤æ˜¯private public int[] Source; public TestObj(int[] source) { this.Source = source; insCount++; } ~TestObj() { insCount--; } public int GetSum() { int sum = 0; foreach(var i in Source) sum += i; return sum; } public static int GetInstanceCount() { return insCount; } } class Program { public static void Main(string[] args) { int[] myArr = new int[] {1, 2, 3}; TestObj objIns = new TestObj(myArr); Console.WriteLine(objIns.insCount); // æŠ¥é”™, å› ä¸ºåœ¨ç±»ä¹‹å¤–è®¿é—®ç§æœ‰æˆå‘˜ Console.WriteLine(objIns.GetSum()); // æ­£å¸¸è®¿é—®, å› ä¸ºæ˜¯public Console.WriteLine(TestObj.GetInstanceCount()); // æ­£å¸¸è®¿é—®, å› ä¸ºæ˜¯public } } } 11. å±æ€§è¯­æ³•ç³– C# è¿˜æ”¯æŒå±æ€§è¿™ç§ä¸œè¥¿. å…¶å®æ˜¯è¯­æ³•ç³–. å±æ€§ç±»ä¼¼äºå­—æ®µ, ä¸¾ä¸ªä¾‹å­, ä½ å°±æ‡‚äº†.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 class TestObj { int field3, field4, field5, field6; public int Field1 { get; set; } public int Field2 { get; private set; } public int Field3 =\u0026gt; field3 public int Field4 { get =\u0026gt; field4; set =\u0026gt; field4 = value; } public int Field5 { get { return field5; } set { field5 = value; } } public int Field6 { get =\u0026gt; field6; } } ä¸Šé¢çš„ä»£ç ä¸­, Field1 ~ Field5 éƒ½æ˜¯å±æ€§.\nField1 æ˜¯å¼€æ”¾(public)è·å–å€¼ä¸è®¾ç½®å€¼çš„å±æ€§, ç”¨æ³•è·Ÿå­—æ®µä¸€è‡´. Field2 æ˜¯å¼€æ”¾(public)è·å–å€¼, ä½†è®¾ç½®å€¼æ˜¯ç§æœ‰çš„(private)å±æ€§, å³, åœ¨ç±»å¤–é¢å¯ä»¥ç›´æ¥è·å–å€¼, ä½†æ— æ³•è®¾ç½®. Field3 å¯¹åº”ç§æœ‰å­—æ®µ field3, å®ƒçš„è·å–æƒé™æ˜¯ public, è®¾ç½®æƒé™æ˜¯ private Field4 å¯¹åº”ç§æœ‰å­—æ®µ field4, è·å–æƒé™æ˜¯ public, è®¾ç½®æƒé™æ˜¯ private Field5 æ˜¯å±æ€§çš„å®Œæ•´å†™æ³•, å…¶ä¸­åŒ…å« get è®¿é—®å™¨ä¸ set è®¿é—®å™¨, åœ¨æ²¡æœ‰æŒ‡å®šä¸ªåˆ«è®¿é—®ä¿®é¥°ç¬¦æ—¶, å®ƒä»¬çš„æƒé™ä¸æ•´ä¸ªå±æ€§çš„æƒé™ä¸€è‡´. Field6 æ˜¯ä¸ç§æœ‰å­—æ®µ field6 ç›¸å¯¹åº”çš„, æ²¡æœ‰æŒ‡å®š set è®¿é—®å™¨çš„å±æ€§, è¿™æ„å‘³ç€å®ƒåªæ”¯æŒè·å–å€¼, ä¸å…è®¸è®¾ç½®å€¼, ä½†æ˜¯ç±»ä¹‹å†…çš„æˆå‘˜å¯ä»¥ç›´æ¥é€šè¿‡å¯¹ field6 è¿›è¡Œè®¾ç½®æ¥å®ç°æ›´æ”¹å±æ€§å€¼. 12. å¯¹è±¡å¼•ç”¨ C# å’Œ Java ä¸­, æœ‰å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹, äº‹å®ä¸Š, ä¸€ä¸ª \u0026ldquo;å­˜å‚¨\u0026rdquo; å¯¹è±¡çš„å­—æ®µ, å®ƒåŒ…å«çš„æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨. è¿™ä¸ªçš„è¯, C++ ç¨‹åºå‘˜è‚¯å®šç†Ÿæ‚‰çš„ä¸€æ‰¹, å¯ä¸å°±æ˜¯æŒ‡é’ˆå˜›.\n1 2 3 Object obj = new Object(); // åˆ›å»ºä¸€ä¸ªå¯¹è±¡, å¹¶ä½¿ç”¨ obj å­—æ®µæ¥å­˜å‚¨å¯¹è±¡å¼•ç”¨ Console.WriteLine(obj); // é€šè¿‡è¿™ä¸ªå¯¹è±¡å¼•ç”¨, å¯ä»¥ç›´æ¥å¯¹å¯¹è±¡è¿›è¡Œæ“ä½œ. obj = null; æœ€åä¸€å¥, å¯¹ obj å­—æ®µèµ‹å€¼ null, è‚¯å®šä¼šæœ‰äººä»¥ä¸º, æ‰§è¡Œå®Œä¹‹å, æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„å¯¹è±¡å°±å—å±äº†, ä½†å…¶å®æ˜¯, ä»…ä»…æ˜¯è¿™ä¸ªå­—æ®µçš„å€¼ä¸ºnulläº†.\nå¼•ç”¨ç±»å‹çš„å­—æ®µå°±åƒä¸€ä¸ªæŒ‡é’ˆ, å®ƒæœ‰è‡ªå·±çš„å€¼, è¿™ä¸ªå€¼è¡¨ç¤ºå¯¹è±¡çš„å†…å­˜åœ°å€(ä¹Ÿæœ‰å¯èƒ½æ˜¯å¥æŸ„å•¥çš„), æ€»ä¹‹æœ‰è¿™ä¸ªå¼•ç”¨, å°±èƒ½å¤Ÿæ‰¾åˆ°å¯¹è±¡æ‰€åœ¨çš„ä½ç½®. è€Œç»™è¿™ä¸ªå­—æ®µèµ‹å€¼ä¸ºnull, ä¹Ÿå°±æ˜¯æ”¹å˜äº†è¿™ä¸ªæŒ‡é’ˆçš„æ–¹å‘, è®©å®ƒæŒ‡å‘ 0x0000, ä½†äº‹å®ä¸Šå¯¹è±¡è¿˜å­˜åœ¨ç€.\nä½†æ˜¯å‘¢, .NET å’Œ JVM éƒ½æœ‰ç€ GC(Garbage Collection), å³åƒåœ¾å›æ”¶æœºåˆ¶. æœ‰ä¸€ä¸ªä¸ªæ­¥éª¤æ¥å›æ”¶è¿™äº›æ²¡ç”¨çš„å¯¹è±¡, åˆ°æœ€ç»ˆ, è¿™äº›ä¸è¢«å¼•ç”¨çš„æ‰˜ç®¡å¯¹è±¡(å³è¢«è¿è¡Œæ—¶ç®¡ç†çš„å¯¹è±¡)éƒ½ä¼šè¢«é”€æ¯.\nè¿˜æœ‰ä¸€ä¸ªå¥½ç©çš„ä¾‹å­:\n1 2 3 4 int[] myArray = new int[] {1, 2, 3}; int[] another = myArray; another[0] = 100; Console.WriteLine(myArray[0]); // ç»“æœæ˜¯100 å…¶åŸç†å°±æ˜¯, myArray ä¸ºæœ€å¼€å§‹åˆ›å»ºçš„æ•°ç»„çš„å¯¹è±¡å¼•ç”¨, æˆ‘ä»¬åˆå°†è¿™ä¸ªå¼•ç”¨èµ‹å€¼ç»™ another, é‚£ä¹ˆ another è·Ÿ myArray çš„å€¼ä¸€æ ·, æŒ‡å‘æˆ‘ä»¬æœ€å¼€å§‹åˆ›å»ºçš„å¯¹è±¡. å³, é€šè¿‡ anotheræ¥å¯¹æ•°ç»„æ›´æ”¹, å…¶å®è·Ÿé€šè¿‡ myArray æ¥æ›´æ”¹æ— å¼‚. å› ä¸ºå®ƒä»¬è¡¨ç¤ºåŒä¸€ä¸ªå¯¹è±¡.\n13. éæ‰˜ç®¡å¯¹è±¡ æ³¨æ„, å¯¹è±¡çš„å†…å­˜æ˜¯éå¸¸å¤§çš„, æ‰€ä»¥å¦‚æœä¸å¥½å¥½ç®¡ç†, å¾ˆå®¹æ˜“é€ æˆå†…å­˜æ³„æ¼. ä½†å¯¹äº .NET å’Œ Java, è¿™ä¸ªé—®é¢˜å°äº†ä¸€ç‚¹, å› ä¸ºå¤§éƒ¨åˆ†ç±»å‹éƒ½å¯ä»¥è¢« GC ç»™æ¸…ç†æ‰.\nä½†æ˜¯, è¿˜æ˜¯å­˜åœ¨ä¸€äº›éæ‰˜ç®¡å¯¹è±¡çš„, ä¾‹å¦‚ç”¨æˆ·è‡ªå·±åˆ†é…çš„å†…å­˜, ä»¥åŠ MemoryStream ä¹‹ç±»çš„, è¿™äº›å†…å­˜ä¸ä¼šè¢« GC æ¸…ç†æ‰, ç”¨æˆ·éœ€è¦è‡ªå·±ç®¡ç†, ä¸€èˆ¬è¿™ç§åŒ…å«éæ‰˜ç®¡å†…å­˜çš„ç±»éƒ½ä¼šç»§æ‰¿ IDisposable æ¥å£, ç”¨æˆ·å¯ä»¥è°ƒç”¨å®ƒä»¬çš„ Dispose æ–¹æ³•æ¥æ¸…ç†æ‰è¿™ä¸ªå¯¹è±¡çš„éæ‰˜ç®¡å†…å­˜.\n2. ä¸€äº›åŸºæœ¬è®¤çŸ¥: 1. é™æ€ä¸éé™æ€æˆå‘˜è®¿é—®: 1. éé™æ€æˆå‘˜å¯ç›´æ¥è®¿é—®é™æ€æˆå‘˜: è¿™ä¸ªçš„è¯, ç¨å¾®æƒ³æƒ³å°±èƒ½ç†è§£. ä¾‹å¦‚ä¸€ä¸ªå‚å­é‡Œåˆšé€ å‡ºä¸€è¾†è½¦, è¿™ä¸ªè½¦ä¸€çœ‹å°±çŸ¥é“æ˜¯å“ªä¸ªç‰Œå­çš„, æ‰€ä»¥å¯ä»¥è½»æ˜“çš„æ‰¾åˆ°è¿™ä¸ªå‚å­, ä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨è¿™ä¸ªå‚å­é‡Œçš„é›¶é…ä»¶ä¹Ÿæ˜¯éå¸¸ç®€å•çš„, å³éé™æ€æˆå‘˜(å®ä¾‹çš„æˆå‘˜)å¯ç›´æ¥è®¿é—®é™æ€æˆå‘˜(ç±»çš„æˆå‘˜).\n2. é™æ€æˆå‘˜æ— æ³•ç›´æ¥è®¿é—®ä¸ºé™æ€æˆå‘˜: åŒæ ·æ˜¯æ±½è½¦çš„ä¾‹å­, è¿™ä¸ªè½¦å·²ç»ç¦»å¼€å‚å­äº†, å¦‚æœå‚å­è¦æŸ¥çœ‹è¿™ä¸ªè½¦çš„ä¸€äº›é›¶é…ä»¶æŸåç¨‹åº¦, è‚¯å®šæ˜¯ä¸å¤§æ–¹ä¾¿çš„, å› ä¸ºä½ ä¸çŸ¥é“è¿™ä¸ªè½¦åœ¨å“ª, å³é™æ€æˆå‘˜(ç±»çš„æˆå‘˜)æ— æ³•ç›´æ¥è®¿é—®éé™æ€æˆå‘˜(å®ä¾‹æˆå‘˜).\n3. é€šè¿‡å¯¹è±¡å¼•ç”¨æ¥è®¿é—®éé™æ€æˆå‘˜: é™æ€æˆå‘˜æ¥è®¿é—®éé™æ€æˆå‘˜, è‚¯å®šæœ‰åŠæ³•è®¿é—®, ä¾‹å¦‚è¿™è¾†è½¦åœ¨ç¦»å¼€å‚å­å‰ç•™ä¸‹ä¸ªè”ç³»æ–¹å¼, è¿™æ ·å‚å­å°±å¯ä»¥æ‰¾åˆ°è¿™è¾†è½¦. ä¸‹é¢çš„ä»£ç ç‰‡æ˜¯ä¸€ä¸ªä¾‹å­, å¿…é¡»æœ‰å¯¹è±¡å¼•ç”¨æ‰å¯ä»¥å¯¹å…¶æ“ä½œ.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 public class TestObj { static List\u0026lt;TestObj\u0026gt; instances = new List\u0026lt;TestObj\u0026gt;(); private SelfValue = 0; public TestObj() { instances.Add(this); } public int Value =\u0026gt; SelfValue; public static ResetAllInstanceValue() { foreach (var ins in instances) instances.SelfValue = 0; } } å–, è¿™å°±æ˜¯é™æ€æ–¹æ³•æ“ä½œå®ä¾‹æˆå‘˜çš„ç¤ºä¾‹. åªè¦ä½ æœ‰è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨, å°±å¯ä»¥å¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡Œæ“ä½œ\n","date":"2021-03-07T16:15:50+08:00","permalink":"https://slimenull.com/p/20210307161550/","title":"[å¹²è´§] ä¸€ç¯‡æ–‡ç« å®Œå…¨ææ‡‚é¢å‘å¯¹è±¡åŸºæœ¬æ¦‚å¿µ"},{"content":"å¤§æ¦‚æè¿°ä¸€ä¸‹æˆ‘é‡åˆ°çš„æƒ…å†µ.\nçˆ¶å…ƒç´ æ²¡æœ‰æ˜ç¡®æŒ‡å®šé«˜åº¦, ä½†æ˜¯å…¶ä¸­ä¸€ä¸ªå­å…ƒç´ çš„é«˜åº¦æ˜¯ç¡®å®šçš„, å¹¶ä¸”é€šè¿‡è¿™ä¸ªé«˜åº¦å°†çˆ¶å…ƒç´ çš„é«˜åº¦æ’‘èµ·æ¥. å¦ä¸€ä¸ªå­å…ƒç´ çš„é«˜åº¦æ˜¯100%, å³, æˆ‘æƒ³è¦ä½¿å®ƒä¸çˆ¶å…ƒç´ çš„é«˜åº¦ç»Ÿä¸€.\nä½†æ˜¯, æŒ‡å®šé«˜åº¦100%çš„å­å…ƒç´ æ²¡æœ‰ä¸çˆ¶å…ƒç´ çš„é«˜åº¦ç»Ÿä¸€.\nä¸è¿‡, å¦‚æœæ˜ç¡®è€Œåˆ¶å®šäº†çˆ¶å…ƒç´ çš„é«˜åº¦ä¸ºæŸä¸€ç¡®å®šå€¼, é‚£ä¹ˆè¿™ä¸ªæŒ‡å®šé«˜åº¦100%çš„å­å…ƒç´ çš„é«˜åº¦å°±ç”Ÿæ•ˆäº†.\nå¥‡æ€ªçš„ç„å­¦é—®é¢˜å¢åŠ äº†\næœ‰å‡ ç§è§£å†³æ–¹å¼ä¾›å‚è€ƒ:\nä½¿ç”¨ç»å¯¹å®šä½, è®¾ç½®topå’Œbottomä¸º0 ä½¿ç”¨è¡¨æ ¼å¸ƒå±€, ç›´æ¥æŒ‡å®šdisplayä¸ºtable ","date":"2021-03-07T09:33:39+08:00","permalink":"https://slimenull.com/p/20210307093339/","title":"[Webå‰ç«¯] å­å…ƒç´ è®¾ç½®é«˜åº¦ä¸º100%, å´æ²¡æœ‰ä¸çˆ¶å…ƒç´ å¯¹é½é«˜åº¦."},{"content":"é¦–å…ˆæ¼”ç¤ºä¸‹:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 .box1{ width: 300px; height: 300px; } .box2{ width: 200px; height: 200px; } .border-with{ border: solid 1px purple; } .padding-with{ padding: 1px; } .style-pink{ background-color: pink; } .style-green{ background-color: green; } .margin-able{ margin: 10px; } .margin-fix{ overflow: hidden; } 1 2 3 4 \u0026lt;div class=\u0026#34;box1 style-pink\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;box1 style-pink margin-able\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;box2 style-green margin-able\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; æ•ˆæœ:\nå‘ç°, ç»¿è‰²ç›’å­æˆ‘ä»¬æ˜æ˜å®šä¹‰äº†margin, è€Œé¡¶éƒ¨çš„marginå´æ²¡æœ‰èµ·ä½œç”¨.\nå®¡æŸ¥å…ƒç´ , å‘ç°æ˜¯è¿™ä¸ªæƒ…å†µ:\nå¹¶ä¸”å‘ç°, å¦‚æœæŒ‡å®špaddingæˆ–border, é‚£ä¹ˆå®ƒä»¬å°±ä¼šå˜å¾—æ­£å¸¸.\næœ€å¥½çš„ä¿®å¤æ–¹å¼æ˜¯è¿™æ ·, ä¸ºçˆ¶å…ƒç´ æŒ‡å®šoverflowä¸ºhidden:\nå¯ä»¥ç»™å‡ºä¸€ä¸ªæˆ‘çŒœæµ‹çš„ç»“è®º. marginæ˜¯åªæ˜¯æŒ‡ä¸å…¶ä»–å…ƒç´ çš„é—´è·, å³ä¾¿å®ƒå«å¤–è¾¹è·. å› ä¸ºçˆ¶å…ƒç´ å·²ç»ä¸ä¸Šé¢çš„å…ƒç´ é—´è·ä¸º5, å¹¶ä¸”å­å…ƒç´ æ²¡åŠæ³•ä¸åˆ«çš„å…ƒç´ äº§ç”Ÿè¾¹è·, æ‰€ä»¥å°±ç›¸å¯¹äºæœ€ä¸Šæ–¹çš„å…ƒç´ è®¡ç®—è¾¹è·, å³ç›¸å¯¹äºçˆ¶å…ƒç´ çš„é—´è·æ˜¯0. è€Œå¦‚æœæˆ‘ä»¬æŒ‡å®šäº†borderæˆ–padding, ä»–å°±ä¼šç›¸å¯¹è¿™å¤šå‡ºçš„æ§ä»¶æ¥è¿ç®—è¾¹è·, å³æ­¤æ—¶çš„marginç›¸å¯¹äºçˆ¶å…ƒç´ .\nå¦å¤–overflowä¹Ÿæ˜¯ä¸€ä¸ªå¥‡å¦™çš„æ ·å¼, å®ƒè¿˜å¯ä»¥ç”¨æ¥ä¿®å¤å­å…ƒç´ floatå¼•èµ·çš„é«˜åº¦å¡Œé™·é—®é¢˜.\n","date":"2021-03-07T09:26:31+08:00","permalink":"https://slimenull.com/p/20210307092631/","title":"[Webå‰ç«¯] Margin å¤±æ•ˆé—®é¢˜, è®¾ç½®äº† Margin å´ä¸è§æ•ˆæœ, è§£å†³æ–¹æ¡ˆ."},{"content":"å•¥æ˜¯å¹»å½±å¦å…‹? å¹»å½±å¦å…‹å°±æ˜¯, ä¸€å¼ é»‘ç™½å›¾ç‰‡, åœ¨é»‘è‰²èƒŒæ™¯ä¸‹å’Œç™½è‰²èƒŒæ™¯ä¸‹èƒ½å¤Ÿæ˜¾ç¤ºå‡ºä¸åŒçš„å›¾åƒ.\né¦–å…ˆ, æˆ‘å¯ä»¥æ˜ç¡®çš„å‘Šè¯‰ä½ , å®ƒçš„åŸç†å°±æ˜¯æ§åˆ¶åƒç´ çš„é¢œè‰²å’ŒAlphaé€šé“(ä¸é€æ˜åº¦), æ¥ä½¿æ˜¾ç¤ºçš„å›¾åƒåœ¨ä¸åŒèƒŒæ™¯ä¸‹æ˜¾ç¤ºä¸åŒçš„é¢œè‰².\næœ€åŸºæœ¬çš„, å°±æ˜¯, ä¸€å¼ åŠé€æ˜çš„é»‘è‰²è–„è†œ, å¦‚æœåœ¨é»‘è‰²çš„çº¸ä¸Š, ä½ ä»€ä¹ˆä¹Ÿçœ‹ä¸å‡ºæ¥, ä½†å¦‚æœåœ¨ç™½è‰²çº¸ä¸Š, ä½ å¯ä»¥çœ‹è§, å®ƒæ˜¯ç°è‰².\næœ¬æ–‡ä¸­, Alpha ç»Ÿä¸€æ‹Ÿå®šä¸º 0 ~ 1 çš„æµ®ç‚¹æ•°, åƒç´ äº®åº¦ç»Ÿä¸€ä¸º 0 ~ 1 å³åƒç´ \u0026rsquo;ç™½çš„ç¨‹åº¦\u0026rsquo;, ä¾‹å¦‚çº¯ç™½ä¸º1, çº¯é»‘åˆ™0.\næ³¨æ„: æœ¬é¡¹ç›®å·²ç»åœ¨ github.com/SlimeNull/Null.PhantomTank å¼€æº. ä½ å¯ä»¥ç›´æ¥ clone ä¸‹æ¥ä»¥æŸ¥çœ‹æºç .\nå¹»å½±å¦å…‹åˆæˆåº“, NullLib.PhantomTank å·²ç»å‘å¸ƒåˆ° nuget.org, ä½ å¯ä»¥ç›´æ¥åœ¨ VS çš„ nuget åŒ…ç®¡ç†å™¨ä¸­ç›´æ¥å®‰è£…æœ¬åº“\nåŸºæœ¬åŸç†: åƒç´ åœ¨æŸèƒŒæ™¯ä¸‹æœ€ç»ˆæ˜¾ç¤ºå‡ºæ¥çš„å…¬å¼å¦‚ä¸‹:\nè®¾: è¿™ä¸ªå›¾åƒçš„èƒŒæ™¯äº®åº¦ä¸º $bc$, è¿™ä¸ªåƒç´ çš„äº®åº¦ä¸º $pc$, ä¸é€æ˜åº¦ä¸º $pa$, åˆ™æœ€ç»ˆæ˜¾ç¤ºçš„é¢œè‰² $oc$ å°±æ˜¯: $$ oc = pc * pa + bc * (1 - pa) $$\nç†è§£èµ·æ¥ä¹Ÿç®€å•, è¿˜æ‹¿åˆšåˆšçš„ä¾‹å­æ¥è®², ä¾‹å¦‚ä¸€ä¸ªçº¯é»‘çš„åŠé€æ˜è–„è†œ, é‚£ä»–è‚¯å®š:\nåªæœ‰ä¸€åŠçš„é»‘è‰²èƒ½æ˜¾ç¤ºå‡ºæ¥, å³ $pc * pa$ è€ŒèƒŒæ™¯è‰², ä¹Ÿæœ‰ä¸€åŠçš„é¢œè‰²èƒ½å¤Ÿé€è¿‡æ¥. å³: $bc * (1 - pa)$ æ€»çš„é¢œè‰²åŠ èµ·æ¥, ä¹Ÿå°±æ˜¯ $pc * pa + bc * (1 - pa)$ å¹»å½±å¦å…‹: è€Œå½“ä¸€ä¸ªåƒç´ ä¸ºç™½è‰²èƒŒæ™¯æ—¶, èƒ½å¤Ÿæ˜¾ç¤ºå‡ºä¸€ä¸ªç‰¹å®šçš„é¢œè‰² $x$, å½“é»‘è‰²èƒŒæ™¯æ—¶, æ˜¾ç¤ºå‡º $y$, ä¹Ÿå¯å¾—å‡ºä¸€ä¸ªå…¬å¼,\nè®¾: é¢œè‰² $x$ çš„äº®åº¦ä¸º $xc$, é¢œè‰² $y$ çš„äº®åº¦ä¸º $yc$, è¿™ä¸ªåƒç´ çš„äº®åº¦ä¸º $zx$, ä¸é€æ˜åº¦ä¸º $za$, åˆ™æ»¡è¶³: $$ \\begin{cases} xc = za \\times zc + (1 - za) \\ yc = za \\times zc \\end{cases} $$\nç¨å¾®å¤„ç†ä¸€ä¸‹, å¯å¾—åˆ°ä¸‹é¢çš„å…¬å¼: $$ \\begin{cases} xc = yc + 1 \\times (1 - za) \\ yc = xc - 1 \\times (1 - za) \\ za = -[(xc - yc) \\div 1] + 1 \\ \\end{cases} \\ \\downarrow \\ \\begin{cases} xc = yc + 1 - za \\ yc = xc + za - 1 \\ za = yc - xc + 1 \\ \\end{cases} $$\nç”±äº $xc$, $yc$, $zc$, $za$ éƒ½æ˜¯å°äºç­‰äº1, å¤§äºç­‰äº0çš„å€¼, æ‰€ä»¥: $$ \\begin{cases} 1 \\geq xc \\geq 0 \\ 1 \\geq yc \\geq 0 \\ 1 \\geq za \\geq 0 \\ \\end{cases} \\ \\downarrow \\ \\begin{cases} 1 \\geq yc + 1 - za \\geq 0 \\ 1 \\geq xc + za - 1 \\geq 0 \\ 1 \\geq yc - xc + 1 \\geq 0 \\ \\end{cases} \\ \\downarrow \\ \\begin{cases} 0 \\geq yc - za \\geq -1 \\ 2 \\geq yc + za \\geq 1 \\ 0 \\geq yc - xc \\geq -1 \\ \\end{cases} \\ \\downarrow \\ \\begin{cases} za \\geq yc \\ xc + za \\geq 1 \\ xc \\geq yc \\end{cases} \\ \\ _\\text{æœ€ç»ˆå¾—åˆ°çš„ä¸ç­‰å¼, åˆ™æ˜¯æˆ‘ä»¬çš„ x å’Œ y éœ€è¦æ»¡è¶³çš„æ¡ä»¶.} \\\\ _\\text{åªæœ‰ x å’Œ y åƒç´ æ»¡è¶³è¿™äº›æ¡ä»¶, za å’Œ zc æ‰æœ‰å€¼} $$\næœ€ç»ˆæˆ‘ä»¬éœ€è¦çš„ç®—å¼æ˜¯è¿™äº›: $$ \\begin{cases} zc = yc \\div za \\ za = yc - xc + 1 \\end{cases} $$\nè€Œ ARGB é€šé“çš„å€¼æ˜¯ 0 ~ 255, æ‰€ä»¥éœ€è¦è¿›è¡Œè½¬æ¢ä¸€ä¸‹: $$ \\begin{cases} zc = yc \\div (za \\div 255) = yc \\times 255 \\div za \\ za = yc - xc + 255 \\end{cases} $$\nè€Œåˆšåˆšæˆ‘ä»¬éœ€è¦æ»¡è¶³çš„æ¡ä»¶, å…¶ä¸­åªæœ‰ä¸€ä¸ªæ˜¯æˆ‘ä»¬çœŸæ­£éœ€è¦è¿›è¡Œå¤„ç†çš„, å³: $$ xc \\geq yc $$\nè§£å†³æ–¹æ¡ˆ: å…³äº $xc \\geq yc$ çš„æ¡ä»¶, å¾ˆç®€å•, $xc$ ä¸ $yc$ çš„å€¼æ˜¯åœ¨ $0$ åˆ° $255$ ä¹‹å†…çš„, é‚£æˆ‘ä»¬åªéœ€è¦å°†å…¶å‹åˆ¶åˆ° $128$ åˆ° $255$ ä¹‹é—´, å°† $yc$ å‹åˆ¶åˆ° $0$ åˆ° $127$ ä¹‹é—´, å³å¯è§£å†³. ç„¶åå°±å¯ä»¥ç›´æ¥ç”¨æˆ‘ä»¬å¾—å‡ºçš„å…¬å¼æ¥è¿ç®—äº†.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 Color CalcPixel(Color x, Color y) { int xc = (x.R + x.G + x.B) / 3, yc = (y.R + y.G + z.B) / 3; // è·å–äº®åº¦ xc = (xc / 255f) * 127 + 128; yc = (yc / 255f) * 127; // å‹åˆ¶é¢œè‰² int za = yc - xc + 255, zc = za == 0 ? 0 : yc * 255 / za; // è¿ç®—ç»“æœé¢œè‰² return Color.FromArgb(ya, yc, yc, yc); } æˆ‘ä»¬è¿˜å¯ä»¥åŠ ç‚¹åŠŸèƒ½, å°±æ˜¯ x ä¸ y çš„é¢œè‰²å ç”¨æ¯”ä¾‹, ä¾‹å¦‚, åˆšåˆšçš„å°±æ˜¯ 1:1, å¦‚æœæ˜¯ 10 : 245, åˆ™ x å ç”¨ 245 ~ 255, y å ç”¨ 0 ~ 245.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 // src1ColorRatio ä¸º x çš„å ç”¨æ¯”ä¾‹, å€¼åŸŸæ˜¯0~1 Color CalcPixel(Color src1, Color src2, float src1ColorRatio = 0.5f) { float src2ColorRatio = 1 - src1ColorRatio; // è¿ç®—å‡º y çš„å ç”¨æ¯”ä¾‹ int xc = (int)((src1.R + src1.G + src1.B) * src1ColorRatio / 3 + src2ColorRatio * 255 + 1), yc = (int)((src2.R + src2.G + src2.B) * src2ColorRatio / 3); int za = yc - xc + 255, zc = za == 0 ? 0 : (yc * 255 / za); return Color.FromArgb(za, zc, zc, zc); } å®Œæ•´ä»£ç : éœ€è¦çš„åº“:\nSystem.Drawing ç¨‹åºé›†æˆ– System.Drawing.Common åŒ…. LockBitmap æºç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 using System; using System.Drawing; using System.Drawing.Imaging; using System.Runtime.InteropServices; namespace Null.PhantomTank.Library { public class LockBitmap : IDisposable { Bitmap source = null; IntPtr Iptr = IntPtr.Zero; BitmapData bitmapData = null; public byte[] Pixels { get; set; } public int Depth { get; private set; } public int Width { get; private set; } public int Height { get; private set; } public bool IsLocked { get; private set; } private Func\u0026lt;int, Color\u0026gt; colorGetter; private Action\u0026lt;int, Color\u0026gt; colorSetter; public LockBitmap(Bitmap source) { this.source = source; LockBits(); } /// \u0026lt;summary\u0026gt; /// Lock bitmap data /// \u0026lt;/summary\u0026gt; public void LockBits() { try { // Get width and height of bitmap Width = source.Width; Height = source.Height; // get total locked pixels count //int PixelCount = Width * Height; // Create rectangle to lock System.Drawing.Rectangle rect = new System.Drawing.Rectangle(0, 0, Width, Height); // get source bitmap pixel format size Depth = System.Drawing.Bitmap.GetPixelFormatSize(source.PixelFormat); // Check if bpp (Bits Per Pixel) is 8, 24, or 32 if (Depth == 8) { colorGetter = (offset) =\u0026gt; Color.FromArgb(Pixels[offset], Pixels[offset], Pixels[offset]); colorSetter = (offset, color) =\u0026gt; { Pixels[offset] = color.B; }; } else if (Depth == 24) { colorGetter = (offset) =\u0026gt; Color.FromArgb(Pixels[offset + 2], Pixels[offset + 1], Pixels[offset]); colorSetter = (offset, color) =\u0026gt; { Pixels[offset] = color.B; Pixels[offset + 1] = color.G; Pixels[offset + 2] = color.R; }; } else if (Depth == 32) { colorGetter = (offset) =\u0026gt; Color.FromArgb(Pixels[offset + 3], Pixels[offset + 2], Pixels[offset + 1], Pixels[offset]); colorSetter = (offset, color) =\u0026gt; { Pixels[offset] = color.B; Pixels[offset + 1] = color.G; Pixels[offset + 2] = color.R; Pixels[offset + 3] = color.A; }; } else { throw new ArgumentException(\u0026#34;Only 8, 24 and 32 bpp images are supported.\u0026#34;); } // Lock bitmap and return bitmap data bitmapData = source.LockBits(rect, ImageLockMode.ReadWrite, source.PixelFormat); // create byte array to copy pixel values int step = Depth / 8; Pixels = new byte[bitmapData.Stride * Height]; Iptr = bitmapData.Scan0; IsLocked = true; // Copy data from pointer to array Marshal.Copy(Iptr, Pixels, 0, Pixels.Length); } catch (Exception ex) { throw ex; } } /// \u0026lt;summary\u0026gt; /// Unlock bitmap data /// \u0026lt;/summary\u0026gt; public void UnlockBits() { try { // Copy data from byte array to pointer Marshal.Copy(Pixels, 0, Iptr, Pixels.Length); // Unlock bitmap data source.UnlockBits(bitmapData); IsLocked = false; } catch (Exception ex) { throw ex; } } /// \u0026lt;summary\u0026gt; /// Get the color of the specified pixel /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;x\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;y\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt; public Color GetPixel(int x, int y) { Color clr = Color.Empty; // Get color components count int cCount = Depth / 8; // Get start index of the specified pixel //int i = ((y * Width) + x) * cCount; int i = y * bitmapData.Stride + x * cCount; if (i \u0026gt; Pixels.Length - cCount) throw new IndexOutOfRangeException(); // Get color by array index clr = colorGetter.Invoke(i); return clr; } /// \u0026lt;summary\u0026gt; /// Set the color of the specified pixel /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;x\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;y\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;color\u0026#34;\u0026gt;\u0026lt;/param\u0026gt; public void SetPixel(int x, int y, Color color) { // Get color components count int cCount = Depth / 8; // Get start index of the specified pixel //int i = ((y * Width) + x) * cCount; int i = y * bitmapData.Stride + x * cCount; // Set color by array index and color object colorSetter.Invoke(i, color); } public bool IsValidCoordinate(int x, int y) { return x \u0026gt;= 0 \u0026amp;\u0026amp; x \u0026lt; this.Width \u0026amp;\u0026amp; y \u0026gt; 0 \u0026amp;\u0026amp; y \u0026lt; this.Height; } #region IDisposable Support private bool disposedValue = false; // è¦æ£€æµ‹å†—ä½™è°ƒç”¨ protected virtual void Dispose(bool disposing) { if (!disposedValue) { if (disposing) { // TODO: é‡Šæ”¾æ‰˜ç®¡çŠ¶æ€(æ‰˜ç®¡å¯¹è±¡)ã€‚ } // TODO: é‡Šæ”¾æœªæ‰˜ç®¡çš„èµ„æº(æœªæ‰˜ç®¡çš„å¯¹è±¡)å¹¶åœ¨ä»¥ä¸‹å†…å®¹ä¸­æ›¿ä»£ç»ˆç»“å™¨ã€‚ // TODO: å°†å¤§å‹å­—æ®µè®¾ç½®ä¸º nullã€‚ UnlockBits(); disposedValue = true; } } // TODO: ä»…å½“ä»¥ä¸Š Dispose(bool disposing) æ‹¥æœ‰ç”¨äºé‡Šæ”¾æœªæ‰˜ç®¡èµ„æºçš„ä»£ç æ—¶æ‰æ›¿ä»£ç»ˆç»“å™¨ã€‚ // ~LockBitmap() { // // è¯·å‹¿æ›´æ”¹æ­¤ä»£ç ã€‚å°†æ¸…ç†ä»£ç æ”¾å…¥ä»¥ä¸Š Dispose(bool disposing) ä¸­ã€‚ // Dispose(false); // } // æ·»åŠ æ­¤ä»£ç ä»¥æ­£ç¡®å®ç°å¯å¤„ç½®æ¨¡å¼ã€‚ void IDisposable.Dispose() { // è¯·å‹¿æ›´æ”¹æ­¤ä»£ç ã€‚å°†æ¸…ç†ä»£ç æ”¾å…¥ä»¥ä¸Š Dispose(bool disposing) ä¸­ã€‚ Dispose(true); // TODO: å¦‚æœåœ¨ä»¥ä¸Šå†…å®¹ä¸­æ›¿ä»£äº†ç»ˆç»“å™¨ï¼Œåˆ™å–æ¶ˆæ³¨é‡Šä»¥ä¸‹è¡Œã€‚ // GC.SuppressFinalize(this); } #endregion } } å¹»å½±å¦å…‹åˆ¶ä½œæºç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 using System; using System.Collections.Generic; using System.Drawing; using System.Linq; using System.Text; using Null.PhantomTank.Library; namespace Null.PhantomTank { public static class PhantomTank { /// åƒç´ è¿ç®—æ–¹å¼ å˜é‡ : æºè‰²: Xc Yc, è¾“å‡º: Za Zc /// å…¶ä¸­: cè¡¨ç¤ºColor, å³é¢œè‰²äº®åº¦, aä»£è¡¨Alphaé€šé“, å³ä¸é€æ˜åº¦ /// å¤‡æ³¨: å€¼å…¨éƒ¨ä¸º0~1çš„æ¯”å€¼ /// /// Expr: | Xc = Za * Zc + 1 - Za /// | Yc = Za * Zc /// /// Calc: | Xc = Yc + 1 - Za /// | Yc = Xc + Za - 1 /// | Za = Yc - Xc + 1 /// /// Need: | 1 \u0026gt;= Yc + 1 - Za \u0026gt;= 0, 0 \u0026gt;= Yc - Za \u0026gt;= -1; Then: | Za \u0026gt;= Yc /// | 1 \u0026gt;= Xc + Za - 1 \u0026gt;= 0, 2 \u0026gt;= Xc + Za \u0026gt;= 1; Then: | Xc + Za \u0026gt;= 1 /// | 1 \u0026gt;= Yc - Xc + 1 \u0026gt;= 0, 0 \u0026gt;= Yc - Xc \u0026gt;= -1; Then: | Xc \u0026gt;= Yc /// /// Root: | Zc = Yc / Za /// | Za = Yc - Xc + 1 /// /// Basic Root: | Zc = Yc / (Za / 255) = Yc * 255 / Za /// | Za = Yc - Xc + 255 private static Color CalcPixel(Color src1, Color src2, float src1ColorRatio = 0.5f) { float src2ColorRatio = 1 - src1ColorRatio; int xc = (int)((src1.R + src1.G + src1.B) * src1ColorRatio / 3 + src2ColorRatio * 255), yc = (int)((src2.R + src2.G + src2.B) * src2ColorRatio / 3); int za = yc - xc + 255, zc = za == 0 ? 0 : (yc * 255 / za); return Color.FromArgb(za, zc, zc, zc); } private static float ConvertRatio(float ratio) { return ratio / (ratio + 1); } public const float DefaultRatio = 1; public static Bitmap ResizeBitmap(Bitmap src, Color bgColor, ResizeMode resize, int newWidth, int newHeight) { Size srcSize = src.Size; int srcWidth = srcSize.Width, srcHeight = srcSize.Height; Bitmap result = new Bitmap(newWidth, newHeight, src.PixelFormat); Graphics rstG = Graphics.FromImage(result); rstG.Clear(bgColor); Size destSize; Rectangle srcRect, destRect; switch(resize) { case ResizeMode.NoResize: destRect = new Rectangle((newWidth - srcWidth) / 2, (newHeight - srcHeight) / 2, srcWidth, srcHeight); rstG.DrawImageUnscaled(src, destRect); break; case ResizeMode.Stretch: srcRect = new Rectangle(0, 0, srcWidth, srcHeight); destRect = new Rectangle(0, 0, newWidth, newHeight); rstG.DrawImage(src, destRect, srcRect, GraphicsUnit.Pixel); break; case ResizeMode.Uniform: srcRect = new Rectangle(0, 0, srcWidth, srcHeight); destSize = new Size(newWidth, srcHeight * newWidth / srcWidth); if (destSize.Height \u0026gt; newHeight) destSize = new Size(srcWidth * newHeight / srcHeight, newHeight); destRect = new Rectangle(new Point((newWidth - destSize.Width) / 2, (newHeight - destSize.Height) / 2), destSize); rstG.DrawImage(src, destRect, srcRect, GraphicsUnit.Pixel); break; case ResizeMode.UniformToFill: srcRect = new Rectangle(0, 0, srcWidth, srcHeight); destSize = new Size(newWidth, srcHeight * newWidth / srcWidth); if (destSize.Height \u0026lt; newHeight) destSize = new Size(srcWidth * newHeight / srcHeight, newHeight); destRect = new Rectangle(new Point((newWidth - destSize.Width) / 2, (newHeight - destSize.Height) / 2), destSize); rstG.DrawImage(src, destRect, srcRect, GraphicsUnit.Pixel); break; } return result; } /// \u0026lt;summary\u0026gt; /// æœ€åŸºæœ¬çš„åˆæˆæ–¹æ³•, è¯·ä¿è¯å›¾ç‰‡å°ºå¯¸æ˜¯ä¸€è‡´çš„ /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;src1\u0026#34;\u0026gt;åœ¨ç™½åº•ä¸‹å¯ä»¥çœ‹åˆ°çš„å›¾ç‰‡\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;src2\u0026#34;\u0026gt;åœ¨é»‘åº•ä¸‹å¯ä»¥çœ‹åˆ°çš„å›¾ç‰‡\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;åˆå¹¶åçš„é»‘ç™½å›¾åƒ\u0026lt;/returns\u0026gt; public static Bitmap BasicCombineBitmap(Bitmap src1, Bitmap src2, float colorRatio) { if (src1 == null || src2 == null) throw new ArgumentNullException(); if (src1.Size != src2.Size) throw new ArgumentOutOfRangeException(); Size srcSize = src1.Size; int width = srcSize.Width, height = srcSize.Height; Bitmap result = new Bitmap(width, height, src1.PixelFormat); result.SetResolution(src1.HorizontalResolution, src1.VerticalResolution); LockBitmap lbmp1 = new LockBitmap(src1); LockBitmap lbmp2 = new LockBitmap(src2); LockBitmap lrst = new LockBitmap(result); float whiteRatio = ConvertRatio(colorRatio); for (int i = 0; i \u0026lt; height; i++) { for (int j = 0; j \u0026lt; width; j++) { Color srcPixel1 = lbmp1.GetPixel(j, i), srcPixel2 = lbmp2.GetPixel(j, i), outPixel = CalcPixel(srcPixel1, srcPixel2, whiteRatio); lrst.SetPixel(j, i, outPixel); } } lbmp1.UnlockBits(); lbmp2.UnlockBits(); lrst.UnlockBits(); return result; } /// \u0026lt;summary\u0026gt; /// è½¬æ¢å›¾ç‰‡ /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;src\u0026#34;\u0026gt;æºå›¾\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;tankType\u0026#34;\u0026gt;å¦å…‹ç±»å‹\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;è½¬æ¢ç»“æœ\u0026lt;/returns\u0026gt; public static Bitmap ConvertBitmap(Bitmap src, TankType tankType) { Size srcSize = src.Size; int srcWidth = srcSize.Width, srcHeight = srcSize.Height; Bitmap result = new Bitmap(srcWidth, srcHeight, src.PixelFormat); result.SetResolution(src.HorizontalResolution, src.VerticalResolution); LockBitmap lsrc = new LockBitmap(src); LockBitmap lrst = new LockBitmap(result); Func\u0026lt;int, Color\u0026gt; pixelCalcFunc; switch (tankType) { case TankType.AppearOnBlack: pixelCalcFunc = (srcPixel) =\u0026gt; Color.FromArgb(srcPixel, 255, 255, 255); break; case TankType.AppearOnWhite: pixelCalcFunc = (srcPixel) =\u0026gt; Color.FromArgb(255 - srcPixel, 0, 0, 0); break; default: throw new InvalidOperationException(\u0026#34;Not supported.\u0026#34;); } for (int i = 0; i \u0026lt; srcHeight; i++) { for (int j = 0; j \u0026lt; srcWidth; j++) { Color pixel = lsrc.GetPixel(j, i); int light = (pixel.R + pixel.G + pixel.B) / 3; lrst.SetPixel(j, i, pixelCalcFunc.Invoke(light)); } } lsrc.UnlockBits(); lrst.UnlockBits(); return result; } public static Bitmap ConvertImage(Image src, TankType tankType) { Bitmap newSrc = new Bitmap(src); Bitmap result = ConvertBitmap(newSrc, tankType); newSrc.Dispose(); return result; } public static Bitmap CombineBitmap(Bitmap src1, Bitmap src2, Color bgColor1, Color bgColor2, ResizeMode resize, float colorRatio) { Size src1Size = src1.Size, src2Size = src2.Size; int src1Width = src1Size.Width, src1Height = src1Size.Height, src2Width = src2Size.Width, src2Height = src2Size.Height; int maxWidth = src1Width \u0026gt; src2Width ? src1Width : src2Width, maxHeight = src1Height \u0026gt; src2Height ? src1Height : src2Height; Bitmap newSrc1 = new Bitmap(maxWidth, maxHeight, src1.PixelFormat), newSrc2 = new Bitmap(maxWidth, maxHeight, src2.PixelFormat); Graphics srcG1 = Graphics.FromImage(newSrc1), srcG2 = Graphics.FromImage(newSrc2); srcG1.Clear(bgColor1); srcG2.Clear(bgColor2); // è¿™é‡Œè¿›è¡Œçš„æ˜¯å¯¹å›¾ç‰‡çš„é‡æ–°è°ƒæ•´å°ºå¯¸æ“ä½œ switch(resize) { case ResizeMode.NoResize: srcG1.DrawImageUnscaled(src1, (maxWidth - src1Width) / 2, (maxHeight - src1Height) / 2); srcG2.DrawImageUnscaled(src2, (maxWidth - src2Width) / 2, (maxHeight - src2Height) / 2); break; case ResizeMode.Stretch: srcG1.DrawImage(src1, new Rectangle(0, 0, maxWidth, maxHeight), new Rectangle(0, 0, src1Width, src1Height), GraphicsUnit.Pixel); srcG2.DrawImage(src2, new Rectangle(0, 0, maxWidth, maxHeight), new Rectangle(0, 0, src2Width, src2Height), GraphicsUnit.Pixel); break; case ResizeMode.Uniform: Size scaleSize1 = new Size(maxWidth, (int)(src1Height * ((float)maxWidth / src1Width))), scaleSize2 = new Size(maxWidth, (int)(src2Height * ((float)maxWidth / src2Width))); if (scaleSize1.Height \u0026gt; maxHeight) scaleSize1 = new Size((int)(src1Width * ((float)maxHeight / src1Height)), maxHeight); if (scaleSize2.Height \u0026gt; maxHeight) scaleSize2 = new Size((int)(src2Width * ((float)maxHeight / src2Height)), maxHeight); srcG1.DrawImage(src1, new Rectangle(new Point((maxWidth - scaleSize1.Width) / 2, (maxHeight - scaleSize1.Height) / 2), scaleSize1), new Rectangle(0, 0, src1Width, src1Height), GraphicsUnit.Pixel); srcG2.DrawImage(src2, new Rectangle(new Point((maxWidth - scaleSize2.Width) / 2, (maxHeight - scaleSize2.Height) / 2), scaleSize2), new Rectangle(0, 0, src2Width, src2Height), GraphicsUnit.Pixel); break; case ResizeMode.UniformToFill: Size scaleFillSize1 = new Size(maxWidth, (int)(src1Height * ((float)maxWidth / src1Width))), scaleFillSize2 = new Size(maxWidth, (int)(src2Height * ((float)maxWidth / src2Width))); if (scaleFillSize1.Height \u0026lt; maxHeight) scaleFillSize1 = new Size((int)(src1Width * ((float)maxHeight / src1Height)), maxHeight); if (scaleFillSize2.Height \u0026lt; maxHeight) scaleFillSize2 = new Size((int)(src2Width * ((float)maxHeight / src2Height)), maxHeight); srcG1.DrawImage(src1, new Rectangle(new Point((maxWidth - scaleFillSize1.Width) / 2, (maxHeight - scaleFillSize1.Height) / 2), scaleFillSize1), new Rectangle(0, 0, src1Width, src1Height), GraphicsUnit.Pixel); srcG2.DrawImage(src2, new Rectangle(new Point((maxWidth - scaleFillSize2.Width) / 2, (maxHeight - scaleFillSize2.Height) / 2), scaleFillSize2), new Rectangle(0, 0, src2Width, src2Height), GraphicsUnit.Pixel); break; } srcG1.Dispose(); srcG2.Dispose(); Bitmap result = BasicCombineBitmap(newSrc1, newSrc2, colorRatio); // è°ƒç”¨æœ€ç»ˆåˆæˆæ–¹æ³• newSrc1.Dispose(); newSrc2.Dispose(); return result; } public static Bitmap CombineBitmap(Bitmap src1, Bitmap src2, Color bgColor1, Color bgColor2, ResizeMode resize) { return CombineBitmap(src1, src2, Color.White, Color.Black, resize, DefaultRatio); } public static Bitmap CombineBitmap(Bitmap src1, Bitmap src2, Color bgColor1, Color bgColor2, float colorRatio) { return CombineBitmap(src1, src2, Color.White, Color.Black, ResizeMode.NoResize, DefaultRatio); } public static Bitmap CombineBitmap(Bitmap src1, Bitmap src2, ResizeMode resize, float colorRatio) { return CombineBitmap(src1, src2, Color.White, Color.Black, resize, colorRatio); } public static Bitmap CombineBitmap(Bitmap src1, Bitmap src2, ResizeMode resize) { return CombineBitmap(src1, src2, Color.White, Color.Black, resize, 0); } public static Bitmap CombineBitmap(Bitmap src1, Bitmap src2, float colorRatio) { return CombineBitmap(src1, src2, Color.White, Color.Black, ResizeMode.NoResize, colorRatio); } public static Bitmap CombineBitmap(Bitmap src1, Bitmap src2) { return CombineBitmap(src1, src2, Color.White, Color.Black, ResizeMode.NoResize, DefaultRatio); } public static Bitmap CombineImage(Image src1, Image src2, Color bgColor1, Color bgColor2, ResizeMode resize, float colorRatio) { Bitmap newSrc1 = new Bitmap(src1), newSrc2 = new Bitmap(src2); Bitmap result = CombineBitmap(newSrc1, newSrc2, bgColor1, bgColor2, resize, colorRatio); newSrc1.Dispose(); newSrc2.Dispose(); return result; } public static Bitmap CombineImage(Image src1, Image src2, Color bgColor1, Color bgColor2, ResizeMode resize) { return CombineImage(src1, src2, Color.White, Color.Black, resize, DefaultRatio); } public static Bitmap CombineImage(Image src1, Image src2, Color bgColor1, Color bgColor2, float colorRatio) { return CombineImage(src1, src2, Color.White, Color.Black, ResizeMode.NoResize, colorRatio); } public static Bitmap CombineImage(Image src1, Image src2, ResizeMode resize, float colorRatio) { return CombineImage(src1, src2, Color.White, Color.Black, resize, colorRatio); } public static Bitmap CombineImage(Image src1, Image src2, ResizeMode resize) { return CombineImage(src1, src2, Color.White, Color.Black, resize, DefaultRatio); } public static Bitmap CombineImage(Image src1, Image src2, float colorRatio) { return CombineImage(src1, src2, Color.White, Color.Black, ResizeMode.NoResize, colorRatio); } public static Bitmap CombineImage(Image src1, Image src2) { return CombineImage(src1, src2, Color.White, Color.Black, ResizeMode.NoResize, DefaultRatio); } } public enum ResizeMode { NoResize, Stretch, Uniform, UniformToFill, } public enum TankType { AppearOnBlack, AppearOnWhite, } } $\\downarrow$ ç‚¹ä¸ªèµå†èµ°å‘—! $\\downarrow$ ","date":"2021-03-03T16:44:09+08:00","permalink":"https://slimenull.com/p/20210303164409/","title":"[C#] å¥½è€¶! æ˜¯å¹»å½±å¦å…‹! åŸç†è®²è§£, å®Œæ•´ç±»åº“, ç°æˆä»£ç ."},{"content":" æŸå¤©, æˆ‘åœ¨ä¸€ç¾¤é‡Œçœ‹åˆ°äº†è¿™å‰¯ç”»é¢\u0026hellip; æˆ‘çš„å¤©å“ª!!! ä»–å±…ç„¶!!! è¿˜åœ¨ç”¨æ‰‹æœºæ‹ç…§! ç®€ç›´å¦„ä¸ºæŠ€æœ¯äºº! å¾—, æˆ‘ä»Šå¤©å°±å…¨æ–¹é¢å¾—ä»‹ç»ä¸€æ³¢ä½ åœ¨ç”µè„‘ä¸­å¯ä»¥è¿›è¡Œæˆªå›¾çš„æ–¹å¼å§!\næˆªå›¾æ–¹å¼: é¦–å…ˆå•Š, æˆªå›¾è¿˜æ˜¯æœ‰ä¸åŒçš„å­˜å‚¨æ–¹å¼çš„, åƒæ˜¯æ‰‹æœºé‡Œ, ä¸€èˆ¬éƒ½æ˜¯ä¿å­˜ä¸ºæ–‡ä»¶, ç”µè„‘ä¸Šå½“ç„¶ä¹Ÿæ”¯æŒè¿™ç§æ–¹å¼, å½“ç„¶æœ€æœ€æœ€å¥½ç”¨çš„! è¿˜æ˜¯æˆªå›¾åˆ°å‰ªåˆ‡æ¿. (ä¸çŸ¥é“å‰ªåˆ‡æ¿çš„å¯ä»¥é‡å¼€äººç”Ÿä»¥è°¢ç½ªäº†)\nè€Œè¿™ç§æ–¹å¼ä¿å­˜çš„å›¾å‘¢, ä¸€èˆ¬ç”¨äºç²˜è´´å‡ºæ¥. ä¾‹å¦‚ QQ å¾®ä¿¡ çš„æ¶ˆæ¯è¾“å…¥æ¡†, ä½ å¯ä»¥ç›´æ¥ç²˜è´´ä½äºå‰ªåˆ‡æ¿ä¸­çš„å†…å®¹. åƒæ˜¯PS, Word, MSPaint(ç”»å›¾), è¿™äº›ç¨‹åºä¹Ÿæ˜¯æ”¯æŒç²˜è´´å›¾ç‰‡çš„! å½“ç„¶å½“ç„¶, CSDN çš„ Markdown ç¼–è¾‘å™¨ä¹Ÿæ˜¯æ”¯æŒç²˜è´´å›¾ç‰‡çš„, è‡ªåŠ¨ä¸Šä¼ å›¾ç‰‡åˆ° CSDN, æŒºå¥½ç”¨çš„å“ˆå“ˆ.\né€šç”¨æˆªå›¾: PrtSc ä»¥åŠä¸ä¹‹ç›¸å…³çš„æˆªå›¾å¿«æ·é”®: å„ä¸ªç³»ç»Ÿ! é€šç”¨çš„æˆªå›¾å¿«æ·é”®!!! PrtSc é”®! å…¨ç§°æ˜¯ Print Screen, æŒ‰ä¸‹å®ƒçš„ä½œç”¨æ˜¯, å°†æ•´å—å±å¹•çš„å†…å®¹æˆªå–, ç„¶åå­˜å‚¨åœ¨å‰ªåˆ‡æ¿ä¸­. è¿˜æœ‰ Alt + PrtSc, å®ƒæ˜¯å°†å½“å‰çš„æ´»åŠ¨çª—å£çš„å†…å®¹æˆªå–, å­˜å‚¨åˆ°å‰ªåˆ‡æ¿.\nä¾‹å¦‚è¿™æ ·, å°±æ˜¯æˆªå–æ•´ä¸ªå±å¹•çš„\nè¿™æ ·, å°±æ˜¯æˆªå–å½“å‰æ´»åŠ¨çª—å£çš„, å› ä¸ºæˆ‘ç°åœ¨æ­£åœ¨ä½¿ç”¨æµè§ˆå™¨, æ‰€ä»¥å°±æ˜¯æµè§ˆå™¨çš„å†…å®¹, ä¸åŒ…æ‹¬åº•éƒ¨ä»»åŠ¡æ : Windows æˆªå›¾å·¥å…·: ä¼°è®¡æ—©å°±æ²¡äººç”¨äº†, å»ºè®®è·³è¿‡. 1. SnippingTool: Windows è‡ªå¸¦çš„æˆªå›¾å·¥å…·. ä¸­æ–‡å: æˆªå›¾å·¥å…·. ç®€è¿°: Snipping Tool æ˜¯ä¸€ä¸ªå¾ˆè€çš„å·¥å…·äº†, è‡³å°‘åœ¨ XP å°±å·²ç»å­˜åœ¨, å¹¶ä¸”, è™½ç„¶åœ¨ Win10 å·²ç»æœ‰äº†æ›´å¥½çš„æˆªå›¾æ–¹å¼, ä¸è¿‡è¿™ä¸ªå·¥å…·è¿˜æ˜¯ä¿ç•™äº†ä¸‹æ¥. æ•ˆæœå›¾: ä½¿ç”¨æ–¹å¼: Windows å…¨å±€æœç´¢: è¿è¡Œ: æ”¯æŒåŠŸèƒ½: çŸ©å½¢æˆªå±: åœ¨å±å¹•ä¸Šæ‹–æ‹½å‡ºä¸€ä¸ªçŸ©å½¢, å¹¶å°†ä¸¾è¡ŒåŒ…å«çš„å†…å®¹ä¿å­˜åˆ°å‰ªåˆ‡æ¿. è‡ªç”±æˆªå±: éšä¾¿ç”»å‡ºä¸€ä¸ªå½¢çŠ¶, ç„¶åå°†å½¢çŠ¶åŒ…å«çš„å†…å®¹ä¿å­˜åˆ°å‰ªåˆ‡æ¿. çª—å£æˆªå±: é€‰æ‹©ä¸€ä¸ªçª—å£, ç„¶åå°†çª—å£çš„å†…å®¹ä¿å­˜åˆ°å‰ªåˆ‡æ¿. æˆªå±ç¼–è¾‘: æˆªå±æˆåŠŸå, ä¼šç›´æ¥è¿›å…¥ç¼–è¾‘é¡µé¢. å¹¶ä¸”è¿˜æ”¯æŒä¿å­˜ä¸º JPG, PNG, MHT æ–‡ä»¶æ ¼å¼. Win10 æˆªå›¾å¿«æ·é”®: ä¼°è®¡ä¸æ˜¯å¾ˆå¤šäººä¼šç”¨è¿™ä¸ª. 1. Win + Shift + S ç®€è¿°: æ˜¯ Windows10 æ–°å¢çš„æˆªå›¾å¿«æ·é”®, æˆªå›¾åç›´æ¥å­˜å‚¨åˆ°å‰ªåˆ‡æ¿, å¹¶ä¸”å¯ä»¥åœ¨é€šçŸ¥æ å¯¹å›¾åƒè¿›è¡Œæ›´å¤šæ“ä½œ. æ•ˆæœå›¾: æ”¯æŒåŠŸèƒ½: çŸ©å½¢æˆªå±: æ‹–æ‹½ä¸€ä¸ªçŸ©å½¢, ç„¶åæˆªå–çŸ©å½¢å†…çš„å†…å®¹ä¿å­˜åˆ°å‰ªåˆ‡æ¿. è‡ªç”±æˆªå±: è‡ªç”±é€‰æ‹©ä¸€ä¸ªåŒºåŸŸ, ç„¶åä¿å­˜åˆ°å‰ªåˆ‡æ¿. çª—å£æˆªå±: é€‰æ‹©çª—å£æˆªå±, ä¿å­˜åˆ°å‰ªåˆ‡æ¿. æˆªå–å…¨å±: ç‚¹å‡», å³æˆªå–å…¨å±å¹¶ä¿å­˜åˆ°å‰ªåˆ‡æ¿. æˆªå±ç¼–è¾‘: æˆªå±æˆåŠŸçš„é¡¹ç›®(Item), å¯ä»¥åœ¨é€šçŸ¥ä¸­æŸ¥çœ‹, ç‚¹å‡», å³è¿›å…¥å¯¹è¯¥å›¾çš„ç¼–è¾‘. QQ \u0026amp; å¾®ä¿¡: ä¸ç”¨è¯´, è‚¯å®šæœ‰äººä¸çŸ¥é“ QQ å’Œå¾®ä¿¡è¿˜æœ‰æˆªå›¾åŠŸèƒ½! 1. QQ: Ctrl + Alt + A: ç®€è¿°: QQ çš„é»˜è®¤æˆªå±å¿«æ·é”®æ˜¯ Ctrl + Alt + A, æ¸©é¦¨æç¤º, QQ çš„æˆªå±åŠŸèƒ½éå¸¸å¼ºå¤§, æ˜¯å‰é¢ä¸¤ä¸ªæ–¹å¼æ— æ³•æ¯”æ‹Ÿçš„. æ•ˆæœå›¾: æŒ‰ Ctrl + Alt + A è¿›å…¥æˆªå›¾, æ”¯æŒåŠŸèƒ½: çŸ©å½¢æˆªå±: æ­£å¦‚åˆšåˆšæ¼”ç¤ºçš„, ç›´æ¥æ‹–æ‹½å³å¯æˆªå–çŸ©å½¢åŒºåŸŸ, å¹¶å­˜å‚¨åˆ°å‰ªåˆ‡æ¿. ç½®é¡¶è´´çº¸: æˆªå–ä¸€ä¸ªåŒºåŸŸå, å…ˆä¸è¦ç¡®è®¤, ç‚¹å‡»ä¸€ä¸ªé’‰å­å›¾æ ‡, å³å¯å°†æˆªå–çš„åŒºåŸŸç½®é¡¶æ‚¬æµ®, å¹¶ä¸”å¯æ‹–æ‹½. åŒå‡»å¯å…³é—­. æ–‡æœ¬è¯†åˆ«ä¸ç¿»è¯‘åŠŸèƒ½: é€‰æ‹©å®Œä¸€ä¸ªåŒºåŸŸå, è¿˜æ”¯æŒæ–‡æœ¬è¯†åˆ«å’Œç¿»è¯‘åŠŸèƒ½.\nç¼–è¾‘åŠŸèƒ½: é€‰æ‹©å®ŒçŸ©å½¢åŒºåŸŸ, è¿›å…¥ç¼–è¾‘æ¨¡å¼, ä¸‹é¢æœ‰éå¸¸å¤šçš„é€‰é¡¹å¯ä¾›ä½¿ç”¨. ä»å·¦åˆ°å³, ä¾æ¬¡æ˜¯è¿™äº›: 2. å¾®ä¿¡: Alt + A: ç®€è¿°: å¾®ä¿¡çš„é»˜è®¤æˆªå±é”®æ˜¯ Alt + A, ä¸è¿‡å¾®ä¿¡çš„æˆªå±ç›¸æ¯” QQ æ¥è®², å°±å¼±å¾ˆå¤šäº†, æ²¡å¤šå°‘åŠŸèƒ½, æ²¡æœ‰ç½®é¡¶è´´çº¸åŠŸèƒ½. æ•ˆæœå›¾: æ”¯æŒåŠŸèƒ½: çŸ©å½¢æˆªå±: è·Ÿ QQ ä¸€æ¨¡ä¸€æ ·, å°±ä¸æ”¾å›¾äº† ç¼–è¾‘åŠŸèƒ½: å¼±åŒ–ç‰ˆçš„ QQ æˆªå›¾ç¼–è¾‘, åªæœ‰å½¢çŠ¶, ç®­å¤´, é©¬èµ›å…‹, æ–‡æœ¬è¯†åˆ«, åˆ«çš„éƒ½æ²¡æœ‰. ç¬¬ä¸‰æ–¹å·¥å…·: å¥½äº†! é‡ç‚¹æ¥äº†! QQ çš„æˆªå›¾æ˜¯å¼ºå¤§äº†, ä½†æ˜¯æœ‰çš„æ—¶å€™ä½ ä¸è”ç½‘, æ²¡åŠæ³•ç™»é™† QQ, å¯ä¸æ˜¯å°±ä¸èƒ½ç”¨ QQ çš„æˆªå›¾äº†?\n1. Snipaste: ç®€è¿°: å®˜æ–¹ç½‘ç«™: www.snipaste.com ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æˆªå›¾å·¥å…·! å®Œå…¨èƒ½å¤Ÿæ›¿ä»£ QQ, ç›¸æ¯”è¾ƒ QQ, å®ƒæ²¡æœ‰æ–‡æœ¬è¯†åˆ«å’Œé•¿æˆªå›¾åŠŸèƒ½. ä½†æ˜¯å®ƒå¯ä»¥ä½œä¸ºä¸€ä¸ªéå¸¸å¥½ç”¨çš„å–è‰²å™¨(è™½ç„¶ QQ ä¹Ÿå½³äº, ä½†æ˜¯ Snipaste æ›´å¥½ç”¨) åœ¨å„ä¸ªå·¥å…·ä¸Š, æ¯” QQ è¦ç»†è‡´æ›´å¤š! ä¾‹å¦‚ Snipaste çš„æœ‰æ¨¡ç³Šå·¥å…·å’Œé©¬èµ›å…‹å·¥å…·è¿™ä¸¤ç§, å¹¶ä¸”å¯ä»¥è°ƒæ•´æ¨¡ç³Šç¨‹åº¦; çŸ©å½¢å·¥å…·å’Œæ¤­åœ†å·¥å…·ä¸­, Snipaste å¯ä»¥è¿˜æ”¾ç½®å®å¿ƒçš„å½¢çŠ¶, è€Œ QQ ä»…ä»…æ”¯æŒå•çº¿è¾¹æ¡†çš„å½¢çŠ¶. æ”¯æŒæˆªå›¾æ—¶å¾®è°ƒ, é€šè¿‡ WSAD æŒ‰é”®, å¯ä»¥ä¸€ä¸ªåƒç´ ä¸€ä¸ªåƒç´ çš„ç§»åŠ¨é¼ æ ‡å…‰æ ‡, é€šè¿‡ç®­å¤´, å¯ä»¥ç§»åŠ¨æ•´ä¸ªé€‰æ¡†çš„ä½ç½®, ä¹Ÿæ˜¯é€åƒç´ . æ›´æ–¹ä¾¿çš„å¿«æ·é”®, Snipaste æ”¯æŒé€šè¿‡å¿«æ·é”®æ¥å°†æœ€åä¸€ä¸ªæˆªå–çš„å›¾ç‰‡ä½œä¸ºç½®é¡¶è´´çº¸æ”¾ç½®å‡ºæ¥, è¿™æ˜¯ QQ æ‰€ä¸æ”¯æŒçš„. æ›´å‰å®³çš„è´´çº¸, å¦‚æœä½ å¤åˆ¶äº†ä¸€ä¸ªåå…­è¿›åˆ¶é¢œè‰²ä»£ç , RGBé¢œè‰²ç , ä¸€æ®µæ–‡æœ¬, æˆ–è€…æ˜¯ Excel è¡¨æ ¼ä¸­çš„å†…å®¹, è¿™æ—¶ä½ å°†å®ƒè´´åœ¨å±å¹•ä¸Š, Snipaste ä¼šä¸ºä½ å±•ç¤ºæ‰€æœ‰ä½ éœ€è¦çš„ä¿¡æ¯. æ”¯æŒå¤šç§è¯­è¨€, è‡ªåŠ¨é€‚é…ç³»ç»ŸåŒºåŸŸè®¾ç½®. æ•ˆæœå›¾: æ”¯æŒåŠŸèƒ½: çŸ©å½¢æˆªå±: Snipaste çš„é»˜è®¤æˆªå±å¿«æ·é”®æ˜¯ F1, ä½¿ç”¨æ–¹å¼ä¸Šä¸ QQ çš„æˆªå±æ²¡æœ‰å¤ªå¤§çš„å·®å¼‚. ç½®é¡¶è´´çº¸: å½“ä½ æˆªå±å®Œæ¯•å, å¯ä»¥ç›´æ¥é€šè¿‡ F3 æ¥å°†è¿™ä¸ªå›¾åƒè´´åœ¨å±å¹•ä¸Š, åŒæ ·å¯ç§»åŠ¨, å¹¶ä¸”è¿˜æ”¯æŒé¼ æ ‡æ»šè½®è°ƒæ•´å¤§å°. åŒå‡»å¯å…³é—­. æ›´ç»†è‡´çš„è´´çº¸: å¯¹äºæ–‡æœ¬, é¢œè‰²å€¼, è¡¨æ ¼å†…å®¹, è´´çº¸éƒ½æœ‰è¿›è¡Œå¤„ç†. éå¸¸å®Œç¾çš„æ ¼å¼åŒ–! æ˜¾ç¤º/éšè— æ‰€æœ‰è´´çº¸: Snipaste è¿˜æ”¯æŒä¸´æ—¶éšè—æ‰€æœ‰çš„è´´çº¸, ç¨åå¯å†æ¬¡æ˜¾ç¤ºå‡ºæ¥. å¿«æ·é”®: Shift + F3 2. ShareX: ç®€è¿°: å¥½äº†å¥½äº†! å¤§ä½¬è¦æ¥äº†! ShareX å¯è°“æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„ç¨‹åº, æˆªå›¾, å–è‰²å™¨, å±å¹•å–è‰²å™¨, å±å¹•å½•åˆ¶, å±å¹•å½•åˆ¶(GIF), å›¾åƒä¸Šä¼ (åˆ°å›¾åºŠ), è§†é¢‘è½¬æ ¼å¼, ç¨‹åºå›¾: æ”¯æŒçš„åŠŸèƒ½: å†™è¿™ä¹ˆå¤šçœŸçš„æ˜¯ç´¯æ­»æˆ‘äº†\u0026hellip; åæ­£çœ‹è¿™ä¸ªç•Œé¢å›¾ä¹Ÿå·®ä¸å¤šç†è§£äº†, æˆ‘å°±æˆªå‡ ä¸ªå›¾æ”¾å‡ºæ¥å¥½äº†. ä½†æ˜¯! ShareX æ˜¯ä¸€ä¸ªè¶…çº§å‰å®³çš„è½¯ä»¶å•Šå•Šå•Šå•Š! ä¸€å®šè¦è¯•è¯•!\næˆªå›¾ å·¥å…·: å¿«æ·é”®ç¼–è¾‘: æœ€åè¯´ä¸¤å¥: è´´çº¸åŠŸèƒ½æ˜¯çœŸçš„å¥½ç”¨å•Šæ·¦! æˆ‘å†™æ–‡ç« çš„æ—¶å€™, ç›´æ¥æŠŠ ShareX çš„ç¨‹åºç•Œé¢æˆªå–, ç„¶åè´´åœ¨å±å¹•ä¸Š, å°±å¯ä»¥æ…¢æ…¢ä¸€ä¸ªä¸ªä»‹ç»äº†! æ€»çš„æ¥è¯´, å‚¨äº†æœ€å¼€å§‹é‚£ä¸ªè€å·¥å…·å’ŒWin10æˆªå±å¿«æ·é”®, æˆ‘è¿˜æ˜¯éƒ½æŒºæ¨èçš„! å¹³å¸¸ä½¿ç”¨æˆ‘ä¸€ç›´ç”¨çš„ Snipaste, æˆªå›¾å’Œè´´çº¸æœ€å¸¸ç”¨, ç„¶åå½•åˆ¶ GIF çš„æ—¶å€™, å°±ä½¿ç”¨ ShareX. æ¯•ç«Ÿå½•åˆ¶ GIF æ— éåœ¨ QQ é‡Œå‘ä¸€äº›å¥‡å¦™å†…å®¹, è€Œæ²¡æœ‰å¤šå°‘äººæ„¿æ„å»ç”¨ MP4 æ ¼å¼. å› ä¸º GIF è‡ªåŠ¨æ’­æ”¾çš„. (å°½ç®¡å¤§å¤šæ•°æƒ…å†µ, MP4æ¯”GIFå°, è´¨é‡åˆå¥½) ç„¶å!!! æˆ‘å†å¹ä¸€æ³¢ ShareX! ShareX çš„ GIF å½•åˆ¶æ˜¯çœŸçš„å‰å®³! æˆ‘å®Œå…¨ä¸çŸ¥é“å®ƒæ˜¯å¦‚ä½•å‹ç¼©çš„å›¾ç‰‡å¤§å°. è´¨é‡éå¸¸æ£’! è€Œä¸” ShareX çš„ MP4 å½•åˆ¶, å¤§å°å‹ç¼©çš„æ˜¯çœŸçš„å½³äº! Data Rate ä»…æœ‰ 397 kbps çš„æƒ…å†µä¸‹, å±…ç„¶å®Œå…¨èƒ½å¤Ÿä¿è¯è´¨é‡! (å¬æœ‹å‹è¯´æ˜¯å‹ç¼©ç®—æ³•, è®¡ç®—è¿åŠ¨è½¨è¿¹ä»€ä¹ˆçš„, ä¼°è®¡ä»…åœ¨å±å¹•å•è°ƒå†…å®¹å½•åˆ¶çš„æƒ…å†µä¸‹æ•ˆæœå¥½.) ","date":"2021-02-27T21:40:17+08:00","permalink":"https://slimenull.com/p/20210227214017/","title":"[å®‰åˆ©] ä»€ä¹ˆé¬¼? å±…ç„¶è¿˜æœ‰äººä¸ä¼šæˆªå›¾??? è¿˜åœ¨ç”¨æ‰‹æœºå¯¹ç€ç”µè„‘å±å¹•æ‹ç…§????? å„ç§æˆªå›¾æ–¹å¼å¤§é›†ç»“!"},{"content":" çœ‹åˆ°ä¸Šé¢é‚£å¹…å›¾äº†å—? æ”¾å¤§, æ”¾å¤§, çœ‹åˆ°äº†å—? è¯´çš„å°±æ˜¯ä½  .\næ·¦! 1. æ­£å¸¸çš„: ç®€å•çš„, å°±æ˜¯æœ€å¼€å§‹é‚£å¼ å›¾ç‰‡äº†, çœ‹èµ·æ¥è¿˜å½³äº, å¯¹å§\nå¥½å§, è¿™ç§ä¸œè¥¿, å®ç°èµ·æ¥ä¹Ÿä¸éš¾, æ— éæ˜¯åœ¨å›¾ç‰‡ä¸­å†™å­—. å†™å­—ä½ æ€»ä¼šå§? æˆ‘ç›´æ¥è´´ Graphics å…ƒæ•°æ®:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 namespace System.Drawing { // // æ‘˜è¦: // å°è£…ä¸€ä¸ª GDI+ ç»˜å›¾å›¾é¢ã€‚ æ­¤ç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚ public sealed class Graphics : MarshalByRefObject, IDeviceContext, IDisposable { // // æ‘˜è¦: // åœ¨æŒ‡å®šä½ç½®å¹¶ä¸”ç”¨æŒ‡å®šçš„ System.Drawing.Brush å’Œ System.Drawing.Font å¯¹è±¡ç»˜åˆ¶æŒ‡å®šçš„æ–‡æœ¬å­—ç¬¦ä¸²ã€‚ // // å‚æ•°: // s: // è¦ç»˜åˆ¶çš„å­—ç¬¦ä¸²ã€‚ // // font: // System.Drawing.Fontï¼Œå®ƒå®šä¹‰å­—ç¬¦ä¸²çš„æ–‡æœ¬æ ¼å¼ã€‚ // // brush: // System.Drawing.Brushï¼Œå®ƒç¡®å®šæ‰€ç»˜åˆ¶æ–‡æœ¬çš„é¢œè‰²å’Œçº¹ç†ã€‚ // // point: // System.Drawing.PointF ç»“æ„ï¼Œå®ƒæŒ‡å®šæ‰€ç»˜åˆ¶æ–‡æœ¬çš„å·¦ä¸Šè§’ã€‚ // // å¼‚å¸¸: // T:System.ArgumentNullException: // brush ä¸º nullã€‚ æˆ– - s ä¸º nullã€‚ public void DrawString(string s, Font font, Brush brush, PointF point); } } æ‡‚äº†å§? å½“ç„¶æœ¬ç¨‹åºå¯æ²¡é‚£ä¹ˆç®€å•å˜¿å˜¿! æˆ‘å¯æ˜¯è¿˜å®ç°äº†ç±»ä¼¼äºè’™ç‰ˆçš„ä¸œè¥¿! (å¥½å§ä¹Ÿä¸æ˜¯å¾ˆéš¾)\n2. éš¾ä¸€ç‚¹çš„: çœ‹å‡ºæœ‰ä»€ä¹ˆåŒºåˆ«æ²¡? æ²¡é”™! ä½ å‘ç°, èƒŒæ™¯å˜æˆå•è‰², è€Œå­—å˜æˆå½©è‰²çš„äº†!!! å½“ç„¶ PS ç”¨å‰ªåˆ‡è’™ç‰ˆå¾ˆå®¹æ˜“å®ç°. é‚£ä¹ˆ, ç”¨ C# è¯¥å¦‚ä½•å®ç°å‘¢?\né¦–å…ˆåˆ›å»ºä¸€ä¸ªä½å›¾, ä½œä¸ºæˆ‘ä»¬çš„ä¸´æ—¶ç©ºé—´, èƒŒæ™¯æ˜¯é»‘è‰², ç„¶åç”¨ç™½è‰²çš„ç¬”åœ¨ä¸Šé¢å†™å­—. å“¦è±, è¿™ä¸å°±æ˜¯ä¸€å¼ è’™ç‰ˆå—?\næˆ‘ä»¬çš„æºå›¾åƒè·Ÿè¿™ä¸ªè’™ç‰ˆå›¾æ˜¯ä¸€æ ·å¤§å°çš„, è¾“å‡ºå›¾åƒå½“ç„¶ä¹ŸåŒæ ·å¤§å°, ç„¶åéå†åŸå›¾åƒçš„åƒç´ , å¹¶ä¸”åˆ¤æ–­è’™ç‰ˆå›¾åƒçš„é¢œè‰², å¦‚æœè’™ç‰ˆå›¾åƒçš„é¢œè‰²æ˜¯ç™½è‰², åˆ™æŠŠè¿™ä¸ªåƒç´ æ‹·è´åˆ°è¾“å‡ºå›¾åƒä¸­. äºæ˜¯äºæ˜¯! å°±å®ç°äº†ç”»å½©è‰²çš„å­—! (å¥½å§çš„ç¡®æœ‰ç‚¹æŠ•æœºå–å·§çš„æ„å‘³.)\n3. ç®€å•ç‚¹çš„: å“ˆå“ˆå“ˆ, æ¯ä¸€ä¸ªå­—, éƒ½ç›¸å½“äºåŸå›¾çš„ä¸€ä¸ªåƒç´ , å¯ä¸å¯ä»¥è¯´æ˜¯å˜ç›¸çš„å­—ç¬¦ç”»?\nå®Œæ•´çš„å†…å®¹ä»‹ç»: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 Null.CharImg: å­—ç¬¦å›¾åƒæ··åˆå·¥å…· Null.CharImg [ -{CharWidth | CWidth} å­—ç¬¦å å®½ ] [ -{CharHeight | CHeight} å­—ç¬¦å é«˜ ] [ -{MaxWidth | MWidth} æœ€å¤§å®½åº¦ ] [ -{MaxHeight | MHeight} æœ€å¤§é«˜åº¦ ] [ -{FontSize | FSize} å­—ä½“å¤§å° ] [ -{String | Str} å­—ç¬¦ä¸²å†…å®¹ ] [ -{CorrectRate | CRate} é¢œè‰²çŸ«æ­£ç¨‹åº¦] [ -{BackgroundColor | BgColor} èƒŒæ™¯é¢œè‰² ] [ -{FontFamily | Font} å­—ä½“ ] [ /{FontBold | Bold} ] [ /{Opposite | Oppo} ] [ /{AutoCorrect | Correct}] [ /{AutoBackground | AutoBg}] [ /{HighDefinition | HD}] -{Output | Out} è¾“å‡ºè·¯å¾„ *æºæ–‡ä»¶ Null.CharImg /{Help | H | ?} æ˜¾ç¤ºæœ¬å¸®åŠ©å†…å®¹ å…¶ä¸­å‚æ•°çš„æ¦‚è¿°å¦‚ä¸‹: å­—ç¬¦å å®½, æŒ‡å›¾åƒä¸­, ä¸€ä¸ªå­—ç¬¦ç‹¬å çš„å®½åº¦, é»˜è®¤8 å­—ç¬¦å é«˜, å­—ç¬¦ç‹¬å çš„é«˜åº¦, ä¸å­—ç¬¦å å®½å†³å®šäº†å­—ç¬¦çš„é—´è·, é»˜è®¤16 æœ€å¤§å®½åº¦, æŒ‡è¾“å‡ºå›¾åƒä¸­, æ¨ªå‘æœ€å¤šå«å¤šå°‘ä¸ªå­—ç¬¦ æœ€å¤§é«˜åº¦, æŒ‡è¾“å‡ºå›¾åƒä¸­, çºµå‘æœ€å¤šå«å¤šå°‘ä¸ªå­—ç¬¦ å­—ä½“å¤§å°, æŒ‡å­—ä½“å¤§å°, å•ä½æ˜¯åƒç´ , é»˜è®¤16 å­—ç¬¦ä¸²å†…å®¹, è¦æ˜¾ç¤ºåœ¨å›¾åƒä¸­çš„å­—ç¬¦, å°†é€ä¸ªæ˜¾ç¤º é¢œè‰²çŸ«æ­£ç¨‹åº¦, æŒ‡å®šäº†è‡ªåŠ¨é¢œè‰²çŸ«æ­£çš„ç¨‹åº¦, å€¼åŸŸæ˜¯0~100, é»˜è®¤100 èƒŒæ™¯é¢œè‰², è¡¨ç¤ºå›¾åƒèƒŒæ™¯é¢œè‰², ä½¿ç”¨åå…­è¿›åˆ¶ä»£ç è¡¨ç¤º è¾“å‡ºè·¯å¾„, è¡¨ç¤ºè¾“å‡ºå›¾åƒçš„ä¿å­˜è·¯å¾„ å­—ä½“, è¡¨ç¤ºå›¾åƒä¸­å­—ç¬¦æ‰€ä½¿ç”¨çš„å­—ä½“, é»˜è®¤æ˜¯Sans Serif FontBold, ç²—ä½“, è¡¨ç¤ºæ˜¯å¦ä½¿ç”¨ç²—ä½“ Opposite, ä½¿èƒŒæ™¯ä¸å‰æ™¯é¢œè‰²åè½¬ AutoCorrect, è‡ªåŠ¨çŸ«æ­£é¢œè‰² AutoBackground, è‡ªåŠ¨åˆ¤æ–­èƒŒæ™¯è‰² HighDefinition, é«˜åˆ†è¾¨ç‡æ¨¡å¼ å…³äºè‡ªåŠ¨çŸ«æ­£é¢œè‰²: è‡ªåŠ¨çŸ«æ­£é¢œè‰²æ—¨åœ¨å°è¯•è°ƒèŠ‚å‰æ™¯è‰²çš„è‰²å½©, ä»¥åšåˆ°å‰æ™¯ä¸èƒŒæ™¯ç»“åˆæ—¶, é¢œè‰² è¶‹è¿‘äºåŸå›¾, å¦‚æœèƒŒæ™¯é¢œè‰²æŒ‡å®šäº†äº®åº¦è¾ƒé«˜çš„é¢œè‰², ä¾‹å¦‚ç™½è‰², è¿™ä¸ªåŠŸèƒ½ä¼š å¯åˆ°å¾ˆå¥½çš„ä½œç”¨, å¦‚æœä½ è®¤ä¸ºé¢œè‰²çŸ«æ­£æœ‰äº›ä¸¥é‡, å¯ä»¥ä½¿ç”¨ CorrectRate å‚æ•°æ¥æŒ‡å®šè‡ªåŠ¨è°ƒèŠ‚çš„åŠ›åº¦, å°è¯•è°ƒèŠ‚ä¸º80, ç”šè‡³æ›´ä½çš„å€¼æ¥é€‚åº”. å…³äºè‡ªåŠ¨åˆ¤æ–­èƒŒæ™¯è‰² å½“å¯åŠ¨è¯¥åŠŸèƒ½æ—¶, ç”¨æˆ·è®¾ç½®çš„é¢œè‰²ä½œåºŸ, ç¨‹åºä¼šè‡ªåŠ¨è®¡ç®—æ•´ä¸ªåŸå›¾åƒçš„å¹³å‡è‰² ä½œä¸ºè¾“å‡ºå›¾åƒçš„èƒŒæ™¯è‰² å…³äºé«˜åˆ†è¾¨ç‡æ¨¡å¼: å½“å¯ç”¨é«˜åˆ†è¾¨ç‡æ—¶, å›¾åƒä¸­çš„ä¸€ä¸ªå­—ç¬¦ä¸å†å•å•æ˜¯ä¸€ç§é¢œè‰², è€Œæ˜¯ä½¿ç”¨å½©è‰², ä»¥ä½¿è¾“å‡ºå›¾åƒæ›´èƒ½è¶‹è¿‘äºåŸå›¾çš„å½¢çŠ¶ä¸é¢œè‰², åŒæ—¶Oppositeä¹Ÿæ˜¯å—æ”¯æŒçš„ å…³äºç¨‹åº: ä½œè€…: è¯ºå°”, Null; æ“…é•¿:æ‘¸é±¼ Githubä»“åº“: https://github.com/SlimeNull/Null.CharImg å¦‚æœæœ‰å•¥æ„Ÿåˆ°è¿·æƒ‘çš„, åœ¨ä¸‹æ–¹ç•™è¨€å™¢~\n","date":"2021-02-21T23:08:37+08:00","permalink":"https://slimenull.com/p/20210221230837/","title":"[C#] å°±è®©è¿™å¼ å›¾ç‰‡æ¥æ­éœ²ä½ çš„æœ¬æ€§å§! è€ç»…å£«."},{"content":" æ¬¸å˜¿, è¿™å°±æ˜¯ç¨‹åºå›¾äº†, é€šè¿‡é¼ æ ‡æ‹–æ‹½å¯ä»¥ç§»åŠ¨, é¼ æ ‡æ»šè½®å¯ä»¥ç¼©æ”¾, å³ä¸‹è§’è¿˜å¯ä»¥é€‰æ‹©è¦ç»˜åˆ¶çš„å‡½æ•°. é¡¹ç›®ä»“åº“é“¾æ¥åœ¨æ–‡ç« æœ«å°¾\nåŸºæœ¬åŸç†: Graphics ç»˜å›¾, ä¸ç”¨æˆ‘è¯´äº†å§? å¦‚æœä½ ä¸æ˜¯å¾ˆæ‡‚, ç•™è¨€, æˆ‘ä¼šä¸“é—¨å†™ä¸€ç¯‡æ–‡ç« æ¥ä»‹ç» Graphics.\nå¸¦å…¥æ±‚å€¼, æ²¡å•¥éš¾çš„. çº¿æ˜¯ä¸€ä¸ªä¸ªç‚¹è¿èµ·æ¥çš„, ä¹Ÿå°±æ˜¯: ç„¶å, æ ‡å°º, ä¹Ÿæ˜¯ä¸€ä¸ªä¸ªçº¿å‘—, é‚£ä¸ªæ•°å­—çš„è¯, å°±æ˜¯è¿™ä¸ª: å¡«å……å°ä¸‰è§’çš„è¯, å°±æ˜¯è¿™ä¸ª: å…³äºä¼˜åŒ–: é¦–å…ˆæ˜¯è®¡ç®—é—®é¢˜, ä¿è¯ä»…ä»…è®¡ç®—éœ€è¦æ˜¾ç¤ºçš„åŒºåŸŸ, åŒºåŸŸå¤–çš„åæ ‡ä¸äºˆä»¥è®¡ç®—, ä»¥èŠ‚çœèµ„æº.\nç„¶åæ˜¯é—ªå±é—®é¢˜, ä½¿ç”¨BufferedGraphics, æ—¢èƒ½è§£å†³é—ªå±é—®é¢˜, åˆä¸ä¼šåƒBitmapç¼“å†²é‚£æ ·é—ªå±.\nå…³äºç»˜å›¾é—ªå±é—®é¢˜, ç½‘ä¸Šæœ‰å¾ˆå¤šè§£å†³æ–¹æ¡ˆ, æœ€æ ¸å¿ƒçš„, æ— éæ˜¯åŒç¼“å†², ä¹Ÿå°±æ˜¯å…ˆå°†å›¾ç»˜åˆ¶åˆ°ç¼“å†²åŒº, å†å°†ç¼“å†²åŒºçš„å†…å®¹ç»˜åˆ¶åˆ°å±å¹•ä¸Š. å®ç°åŒç¼“å†²æœ‰ä¸¤ç§æ–¹å¼, ä¸€å°±æ˜¯é€šè¿‡åˆ›å»ºä¸€ä¸ªBitmap, å°†å›¾ç”»åˆ°Bitmapä¸Š, ç„¶åç”»å®Œä¹‹å, å†å°†Bitmapç”»åˆ°å±å¹•ä¸Š(Graphics.DrawImage()), ç¼ºç‚¹æ˜¯ä¼šé€ æˆæ’•è£‚é—®é¢˜. ç¬¬äºŒç§æ–¹å¼æ˜¯ BufferedGraphics, è¿™æ˜¯ä¸€ä¸ªæ¯”Bitmapæ›´å¥½ç”¨çš„ä¸œè¥¿, ä¸ä¼šé€ æˆæ’•è£‚.\nå°è£…ä¸€ä¸‹: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 using System; using System.Collections.Generic; using System.Drawing; using System.Linq; namespace Null.FuncDraw { public static class FuncDraw { /// \u0026lt;summary\u0026gt; /// æ ¹æ®æ•°å­—åæ ‡è·å–åƒç´ ä½ç½® /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;xCoord\u0026#34;\u0026gt;xåæ ‡\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;yCoord\u0026#34;\u0026gt;yåæ ‡\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;xOffset\u0026#34;\u0026gt;åŸç‚¹ä½ç½®\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;yOffset\u0026#34;\u0026gt;åŸç‚¹ä½ç½®\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;scale\u0026#34;\u0026gt;ç¼©æ”¾\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;åƒç´ ä½ç½®\u0026lt;/returns\u0026gt; public static Point GetPointFromCoords(double xCoord, double yCoord, int xOffset, int yOffset, double scale) { return new Point((int)(xCoord * scale + xOffset), (int)(-yCoord * scale + yOffset)); } /// \u0026lt;summary\u0026gt; /// /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;coords\u0026#34;\u0026gt;æ•°å­—åæ ‡\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;offset\u0026#34;\u0026gt;åŸç‚¹ä½ç½®\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;scale\u0026#34;\u0026gt;ç¼©æ”¾\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;åƒç´ ä½ç½®\u0026lt;/returns\u0026gt; public static Point GetPointFromCoords(PointF coords, Point offset, double scale) { return new Point((int)(coords.X * scale + offset.X), (int)(-coords.Y * scale + offset.Y)); } /// \u0026lt;summary\u0026gt; /// æ ¹æ®åƒç´ ä½ç½®è·å–æ•°å­—åæ ‡ /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;x\u0026#34;\u0026gt;æ°´å¹³ä½ç½®\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;y\u0026#34;\u0026gt;ç«–ç›´ä½ç½®\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;xOffset\u0026#34;\u0026gt;åŸç‚¹ä½ç½®\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;yOffset\u0026#34;\u0026gt;åŸç‚¹ä½ç½®\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;scale\u0026#34;\u0026gt;ç¼©æ”¾\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;xCoord\u0026#34;\u0026gt;è¾“å‡º: æ•°å­—Xåæ ‡\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;yCoord\u0026#34;\u0026gt;è¾“å‡º: æ•°å­—Yåæ ‡\u0026lt;/param\u0026gt; public static void GetCoordsFromPoint(int x, int y, int xOffset, int yOffset, double scale, out double xCoord, out double yCoord) { xCoord = (x - xOffset) / scale; yCoord = -((y - yOffset) / scale); return; } /// \u0026lt;summary\u0026gt; /// æ ¹æ®åƒç´ é•¿åº¦è¿”å›æ•°å­— /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;length\u0026#34;\u0026gt;åƒç´ é•¿åº¦\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;scale\u0026#34;\u0026gt;ç¼©æ”¾\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;æ•°å­—\u0026lt;/returns\u0026gt; public static double GetNumberFromPixel(int length, double scale) { return length / scale; } /// \u0026lt;summary\u0026gt; /// æ ¹æ®æ•°å­—æ¥è·å–å®ƒè·ç¦»åŸç‚¹çš„åƒç´ é•¿åº¦ /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;number\u0026#34;\u0026gt;æ•°å­—\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;scale\u0026#34;\u0026gt;ç¼©æ”¾\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;åƒç´ é•¿åº¦\u0026lt;/returns\u0026gt; public static double GetPixelFromNumber(int number, double scale) { return number * scale; } /// \u0026lt;summary\u0026gt; /// ç”»å‡½æ•°å›¾åƒ /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;func\u0026#34;\u0026gt;è¦ç”»çš„å‡½æ•°\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;inputs\u0026#34;\u0026gt;Xçš„å–å€¼\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;graphics\u0026#34;\u0026gt;ç»˜å›¾Graphics\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;pen\u0026#34;\u0026gt;ç”»çº¿æ‰€ç”¨çš„Pen\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;drawArea\u0026#34;\u0026gt;ç”»å‡½æ•°çš„åŒºåŸŸ\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;xOffset\u0026#34;\u0026gt;åŸç‚¹çš„ä½ç½®\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;yOffset\u0026#34;\u0026gt;åŸç‚¹çš„ä½ç½®\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;scale\u0026#34;\u0026gt;ç¼©æ”¾å‚æ•°\u0026lt;/param\u0026gt; public static void DrawFunc(Func\u0026lt;double, double\u0026gt; func, IEnumerable\u0026lt;double\u0026gt; inputs, Graphics graphics, Pen pen, Rectangle drawArea, int xOffset, int yOffset, double scale) { double[] nums = inputs.ToArray(); Point[] coords = new Point[nums.Length]; int drawAreaLeft = drawArea.X, drawAreaRight = drawAreaLeft + drawArea.Width, drawAreaTop = drawArea.Y, drawAreaBottom = drawAreaTop + drawArea.Height; double y; for (int i = 0, len = nums.Length; i \u0026lt; len; i++) // æœ€è¿‘åˆšçŸ¥é“è¦å°‘ç”¨å±æ€§, æ¯•ç«Ÿå±æ€§çš„å®è´¨æ˜¯å‡½æ•°, å‡½æ•°è°ƒç”¨éœ€è¦åˆ†é…æ ˆç©ºé—´, è€Œä¸”ä¼¼ä¹è¿˜æ¶‰åŠåˆ°è£…ç®±æ‹†ç®±, æ‰€ä»¥è¿™æ ·æ•ˆç‡é«˜ä¸€äº› { y = func.Invoke(nums[i]); coords[i] = GetPointFromCoords(nums[i], y, xOffset, yOffset, scale); } bool point1xIn1, point1xIn2, point1yIn1, point1yIn2, point2xIn1, point2xIn2, point2yIn1, point2yIn2; for (int i = 1, len = nums.Length; i \u0026lt; len; i++) { Point point1 = coords[i - 1]; Point point2 = coords[i]; point1xIn1 = point1.X \u0026gt;= drawAreaLeft; point1xIn2 = point1.X \u0026lt;= drawAreaRight; point1yIn1 = point1.Y \u0026gt;= drawAreaTop; point1yIn2 = point1.Y \u0026lt;= drawAreaBottom; point2xIn1 = point2.X \u0026gt;= drawAreaLeft; point2xIn2 = point2.X \u0026lt;= drawAreaRight; point2yIn1 = point2.Y \u0026gt;= drawAreaTop; point2yIn2 = point2.Y \u0026lt;= drawAreaBottom; if ((!(point1xIn1 \u0026amp;\u0026amp; point2xIn1)) || (!(point1xIn2 \u0026amp;\u0026amp; point2xIn2)) || (!(point1yIn1 \u0026amp;\u0026amp; point2yIn1)) || (!(point1yIn2 \u0026amp;\u0026amp; point2yIn2))) continue; if (!point1xIn1) point1 = new Point(drawAreaLeft, (int)(point1.Y + (point2.Y - point1.Y) * ((double)drawAreaLeft - point1.X) / (point2.X - point1.X))); // è¿™é‡Œæ˜¯æœ‰ä¸€äº›å¥‡å¦™ä¼˜åŒ–çš„, ä¸è¦åˆ å». å¦åˆ™å°†å¯¼è‡´æŸäº›å‡½æ•°æ— æ³•ç»˜åˆ¶. else if (!point2xIn1) point2 = new Point(drawAreaLeft, (int)(point2.Y + (point1.Y - point2.Y) * ((double)drawAreaLeft - point2.X) / (point1.X - point2.X))); if (!point1xIn2) point1 = new Point(drawAreaRight, (int)(point2.Y + (point1.Y - point2.Y) * ((double)drawAreaRight - point2.X) / (point1.X - point2.X))); else if (!point2xIn2) point2 = new Point(drawAreaRight, (int)(point1.Y + (point2.Y - point1.Y) * ((double)drawAreaRight - point1.X) / (point2.X - point1.X))); if (!point1yIn1) point1 = new Point((int)(point1.X + (point2.X - point1.X) * ((double)drawAreaTop - point1.Y) / (point2.Y - point1.Y)), drawAreaTop); else if (!point2yIn1) point2 = new Point((int)(point2.X + (point1.X - point2.X) * ((double)drawAreaTop - point2.Y) / (point1.Y - point2.Y)), drawAreaTop); if (!point1yIn2) point1 = new Point((int)(point2.X + (point1.X - point2.X) * ((double)drawAreaBottom - point2.Y) / (point1.Y - point2.Y)), drawAreaBottom); else if (!point2yIn2) point2 = new Point((int)(point1.X + (point2.X - point1.X) * ((double)drawAreaBottom - point1.Y) / (point2.Y - point1.Y)), drawAreaBottom); graphics.DrawLine(pen, point1, point2); } } /// \u0026lt;summary\u0026gt; /// ç”»ä¸€ä¸ªåæ ‡è½´ /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;xNumbers\u0026#34;\u0026gt;xè½´è¦ç”»çš„æ•°\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;yNumbers\u0026#34;\u0026gt;yè½´è¦ç”»çš„æ•°\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;graphics\u0026#34;\u0026gt;ç»˜å›¾Graphics\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;brush\u0026#34;\u0026gt;å¡«å……åæ ‡è½´ä¸‰è§’æ‰€ä½¿ç”¨çš„Brush\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;pen\u0026#34;\u0026gt;ç”»åæ ‡è½´æ‰€ä½¿ç”¨çš„Pen\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;font\u0026#34;\u0026gt;ç”»åæ ‡æ•°å­—æ‰€ä½¿ç”¨çš„Font\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;drawArea\u0026#34;\u0026gt;ç”»åæ ‡è½´çš„åŒºåŸŸ\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;xOffset\u0026#34;\u0026gt;åŸç‚¹çš„ä½ç½®\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;yOffset\u0026#34;\u0026gt;è¿œç‚¹çš„ä½ç½®\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;barLength\u0026#34;\u0026gt;åæ ‡è½´ä¸Šå°ç«–çº¿çš„é•¿åº¦\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;scale\u0026#34;\u0026gt;ç¼©æ”¾å‚æ•°\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;text\u0026#34;\u0026gt;æ˜¯å¦ç»˜å‡ºæ•°å­—\u0026lt;/param\u0026gt; public static void DrawShaft(IEnumerable\u0026lt;double\u0026gt; xNumbers, IEnumerable\u0026lt;double\u0026gt; yNumbers, Graphics graphics, Brush brush, Pen pen, Font font, Rectangle drawArea, int xOffset, int yOffset, int barLength, double scale, bool text) { Action\u0026lt;Point, double\u0026gt; drawText; if (text) drawText = (point, num) =\u0026gt; graphics.DrawString(num.ToString(\u0026#34;F2\u0026#34;), font, brush, point); // ä½¿ç”¨å§”æ‰˜, é‚£ä¹ˆæ¥ä¸‹æ¥å°±ä¸éœ€è¦è¿›è¡Œå¤šä½™çš„å¯¹textçš„åˆ¤æ–­, è€Œç›´æ¥Invokeå°±å½³äº else drawText = (point, num) =\u0026gt; { }; Point yTop = new Point(xOffset, drawArea.Y), yBottom = new Point(xOffset, drawArea.Y + drawArea.Height), // ç¡®è®¤è½´çš„ä½ç½® xLeft = new Point(drawArea.X, yOffset), xRight = new Point(drawArea.X + drawArea.Width, yOffset); graphics.DrawLine(pen, yTop, yBottom); // ç”»è½´ graphics.DrawLine(pen, xLeft, xRight); int triangleHeight = (int)(Math.Tan(Math.PI / 3) * barLength); // åæ ‡è½´æœ«ç«¯å°ä¸‰è§’çš„é«˜åº¦ Point[] triangle1 = new Point[] { yTop, new Point(yTop.X - barLength, yTop.Y + triangleHeight), new Point(yTop.X + barLength, yTop.Y + triangleHeight) }, triangle2 = new Point[] { xRight, new Point(xRight.X - triangleHeight, xRight.Y + barLength), new Point(xRight.X - triangleHeight, xRight.Y - barLength) }; graphics.FillPolygon(brush, triangle1); // ç”»ä¸‰è§’ graphics.FillPolygon(brush, triangle2); foreach (double x in xNumbers) { Point numBase = GetPointFromCoords(x, 0, xOffset, yOffset, scale); Point numEnd = new Point(numBase.X, numBase.Y - barLength); graphics.DrawLine(pen, numBase, numEnd); // ç”»xè½´æ•° drawText(numBase, x); } foreach (double y in yNumbers) { Point numBase = GetPointFromCoords(0, y, xOffset, yOffset, scale); Point numEnd = new Point(numBase.X + barLength, numBase.Y); graphics.DrawLine(pen, numBase, numEnd); // ç”»yè½´æ•° drawText(numBase, y); } } } } æ³¨æ„äº‹é¡¹: Graphics åœ¨ç»˜åˆ¶æŸäº›è¶…çº§è¿œçš„ä¸œè¥¿æ—¶, ä¾‹å¦‚è¿™ä¸ªåæ ‡æ—¶ (2147483647,2147483647), æ€»ä¹‹å°±æ˜¯éå¸¸å¤§, é‚£å¯èƒ½ä¼šä¸èƒ½ç»˜åˆ¶, æŠ¥ Overflow å¼‚å¸¸ (å·²è§£å†³)\nè¿˜æœ‰ä¸€äº›è¦ç”¨çš„å†…å®¹: CSDN æ–‡ç« : C# ä¸­çš„ Range å‡½æ•° CSDN æ–‡ç« : C# IEnumerable è¿æ¥, å°†è¿­ä»£å™¨ä¸²èµ·æ¥\næ›´æ–°è®°å½•: æœ€æ–°ç‰ˆæœ¬å·²ç»æ”¯æŒè‡ªå®šä¹‰å‡½æ•°è¡¨è¾¾å¼\né¡¹ç›®: é¡¹ç›®ä»“åº“: https://github.com/SlimeNull/Null.FuncDraw ","date":"2021-02-19T22:00:53+08:00","permalink":"https://slimenull.com/p/20210219220053/","title":"[C#] ç»˜åˆ¶å‡½æ•°å›¾åƒ. å¯æ‹–åŠ¨, å¯ç¼©æ”¾, å¯è°ƒæ•´ç²¾åº¦"},{"content":"æœ¬æ¥ä»¥ä¸º IEnumerable ä¸èƒ½æ‹¼æ¥, å°±è‡ªå·±å®ç°äº†ä¸€ä¸ª, ç»“æœå‘ç° Linq æ˜¯æä¾›äº†ä¸€ä¸ª Concat å‡½æ•°çš„, ä¸è¿‡ä¼¼ä¹æ˜¯é€šè¿‡ç”ŸæˆListçš„æ–¹å¼æ¥å®ç°? åæ­£æˆ‘é‚£ä¸ªæ˜¯å¼‚æ­¥çš„.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 using System; using System.Collections; using System.Collections.Generic; namespace NullLib.Iterator { public static class NIterator { public static IEnumerable Concat(this IEnumerable iterator1, IEnumerable iterator2) { foreach (var i in iterator1) yield return i; foreach (var i in iterator2) yield return i; } public static IEnumerable\u0026lt;T\u0026gt; Concat\u0026lt;T\u0026gt;(this IEnumerable\u0026lt;T\u0026gt; iterator1, IEnumerable\u0026lt;T\u0026gt; iterator2) { foreach (var i in iterator1) yield return i; foreach (var i in iterator2) yield return i; } public static IEnumerable Concat(this IEnumerable iterator1, params IEnumerable[] iterator2) { foreach (var i in iterator1) yield return i; foreach (var i in iterator2) foreach (var j in i) yield return j; } public static IEnumerable\u0026lt;T\u0026gt; Concat\u0026lt;T\u0026gt;(this IEnumerable\u0026lt;T\u0026gt; iterator1, params IEnumerable\u0026lt;T\u0026gt;[] iterator2) { foreach (var i in iterator1) yield return i; foreach (var i in iterator2) foreach (var j in i) yield return j; } public static IEnumerable Concat(params IEnumerable[] iterators) { foreach (var i in iterators) foreach (var j in i) yield return j; } public static IEnumerable\u0026lt;T\u0026gt; Concat\u0026lt;T\u0026gt;(params IEnumerable\u0026lt;T\u0026gt;[] iterators) { foreach (var i in iterators) foreach (var j in i) yield return j; } } } ","date":"2021-02-19T15:28:33+08:00","permalink":"https://slimenull.com/p/20210219152833/","title":"[C#] IEnumerableæ‹¼æ¥! å°†æšä¸¾å™¨ä¸²èµ·æ¥~"},{"content":"è¿™ä¹ˆå¤šé‡è½½, å®Œå…¨å¤Ÿç”¨äº†~, è¿”å›å€¼æ˜¯ IEnumerable\u0026lt;T\u0026gt; å…¶ä¸­, Rangeå‡½æ•°æ˜¯ç®€å•çš„å¾ªç¯, RangeExåŠ å…¥äº†æ£€æµ‹, ä¸ä¼šé€ æˆæ­»å¾ªç¯, ä¸”ç²¾åº¦éå¸¸å‡†ç¡®\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 using System; using System.Collections.Generic; namespace NullLib.Range { public class NRange { public static IEnumerable\u0026lt;int\u0026gt; Range(int stop) { for (int i = 0; i \u0026lt; stop; i++) yield return i; } public static IEnumerable\u0026lt;int\u0026gt; Range(int start, int stop) { for (int i = start; i \u0026lt; stop; i++) yield return i; } public static IEnumerable\u0026lt;int\u0026gt; Range(int start, int stop, int step) { for (int i = start; i \u0026lt; stop; i += step) yield return i; } public static IEnumerable\u0026lt;float\u0026gt; Range(float stop) { for (int i = 0; i \u0026lt; stop; i++) yield return i; } public static IEnumerable\u0026lt;float\u0026gt; Range(float start, float stop) { for (float i = start; i \u0026lt; stop; i++) yield return i; } public static IEnumerable\u0026lt;float\u0026gt; Range(float start, float stop, float step) { for (float i = start; i \u0026lt; stop; i += step) yield return i; } public static IEnumerable\u0026lt;double\u0026gt; Range(double stop) { for (int i = 0; i \u0026lt; stop; i++) yield return i; } public static IEnumerable\u0026lt;double\u0026gt; Range(double start, double stop) { for (double i = start; i \u0026lt; stop; i++) yield return i; } public static IEnumerable\u0026lt;double\u0026gt; Range(double start, double stop, double step) { for (double i = start; i \u0026lt; stop; i += step) yield return i; } public static IEnumerable\u0026lt;int\u0026gt; RangeEx(int stop) { int start = 0, step = 1, current = start; step = step \u0026lt; 0 ? -step : step; if (start \u0026lt; stop) for (int i = 0; current \u0026lt; stop; i++, current = step * i + start) yield return current; else for (int i = 0; current \u0026gt; stop; i--, current = step * i + start) yield return current; } public static IEnumerable\u0026lt;int\u0026gt; RangeEx(int start, int stop) { int step = 1, current = start; step = step \u0026lt; 0 ? -step : step; if (start \u0026lt; stop) for (int i = 0; current \u0026lt; stop; i++, current = step * i + start) yield return current; else for (int i = 0; current \u0026gt; stop; i--, current = step * i + start) yield return current; } public static IEnumerable\u0026lt;int\u0026gt; RangeEx(int start, int stop, int step) { int current = start; step = step \u0026lt; 0 ? -step : step; if (start \u0026lt; stop) for (int i = 0; current \u0026lt; stop; i++, current = step * i + start) yield return current; else for (int i = 0; current \u0026gt; stop; i--, current = step * i + start) yield return current; } public static IEnumerable\u0026lt;float\u0026gt; RangeEx(float stop) { float start = 0, step = 1, current = start; step = step \u0026lt; 0 ? -step : step; if (start \u0026lt; stop) for (int i = 0; current \u0026lt; stop; i++, current = step * i + start) yield return current; else for (int i = 0; current \u0026gt; stop; i--, current = step * i + start) yield return current; } public static IEnumerable\u0026lt;float\u0026gt; RangeEx(float start, float stop) { float step = 1, current = start; step = step \u0026lt; 0 ? -step : step; if (start \u0026lt; stop) for (int i = 0; current \u0026lt; stop; i++, current = step * i + start) yield return current; else for (int i = 0; current \u0026gt; stop; i--, current = step * i + start) yield return current; } public static IEnumerable\u0026lt;float\u0026gt; RangeEx(float start, float stop, float step) { float current = start; step = step \u0026lt; 0 ? -step : step; if (start \u0026lt; stop) for (int i = 0; current \u0026lt; stop; i++, current = step * i + start) yield return current; else for (int i = 0; current \u0026gt; stop; i--, current = step * i + start) yield return current; } public static IEnumerable\u0026lt;double\u0026gt; RangeEx(double stop) { double start = 0, step = 1, current = start; step = step \u0026lt; 0 ? -step : step; if (start \u0026lt; stop) for (int i = 0; current \u0026lt; stop; i++, current = step * i + start) yield return current; else for (int i = 0; current \u0026gt; stop; i--, current = step * i + start) yield return current; } public static IEnumerable\u0026lt;double\u0026gt; RangeEx(double start, double stop) { double step = 1, current = start; step = step \u0026lt; 0 ? -step : step; if (start \u0026lt; stop) for (int i = 0; current \u0026lt; stop; i++, current = step * i + start) yield return current; else for (int i = 0; current \u0026gt; stop; i--, current = step * i + start) yield return current; } public static IEnumerable\u0026lt;double\u0026gt; RangeEx(double start, double stop, double step) { double current = start; step = step \u0026lt; 0 ? -step : step; if (start \u0026lt; stop) for (int i = 0; current \u0026lt; stop; i++, current = step * i + start) yield return current; else for (int i = 0; current \u0026gt; stop; i--, current = step * i + start) yield return current; } } } ","date":"2021-02-19T07:07:41+08:00","permalink":"https://slimenull.com/p/20210219070741/","title":"[C#] Rangeå‡½æ•°, å¥½ç”¨å°±å®Œäº‹å„¿äº†!"},{"content":"å®Œå…¨ç†è§£ DoubleAnimation! ä»…éœ€è¿™ä¸€ç¯‡æ–‡ç« .\nä»‹ç» é¦–å…ˆ, DoubleAnimationå¯ä»¥ç”¨æ¥åˆ›å»ºä¸€äº›ç®€å•çš„åŠ¨ç”», è¿™äº›åŠ¨ç”»ä»…é™äºä½¿ç”¨Doubleå€¼çš„å±æ€§, ä¾‹å¦‚æ§ä»¶çš„ä½ç½®, å°ºå¯¸, ç¼©æ”¾, æ—‹è½¬, æˆ–è€…é€æ˜åº¦å˜åŒ–ç­‰. ä¸€ä¸ªDoubleAnimationå®ä¾‹, åº”è¯¥è‡³å°‘æŒ‡å®š3ä¸ªå€¼:\nFrom (å€¼ä»å“ªé‡Œå¼€å§‹), To (å€¼åˆ°å“ªé‡Œç»“æŸ), Duration (å€¼çš„å˜åŒ–ç»è¿‡å¤šå°‘æ—¶é—´)\nä¾‹å¦‚, å¦‚æœè¦åˆ›å»ºä¸€ä¸ª 1s å†…ä»å€¼ä» 0 åˆ° 1 çš„åŠ¨ç”», From å°±æ˜¯0, To å°±æ˜¯ 1, Durationå°±æ˜¯ 1s.\nå¯åŠ¨åŠ¨ç”», éœ€è¦è°ƒç”¨å°†è¦æ‰§è¡Œè¿™ä¸ªåŠ¨ç”»çš„å¯¹è±¡çš„ BeginAnimation æ–¹æ³•, ä¾‹å¦‚ä¸€ä¸ªæ§ä»¶, æˆ–è€…ä¸€ä¸ªçª—å£, å‚æ•°åŒ…æ‹¬ DependencyProperty(è¿™ä¸ªåŠ¨ç”»å°†å¯¹å“ªä¸ªå±æ€§æ‰§è¡Œ), AnimationTimeline(æ‰§è¡Œå“ªä¸ªåŠ¨ç”»)\nå®ä¾‹: ä¾‹å¦‚, åˆ›å»ºä¸€ä¸ª, å½“ç‚¹å‡»æŒ‰é’®æ—¶, æŒ‰é’®çš„é«˜åº¦å¢åŠ  30 ä¸ªåƒç´ . CSä»£ç : ç„¶å, çœ‹çœ‹æ•ˆæœå§:\nå…¶å®, DoubleAnimationè¿˜å¯ä»¥æŒ‡å®šè¿åŠ¨æ—¶, åŠ é€Ÿåœ¨æ•´ä¸ªæ—¶é—´çº¿ä¸­çš„å æ¯”ä»¥åŠå‡é€Ÿåœ¨æ•´ä¸ªæ—¶é—´çº¿ä¸­çš„å æ¯”.\nä¾‹å¦‚, ä½ æƒ³æŒ‡å®šè¿™ä¸ªè¿åŠ¨ä¸­, å‰åŠéƒ¨åˆ†æ˜¯åŠ é€Ÿ, ååŠéƒ¨åˆ†æ˜¯åŒ€é€Ÿ, é‚£ä¹ˆåŠ é€Ÿå æ¯”å°±æ˜¯0.5, å‡é€Ÿå æ¯”å°±æ˜¯0, å¦‚ä¸‹: ç„¶å, çœ‹çœ‹è¿è¡Œæ•ˆæœå§: å¯ä»¥çœ‹å‡º, æœ‰åŠ é€Ÿçš„æ•ˆæœäº†, æˆ–è€…, å†ç‹ ç‚¹, æˆ‘ä»¬æŒ‡å®šå…¨éƒ¨æ˜¯å‡é€Ÿ, åŠ é€Ÿå æ¯”0, å‡é€Ÿå æ¯”1: æœç„¶å‡é€Ÿçœ‹èµ·æ¥éå¸¸å¥½çœ‹å•Š.\nçº¯XAMLä½¿ç”¨: DoubleAnimationæ˜¯å¯ä»¥åœ¨çº¯ xaml ä¸­å£°æ˜å¹¶ä½¿ç”¨çš„. æœ‰ç§ä¸œè¥¿å«åš Trigger, åœ¨ xaml ä¸­å£°æ˜ä»–, ç„¶åå¯ä»¥åˆé€‚çš„è§¦å‘åŠ¨ç”», å¦‚ä¸‹: ç„¶å, è¿è¡Œæ•ˆæœçš„è¯, é™¤äº†ä¸èƒ½ä¸æ–­å¢åŠ é«˜åº¦, å…¶ä»–çš„æ˜¯ä¸€æ ·çš„, ç‚¹ä¸€æ¬¡, å°±ä¼šä»20åˆ°50, ç¬¬äºŒæ¬¡ç‚¹å‡», è¿˜æ˜¯ä»20åˆ°50.\nè´´ä»£ç : æŒ‰é’®äº‹ä»¶:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 private void Button_Click(object sender, RoutedEventArgs e) { DoubleAnimation animation = new DoubleAnimation( button1.ActualHeight, // From ä»æŒ‰é’®çš„ é«˜åº¦ å¼€å§‹ button1.ActualHeight + 30, // To åˆ°æŒ‰é’®çš„ é«˜åº¦ + 30 ç»“æŸ new Duration(TimeSpan.FromSeconds(1))) // Duration é—´éš”æ˜¯ 1s { AccelerationRatio = 0, // è®¾ç½®åŠ é€Ÿå æ¯”ä¸ºä¸€åŠ, å³ 0.5 DecelerationRatio = 1, // è®¾ç½®å‡é€Ÿå æ¯”ä¸º0, å…¶å®è¿™é‡Œå¯ä»¥çœç•¥, å› ä¸ºé»˜è®¤æ˜¯0 }; button1.BeginAnimation( Button.HeightProperty, // DependencyProperty åŠ¨ç”»æ˜¯é’ˆå¯¹äºé«˜åº¦çš„ animation); // AnimationTimeline æŒ‡å®šåˆšåˆšåˆ›å»ºå¥½çš„åŠ¨ç”» } çº¯xamlå®ç°:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 \u0026lt;Button Name=\u0026#34;button1\u0026#34; Content=\u0026#34;Button\u0026#34; HorizontalAlignment=\u0026#34;Left\u0026#34; Margin=\u0026#34;343,182,0,0\u0026#34; VerticalAlignment=\u0026#34;Top\u0026#34; Width=\u0026#34;75\u0026#34; Height=\u0026#34;20\u0026#34;\u0026gt; \u0026lt;Button.Triggers\u0026gt; \u0026lt;EventTrigger RoutedEvent=\u0026#34;Button.Click\u0026#34;\u0026gt; \u0026lt;BeginStoryboard\u0026gt; \u0026lt;Storyboard\u0026gt; \u0026lt;DoubleAnimation Storyboard.TargetProperty=\u0026#34;Height\u0026#34; From=\u0026#34;20\u0026#34; To=\u0026#34;50\u0026#34; Duration=\u0026#34;0:0:1\u0026#34; AccelerationRatio=\u0026#34;0\u0026#34; DecelerationRatio=\u0026#34;1\u0026#34;/\u0026gt; \u0026lt;/Storyboard\u0026gt; \u0026lt;/BeginStoryboard\u0026gt; \u0026lt;/EventTrigger\u0026gt; \u0026lt;/Button.Triggers\u0026gt; \u0026lt;/Button\u0026gt; å°å½©è›‹~ æ˜¯çª—å£åŠ è½½æ—¶çš„é€æ˜åº¦å˜åŒ–åŠ¨ç”»æ¬¸å˜¿\n1 2 3 4 5 6 7 8 9 \u0026lt;Window.Triggers\u0026gt; \u0026lt;EventTrigger RoutedEvent=\u0026#34;Loaded\u0026#34;\u0026gt; \u0026lt;BeginStoryboard \u0026gt; \u0026lt;Storyboard\u0026gt; \u0026lt;DoubleAnimation From=\u0026#34;0\u0026#34; To=\u0026#34;1\u0026#34; Duration=\u0026#34;0:0:0.3\u0026#34; Storyboard.TargetProperty=\u0026#34;Opacity\u0026#34;/\u0026gt; \u0026lt;/Storyboard\u0026gt; \u0026lt;/BeginStoryboard\u0026gt; \u0026lt;/EventTrigger\u0026gt; \u0026lt;/Window.Triggers\u0026gt; å‚è€ƒæ–‡ç« : ä»¥ä¸‹æ–‡ç« å¯¹æœ¬æ–‡ç« çš„ç†è§£æœ‰å¸®åŠ©å™¢~ [.NET] WPF XAML åŸç†, èŠ‚ç‚¹ä¸å®ä¾‹, ä»¥åŠä¸€äº›é‡è¦çš„é›¶ç¢çŸ¥è¯†ç‚¹. [.NET] WPF Triggers è§¦å‘å™¨, EventTrigger, Trigger\n","date":"2021-02-15T16:07:30+08:00","permalink":"https://slimenull.com/p/20210215160730/","title":"[.NET] WPF DoubleAnimation åŠ¨ç”», ä¸€ç¯‡æ–‡ç« æ‚Ÿé€!"},{"content":"è§¦å‘å™¨, å¦‚å…¶å, å¯æ ¹æ®æŸäº›äº‹ä»¶æˆ–å±æ€§å€¼æ¥è§¦å‘æŸäº›ä¸œè¥¿, é‚£ä¹ˆæˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹ xaml ä¸­çš„è§¦å‘å™¨å§.\næ ·å¼å˜æ›´: æˆ‘ä»¬è¯•è¯•é€šè¿‡ä½¿ç”¨æ™®é€šè§¦å‘å™¨æ¥å®ç°å½“é¼ æ ‡æ‚¬åœæ—¶æ›´æ”¹æ§ä»¶èƒŒæ™¯é¢œè‰². ç„¶åè¿è¡Œä¸€ä¸‹, æ•ˆæœå°±æ˜¯è¿™æ ·: å¯åŠ¨åŠ¨ç”»: ç„¶å, è¯•ç€ç”¨äº‹ä»¶è§¦å‘å™¨(EventTrigger)ä¸DoubleAnimationæ¥åˆ›å»ºä¸€ä¸ªå¯åŠ¨åŠ¨ç”»å§(å…¶å®ä»£ç éƒ½å†™å¥½äº†): ç„¶åè¿è¡Œæ•ˆæœå¦‚ä¸‹: å¯ä»¥çœ‹åˆ°, çª—å£æ˜¯æ¸æ¸æµ®ç°çš„, ä¹Ÿå°±æ˜¯Opacityä»0åˆ°1.\nä»€ä¹ˆ? ä½ é—®æˆ‘å¯¹åº”çš„CSä»£ç æ€ä¹ˆå†™? å…ˆçœ‹çœ‹è¿™ç¯‡æ–‡ç« å§, çœ‹å®Œå®ƒ, ç›¸ä¿¡å¤§å¤šæ•°çš„ xaml ä»£ç , ä½ éƒ½èƒ½å†™å‡ºå¯¹åº”çš„ CS ä»£ç , è¿™æ˜¯ä¸€ä¸ªé€šç”¨çš„è§„å¾‹. [.NET] WPF XAML åŸç†, èŠ‚ç‚¹ä¸å®ä¾‹, ä»¥åŠä¸€äº›é‡è¦çš„é›¶ç¢çŸ¥è¯†ç‚¹.\næ¨èæ–‡ç« : [.NET] WPF DoubleAnimation åŠ¨ç”», ä¸€ç¯‡æ–‡ç« æ‚Ÿé€!\n","date":"2021-02-15T11:26:55+08:00","permalink":"https://slimenull.com/p/20210215112655/","title":"[.NET] WPF Triggers è§¦å‘å™¨, EventTrigger, Trigger"},{"content":"å½“ä½ æŸ¥èµ„æ–™æ—¶, çœ‹åˆ°é‚£äº›çœ¼èŠ±ç¼­ä¹±çš„ xaml ä»£ç , è®©äººç¬é—´æ²¡æœ‰äº†å­¦ä¹ çš„æ¬²æœ›\u0026hellip; å…ˆè¯•ç€å¯»æ‰¾ä¸‹å…¶ä¸­çš„è§„å¾‹å§.\nèŠ‚ç‚¹ä¸å®ä¾‹: é¦–å…ˆçœ‹çœ‹ä¸Šé¢çš„æ–‡ç« , ä»æˆ‘ä»¬æœ€å¸¸æ¥è§¦çš„ Button å…¥æ‰‹å§. Button æ˜¯å¯ä»¥ç”¨ CS ä»£ç æ¥è¿›è¡Œå®ä¾‹åŒ–, ç„¶åæ”¾ç½®åœ¨çª—å£ä¸­çš„, è€Œå…¶å®ƒçš„å…ƒç´ , ä¾‹å¦‚æ ¹èŠ‚ç‚¹ Window, éƒ½æ˜¯å¯ä»¥é€šè¿‡ CS ä»£ç è¿›è¡Œå®ä¾‹åŒ–.\nå¯ä»¥æ¨æµ‹å‡º, åœ¨ xaml ä¸­, ä¸€ä¸ªä¸ªçš„èŠ‚ç‚¹, ä¾‹å¦‚ Button, Label, å…¶å®å°±æ˜¯ç­‰åŒäºå£°æ˜ä¸€ä¸ªå¯¹åº”ç±»å‹çš„å®ä¾‹.\né‚£ä¹ˆå¦‚ä½•åœ¨ CS ä»£ç ä¸­è®¿é—®è¿™ä¸ªå®ä¾‹å‘¢? å¾ˆç®€å•, ä¸ºè¿™ä¸ªå®ä¾‹æŒ‡å®šä¸€ä¸ªåç§°(Name), å°±å¦‚ä¸Šé¢çš„å›¾ç‰‡ä¸­ä¸º Label æŒ‡å®š Name é‚£æ ·. ç„¶åå°±å¯ä»¥åœ¨ CS ä»£ç ä¸­è®¿é—®äº† å®ä¾‹çš„å±æ€§: å¦‚æœè¦è®¾ç½®ä¸€ä¸ª Label çš„ Content, åœ¨ xaml ä»£ç ä¸­, è¯¥å¦‚ä½•è®¾ç½®? æœ€å¸¸ç”¨çš„è‚¯å®šæ˜¯ä¸‹é¢è¿™ä¸ª: xaml è¿˜æ”¯æŒä¸€ç§, å°±æ˜¯è¿™æ ·: å…¶å® TextBox çš„ Text å±æ€§ä¹Ÿæ˜¯å¯ä»¥è¿™ä¹ˆè®¾ç½®çš„: å¤§æ¦‚çŒœå‡ºäº†å§? xamlä¸­, ä¸€å †æ ‡ç­¾ä¹‹é—´çš„å€¼å¯ä»¥è®¾ç½®ä¸ºå¯¹åº”å®ä¾‹çš„ç‰¹å®šå±æ€§è®¾ç½®å€¼. ä¾‹å¦‚ Label å°±æ˜¯è®¾ç½®Content, TextBox å°±æ˜¯ è®¾ç½® TextBox.\nå…¶å®, è¿˜æœ‰å¦å¤–ä¸€ç§, ä½ è‚¯å®šè§è¿‡å•¦, Grid.RowDefinitions å°±æ˜¯è¿™ä¹ˆç”¨çš„. ä½ å¯èƒ½ä¼šæƒ³åˆ°, Label å’Œ TextBox è¿™ç±»æ™®é€šçš„æ§ä»¶, æ˜¯å¦ä¹Ÿæ”¯æŒå‘¢? å“ˆå“ˆ, å¾ˆæœ‰è¶£å§, æ‰€ä»¥è¯´, ä»¥åçœ‹åˆ°ä»€ä¹ˆ xaml ä»£ç , å¯¹åº”çš„ CS ä»£ç ä¹Ÿèƒ½çŒœå‡ºæ¥ä¸€äº›, æ¯•ç«Ÿå¦‚æœæ˜¯æ§ä»¶, ä¹Ÿæ— éæ˜¯è®¾ç½®å±æ€§ä»¥åŠæ·»åŠ æˆå‘˜äº†, å™¢, ä¸‹é¢å°±æ˜¯æ·»åŠ æˆå‘˜å’¯.\nå£°æ˜æ§ä»¶æˆå‘˜: å¦‚æœä¸€ä¸ªæ§ä»¶å¯ä»¥æœ‰å­æˆå‘˜, å°±å¯ä»¥åƒä¸Šé¢é‚£æ ·å£°æ˜, å½“ç„¶, è¿™ä¸ªä¹Ÿè‚¯å®šç»å¸¸ç”¨, åªæ˜¯å¯èƒ½æ²¡æ³¨æ„è¿‡ç½¢äº†.\nè‡ªå®šä¹‰ç±»å‹å®ä¾‹: å°‘å¹´, å­¦è¿‡æ•°æ®ç»‘å®šå—? æ•°æ®ç»‘å®šçš„ä¸Šä¸‹æ–‡å¦‚ä½•å£°æ˜çš„, åº”è¯¥è¿˜è®°å¾—å§. æˆ‘ä¹‹å‰å°±åƒä¸€ä¸ªæ†¨æ†¨ä¸€æ ·, å»ç”¨ CS ä»£ç æ¥æŒ‡å®š DataContext. (æ–‡ç« æœ«æœ‰å…³äºæ•°æ®ç»‘å®šçš„æ–‡ç« æ¨è) ä½†æ˜¯,,, åˆšåˆšæˆ‘ä»¬è¯´è¿‡, æƒ³ Button, Label è¿™æ ·çš„ UI ç»„ä»¶, å…¶å®åœ¨å£°æ˜å, å…¶å®å°±æ˜¯ä¸€ä¸ªä¸ªçš„å®ä¾‹, æˆ‘ä»¬åˆšåˆšè¿›è¡Œçš„æŒ‡å®šä¸Šä¸‹æ–‡æ“ä½œ, ä¹Ÿæ˜¯åˆ›å»ºä¸€ä¸ª TestModel å®ä¾‹, ç„¶åæŒ‡å®šç»™è¿™ä¸ªçª—å£çš„ DataContext å±æ€§.\nå¦‚ä½•æŒ‡å®šå±æ€§, æˆ‘ä»¬çŸ¥é“, é‚£å¦‚ä½•åœ¨ xaml ä¸­åˆ›å»ºæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ç±»å‹å®ä¾‹å‘¢? ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹: ä½ æ‚Ÿäº†å—? é€šè¿‡è¿™ä¸ª, æˆ‘ä»¬å°±å¯ä»¥åœ¨ xaml ä¸­å£°æ˜å®ä¾‹äº†\u0026hellip; å½“ç„¶, è‚¯å®šæœ‰å°èªæ˜åœ¨æƒ³, \u0026ldquo;æˆ‘è¯•è¯•åœ¨ xaml é‡Œé¢å£°æ˜ä¸€ä¸ªæµ®ç‚¹æ•°è¯•è¯•?\u0026rdquo; æ²¡é”™, é‚£ä¸ªæ†¨æ†¨å°±æ˜¯æˆ‘, äº²è‡ªå°è¯•äº†ä¸€ä¸‹, ä¸è¿‡ä¹Ÿä¸ç®—æ˜¯æ²¡æœ‰æ”¶è·, è‡³å°‘æˆ‘ä»¬å¯ä»¥çŸ¥é“, è¿™äº›å®ä¾‹çš„å£°æ˜, è‚¯å®šæ˜¯åœ¨ç‰¹å®šçš„æƒ…å†µä¸‹æ‰æ˜¯å¯ä»¥çš„. ä¾‹å¦‚è¿™ä¸ª Grid å­å…ƒç´ , ä½ å¿…é¡»æŒ‡å®šä¸€ä¸ª UIElement, è¿™è·Ÿ CS ä»£ç é‡Œçš„ä¸€æ¨¡ä¸€æ ·hhh\næ‰€ä»¥ xaml è·Ÿ CS è¿˜æ˜¯ç›¸å…³è”çš„å“ˆå“ˆå“ˆ, æˆ‘ä¸€å¼€å§‹è¿˜è§‰å¾— xaml è·Ÿ CS çš„å…³è”ä¸æ˜¯å¾ˆå¤§å‘¢.\næŸ¥çœ‹çª—ä½“å®Œæ•´ä»£ç : å¦‚æœä½ ç”¨è¿‡ WinForm, è‚¯å®šä¼šç»å¸¸æ¥è§¦è¿™ä¸ª, å½“æŒ‡å®šäº†æ§ä»¶çš„æŸäº›äº‹ä»¶, è€Œè¿™ä¸ªå‡½æ•°åˆä¸å­˜åœ¨çš„æ—¶å€™è‚¯å®šéœ€è¦è‡ªå·±è°ƒæ•´ä»£ç çš„: WinForm çš„çª—ä½“å®Œæ•´ä»£ç å°±åœ¨è¿™é‡Œäº†, ä¸€åˆ°WPF, å°±ä»¤äººçª’æ¯äº†, å› ä¸ºæ²¡æœ‰ç›´æ¥æ˜¾ç¤ºè¿™ä¸ªæ–‡ä»¶.\nä¸è¿‡, ä½ è¿˜æ˜¯å¯ä»¥é€šè¿‡è¿™æ ·çš„æ–¹å¼å»æŸ¥çœ‹çš„: ç„¶å, æ¬¢å‘¼å§, è™½ç„¶ä¸€èˆ¬å¾ˆå°‘åŠ¨è¿™ä¸ªæ–‡ä»¶(ä½ ä¹Ÿæ²¡åŠæ³•åŠ¨, è‡ªåŠ¨ç”Ÿæˆä¼šè¦†ç›–ä½ çš„æ”¹åŠ¨), ä½†æ˜¯çœ‹è¿™ä¸ªä¸œè¥¿, è‚¯å®šå¯¹å­¦ä¹  WPF æœ‰å¸®åŠ©çš„. çª—ä½“ç±»å‹: å…¶å®è¿™é‡Œåªæ˜¯æŒ‡ xaml ä¸­, Window èŠ‚ç‚¹çš„ x:Class å±æ€§, æˆ‘ä»¬çŸ¥é“, WPF ä¼šæœ‰ä¸€äº›è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç , è¿™äº›ä»£ç ä¸­å£°æ˜äº†è¿™ä¸ªçª—ä½“, è€Œè¿™ä¸ªç”Ÿæˆçš„ä»£ç ä¸­çª—ä½“çš„å‘½åç©ºé—´å’Œç±»å, å°±æ˜¯é€šè¿‡ xaml æ–‡æ¡£ä¸­çš„ x:Class å±æ€§æŒ‡å®šçš„.\nä¾‹å¦‚æˆ‘æŒ‡å®š x:Class=\u0026ldquo;MvvmTest.View.MainWindow\u0026rdquo;, é‚£ä¹ˆå®Œæ•´ä»£ç ä¸­å°±æ˜¯è¿™æ ·çš„: æ‰€ä»¥è¯´, å¦‚æœè¦æ”¹å˜è¿™ä¸ªçª—ä½“çš„å‘½åç©ºé—´, ä½ éœ€è¦æŒ‡å®š x:Class å±æ€§, ä»¥åŠæŒ‡å®š xaml.cs æ–‡ä»¶çš„å‘½åç©ºé—´.\nä¾‹å¦‚, ä½ å°†ä¸€ä¸ªçª—ä½“ä»é¡¹ç›®çš„æ ¹ç›®å½•ç§»åŠ¨åˆ°äº†é¡¹ç›®çš„Viewæ–‡ä»¶å¤¹, æ­¤æ—¶, è§„èŒƒçš„åšæ³•åº”è¯¥æ˜¯åŒæ—¶å°†è¿™ä¸ªçª—ä½“çš„å‘½åç©ºé—´æ·»åŠ ä¸Šä¸€ä¸ªView.\nçœ‹çš„è¿™ä¹ˆå¼€å¿ƒ, èµ¶å¿«å…³æ³¨è¯ºå°”å§qwq, åˆ«å¿˜äº†ç‚¹ä¸ªèµå™¢~\næ¨èæ–‡ç« : [C#] MCI è¯¦è§£ä¸å°è£…ç±», MCI æ’­æ”¾éŸ³ä¹, è·å–æ’­æ”¾çŠ¶æ€, è·å–éŸ³é¢‘é•¿åº¦, è¿›åº¦è°ƒæ•´ [.NET] WPF æ•°æ®ç»‘å®šä¸ MVVM æ¨¡å‹\n","date":"2021-02-15T11:26:10+08:00","permalink":"https://slimenull.com/p/20210215112610/","title":"[.NET] WPF XAML åŸç†, èŠ‚ç‚¹ä¸å®ä¾‹, ä»¥åŠä¸€äº›é‡è¦çš„é›¶ç¢çŸ¥è¯†ç‚¹."},{"content":"ä¾‹å¦‚ä½ æœ‰ä¸€ä¸ªç¨‹åº, æ˜¯ VB.NET å†™çš„, ä½ å¸Œæœ›åœ¨é‡Œé¢å¼•ç”¨ C# çš„ä»£ç , é‚£ä¹ˆ, è¯¥å¦‚ä½•æ“ä½œå‘¢?\nå‡†å¤‡ææ–™: ä¸€ä¸ª C# æˆ– VB.NET é¡¹ç›®, æˆ‘ä»¬ä»¥ä¸€ä¸ªæµ‹è¯•é¡¹ç›®(WinForm)å¼€å§‹ ä¸è¯¥é¡¹ç›®è¯­è¨€ä¸åŒçš„, ä½†æ˜¯æ˜¯åŸºäº .NET çš„ç±»ä»£ç ç‰‡. ä»£ç åœ°å€: ä¸€ä¸ªç±»å®ç°æ§ä»¶æ‹–æ‹½ç§»åŠ¨ åˆ†å¸ƒæ¼”ç¤º: 1. \u0026gt; åˆ›å»ºç±»åº“é¡¹ç›®: åˆ›å»ºä¸€ä¸ªä¸æˆ‘ä»¬å‡†å¤‡çš„ç±»åº“è¯­è¨€ç›¸åŒçš„ç±»åº“, å¹¶å°†ä»£ç æ‹·è´åˆ°å…¶ä¸­: 2. \u0026gt; æ·»åŠ é¡¹ç›®å¼•ç”¨: åœ¨åˆšåˆšå‡†å¤‡å¥½çš„ WinForm é¡¹ç›®ä¸­, æ·»åŠ å¯¹ç±»åº“é¡¹ç›®çš„å¼•ç”¨. 3. \u0026gt; å¼€å§‹ä½¿ç”¨: ç°åœ¨, ä½ å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ç±»åº“ä¸­çš„ç±»äº†. \u0026gt; ä½¿ç”¨æ•ˆæœ: ","date":"2021-02-15T01:57:02+08:00","permalink":"https://slimenull.com/p/20210215015702/","title":"[C#/VB.NET] C# ä¸ VB.NET çš„ç±»åº“è·¨è¯­è¨€å¼•ç”¨."},{"content":"æ·¦! é¦–å…ˆä»£ç æ˜¯ä¸å®Œæ•´çš„, æˆ‘è¿˜æ˜¯æ²¡èƒ½æˆåŠŸè®¾ç½®éŸ³é‡, é™¤æ­¤ä¹‹å¤–, åˆ«çš„å€’æ˜¯æŒºé¡ºåˆ©çš„, å½“å‰å®ç°çš„åŠŸèƒ½å¦‚ä¸‹:\næ’­æ”¾ æš‚åœ è¿˜åŸ åœæ­¢ è·å–è¿›åº¦ è·å–é•¿åº¦ è®¾ç½®è¿›åº¦ è·å–æ’­æ”¾çŠ¶æ€\nå†…å®¹: æœ¬é¡¹ç›®çš„ä»“åº“åœ¨: SlimeNull/AudioTest, åœ¨è¿™é‡Œä¸‹è½½å“¦, åˆ«å¿˜äº†è¿˜åŸ nuget åŒ…, å› ä¸ºç”¨äº† NAudio åº“. \u0026gt; éŸ³ä¹æ’­æ”¾ Demo: å…ˆæ”¾å›¾å§: é¦–å…ˆå·¦ä¸Šè§’æ˜¯æ‰“å¼€æ–‡ä»¶çš„, ç„¶å PlayType æ˜¯æ’­æ”¾æ–¹å¼, æˆ‘ç°åœ¨è®©å®ƒæ”¯æŒ 3 ç§, ä¸€ç§æ˜¯SoundPlayer, ç„¶åæ˜¯ MCI, ç„¶åæ˜¯ NAudio åº“. å®ç°äº†æ’­æ”¾, æš‚åœ, åœæ­¢, ç§»é™¤, è¿›åº¦è°ƒæ•´åˆ°å¼€å¤´, è¿›åº¦è°ƒæ•´(å°±é‚£ä¸ªtrack bar), åŒæ­¥æ’­æ”¾(å¦‚æœç‚¹äº†è¿™ä¸ª, UIçº¿ç¨‹ä¼šé˜»å¡çš„å“¦), è·å–éŸ³ä¹é•¿åº¦, è·å–æ’­æ”¾çŠ¶æ€, è·å–æ’­æ”¾ä½ç½®, é‡å¤æ’­æ”¾. ä¸åŒçš„åŠŸèƒ½å¯¹ä¸åŒçš„æ’­æ”¾ç§ç±»æ”¯æŒæ€§ä¸åŒ, æ‰€ä»¥, å¦‚æœä½ æŒ‰ä¸‹äº†æŒ‰é’®, æ²¡ååº”, ä¹Ÿæ²¡æŠ¥é”™, é‚£å°±æ˜¯å®ƒä¸æ”¯æŒè¿™ä¸ªåŠŸèƒ½(ä¹Ÿå°±æ˜¯ä»£ç é‡Œæ²¡æœ‰å†™)'\nä¸‹è½½ä»£ç , è¯·çœ‹å‰é¢çš„é“¾æ¥.â†‘è·³è½¬â†‘\n\u0026gt; MCI æ’­æ”¾å™¨å°è£…: ä¸Šè¾¹çš„çª—ä½“ç¨‹åºå°±ä½“ç°äº†å°è£…ç±»æ‰€å®ç°çš„æ‰€æœ‰åŠŸèƒ½å–”, æ‰€ä»¥è¯•è¯•å§, ä½ ä¹Ÿå¯ä»¥ç›´æ¥ç²˜è´´ä¸‹é¢çš„ä»£ç , ä½†æ˜¯csæ–‡ä»¶çš„åç§°, å¦‚æœå¯ä»¥çš„è¯, æˆ‘å¸Œæœ›ä½ å‘½åä¸º \u0026ldquo;Null.MciPlayer\u0026rdquo; (æ²¡é”™å°±æ˜¯æˆ‘çš„åå­— 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 using System; using System.IO; using System.Runtime.InteropServices; namespace Null.MciPlayer { public class MciPlayer : IDisposable { [DllImport(\u0026#34;kernel32.dll\u0026#34;, EntryPoint = \u0026#34;GetShortPathNameW\u0026#34;, CharSet = CharSet.Unicode)] extern static short GetShortPath(string longPath, string buffer, int bufferSize); [DllImport(\u0026#34;winmm.dll\u0026#34;, EntryPoint = \u0026#34;mciSendString\u0026#34;, CharSet = CharSet.Unicode)] extern static int MciSendString(string command, string buffer, int bufferSize, IntPtr callback); bool TryGetShortPath(string longPath, out string shortPath) { shortPath = null; short reqLen = GetShortPath(longPath, null, 0); // æŒ‡å®š nullä¸0, åˆ™è¿”å›éœ€è¦çš„é•¿åº¦ if (reqLen == 0) return false; shortPath = new string(\u0026#39;\\0\u0026#39;, reqLen); // å£°æ˜ç¼“å†² short rstLen = GetShortPath(longPath, shortPath, reqLen); // è½¬æ¢ if (rstLen == 0 || rstLen == reqLen) return false; shortPath = shortPath.TrimEnd(\u0026#39;\\0\u0026#39;); return true; } private string longpath; private string shortName; private string aliasName; public MciPlayer() { } public MciPlayer(string path) { if (!File.Exists(path)) throw new FileNotFoundException(\u0026#34;File not exist.\u0026#34;, path); longpath = path; } void MciSendStringWithCheck(string command, string buffer, int bufferSize, IntPtr callback) { int err = MciSendString(command, buffer, bufferSize, callback); if (err != 0) throw new MciException(err); } string StatusInfo(string info) { string buffer = new string(\u0026#39;\\0\u0026#39;, 32); MciSendStringWithCheck($\u0026#34;status {aliasName} {info}\u0026#34;, buffer, 32, IntPtr.Zero); return buffer.TrimEnd(\u0026#39;\\0\u0026#39;); } public string DevicePath { get =\u0026gt; longpath; } public string DeviceShortPath { get =\u0026gt; shortName; } public string AliasName { get =\u0026gt; aliasName; } public bool SetDevicePath(string longpath) { if (aliasName != null) return false; this.longpath = longpath; return true; } public void Open() { if (!TryGetShortPath(longpath, out shortName)) throw new Exception(\u0026#34;Get short path faield when initializing.\u0026#34;); aliasName = $\u0026#34;nmci{DateTime.Now.Ticks}\u0026#34;; MciSendStringWithCheck($\u0026#34;open {shortName} alias {aliasName}\u0026#34;, null, 0, IntPtr.Zero); } public void Close() { MciSendStringWithCheck($\u0026#34;close {aliasName}\u0026#34;, null, 0, IntPtr.Zero); aliasName = null; } public void Play() { MciSendStringWithCheck($\u0026#34;play {aliasName}\u0026#34;, null, 0, IntPtr.Zero); } public void Resume() { MciSendStringWithCheck($\u0026#34;resume {aliasName}\u0026#34;, null, 0, IntPtr.Zero); } public void Pause() { MciSendStringWithCheck($\u0026#34;pause {aliasName}\u0026#34;, null, 0, IntPtr.Zero); } public void Stop() { MciSendStringWithCheck($\u0026#34;stop {aliasName}\u0026#34;, null, 0, IntPtr.Zero); } public int GetPosition() { return int.Parse(StatusInfo(\u0026#34;position\u0026#34;)); } public int GetLength() { return int.Parse(StatusInfo(\u0026#34;length\u0026#34;)); } public PlaybackState GetState() { switch (StatusInfo(\u0026#34;mode\u0026#34;).ToLower()) { case \u0026#34;playing\u0026#34;: return PlaybackState.Playing; case \u0026#34;paused\u0026#34;: return PlaybackState.Paused; case \u0026#34;stopped\u0026#34;: return PlaybackState.Stopped; default: return PlaybackState.Invalid; } } public void PlayWait() { MciSendStringWithCheck($\u0026#34;play {aliasName} wait\u0026#34;, null, 0, IntPtr.Zero); } public void PlayRepeat() { MciSendStringWithCheck($\u0026#34;play {aliasName} repeat\u0026#34;, null, 0, IntPtr.Zero); } public void Seek(int position) { MciSendStringWithCheck($\u0026#34;seek {aliasName} to {position}\u0026#34;, null, 0, IntPtr.Zero); } public void SeekToStart() { MciSendStringWithCheck($\u0026#34;seek {aliasName} to start\u0026#34;, null, 0, IntPtr.Zero); } public void SetSeekMode(bool fExact) { MciSendStringWithCheck($\u0026#34;set {aliasName} seek exactly {(fExact ? \u0026#34;on\u0026#34; : \u0026#34;off\u0026#34;)}\u0026#34;, null, 0, IntPtr.Zero); } public void Dispose() { if (aliasName != null) Close(); } } public enum PlaybackState { Stopped, Playing, Paused, Invalid = -1, } public class MciException : Exception { private MciError err; public int ErrorId { get =\u0026gt; (int)err; } public string ErrorName { get =\u0026gt; err.ToString(); } public override string Message { get =\u0026gt; ErrorName; } public MciException() { } public MciException(int errorId) { if (Enum.IsDefined(typeof(MciError), errorId)) err = (MciError)errorId; else throw new ArgumentOutOfRangeException(\u0026#34;ä¸æ˜¯æ­£ç¡®çš„é”™è¯¯ID\u0026#34;); } public MciException(string errorName) { if (!Enum.TryParse\u0026lt;MciError\u0026gt;(errorName, out err)) throw new ArgumentOutOfRangeException(\u0026#34;ä¸æ˜¯æ­£ç¡®çš„é”™è¯¯ID\u0026#34;); } enum MciError { MCIERR_NO_ERROR = 0, MCIERR_INVALID_DEVICE_ID = 257, MCIERR_UNRECOGNIZED_KEYWORD = 259, MCIERR_UNRECOGNIZED_COMMAND = 261, MCIERR_HARDWARE = 262, MCIERR_INVALID_DEVICE_NAME = 263, MCIERR_OUT_OF_MEMORY = 264, MCIERR_DEVICE_OPEN = 265, MCIERR_CANNOT_LOAD_DRIVER = 266, MCIERR_MISSING_COMMAND_STRING = 267, MCIERR_PARAM_OVERFLOW = 268, MCIERR_MISSING_STRING_ARGUMENT = 269, MCIERR_BAD_INTEGER = 270, MCIERR_PARSER_INTERNAL = 271, MCIERR_DRIVER_INTERNAL = 272, MCIERR_MISSING_PARAMETER = 273, MCIERR_UNSUPPORTED_FUNCTION = 274, MCIERR_FILE_NOT_FOUND = 275, MCIERR_DEVICE_NOT_READY = 276, MCIERR_INTERNAL = 277, MCIERR_DRIVER = 278, MCIERR_CANNOT_USE_ALL = 279, MCIERR_MULTIPLE = 280, MCIERR_EXTENSION_NOT_FOUND = 281, MCIERR_OUTOFRANGE = 282, MCIERR_FLAGS_NOT_COMPATIBLE = 284, MCIERR_FILE_NOT_SAVED = 286, MCIERR_DEVICE_TYPE_REQUIRED = 287, MCIERR_DEVICE_LOCKED = 288, MCIERR_DUPLICATE_ALIAS = 289, MCIERR_BAD_CONSTANT = 290, MCIERR_MUST_USE_SHAREABLE = 291, MCIERR_MISSING_DEVICE_NAME = 292, MCIERR_BAD_TIME_FORMAT = 293, MCIERR_NO_CLOSING_QUOTE = 294, MCIERR_DUPLICATE_FLAGS = 295, MCIERR_INVALID_FILE = 296, MCIERR_NULL_PARAMETER_BLOCK = 297, MCIERR_UNNAMED_RESOURCE = 298, MCIERR_NEW_REQUIRES_ALIAS = 299, MCIERR_NOTIFY_ON_AUTO_OPEN = 300, MCIERR_NO_ELEMENT_ALLOWED = 301, MCIERR_NONAPPLICABLE_FUNCTION = 302, MCIERR_ILLEGAL_FOR_AUTO_OPEN = 303, MCIERR_FILENAME_REQUIRED = 304, MCIERR_EXTRA_CHARACTERS = 305, MCIERR_DEVICE_NOT_INSTALLED = 306, MCIERR_GET_CD = 307, MCIERR_SET_CD = 308, MCIERR_SET_DRIVE = 309, MCIERR_DEVICE_LENGTH = 310, MCIERR_DEVICE_ORD_LENGTH = 311, MCIERR_NO_INTEGER = 312, MCIERR_WAVE_OUTPUTSINUSE = 320, MCIERR_WAVE_SETOUTPUTINUSE = 321, MCIERR_WAVE_INPUTSINUSE = 322, MCIERR_WAVE_SETINPUTINUSE = 323, MCIERR_WAVE_OUTPUTUNSPECIFIED = 324, MCIERR_WAVE_INPUTUNSPECIFIED = 325, MCIERR_WAVE_OUTPUTSUNSUITABLE = 326, MCIERR_WAVE_SETOUTPUTUNSUITABLE = 327, MCIERR_WAVE_INPUTSUNSUITABLE = 328, MCIERR_WAVE_SETINPUTUNSUITABLE = 329, MCIERR_SEQ_DIV_INCOMPATIBLE = 336, MCIERR_SEQ_PORT_INUSE = 337, MCIERR_SEQ_PORT_NONEXISTENT = 338, MCIERR_SEQ_PORT_MAPNODEVICE = 339, MCIERR_SEQ_PORT_MISCERROR = 340, MCIERR_SEQ_TIMER = 341, MCIERR_SEQ_PORTUNSPECIFIED = 342, MCIERR_SEQ_NOMIDIPRESENT = 343, MCIERR_NO_WINDOW = 346, MCIERR_CREATEWINDOW = 347, MCIERR_FILE_READ = 348, MCIERR_FILE_WRITE = 349, MCIERR_NO_IDENTITY = 350, } } } å¦‚æœæœ‰ä»€ä¹ˆå»ºè®®æˆ–è€…è¿™ä¸ªç±»æœ‰å¯æ”¹è¿›çš„åœ°æ–¹, æ¬¢è¿ç•™è¨€å“¦~ n(*â‰§â–½â‰¦*)n\n","date":"2021-02-11T10:42:39+08:00","permalink":"https://slimenull.com/p/20210211104239/","title":"[C#] éŸ³ä¹æ’­æ”¾ 3 ç§æ–¹å¼ Demo ä¸ MCI éŸ³ä¹æ’­æ”¾å™¨å°è£…ç±»."},{"content":"æ·¦! ç¢ç£¨äº†ä¸€æ™šä¸Šå•Š, æ€»ç®—æœ‰äº›çœ‰ç›®äº†. (æ‰€ä»¥æˆ‘è¿˜æ˜¯ä¸€ä¸ªç¬¨è›‹å•Š, æ˜æ˜è¿™ä¹ˆç®€å•çš„ä¸œè¥¿å´èŠ±è´¹äº†è¿™ä¹ˆé•¿æ—¶é—´\né¦–å…ˆ, MCIçš„å…¨ç§°æ˜¯Multimedia Control Interface, å³å¤šåª’ä½“æ§åˆ¶æ¥å£, é€šè¿‡å®ƒ, æˆ‘ä»¬å¯ä»¥åšåˆ°æ’­æ”¾éŸ³é¢‘è§†é¢‘, ç”šè‡³å½•åˆ¶éŸ³é¢‘, è™½ç„¶å¤è€, ä½†æ˜¯çœŸçš„å¼ºå¤§.\næ³¨æ„, æ–‡ç« è¾ƒå®˜æ–¹æ–‡æ¡£æœ‰ä¸å°‘åˆ å‡, å¦‚æœçœ‹æ ‡å‡†å†…å®¹, è¿˜æ˜¯çœ‹å®˜æ–¹æ–‡æ¡£æ¯”è¾ƒå¥½.\nMCI Command Strings å®˜æ–¹æ–‡æ¡£: Microsoft Command Strings - Win32 app | Microsoft Docs å“¦å¯¹äº†, æ–‡æ¡£æ˜¯çº¯è‹±æ–‡å“¦~\nç†è®ºåŸºç¡€: MCI ä¸èƒ½ä¸ C# ä¸­çš„å†…å­˜æµæ‰“äº¤é“, ä»–åªèƒ½æ’­æ”¾æ–‡ä»¶. MCI æ”¯æŒå¾ˆå¤šæ ¼å¼, åŒ…å«: CDéŸ³é¢‘, æ•°å­—éŸ³é¢‘, MIDIéŸ³ä¹, è§†é¢‘å”±ç‰‡(videodisc), VCR, ä»¥åŠæ³¢å½¢éŸ³é¢‘. MCI ä¸­, è¢«æ’­æ”¾çš„éŸ³é¢‘æ–‡ä»¶è¢«ç§°ä½œ è®¾å¤‡(Device) MCI ä¸­, æ”¯æŒå·¨å¤šè®¾ç½®é¡¹, åŒ…æ‹¬æ’­æ”¾è¿›åº¦, éŸ³é‡å¤§å°, å£°é“å¼€å…³, å¦‚æœä½ æ’­æ”¾çš„æ˜¯ MIDI, æ”¯æŒçš„è®¾ç½®æ›´å¤š. æ­£å¼å¼€å§‹: ä¸‹é¢, æˆ‘ä»¬å°†ä»¥æ’­æ”¾éŸ³é¢‘ä¸ºä¾‹, å°½å¯èƒ½å¤šçš„è®²è¿° MCI çš„ç›¸å…³çŸ¥è¯†, æ–‡ç« åœ¨ä»Šåå¯èƒ½ä¼šç»§ç»­æ›´æ–°.\nç¤ºä¾‹æ–‡ä»¶åœ¨: C:\\Users\\Null\\Desktop\\Tutorial.wav\n\u0026gt; å¼•ç”¨åº“: æœ€æœ€å¼€å§‹, æ— éæ˜¯è½½å…¥åº“. å¯¹äº C++, éœ€è¦å¼•ç”¨ Windows.h ä»¥åŠ Mmsystem.h è¿™ä¸¤ä¸ªå¤´æ–‡ä»¶ å¯¹äº C#, using System.Runtime.InteropServices; ä»¥è¿›è¡Œéæ‰˜ç®¡åº“çš„è°ƒç”¨. \u0026gt; æ‰§è¡ŒæŒ‡ä»¤: MCI ä¸­, æœ‰ 3 ç§æ–¹å¼æ¥æ‰§è¡Œ MCI æŒ‡ä»¤. åˆ†åˆ«æ˜¯: mciSendString, mciExecute, mciSendCommand, å®ƒä»¬å‡ä½äº winmm.dll ä¸­. å‡½æ•°åŸå‹:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 MCIERROR mciSendString( // MCIERROR æ˜¯ æ— ç¬¦å·é•¿æ•´å½¢æ•°å­— LPCTSTR lpszCommand, LPTSTR lpszReturnString, UINT cchReturn, HANDLE hwndCallback ); BOOL mciExecute( LPCSTR pszCommand ); MCIERROR mciSendCommand( MCIDEVICEID IDDevice, // è®¾å¤‡ ID, é€šè¿‡å¦ä¸€ä¸ªå‡½æ•°æ‰“å¼€æ–‡ä»¶å¯ä»¥è·å¾— UINT uMsg, DWORD_PTR fdwCommand, DWORD_PTR dwParam ); C# å£°æ˜æ–¹å¼:\n1 2 3 4 5 6 7 8 [DllImport(\u0026#34;winmm.dll\u0026#34;, EntryPoint = \u0026#34;mciSendString\u0026#34;, CharSet = CharSet.Unicode)] extern static ulong MciSendString(string command, string buffer, int bufferSize, IntPtr callback); [DllImport(\u0026#34;winmm.dll\u0026#34;, EntryPoint = \u0026#34;mciExecute\u0026#34;, CharSet = CharSet.Unicode)] extern static bool MciExecute(string command); [DllImport(\u0026#34;winmm.dll\u0026#34;, EntryPoint = \u0026#34;mciSendCommand\u0026#34;, CharSet = CharSet.Unicode)] extern static ulong MciSendCommand(uint deviceId, uint uMsg, IntPtr fdwCommand, IntPtr dwParam); ç®€ç•¥è¯´æ˜:\nmciSendString: æœ€å¸¸ç”¨çš„æ–¹æ³•, é€šè¿‡å­—ç¬¦ä¸²æ¥è¡¨ç¤ºä¸€ä¸ªæŒ‡ä»¤, ä¼šè¿”å›é”™è¯¯ç , ä¸ä¼šæœ‰å¼¹çª—è­¦å‘Š mciExecute: è°ƒè¯•æ—¶è¾ƒå¸¸ç”¨çš„æ–¹æ³•, åœ¨æ‰§è¡Œæ—¶è‹¥æœ‰æœªå®Œå–„çš„åœ°æ–¹, ä¼šå¼¹çª—è­¦å‘Š, ä¹Ÿå› ä¸ºå¦‚æ­¤, ç¨‹åºçš„å‘å¸ƒç‰ˆæœ¬ä¸ä¼šä½¿ç”¨è¿™ä¸ª(å½±å“ä½¿ç”¨ä½“éªŒ) mciSendCommand: å¾ˆå°‘ç”¨, é€šè¿‡æŒ‡ä»¤çš„IDæ¥è¡¨ç¤ºæŒ‡ä»¤, ä¼šè¿”å›é”™è¯¯ç , ä¸ä¼šæœ‰å¼¹çª—è­¦å‘Š æŸäº› MCI æŒ‡ä»¤å…·æœ‰è¿”å›å€¼, ä¾‹å¦‚è·å–æ’­æ”¾çŠ¶æ€, è¿™äº›æŒ‡ä»¤ä¸èƒ½é€šè¿‡mciExecuteæ‰§è¡Œ.\næ–‡ç« åªä¼šé€šè¿‡ mciSendString æ¥ä»‹ç» MCI å“Ÿ \u0026gt; æ‰“å¼€æ–‡ä»¶: å¯¹äºæ’­æ”¾éŸ³é¢‘, é¦–è¦çš„ç¬¬ä¸€ä»¶äº‹, è‚¯å®šå°±æ˜¯æ‰“å¼€æ–‡ä»¶å¹¶å°†å…¶è½½å…¥åˆ°å†…å­˜äº†. ä¸è¿‡æœ‰ä¸€ç‚¹å¾ˆé‡è¦, å°±æ˜¯ MCI æŒ‡ä»¤åªæ”¯æŒçŸ­è·¯å¾„(ShortPath), æ‰€ä»¥åœ¨æ‹¿åˆ°æ–‡ä»¶è·¯å¾„å, æˆ‘ä»¬å¾—å°†å…¶è½¬æ¢ä¸ºçŸ­è·¯å¾„. å¦‚æœä¸å¯¹è·¯å¾„è¿›è¡Œè½¬æ¢, é‚£ä¹ˆæŸäº›åå­—é•¿åº¦å¤§äº8çš„æ–‡ä»¶(å‡†ç¡®æ¥è¯´æ˜¯è·¯å¾„ä¸­ä»»ä½•ä¸€éƒ¨åˆ†é•¿åº¦å¤§äº8)çš„å°†æ— æ³•æ’­æ”¾ å…³äºçŸ­è·¯å¾„ä¸é•¿è·¯å¾„: windowsç³»ç»Ÿä¸‹çš„æ–‡ä»¶é•¿åå’Œæ–‡ä»¶çŸ­å çŸ­è·¯å¾„ä¸é•¿è·¯å¾„çš„è½¬æ¢: [C#/C/C++] GetShortPathName è¯¦è§£, é•¿è·¯å¾„è½¬æ¢ä¸ºçŸ­è·¯å¾„\nMCI æŒ‡ä»¤ä¸­, é€šè¿‡ open æ¥æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶, å¹¶ä¸”åœ¨æœ«å°¾è¿˜å¯ä»¥ä½¿ç”¨ \u0026ldquo;alias åˆ«å\u0026rdquo; æ¥ä¸ºè¿™ä¸ªå·²æ‰“å¼€çš„æ–‡ä»¶èµ·ä¸€ä¸ªåˆ«å. ä¸‹é¢æ˜¯ä¸¤ä¸ªç¤ºä¾‹: 1 2 3 4 // æ–‡ä»¶æ˜¯ C:\\Users\\Null\\Desktop\\Tutorial.wav // è½¬æ¢ä¸ºçŸ­è·¯å¾„æ˜¯ C:\\Users\\Null\\Desktop\\Tut~1.wav mciSendString(@\u0026#34;open C:\\Users\\Null\\Desktop\\Tut~1.wav\u0026#34;, null, 0, IntPtr.Zero); mciSendString(@\u0026#34;open C:\\Users\\Null\\Desktop\\Tut~1.wav alias tutorial\u0026#34;, null, 0, IntPtr.Zero); åœ¨ç¬¬ä¸€çš„ mciSendString ä¸­, å¾ˆæ¸…æ™°æ˜äº†, æ‰“å¼€äº†ä¸€ä¸ªæ–‡ä»¶, è€Œç¬¬äºŒä¸ªä¸­, æˆ‘ä»¬è¿˜åŠ äº†ä¸€ä¸ªalias, å³, åˆ«å, MCIæ”¯æŒä¸ºæ‰“å¼€çš„æ–‡ä»¶èµ·ä¸€ä¸ªåˆ«å, å¹¶ä¸”æ¨èè¿™ä¹ˆåš. ç¬¬äºŒä¸ªç§, æˆ‘ä»¬ä¸ºå®ƒèµ·çš„åˆ«åæ˜¯ tutorial. \u0026gt; æ’­æ”¾éŸ³é¢‘: æ’­æ”¾éŸ³é¢‘çš„ MCI æŒ‡ä»¤æ˜¯ play, ç›´æ¥ \u0026ldquo;play è®¾å¤‡\u0026rdquo; ç¤ºä¾‹: 1 2 mciSendString(@\u0026#34;play C:\\Users\\Null\\Desktop\\Tut~1.wav\u0026#34;, null, 0, IntPtr.Zero); mciSendString(@\u0026#34;play tutorial\u0026#34;, null, 0, IntPtr.Zero); å¦‚æœä½ æ²¡æœ‰ä¸ºæ–‡ä»¶æŒ‡å®šåˆ«å, é‚£ä¹ˆåœ¨ä½¿ç”¨ play æŒ‡ä»¤æ—¶, åªèƒ½æŒ‡å®šçŸ­è·¯å¾„ å¦‚æœä½ ä¸ºæ–‡ä»¶æŒ‡å®šäº†åˆ«å, ç›´æ¥playåŠ ä¸Šåˆ«åå³å¯æ’­æ”¾è¿™ä¸ªæ–‡ä»¶. \u0026gt; é‡å¤æ’­æ”¾éŸ³é¢‘: è¿™é‡Œ, ç”¨åˆ°äº†å‚æ•°, å°±åƒaliasä¸€æ ·, å¯é€‰. é‡å¤æ’­æ”¾è¿˜æ˜¯ä½¿ç”¨çš„playæŒ‡ä»¤. ç¤ºä¾‹: 1 2 mciSendString(@\u0026#34;play C:\\Users\\Null\\Desktop\\Tut~1.wav repeat\u0026#34;, null, 0, IntPtr.Zero); mciSendString(@\u0026#34;play tutorial repeat\u0026#34;, null, 0, IntPtr.Zero); è®¾å¤‡åå¦‚æ—§, å¯ä»¥ç›´æ¥æŒ‡å®šçŸ­è·¯å¾„, ä¹Ÿå¯ä»¥æŒ‡å®šåˆ«å, è€Œæƒ³åšåˆ°é‡å¤æ’­æ”¾, åªéœ€è¦åœ¨æœ€åæŒ‡å®šrepeat \u0026gt; åŒæ­¥æ’­æ”¾éŸ³é¢‘: åŒæ ·æ˜¯å‚æ•°, è¿™é‡Œæ˜¯wait, æ”¯æŒwaitå‚æ•°çš„æŒ‡ä»¤å¯ä»¥åŒæ­¥æ‰§è¡Œ, ä¾‹å¦‚playæŒ‡ä»¤ ç¤ºä¾‹: 1 2 mciSendString(@\u0026#34;play C:\\Users\\Null\\Desktop\\Tut~1.wav wait\u0026#34;, null, 0, IntPtr.Zero); mciSendString(@\u0026#34;play tutorial wait\u0026#34;, null, 0, IntPtr.Zero); æ‰§è¡Œå, å°†ä¼šé˜»å¡å½“å‰ç°æˆ, ç›´è‡³æ’­æ”¾ç»“æŸ. \u0026gt; æš‚åœæ’­æ”¾: æš‚åœ, pause, ç”¨æ³•å¾ˆç®€å•, åŒæ ·æ˜¯ \u0026ldquo;pause è®¾å¤‡\u0026rdquo; ç¤ºä¾‹: 1 2 mciSendString(@\u0026#34;pause C:\\Users\\Null\\Desktop\\Tut~1.wav\u0026#34;, null, 0, IntPtr.Zero); mciSendString(@\u0026#34;pause tutorial\u0026#34;, null, 0, IntPtr.Zero); æ‰§è¡Œå, æ­£åœ¨æ’­æ”¾çš„éŸ³é¢‘å°±ä¼šæš‚åœ. \u0026gt; æ¢å¤æ’­æ”¾: æ¢å¤, resume, è¯­æ³•æ˜¯ \u0026ldquo;resume è®¾å¤‡\u0026rdquo; ç¤ºä¾‹: 1 2 mciSendString(@\u0026#34;pause C:\\Users\\Null\\Desktop\\Tut~1.wav\u0026#34;, null, 0, IntPtr.Zero); mciSendString(@\u0026#34;pause tutorial\u0026#34;, null, 0, IntPtr.Zero); æ‰§è¡Œå, æš‚åœæ’­æ”¾çš„éŸ³é¢‘å°±ä¼šæ¢å¤. \u0026gt; å…³é—­æ–‡ä»¶: å…³é—­, close, è¯­æ³•æ˜¯: \u0026ldquo;close è®¾å¤‡\u0026rdquo; ç¤ºä¾‹: 1 2 mciSendString(@\u0026#34;close C:\\Users\\Null\\Desktop\\Tut~1.wav\u0026#34;, null, 0, IntPtr.Zero); mciSendString(@\u0026#34;close tutorial\u0026#34;, null, 0, IntPtr.Zero); æ‰§è¡Œå, æ–‡ä»¶ä¼šè¢«å…³é—­. å¦‚æœéŸ³é¢‘æ­£åœ¨æ’­æ”¾, åˆ™ä¼šåœæ­¢. \u0026gt; æ”¹å˜æ’­æ”¾ä½ç½®: seek æŒ‡ä»¤, è¿™ä¸ªæŒ‡ä»¤æ¯”è¾ƒå¤æ‚å“¦. è¯­æ³•å¦‚ä¸‹: seek device to position seek device to start seek device to end\nç¤ºä¾‹: 1 2 3 mciSendString(@\u0026#34;seek tutorial to 1000\u0026#34;, null, 0, IntPtr.Zero); mciSendString(@\u0026#34;seek tutorial to start\u0026#34;, null, 0, IntPtr.Zero); mciSendString(@\u0026#34;seek tutorial to end\u0026#34;, null, 0, IntPtr.Zero); çŸ­è·¯å¾„è‚¯å®šæ˜¯èƒ½ç”¨çš„å“¦, æˆ‘åªæ˜¯æ‡’å¾—å†™äº†, è‡³äº \u0026ldquo;seek device to position\u0026rdquo; çš„ç”¨æ³•, å…¶ä¸­positioné»˜è®¤æ˜¯msä¸ºå•ä½çš„æ•´æ•°æ—¶é—´å“¦, ä¹Ÿå°±æ˜¯è¯´, 1000ä»£è¡¨1s. seek çš„å•ä½æ˜¯å¯ä»¥è°ƒæ•´çš„, ç»§ç»­çœ‹å“¦ \u0026gt; è®¾ç½®ç›¸å…³: è®¾ç½®, set, è¿™ä¸ªæ”¯æŒçš„å°±æ›´å¤šäº†\nä»¥ä¸‹æ˜¯é€‚ç”¨äº CD Audio çš„è¯­æ³• : set device time format milliseconds set device time format msf set device time format tmsf\nä»¥ä¸‹æ˜¯é€‚ç”¨äº Wave Audio çš„è¯­æ³• : set device any input set device any output set device channels channel_count set device format tag pcm set device format tag tag set device input integer set device output integer set device time format bytes set device time format milliseconds\né€‰é¡¹ æè¿° time format milliseconds å°†æ—¶é—´æ ¼å¼è®¾ç½®ä¸ºæ¯«ç§’, æ‰€æœ‰ä½¿ç”¨positionå€¼çš„æŒ‡ä»¤éƒ½å°†é‡‡ç”¨æ¯«ç§’ä½œä¸ºå•ä½, ä½ å¯ä»¥å°†millisecondsç¼©å†™ä¸ºms. å¯¹äºéŸ³åºå™¨è®¾å¤‡, time format msf è®¾ç½®æ—¶é—´æ ¼å¼åˆ° åˆ†é’Ÿ, å¦™, ä»¥åŠå¸§. æ‰€æœ‰ä½¿ç”¨positionå€¼çš„æŒ‡ä»¤éƒ½è§é‡‡ç”¨MSFæ ¼å¼(CDéŸ³é¢‘çš„é»˜è®¤æ ¼å¼), è¯·å°†MSFå€¼æŒ‡å®šä¸º mm:ss:ff çš„æ ¼å¼, mmæ˜¯åˆ†é’Ÿ, ssæ˜¯ç§’, ffæ˜¯å¸§. å¦‚æœä¸€ä¸ªå­—æ®µä»¥åŠåé¢çš„å­—æ®µéƒ½æ˜¯0, ä½ å¯ä»¥å¿½ç•¥æ‰å®ƒ. ä¾‹å¦‚, 3, 3:0, 3:0:0 éƒ½æ˜¯è¡¨ç¤º3åˆ†é’Ÿçš„æ­£ç¡®æ–¹å¼. MSFå­—æ®µæœ‰ä»¥ä¸‹æœ€å¤§å€¼, åˆ†é’Ÿ:99, ç§’:59, å¸§: 74. time format tmsf å°†æ—¶é—´æ ¼å¼è®¾ç½®ä¸º éŸ³è½¨, åˆ†é’Ÿ, ç§’, ä»¥åŠå¸§. æ‰€æœ‰ä½¿ç”¨positionå€¼çš„æŒ‡ä»¤éƒ½è§é‡‡ç”¨TMSFæ ¼å¼, é¢, ä¸ä¸Šé¢çš„ä¸€æ ·, åªä¸è¿‡å¤šäº†ä¸ªéŸ³è½¨. éŸ³è½¨çš„æœ€å¤§å€¼æ˜¯99, åˆ†é’Ÿ, ç§’, å¸§çš„æœ€å¤§å€¼ä¸MSFæ ¼å¼ä¸€è‡´. any input å½“å½•åˆ¶æ—¶, ä½¿ç”¨æ‰€æœ‰æ”¯æŒå½“å‰æ ¼å¼çš„è¾“å…¥, è¿™æ˜¯é»˜è®¤è®¾ç½® any output å½“æ’­æ”¾æ—¶, ä½¿ç”¨æ‰€æœ‰æ”¯æŒå½“å‰æ ¼å¼çš„è¾“å‡º, è¿™æ˜¯é»˜è®¤çš„ time format bytes åœ¨ PCM æ–‡ä»¶æ ¼å¼ä¸­, è®¾ç½®æ—¶é—´æ ¼å¼(å•ä½)ä¸ºå­—èŠ‚, æŒ‡å®šè¿™ä¸ªæŒ‡ä»¤å, æ‰€æœ‰positionä¿¡æ¯éƒ½å°†è¢«æŒ‡å®šä¸ºå­—èŠ‚æ ¼å¼ \u0026gt; çŠ¶æ€ä¿¡æ¯: çŠ¶æ€, status, è¯­æ³•: \u0026ldquo;status device option\u0026rdquo;, è¿”å›åˆ° mciSendString å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²ç¼“å†²åŒº\né€‚ç”¨äºéŸ³é¢‘çš„å¸¸ç”¨è¯­æ³•\nstatus device position\nstatus device length\nstatus device mode\nstatus device time format\né€‰é¡¹ æè¿° position è·å–ç›®å‰æ’­æ”¾çš„ä½ç½®å•ä½ä¸æ—¶é—´æ ¼å¼ç»Ÿä¸€ length è·å–å½“å‰æ’­æ”¾éŸ³é¢‘çš„é•¿åº¦ å•ä½ä¸æ—¶é—´æ ¼å¼ç»Ÿä¸€ mode è·å–æ’­æ”¾çŠ¶æ€, è¿”å›çš„å€¼æ˜¯ä»¥ä¸‹å€¼ä¹‹ä¸€: stopped / playing / paused time format è·å–å½“å‰çš„æ—¶é—´æ ¼å¼ 1 2 3 string buffer = new string(\u0026#39;\\0\u0026#39;, 256); // åˆ†é…ä¸€ä¸ªé•¿åº¦çš„å­—ç¬¦ä¸²ç”¨æ¥å­˜æ”¾è¿”å›å€¼ mciSendString(\u0026#34;status tutorial position\u0026#34;, buffer, 256, IntPtr.Zero); // è°ƒç”¨ Console.WriteLine(buffer.TrimEnd(\u0026#39;\\0\u0026#39;)); // æ‰“å°è¿”å›å€¼, TrimEndçš„åŸå› å­—ç¬¦ä¸²çš„æ˜¯é•¿åº¦æ˜¯256, å‡½æ•°æ²¡æœ‰ä½¿ç”¨çš„éƒ¨åˆ†ä»ç„¶æ˜¯ \\0 å­—ç¬¦. \u0026gt; éŸ³é¢‘è®¾ç½® è®¾ç½®éŸ³é¢‘, setaudio, è¯­æ³• \u0026ldquo;setaudio device option\u0026rdquo;\nå¸¸ç”¨è¯­æ³•:\nsetaudio device left volume to factor\nsetaudio device right volume to factor\nsetaudio device volume to factor\né€‰é¡¹ æè¿° left/right volume to factor å°†æŒ‡å®šå£°é“çš„éŸ³é‡è®¾ç½®ä¸ºæŒ‡å®šå€¼ volume to factor å°†éŸ³é‡è®¾ç½®ä¸ºæŒ‡å®šå€¼ é”™è¯¯ç : ä¸‹é¢æ˜¯sendMciStringä¼šè¿”å›çš„é”™è¯¯ç ä»¥åŠæè¿°(å¯¹åç§°ç¿»è¯‘, ç„¶åç¨åŠ æ ¡æ­£), å“¦å¯¹äº†, è¿”å› 0 ä»£è¡¨æ— é”™è¯¯å“¦ é”™è¯¯ç  åç§° æè¿° 257 MCIERR_INVALID_DEVICE_ID æ— æ•ˆè®¾å¤‡ ID 259 MCIERR_UNRECOGNIZED_KEYWORD æœªè¯†åˆ«å…³é”®å­— 261 MCIERR_UNRECOGNIZED_COMMAND æœªè¯†åˆ«çš„å‘½ä»¤ 262 MCIERR_HARDWARE ç¡¬ä»¶ 263 MCIERR_INVALID_DEVICE_NAME æ— æ•ˆçš„è®¾å¤‡åç§° 264 MCIERR_OUT_OF_MEMORY å†…å­˜ä¸è¶³ 265 MCIERR_DEVICE_OPEN è®¾å¤‡æ‰“å¼€ 266 MCIERR_CANNOT_LOAD_DRIVER æ— æ³•åŠ è½½é©±åŠ¨ç¨‹åº 267 MCIERR_MISSING_COMMAND_STRING ç¼ºå°‘å‘½ä»¤å­—ç¬¦ä¸² 268 MCIERR_PARAM_OVERFLOW å‚æ•°æº¢å‡º 269 MCIERR_MISSING_STRING_ARGUMENT ç¼ºå°‘å­—ç¬¦ä¸²å‚æ•° 270 MCIERR_BAD_INTEGER åæ•´æ•° 271 MCIERR_PARSER_INTERNAL åˆ†æå™¨å†…éƒ¨ (ä¼°è®¡æ˜¯è¿™ä¸ªAPIå†…éƒ¨å¯¹æŒ‡ä»¤åˆ†ææ—¶å‡ºç°çš„é”™è¯¯) 272 MCIERR_DRIVER_INTERNAL é©±åŠ¨ç¨‹åºå†…éƒ¨ 273 MCIERR_MISSING_PARAMETER ç¼ºå°‘å‚æ•° 274 MCIERR_UNSUPPORTED_FUNCTION ä¸æ”¯æŒçš„åŠŸèƒ½ 275 MCIERR_FILE_NOT_FOUND æœªæ‰¾åˆ°æ–‡ä»¶ 276 MCIERR_DEVICE_NOT_READY è®¾å¤‡æœªå°±ç»ª 277 MCIERR_INTERNAL å†…éƒ¨ 278 MCIERR_DRIVER é©±åŠ¨å™¨ 279 MCIERR_CANNOT_USE_ALL ä¸èƒ½å…¨éƒ¨ä½¿ç”¨ 280 MCIERR_MULTIPLE å¤šä¸ª 281 MCIERR_EXTENSION_NOT_FOUND æœªæ‰¾åˆ°æ‰©å±• 282 MCIERR_OUTOFRANGE è¶…å‡ºèŒƒå›´ 284 MCIERR_FLAGS_NOT_COMPATIBLE æ ‡å¿—ä¸å…¼å®¹ 286 MCIERR_FILE_NOT_SAVED æ–‡ä»¶æœªä¿å­˜ 287 MCIERR_DEVICE_TYPE_REQUIRED éœ€è¦è®¾å¤‡ç±»å‹ 288 MCIERR_DEVICE_LOCKED è®¾å¤‡å·²é”å®š 289 MCIERR_DUPLICATE_ALIAS é‡å¤åˆ«å 290 MCIERR_BAD_CONSTANT åå¸¸é‡ 291 MCIERR_MUST_USE_SHAREABLE å¿…é¡»ä½¿ç”¨å¯å…±äº« 292 MCIERR_MISSING_DEVICE_NAME ç¼ºå°‘è®¾å¤‡åç§° 293 MCIERR_BAD_TIME_FORMAT é”™è¯¯çš„æ—¶é—´æ ¼å¼ 294 MCIERR_NO_CLOSING_QUOTE æ²¡æœ‰å…³é—­ä¸­çš„å¼•ç”¨ 295 MCIERR_DUPLICATE_FLAGS é‡å¤æ ‡å¿— 296 MCIERR_INVALID_FILE æ— æ•ˆæ–‡ä»¶ 297 MCIERR_NULL_PARAMETER_BLOCK ç©ºå‚æ•°å— 298 MCIERR_UNNAMED_RESOURCE æœªå‘½åçš„èµ„æº 299 MCIERR_NEW_REQUIRES_ALIAS æ–°éœ€è¦åˆ«å 300 MCIERR_NOTIFY_ON_AUTO_OPEN è‡ªåŠ¨æ‰“å¼€æ—¶é€šçŸ¥ 301 MCIERR_NO_ELEMENT_ALLOWED ä¸å…è®¸ä»»ä½•å…ƒç´  302 MCIERR_NONAPPLICABLE_FUNCTION ä¸å¯åº”ç”¨åŠŸèƒ½ 303 MCIERR_ILLEGAL_FOR_AUTO_OPEN éæ³•è‡ªåŠ¨æ‰“å¼€ 304 MCIERR_FILENAME_REQUIRED éœ€è¦æ–‡ä»¶å 305 MCIERR_EXTRA_CHARACTERS é¢å¤–å­—ç¬¦ (å¯èƒ½æ˜¯æŒ‡å¤šå‡ºäº†ä¸€äº›ä¸éœ€è¦çš„å­—ç¬¦) 306 MCIERR_DEVICE_NOT_INSTALLED æœªå®‰è£…è®¾å¤‡ 307 MCIERR_GET_CD è·å– CD 308 MCIERR_SET_CD è®¾ç½® CD 309 MCIERR_SET_DRIVE è®¾ç½®é©±åŠ¨å™¨ 310 MCIERR_DEVICE_LENGTH è®¾å¤‡é•¿åº¦ 311 MCIERR_DEVICE_ORD_LENGTH è®¾å¤‡ ORD é•¿åº¦ 312 MCIERR_NO_INTEGER æ— æ•´æ•° 320 MCIERR_WAVE_OUTPUTSINUSE æ³¢è¾“å‡º 321 MCIERR_WAVE_SETOUTPUTINUSE æ³¢è®¾ç½®è¾“å‡º 322 MCIERR_WAVE_INPUTSINUSE æ³¢è¾“å…¥ä½¿ç”¨ 323 MCIERR_WAVE_SETINPUTINUSE æ³¢è®¾ç½® 324 MCIERR_WAVE_OUTPUTUNSPECIFIED æ³¢è¾“å‡ºæœªæŒ‡å®š 325 MCIERR_WAVE_INPUTUNSPECIFIED æ³¢è¾“å…¥æœªæŒ‡å®š 326 MCIERR_WAVE_OUTPUTSUNSUITABLE æ³¢è¾“å‡ºå¯å±…ä½ 327 MCIERR_WAVE_SETOUTPUTUNSUITABLE æ³¢è®¾ç½®é€šæ™®é€šè¥¿è£… 328 MCIERR_WAVE_INPUTSUNSUITABLE æ³¢è¾“å…¥å¯å±…ä½ 329 MCIERR_WAVE_SETINPUTUNSUITABLE æ³¢è®¾ç½®é€šå›¾é€‚åˆ 336 MCIERR_SEQ_DIV_INCOMPATIBLE Seq Div ä¸å…¼å®¹ 337 MCIERR_SEQ_PORT_INUSE SEQ ç«¯å£ INUSE 338 MCIERR_SEQ_PORT_NONEXISTENT Seq ç«¯å£ä¸å­˜åœ¨ 339 MCIERR_SEQ_PORT_MAPNODEVICE Seq ç«¯å£åœ°å›¾æ— è®¾å¤‡ 340 MCIERR_SEQ_PORT_MISCERROR SEQ æ‚é¡¹é”™è¯¯ 341 MCIERR_SEQ_TIMER SEQ å®šæ—¶å™¨ 342 MCIERR_SEQ_PORTUNSPECIFIED SEQ ç«¯å£æœªæŒ‡å®š 343 MCIERR_SEQ_NOMIDIPRESENT SEQ æ²¡æœ‰MIDIåœ¨åœº 346 MCIERR_NO_WINDOW æ— çª—å£ 347 MCIERR_CREATEWINDOW åˆ›å»ºçª—å£ 348 MCIERR_FILE_READ æ–‡ä»¶è¯»å– 349 MCIERR_FILE_WRITE æ–‡ä»¶å†™å…¥ 350 MCIERR_NO_IDENTITY æ— æ ‡è¯† å°è£…ç±»: å»è¿™é‡Œå§, åœ¨æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ä¸­ [C#] éŸ³ä¹æ’­æ”¾ 3 ç§æ–¹å¼ Demo ä¸ MCI éŸ³ä¹æ’­æ”¾å™¨å°è£…ç±». o(ã€ƒ\u0026rsquo;â–½\u0026rsquo;ã€ƒ)o\né™„åŠ å†…å®¹: ä¸‹é¢æ˜¯æˆ‘çš„ä¸€äº›å‘ç° WinForm ç¨‹åºä½¿ç”¨ MCI æ˜¯å¯ä»¥æ‰“å¼€ MP3 æ–‡ä»¶çš„, ä½†æ˜¯å¦‚æœæ˜¯æ§åˆ¶å°ç¨‹åº, å°±ä¼šå‡ºç°é”™è¯¯, é”™è¯¯ç 266, \u0026ldquo;MCIERR_CANNOT_LOAD_DRIVER\u0026rdquo; MCI çš„æŸäº›æŒ‡ä»¤ä¸èƒ½æ­£å¸¸ä½¿ç”¨, ä½†å…¶å®å¹¶ä¸æ˜¯å¾ˆå½±å“, ä¾‹å¦‚, \u0026ldquo;set device audio left/right off/off\u0026rdquo;, æ— æ³•æ­£å¸¸ä½¿ç”¨. éŸ³é‡æ§åˆ¶æˆ‘ç›®å‰è¿˜æ˜¯æ²¡å¼„æˆ\u0026hellip; ä¸è¿‡å¯ä»¥ç¡®è®¤çš„æ˜¯, è¿›åº¦è·å–, è°ƒæ•´, é•¿åº¦è·å–æ˜¯æ²¡é—®é¢˜çš„, æœ‰è¿™äº›æœ€åŸºæœ¬çš„, å°±å·®ä¸å¤šå…¬ç”¨äº†å‘¢ æ”¾ä¸€å¼ æˆ‘å†™æ–‡ç« æ—¶çš„ç…§ç‰‡å§ , åŸæ–‡è´´çš„å“ªéƒ½æ˜¯ (ç¬‘\n","date":"2021-02-11T10:21:11+08:00","permalink":"https://slimenull.com/p/20210211102111/","title":"[C#] MCI è¯¦è§£ä¸å°è£…ç±», MCI æ’­æ”¾éŸ³ä¹, è·å–æ’­æ”¾çŠ¶æ€, è·å–éŸ³é¢‘é•¿åº¦, è¿›åº¦è°ƒæ•´,"},{"content":"è¯´ç‚¹éªšè¯: è½¬æ¢éœ€è¦ç”¨åˆ° Windows API (åºŸè¯)\nå®˜æ–¹æ–‡æ¡£: GetShortPathNameW function (fineapi.h) - Win32 apps | Microsoft docs (çº¯è‹±æ–‡, æ²¡æœ‰ä¸­æ–‡ç‰ˆæœ¬.)\nå¼•ç”¨å‘½åç©ºé—´: 1 using System.Runtime.InteropServices; å…³é”®ä»£ç : csharp 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 [DllImport(\u0026#34;kernel32.dll\u0026#34;, EntryPoint = \u0026#34;GetShortPathNameW\u0026#34;, CharSet = CharSet.Unicode)] extern static short GetShortPath(string longPath, string buffer, int bufferSize); // è·å–è½¬æ¢æ‰€éœ€è¦çš„ç¼“å†²åŒºå¤§å° bool TryGetConvertBufferSize(string longPath, out short size) { size = GetShortPath(longPath, null, 0); return size != 0; } // è¿›è¡Œè½¬æ¢ bool TryGetShortPath(string longPath, out string shortPath, int bufferSize = 256) { string resultBuffer = new string(\u0026#39;\\0\u0026#39;, bufferSize); // 256 å¤§æ¦‚åˆé€‚, æ ¹æ®éœ€æ±‚è°ƒæ•´å§ short rstLen = GetShortPath(longPath, resultBuffer, bufferSize); if (rstLen != 0 \u0026amp;\u0026amp; rstLen != bufferSize) { shortPath = resultBuffer.TrimEnd(\u0026#39;\\0\u0026#39;); return true; } else { shortPath = null; return false; } } C++ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 long length = 0; TCHAR* buffer = NULL; // åˆæ¬¡é€šè¿‡ä¼ é€’NULLå’Œ0æ¥è·å–æ‰€éœ€ç©ºé—´ length = GetShortPathName(lpszPath, NULL, 0); if (length == 0) ErrorExit(TEXT(\u0026#34;GetShortPathName\u0026#34;)); // åŠ¨æ€åˆ†é…å‡†ç¡®çš„å†…å­˜ buffer = new TCHAR[length]; // ç°åœ¨, ä½¿ç”¨åŒä¸€ä¸ªé•¿è·¯å¾„æ¥ç®€å•è°ƒç”¨å‡½æ•°å§ length = GetShortPathName(lpszPath, buffer, length); if (length == 0) ErrorExit(TEXT(\u0026#34;GetShortPathName\u0026#34;)); _tprintf(TEXT(\u0026#34;long name = %s shortname = %s\u0026#34;), lpszPath, buffer); delete [] buffer; æ›´å¤šè¯´æ˜: å†…å®¹ 1: å¦‚æœè®¾ç½®äº† buffer, ä¸ bufferSize, å‡½æ•°ä¼šå°è¯•è½¬æ¢é•¿è·¯å¾„åˆ°çŸ­è·¯å¾„, å¦‚æœè¿”å›çš„æ•°å­—ä¸ bufferSize ä¸€è‡´, åˆ™è¡¨ç¤ºç¼“å†²åŒº(buffer)å¤ªå°.\nå¦‚æœ buffer è¢«è®¾ä¸º null, bufferSize è¢«è®¾ä¸º 0, åˆ™è¿”å›å€¼å°†è¿”å›æ‰€éœ€è¦çš„ç¼“å†²åŒºå¤§å°.\næ— è®ºå¦‚ä½•, å¦‚æœè¿”å›å€¼æ˜¯ 0, åˆ™è¡¨ç¤ºå‡½æ•°ç”±äºæŸäº›åŸå› , æœªèƒ½æˆåŠŸæ‰§è¡Œ.\nè·å–æ›´å¤šçš„é”™è¯¯ä¿¡æ¯, è¯·è°ƒç”¨ CallLastError\nåŸæ–‡:\nIf the function succeeds, the return value is the length, in TCHARs, of the string that is copied to lpszShortPath, not including the terminating null character. If the lpszShortPath buffer is too small to contain the path, the return value is the size of the buffer, in TCHARs, that is required to hold the path and the terminating null character. If the function fails for any other reason, the return value is zero. To get extended error information, call GetLastError.\nå†…å®¹ 2: åœ¨è¿™ä¸ªå‡½æ•°(GetShortPathName)çš„ ANSI ç‰ˆæœ¬ä¸­, è·¯å¾„é•¿åº¦è¢«é™åˆ¶åœ¨ MAX_PATH(260) ä¸ªå­—ç¬¦. è¦æ‹“å±•è¿™ä¸ªé™åˆ¶åˆ° 23767 å®½å­—ç¬¦(wide character), è¯·è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„ Unicode ç‰ˆæœ¬, å¹¶ä¸”åœ¨è·¯å¾„çš„é¦–éƒ¨åŠ ä¸Š \u0026ldquo;\\\\?\\\u0026rdquo;. æ›´å¤šä¿¡æ¯, è¯·æŸ¥é˜… æ–‡ä»¶, è·¯å¾„, ä»¥åŠå‘½åç©ºé—´çš„å‘½å åŸæ–‡:\nIn the ANSI version of this function, the name is limited to MAX_PATH characters. To extend this limit to 32,767 wide characters, call the Unicode version of the function and prepend \u0026ldquo;\\?\u0026quot; to the path. For more information, see Naming Files, Paths, and Namespaces.\nå†…å®¹ 3: å…³äº Windows API å‡½æ•°çš„ Unicode ç‰ˆæœ¬å’Œ ANSI ç‰ˆæœ¬çš„åŒºåˆ«, å¯å‚é˜…: Windows API å‡½æ•°åç¼€çš„ä½œç”¨\n","date":"2021-02-09T08:05:35+08:00","permalink":"https://slimenull.com/p/20210209080535/","title":"[C#/C/C++] GetShortPathNameè¯¦è§£, é•¿è·¯å¾„è½¬æ¢ä¸ºçŸ­è·¯å¾„"},{"content":"æ¨èæ–¹æ³•: 1. Environment.GetCommandLineArgs(); 1 2 using System; Environment.GetCommandLineArgs(); // è¿”å› string[] æ³¨æ„, ä¸æ§åˆ¶å°ç¨‹åºå…¥å£å¤„çš„string[] argsç›¸æ¯”è¾ƒ, è¿™ä¸ªå‡½æ•°è¿”å›çš„ç»“æœæ˜¯å®Œæ•´çš„å‘½ä»¤è¡Œ, ä¹Ÿå°±æ˜¯åŒ…å«ç¨‹åºè‡ªèº«è·¯å¾„. ä¾‹å¦‚æˆ‘ä¸€ä¸ªæ²¡æœ‰ä¼ é€’ä»»ä½•å‚æ•°çš„ç¨‹åº:\næ‰€ä»¥æ³¨æ„åŒºåˆ†å“¦.\nå…¶ä»–: WinForm åœ¨ Program.cs çš„ Main å…¥å£å‚æ•°å¤„æ·»åŠ  string[] args, ç„¶åä½ å¯ä»¥æ›´æ”¹çª—ä½“çš„æ„é€ å‡½æ•°, ä½¿å…¶èƒ½å¤Ÿæ¥æ”¶è¿™ä¸ªargs. WPF æš‚æ—¶ä¸çŸ¥é“. ","date":"2021-02-09T03:04:19+08:00","permalink":"https://slimenull.com/p/20210209030419/","title":"[C#] WinForm ä¸ WPF è·å–å‘½ä»¤è¡Œå‚æ•°"},{"content":"äº‹ä»¶: é¦–å…ˆ, è¯­è¨€æ˜¯C#, ç„¶åæˆ‘æŠŠä»£ç ç»™åˆ äº†\u0026hellip; ä½†æ˜¯åœ¨åˆ ä¹‹å‰, æˆ‘ç¼–è¯‘è¿‡ä¸€æ¬¡, æ‰€ä»¥\u0026hellip; æˆ‘å°±æƒ³ç€ä½¿ç”¨åç¼–è¯‘å·¥å…·æ¥æäº†.\næˆ‘çŸ¥é“çš„åç¼–è¯‘å·¥å…·, dnSply, ILSpy, dotPeek\ndnSpyæ˜¯ILSpyçš„ä¸€ä¸ªåˆ†æ”¯(dnSpy is a .NET assembly editor, decompiler, and debugger forked from ILSpy)\ndotPeek æ˜¯ JetBrains çš„åç¼–è¯‘å·¥å…·, åœ¨è¿™ä¹‹å‰æˆ‘è¿˜æ²¡ä½¿ç”¨è¿‡.\nå¼€å§‹å§: \u0026gt; é¦–å…ˆ, æ˜¯ dnSpy ä¸Šåœº: ä¹ä¸€çœ‹, æ²¡å•¥é—®é¢˜, ä½†æ˜¯, ä¼šæœ‰å¾ˆå¤šæ¯›ç—…å“¦~ ä¸€ä¸€é“æ¥å§:\ndnSpy çš„åç¼–è¯‘ç»“æœ, ä¼¼ä¹ä¸ä¼šå§å­—æ®µå’Œæ–¹æ³•æ”¾åœ¨ä¸€èµ·, æˆ‘ä¹Ÿæ²¡æ‰¾åˆ°å®ƒåç¼–è¯‘çš„å­—æ®µå®šä¹‰è·‘å“ªå»äº†\u0026hellip; ä¼šæœ‰ä¸€å¤§å †å¥‡æ€ªä»£ç , è·Ÿæˆ‘ä»¬æƒ³è¦çš„æºä»£ç å®Œå…¨ä¸ä¸€è‡´, å³ä¾¿å¯¼å‡ºä¸ºé¡¹ç›®, ä¹Ÿä¼šæœ‰æ— æ•°ä¸ªé”™è¯¯ æ€»ä¹‹, dnSpyæ˜¯ä¸ªåç¼–è¯‘çš„å¥½å·¥å…·, ä½†è¿˜ä¸èƒ½å¤Ÿå®Œå…¨è·å–æºä»£ç \u0026hellip; æ€»ä¹‹å…ˆå¯¼å‡ºä¸€ä¸‹å§, é€‰ä¸­ä½ çš„é¡¹ç›®, ç„¶åç¨‹åºå·¦ä¸Šè§’, æ–‡ä»¶(File) -\u0026gt; å¯¼å‡ºä¸ºé¡¹ç›®(Export to project)\nç„¶åå°±æ˜¯\u0026hellip; æƒ¨ä¸å¿ç¹\u0026hellip; å·¦ä¸‹è§’çš„é”™è¯¯æ•°é‡ 99+ äº†å·²ç», å®Œå…¨æ²¡æœ‰çº é”™çš„å¿…è¦. \u0026gt; ç„¶å, å°±æ˜¯ ILSpy ä¸Šåœºäº†: å—¯å¥½å§, æˆ‘æ‰¿è®¤ ILSpy æ²¡æœ‰ dnSpy å¥½çœ‹, ä½†è¿™å¯ä¸æ˜¯å†³å®šå®åŠ›çš„ç¬¬ä¸€è¦ç´ .\nä½ çœ‹åˆ°äº†, æšä¸¾, å­—æ®µ, æ–¹æ³•, ä¸€åˆ‡éƒ½äº•ç„¶æœ‰åº ä»”ç»†çœ‹çœ‹, ä¸­é—´çš„é‚£ä¸ª switch è¯­å¥, ç§ç§! è¿™ä¸æ˜¯ C#8 çš„æ–°è¯­æ³•å˜›! (æˆ‘å½“åˆæ²¡æœ‰ä½¿ç”¨è¿™ä¸ªè¯­æ³•å“¦) å®Œå…¨æ²¡æœ‰ä»»ä½•å¥‡æ€ªçš„å˜é‡å é‚£ä¹ˆæˆ‘ä»¬å°è¯•å¯¼å‡ºé¡¹ç›®å§! åœ¨å·¦ä¾§é€‰ä¸­é¡¹ç›®, å³å‡», é€‰æ‹© Save Code ä»¥å¯¼å‡ºé¡¹ç›®\næ„ŸåŠ¨ä¸–ç•Œ!!! æ²¡æœ‰ä»»ä½•é”™è¯¯! éå¸¸éå¸¸éå¸¸å®Œç¾~ \u0026gt; å†è¯•è¯• dotPeak: å“¦è±, çœ‹æ ·å­, ä¹Ÿä¸é”™å•Š.\ndotPeek æ²¡æœ‰åƒ ILSpy é‚£æ ·å°† switch è¿˜åŸä¸º C#8 çš„è¯­æ³•, è€Œæ˜¯ä½¿ç”¨çš„æ—§çš„è¯­æ³• æ²¡æœ‰å¥‡æ€ªçš„å˜é‡å, å¥‡æ€ªçš„è¯­æ³• å‡ºç°äº†æˆ‘æ²¡æœ‰å†™è¿‡çš„ä¸œè¥¿, æ ‡ç­¾ å¯¼å‡ºé¡¹ç›®å’¯, ç›´æ¥å³å‡»é¡¹ç›®, ç„¶å Export to Project\nå””, ä¸€å¼€å§‹å°±ä¸ä¼—ä¸åŒå‘¢\u0026hellip; è·Ÿæ™®é€šçš„é¡¹ç›®å®Œå…¨ä¸ä¸€æ ·, å°‘äº†ä¸€äº›æ–‡ä»¶å¤¹\u0026hellip;\nå˜›, æ€»ä¹‹å…ˆè¯•ç€æ‰“å¼€å§. æœç„¶åœ¨VSé‡Œé¢ä¸€çœ¼å°±èƒ½çœ‹å‡ºé”™è¯¯äº†! å®ƒå±…ç„¶åœ¨æœ¬åœ°æ–¹æ³•çš„å‰å¤´ä¸­åŠ äº†static\u0026hellip; å¥½å§å¥½å§, æˆ‘çŸ¥é“å®ƒä»¬æœ¬è´¨ä¸Šæ˜¯é™æ€çš„, ä½†ä½ è¿™ä¹ˆå¼„, æˆ‘å¯å°±ä¸èƒ½ç¼–è¯‘äº†å‘€. (å‡è®¾æˆ‘å¾ˆæ‡’, æ‡’åˆ°è¿è¿™ä»…æœ‰çš„ä¸€ä¸ªé”™è¯¯ä¹Ÿä¸æ„¿æ„æ”¹)\næ€»ç»“: å¦‚æœè¯´æˆ‘å¹³å¸¸ä½¿ç”¨, æˆ‘è‚¯å®šä¼šç”¨ dnSpy (é¢œå€¼é«˜), æ¯•ç«Ÿå¹³å¸¸è¿˜æ˜¯å¾ˆå°‘æ”¹æºä»£ç ç”šè‡³å¯¼å‡ºä¸ºé¡¹ç›®æ»´, å¦‚æœæ˜¯åƒè¿™æ¬¡çš„ç‰¹æ®Šæƒ…å†µ, æˆ‘å°±ä¼šç”¨ ILSpy, å¾ˆå¼ºå¤§çš„æœ‰æœ¨æœ‰? è‡³äº dotPeek, æ‰“å…¥å†·å®«äº†, è€Œä¸”åŠ è½½é€Ÿåº¦æ…¢çš„ä¸€æ‰¹,,, ç­‰å®ƒå¯åŠ¨å®Œ, é»„èŠ±èœéƒ½å‡‰äº†.\nä¹Ÿç®—æ˜¯å¤§æˆåŠŸäº†, æ‰€ä»¥,,, å¦‚æœæƒ³è¦é€šè¿‡åç¼–è¯‘æ¥æŒ½å›åˆ æ‰çš„æ–‡ä»¶, é‚£ä¹ˆè¯·ä½¿ç”¨ ILSpy å§! ç»è¿‡è¿™ä¸€æ¬¡ä½¿ç”¨, æˆ‘ä¹Ÿæ˜¯çˆ±ä¸Š ILSpyäº†, æ¯•ç«Ÿä¸€å¼€å§‹æˆ‘æ²¡æŠ¥æœ‰è¿™ä¹ˆå¤§å¸Œæœ›.\nå¦‚æœä½ è§‰å¾—æœ‰ä»€ä¹ˆæ”¹è¿›çš„, æˆ–è€…æœ‰ä»€ä¹ˆä¸‹æœŸæ–‡ç« çš„å»ºè®®, è¯„è®ºåŒºè§ovo\n","date":"2021-02-06T01:24:02+08:00","permalink":"https://slimenull.com/p/20210206012402/","title":"[è¸©å‘è®°å½•] C# æºä»£ç è¢«è¯¯åˆ , é€šè¿‡åç¼–è¯‘ä¹‹å‰ç¼–è¯‘å¥½çš„æ–‡ä»¶æ¥æ‹¯æ•‘è¿™ä¸€åˆ‡, ä¸‰æ¬¾åç¼–è¯‘å·¥å…·å¯¹æ¯”"},{"content":"é—®é¢˜: æ­£å¦‚æ ‡é¢˜æè¿°, æ˜¯æŸä¸ªè¯­æ³•åœ¨ä½ç‰ˆæœ¬ä¸­ä¸å—æ”¯æŒ, åªéœ€è¦å‡çº§åˆ°é«˜ç‰ˆæœ¬å³å¯.\næ­¥éª¤: \u0026gt; ç¬¬ä¸€ç§ : ä½¿ç”¨å¿«æ·é”® Alt + Enter æˆ–ç‚¹å‡»é»„è‰²çš„çš„æç¤ºè°ƒå‡ºå¿«é€Ÿæ“ä½œ 2. é€‰æ‹© å°†è¯¥é¡¹ç›®å‡çº§ä¸º C# è¯­è¨€ç‰ˆæœ¬ \u0026ldquo;8.0\u0026rdquo; \u0026gt; å¦‚æœæ²¡æœ‰è¿™ä¸€é€‰é¡¹, ç»§ç»­çœ‹ç¬¬äºŒç§.\n\u0026gt; ç¬¬äºŒç§ : æ‰“å¼€é¡¹ç›®æ‰€åœ¨ç›®å½•å¹¶æ‰“å¼€é¡¹ç›®æ–‡ä»¶. 2. åœ¨ PropertyGroup èŠ‚ç‚¹ä¸‹æ·»åŠ  LangVersion, å¦‚å›¾:\nç¬¬äºŒç§å…¶å®å°±æ˜¯é€šè¿‡æ›´æ”¹ csproj æ–‡ä»¶å†…å®¹æ¥ç½®é¡¶æ‰€ä½¿ç”¨çš„è¯­è¨€ç‰ˆæœ¬, æŸäº›æ—¶å€™å¯èƒ½åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æ²¡æœ‰ LangVerison èŠ‚ç‚¹, å°±å¯¼è‡´äº†å¿«é€Ÿæ“ä½œä¸­æ²¡æœ‰ \u0026ldquo;å‡çº§é¡¹ç›®ç‰ˆæœ¬\u0026rdquo; çš„é€‰é¡¹, è¿™æ—¶å°±éœ€è¦æ‰‹åŠ¨æ”¹æ–‡ä»¶äº†\n\u0026gt; ç¬¬ä¸‰ç§ : åœ¨ Visual Studio ä¸­å³å‡»ä½ çš„é¡¹ç›®, é€‰æ‹© \u0026lsquo;å¸è½½é¡¹ç›®\u0026rsquo; å³å‡»é¡¹ç›®, ç‚¹å‡» \u0026lsquo;ç¼–è¾‘é¡¹ç›®æ–‡ä»¶\u0026rsquo; ç„¶åæŒ‰ç…§ç¬¬äºŒç§æ–¹å¼, ç›´æ¥åœ¨ PropertyGroup ä¸‹é¢æ·»åŠ  LangVersion ä¸º latest ç¼–è¾‘å®Œä¹‹å, å³å‡»é¡¹ç›®, ç‚¹å‡» \u0026lsquo;é‡æ–°åŠ è½½é¡¹ç›®\u0026rsquo; æ¸©é¦¨æç¤º Visual Studio çš„é¡¹ç›®é»˜è®¤å­˜å‚¨ç›®å½•æ˜¯: %UserProfile%\\source\\repos, ç›´æ¥åœ¨æ–‡ä»¶èµ„æºç®¡ç†å™¨çš„è·¯å¾„æ è¾“å…¥è¿™ä¸ªå°±å¯ä»¥è·³è½¬, å¦‚æœä½ ä¸çŸ¥é“ %UserProfile% æ˜¯ä»€ä¹ˆæ„æ€, ä½ å¯ä»¥åœ¨ç½‘ä¸Šæœç´¢ \u0026lsquo;Windows ç¯å¢ƒå˜é‡\u0026rsquo;, æˆ–è€…å¦‚æœæƒ³çœ‹æˆ‘å†™çš„æ–‡ç« , åœ¨è¯„è®ºåŒºè¯„è®ºå°±å½³äºå’¯ åœ¨ Visual Studio ä¸­, å³å‡»é¡¹ç›®, å¯ä»¥æ‰“å¼€é¡¹ç›®æ‰€åœ¨æ–‡ä»¶å¤¹, \u0026lsquo;åœ¨ Explorer ä¸­æ‰“å¼€ç›®å½•\u0026rsquo; æˆ–è€… \u0026lsquo;åœ¨æ–‡ä»¶èµ„æºç®¡ç†å™¨ä¸­æ‰“å¼€ç›®å½•\u0026rsquo;, æ‰€ä»¥ä¸è¦å†é—®æˆ‘æ‰¾ä¸åˆ°è¯¥æ€ä¹ˆåŠå•¦ æœ‰çš„é¡¹ç›®ä¸­å¯èƒ½ä½ å¹¶ä¸èƒ½æ‰¾åˆ° PropertyGroup, æ²¡å…³ç³», è‡ªå·±æ·»åŠ ä¸€ä¸ªä¹Ÿå½³äº, åæ­£ Visual Studio éƒ½èƒ½æ­£å¸¸è¯»å–çš„, ä½†ä½ å¾—ä¿è¯ PropertyGroup æ˜¯åœ¨æœ€å¤–å±‚çš„å™¢ å¦‚æœè¿˜æ˜¯æ²¡èƒ½è§£å†³ä½ çš„é—®é¢˜, éº»çƒ¦åœ¨ä¸‹é¢è¯„è®ºä¸‹, è¿™æ ·æˆ‘å¯ä»¥æœå¯»æ›´å¤šç­”æ¡ˆä»¥ä¿®æ”¹è¿™è¾¹æ–‡ç« . å¦‚æœè§£å†³äº†, å°±ç‚¹ä¸ªèµå§ (å‘å¾®ovo)\n","date":"2021-02-06T00:26:32+08:00","permalink":"https://slimenull.com/p/20210206002632/","title":"[è¸©å‘è®°å½•] æŸåŠŸèƒ½åœ¨C#7.3ä¸­ä¸å¯ç”¨,è¯·ä½¿ç”¨ 8.0 æˆ–æ›´é«˜çš„è¯­è¨€ç‰ˆæœ¬ (é€šç”¨è§£å†³æ–¹æ¡ˆ)"},{"content":"ä»æ ¹éƒ¨æ²»ç†, æ‹’ç»æµæ°“è½¯ä»¶: å¹¿å‘Šå¼¹çª—å•Š, æ— éæ˜¯ç”¨äº†æµæ°“è½¯ä»¶. æ‰€ä»¥è¯´, å°‘ç”¨æµæ°“è½¯ä»¶, è‡³äºå“ªäº›æ˜¯æµæ°“è½¯ä»¶, æ€æ¯’è½¯ä»¶æˆ‘ä»æ¥æ²¡ç”¨è¿‡(åªç”¨Windows Defender). è‡³äºå…¶å®ƒçš„, èƒ½å°‘ç”¨å›½å†…çš„å°±å°‘ç”¨(å¿ å‘Š), æ¯•ç«ŸæŸäº›å‚å•†çš„å°¿æ€§, å’±éƒ½æ‡‚. ç„¶å, å°±æ˜¯æ†ç»‘, è¿™ä¸ªå¾ˆç®€å•, å…¶å®åŸå› å°±æ˜¯ä½ ä½¿ç”¨äº†æ‰€è°“çš„\u0026quot;é«˜é€Ÿä¸‹è½½å™¨\u0026quot;, è€Œé‚£äº›\u0026quot;é«˜é€Ÿä¸‹è½½å™¨\u0026quot;åœ¨ä½ ç”µè„‘ä¸Šå®‰è£…äº†ä¸€å †ä½ ä¸éœ€è¦çš„è½¯ä»¶, è€Œé¿å…æ–¹å¼å°±æ˜¯, æ°¸è¿œä¸ä½¿ç”¨é«˜é€Ÿä¸‹è½½, åªé€‰æ‹©æœ¬åœ°ä¸‹è½½æˆ–è€…åœ°å+è¿è¥å•†çš„ä¸‹è½½æŒ‰é’®. ä¾‹å¦‚, ä¸Šæµ·ç”µä¿¡ä¸‹è½½.\nè¿˜æœ‰å°±æ˜¯, XXXä¸‹è½½ç«™, XXXè½¯ä»¶å›­, è¿™äº›åœ°æ–¹å°‘å», ä¸‹è½½è½¯ä»¶è¿˜æ˜¯å»å®˜æ–¹ç½‘ç«™æ¯”è¾ƒå¥½.\nç„¶åå°±æ˜¯æµæ°“è½¯ä»¶äº†, å›½å†…æœ€å¤§çš„æµæ°“, è«è¿‡äºæ€æ¯’è½¯ä»¶äº†, æ‰€ä»¥, æŠŠä½ çš„360, ç”µè„‘ç®¡å®¶, é‡‘å±±æ¯’éœ¸, é²å¤§å¸ˆå…¨éƒ¨å¸è½½äº†å§. å¦‚æœæ˜¯ç«ç»’å€’æ˜¯å¯ä»¥ç•™ç€, è¿™ä¸ç®—æ˜¯æµæ°“, ä¸è¿‡æ„ä¹‰ä¹Ÿä¸å¤§å°±æ˜¯äº†.\nç„¶åå°±æ˜¯å…¶å®ƒçš„æµæ°“, WinRAR, Flash player, WPSä¹‹ç±»çš„, WinRARå’ŒFlash Playerå»ºè®®ç›´æ¥å¸è½½, WPSçœ‹å¯ä»¥é€šè¿‡æ§åˆ¶é¢æ¿çš„\u0026quot;å¸è½½æˆ–æ›´æ”¹\u0026quot;æ¥å…³æ‰å¹¿å‘Š, è¿™ä¸ªéšä¾¿ä¸€æœç´¢å°±èƒ½æ‰¾åˆ°.\næ›¿ä»£å“: æ—¢ç„¶è¯´äº†ä¸ä½¿ç”¨æµæ°“è½¯ä»¶, è‚¯å®šå°±è¿˜æœ‰æ¨èçš„è½¯ä»¶çš„.\næ€æ¯’è½¯ä»¶, ä¸€èˆ¬æ˜¯ä¸éœ€è¦çš„, é™¤éä½ å¤©å¤©æµè§ˆå¥‡æ€ªçš„ç½‘ç«™\u0026hellip; ä½†å³ä¾¿é‚£æ ·, Windows Defender ä¹Ÿå¤Ÿç”¨.\nè¾“å…¥æ³•. ä¸è¦ç”¨æœç‹—è¾“å…¥æ³•! ä¸è¦ç”¨æœç‹—è¾“å…¥æ³•! ä¸è¦ç”¨æœç‹—è¾“å…¥æ³•! è¿™ä¸œè¥¿å¹¿å‘Šå¤šçš„ä¸€æ‰¹\u0026hellip; æˆ‘è·Ÿä½ è®²å™¢, windowsæ˜¯æœ‰è‡ªå¸¦çš„ä¸­æ–‡è¾“å…¥æ³•çš„, è¿æ—¥æ–‡ä»¥åŠå…¶ä»–è¯­è¨€ä¹Ÿæœ‰\u0026hellip; æ‰€ä»¥å®Œå…¨æ²¡å¿…è¦å®‰è£…å¤šä½™çš„è¾“å…¥æ³•. åœ¨ è®¾ç½® -\u0026gt; æ—¶é—´å’Œè¯­è¨€ -\u0026gt; è¯­è¨€ ä¸­æ·»åŠ ä¸­æ–‡, ç„¶åç‚¹å‡»ä¸­æ–‡, ç‚¹å‡»é€‰é¡¹, åœ¨ä¸‹é¢çš„é”®ç›˜é‚£é‡Œ, æ·»åŠ ä¸€ä¸ªé”®ç›˜, å¾®è½¯æ‹¼éŸ³, å¦‚æœå·²ç»æœ‰äº†å°±ä¸éœ€è¦æ·»åŠ . è¯­è¨€å’Œé”®ç›˜æ·»åŠ å®Œæ¯•å, å°±å¯ä»¥é€šè¿‡ Win + ç©ºæ ¼ é”®æ¥åˆ‡æ¢è¯­è¨€, å“¦å¯¹äº†, å¦‚æœä½ æœ‰ä¸€ä¸ª è‹±æ–‡è¯­è¨€, ä¼šå¥½å¾ˆå¤šå™¢. Ctrl + Shift æ˜¯åˆ‡æ¢åŒä¸€ä¸ªè¯­è¨€å†…çš„ä¸åŒé”®ç›˜(è¾“å…¥æ³•), Win + ç©ºæ ¼ æ˜¯ç›´æ¥åˆ‡æ¢è¯­è¨€, è¿™ä¸ªè¦çŸ¥é“.\nå‹ç¼©åŒ…ç®¡ç†è½¯ä»¶, ä¸ä½¿ç”¨WinRAR, ä¹Ÿä¸ä½¿ç”¨å¥½å‹ä»€ä¹ˆçš„è½¯ä»¶, ä½ å¯ä»¥ä½¿ç”¨7zip, Bandzip, æˆ–è€…360å‹ç¼©çš„å›½é™…ç‰ˆ.\næµè§ˆå™¨, ä¸è¦ä½¿ç”¨360çš„ä»»ä½•ä¸€æ¬¾æµè§ˆå™¨,,, å› ä¸ºå®ƒæœ¬èº«å°±æœ‰å†…ç½®å¹¿å‘Š\u0026hellip; è¿˜æœ‰å¾ˆå¤šæµè§ˆå™¨æ‰“çš„ä»€ä¹ˆåŒæ ¸çš„å¹Œå­, å…¶å®åŒæ ¸å°±æ˜¯Chromiumæ ¸+IEæ ¸, ç°åœ¨IEæ ¸å¿ƒå·²ç»æ²¡å•¥ä¹±ç”¨äº†. æ‰€ä»¥, è€è€å®å®ç”¨ç³»ç»Ÿè‡ªå¸¦çš„Edge, å¦‚æœä½ æ˜¯Win7, å°±å»æœç´¢Edge, ç„¶åå»å®˜ç½‘ä¸‹è½½. æˆ–è€…, ä½ ä¹Ÿå¯ä»¥ç”¨ Chrome, Firefox, ä¸è¿‡æ®æˆ‘æ‰€çŸ¥, æ–°Edgeè·ŸChromeæ˜¯ä¸€ä¸ªæ ¸å¿ƒçš„, å¹¶ä¸”Edgeä¼˜åŒ–äº†å†…å­˜å ç”¨, æ›´æ¨èEdge.\nç„¶åæ˜¯å³æ—¶é€šè®¯è½¯ä»¶, ä¸æ¨èä½¿ç”¨QQ, å› ä¸ºè¿™ç©æ„å„¿ä¹Ÿæœ‰å¼¹çª—å¹¿å‘Š, å¹¶ä¸”æ˜¯å…³ä¸æ‰çš„, æ¨èä½¿ç”¨TIM, ä¸ç”¨æ‹…å¿ƒ, TIMæ˜¯QQçš„åŠå…¬ç‰ˆæœ¬, ä¸QQçš„æ•°æ®æ˜¯åŒæ­¥çš„, è€Œä¸”æ›´ä¸ºç®€æ´æ–¹ä¾¿, æ‰€ä»¥, éå¸¸æ¨èå“¦, æœç´¢TIMå°±èƒ½æ‰¾åˆ°å®˜ç½‘äº†\nç„¶åå°±æ˜¯,,, å¨±ä¹? è…¾è®¯è§†é¢‘, çˆ±å¥‡è‰º, ä¼˜é…·, è¿™äº›è½¯ä»¶æˆ‘æ˜¯ä¸ç”¨çš„, å¹¶ä¸”ä¹Ÿä¸æ¨èä½¿ç”¨. æˆ‘çœ‹è§†é¢‘æ¶ˆé£ä¸€å‘æ˜¯å“”å“©å“”å“©(ç½‘é¡µ, ä¸”æ— ä»»ä½•è§†é¢‘å¹¿å‘Š, æ²¡é”™, æ²¡æœ‰è§†é¢‘å¹¿å‘Š!)\néŸ³ä¹çš„è¯, æˆ‘æ˜¯ç”¨çš„ç½‘æ˜“äº‘éŸ³ä¹, æ²¡å‘ç°ä»€ä¹ˆæµæ°“è¡Œä¸º.\nç„¶åæ˜¯åŠå…¬è½¯ä»¶, å¦‚æœä½ æ˜¯ä½¿ç”¨çš„WPS, æ¨èä½ æ›´æ¢ä¸ºOffice, åªè¦ä½ ç”µè„‘æ˜¯æ•´æœºè´­ä¹°çš„, å¤§å¤šéƒ½æ˜¯å¸¦æœ‰Officeçš„, Officeæ¯”WPSæµç•…å¾ˆå¤šå‘¢. å¦‚æœä½ ç”¨ä¹ æƒ¯äº†WPS, ä¸æ„¿æ›´æ¢, å¹¶ä¸”å¿å—ä¸äº†å®ƒçš„å¹¿å‘Šå¼¹çª—, é€šè¿‡æ§åˆ¶é¢æ¿, ç„¶åç‚¹å¸è½½WPS(å…¶å®æ˜¯\u0026quot;æ›´æ”¹æˆ–å¸è½½\u0026quot;), é‡Œé¢æ˜¯å¯ä»¥é…ç½®å¹¿å‘Šå¼¹çª—çš„\nå¦‚æœé‡åˆ°å¹¿å‘Šå¼¹çª—? è¿™é‡Œå‘¢, å†å®‰åˆ©ä¸€ä¸ªè½¯ä»¶, å«åšProcess Explorer, é‡Œé¢æœ‰ä¸ªåŠŸèƒ½, å¯ä»¥é€šè¿‡çª—å£æ¥æŸ¥æ‰¾è¿›ç¨‹, æ“ä½œéå¸¸çš„ç®€å•, ä½ å‘¢, åœ¨ç½‘ä¸Šç¨å¾®æœç´¢ä¸€ä¸‹ä½¿ç”¨æ•™ç¨‹, å°±å½³äº, é€šè¿‡å®ƒ, ä½ å¯ä»¥å¾ˆè½»æ˜“çš„æ‰¾åˆ°è¿™ä¸ªå¹¿å‘Šçš„ä¸»ç¨‹åº. æœ€å, çœ‹çœ‹ä½ æ˜¯å¦è®¤è¯†ä»–, å¦‚æœè®¤è¯†,,, å°±æƒ³åŠæ³•ç¦ç”¨æ‰å¹¿å‘Š, ç½‘ä¸Šä¼šæœ‰ä¸€äº›æ–¹æ³•çš„, æˆ‘ä¹Ÿæä¸¤ä¸ªå§.\nå…ˆæŠŠåç¼€æ”¹ä¸ºtxt, ç„¶åä½ å°±å¯ä»¥ä½œä¸ºæ–‡æœ¬ç¼–è¾‘å®ƒäº†, æ‰“å¼€å®ƒ, æ¸…ç©ºæ‰€æœ‰å†…å®¹, ä¿å­˜, ç„¶åæ”¹ä¸ºåŸæ¥çš„åç¼€. æ‰¾åˆ° uninstall.exe ç±»ä¼¼çš„ç¨‹åº, ç›´æ¥å¸è½½å®Œäº‹å„¿. ä¿å…»æªæ–½: åœ¨å®‰è£…äº†ä¸€ä¸ªè½¯ä»¶å, åƒä¸‡åƒä¸‡è¦æ£€æŸ¥å®ƒæ˜¯å¦å¼€æœºè‡ªåŠ¨å¯åŠ¨, ä¿è¯å¼€æœºå¯åŠ¨çš„éƒ½æ˜¯ä½ æƒ³è¦å¯åŠ¨çš„ç¨‹åº.\næœ€å: æˆ‘ä¸ªäººå·²ç»å¾ˆä¹…æ²¡è§è¿‡å¼¹çª—å¹¿å‘Šäº† (ç¬‘, å¤§æ¦‚å°±æ˜¯ä¸Šé¢çš„é‚£äº›ç»éªŒäº†, ç²¾é«“å°±æ˜¯, ç»å¯¹ä¸ä½¿ç”¨æµæ°“è½¯ä»¶, å°½é‡é¿å…ä½¿ç”¨å›½å†…è½¯ä»¶.\n","date":"2021-02-04T06:05:13+08:00","permalink":"https://slimenull.com/p/20210204060513/","title":"[å¹²è´§] æœç»å¹¿å‘Š, è®©ä½ çš„ç”µè„‘å˜çš„æ›´åŠ å¹²å‡€èˆ’é€‚"},{"content":"å…³äº: ç¨‹åºæ˜¯å€ŸåŠ©APIçš„(åºŸè¯), æ‰€ä»¥åœ¨æ— ç½‘ç»œæ—¶, æ²¡åŠæ³•ä½¿ç”¨. æˆå“ä¸‹è½½åœ°å€åœ¨æ–‡ç« æœ«.\nå‡†å¤‡å·¥ä½œ: å¯¼å…¥åº“, request(å‘é€è¯·æ±‚) å’Œ json(è§£æè¿”å›æ•°æ®).\nå¼€æ: é¦–å…ˆ, æ˜¯æ‰¾åˆ°æˆ‘ä»¬æ‰€éœ€è¦çš„API, ç§ç§è¿™ä¸ªé“¾æ¥: æœ‰é“ç¿»è¯‘ä½“éªŒ\nè™½è¯´æ˜¯ä½“éªŒ, ä½†æ˜¯æˆ‘éƒ½ç”¨äº†å·¨é•¿ä¸€æ®µæ—¶é—´å´æ²¡æœ‰ä»»ä½•é—®é¢˜, çœ‹æ¥è¿™ä¸ªAPIè‡³å°‘çŸ­æ—¶é—´å†…ä¸ä¼šæœ‰ä»»ä½•å˜æ›´äº†~\nç„¶åå°±æ˜¯ç ´è§£APIçš„è¯·æ±‚å†…å®¹äº†. æ‰“å¼€æµè§ˆå™¨è°ƒè¯•, è½¬åˆ°ç½‘ç»œé€‰é¡¹å¡, ç„¶åé‡æ–°ç¿»è¯‘ä¸€ä¸‹, å¥½çš„, ç»“æœå¾ˆæ˜æ˜¾, èŠœæ¹– :-D postè¯·æ±‚, 3ä¸ªå‚æ•°, qæ˜¯ç¿»è¯‘å†…å®¹, fromå’Œtoè¡¨ç¤ºç¿»è¯‘çš„è¯­è¨€, é‚£ä¹ˆ, è¯•ç€æ¢ä¸€ä¸‹è¯­è¨€å§. å“¦, æˆ‘ä»¬å¾—åˆ°äº†ä¸­æ–‡ä¸æ—¥æ–‡çš„å¯¹åº”æ•°æ®, zh-CHS å’Œ ja, è¿˜æœ‰æ›´å¤šè¯­è¨€å‘¢, çœ‹çœ‹HTMLèŠ‚ç‚¹å§ å“¦è±, æ¯”æƒ³è±¡ä¸­çš„è¦ç®€å•! 2å°±æ˜¯toçš„æ„æ€, é‚£ä¹ˆ, æˆ‘ä»¬èƒ½å¾—åˆ°æ‰€æœ‰çš„è¯­è¨€å¯¹åº”å‚æ•°å€¼äº†! è®°å½•ä¸‹æ¥å§~\n1 2 3 4 å‚æ•°: q:ç¿»è¯‘æ–‡æœ¬ from:ä»è¯­è¨€ to:è‡³è¯­è¨€ è¯­è¨€æ”¯æŒçš„å€¼: ä¸­æ–‡:zh-CHS, è‹±è¯­:en, æ—¥è¯­:ja, éŸ©è¯­:ko, æ³•è¯­:fr, ä¿„è¯­:ru, è¥¿ç­ç‰™è¯­:es, è‘¡è„ç‰™è¯­:pt, è¶Šå—è¯­:vi, å¾·è¯­:de, å°å°¼è¯­:id é˜¿æ‹‰ä¼¯è¯­:ar æ¥ä¸‹æ¥, å°±æ˜¯å¯¹ç½‘é¡µä¸­, æºä»£ç çš„è¿›ä¸€æ­¥åˆ†æäº†, æ£€æŸ¥\u0026quot;ç¿»è¯‘\u0026quot;æŒ‰é’®çš„èŠ‚ç‚¹, ç„¶åæŸ¥çœ‹clickäº‹ä»¶ç›‘å¬ä»£ç . ç„¶å, å›åˆ°åˆšåˆšçš„ç½‘ç»œé€‰é¡¹å¡, ç„¶åé‡æ–°ç¿»è¯‘ä¸€ä¸‹, æŸ¥çœ‹è¿”å›å€¼. å¼„åˆ° Visual Studio Codeé‡Œé¢, ä¿å­˜ä¸ºjsonæ–‡ä»¶, ç„¶åæ ¼å¼åŒ–æ–‡æ¡£. ä½†æ˜¯, ä¸æ­¢å¦‚æ­¤, æˆ‘ä»¬å†å°è¯•ç¿»è¯‘ä¸€äº›, è¯, ä¾‹å¦‚ sugar, ç„¶åçœ‹çœ‹è¿”å›å€¼, ä¸å‡ºæ‰€æ–™, æœç„¶! è¿”å›å€¼é‡Œé¢åŒ…å«çš„å†…å®¹ä¸æ˜¯ä¸€èˆ¬çš„å¤šå•Š, ç”šè‡³è¿˜æœ‰éŸ³æ ‡, hhh\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 { \u0026#34;returnPhrase\u0026#34;: [ \u0026#34;sugar\u0026#34; ], \u0026#34;query\u0026#34;: \u0026#34;sugar\\n\u0026#34;, \u0026#34;errorCode\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;l\u0026#34;: \u0026#34;en2zh-CHS\u0026#34;, \u0026#34;tSpeakUrl\u0026#34;: \u0026#34;http://openapi.youdao.com/ttsapi?q=%E7%B3%96\u0026amp;langType=zh-CHS\u0026amp;sign=B212B7714049BBB65257DC9D64234EA0\u0026amp;salt=1612384414308\u0026amp;voice=4\u0026amp;format=mp3\u0026amp;appKey=2423360539ba5632\u0026amp;ttsVoiceStrict=false\u0026#34;, \u0026#34;web\u0026#34;: [ { \u0026#34;value\u0026#34;: [ \u0026#34;ç³–\u0026#34;, \u0026#34;é£Ÿç³–\u0026#34;, \u0026#34;ç™½ç³–\u0026#34;, \u0026#34;ç³–åˆ†\u0026#34; ], \u0026#34;key\u0026#34;: \u0026#34;Sugar\u0026#34; }, { \u0026#34;value\u0026#34;: [ \u0026#34;çº¢ç³–\u0026#34;, \u0026#34;é»„ç³–\u0026#34; ], \u0026#34;key\u0026#34;: \u0026#34;brown sugar\u0026#34; }, { \u0026#34;value\u0026#34;: [ \u0026#34;ç³–ç”¨ç”œèœ\u0026#34;, \u0026#34;ç”œèœ\u0026#34;, \u0026#34;ç³–ç”œèœ\u0026#34;, \u0026#34;ç³–æ–™ç”œèœ\u0026#34; ], \u0026#34;key\u0026#34;: \u0026#34;Sugar beet\u0026#34; } ], \u0026#34;requestId\u0026#34;: \u0026#34;f54b0c24-4818-4d7e-ab04-8123adec8671\u0026#34;, \u0026#34;translation\u0026#34;: [ \u0026#34;ç³–\u0026#34; ], \u0026#34;dict\u0026#34;: { \u0026#34;url\u0026#34;: \u0026#34;yddict://m.youdao.com/dict?le=eng\u0026amp;q=sugar%0A\u0026#34; }, \u0026#34;webdict\u0026#34;: { \u0026#34;url\u0026#34;: \u0026#34;http://m.youdao.com/dict?le=eng\u0026amp;q=sugar%0A\u0026#34; }, \u0026#34;basic\u0026#34;: { \u0026#34;exam_type\u0026#34;: [ \u0026#34;åˆä¸­\u0026#34;, \u0026#34;é«˜ä¸­\u0026#34;, \u0026#34;CET4\u0026#34;, \u0026#34;CET6\u0026#34;, \u0026#34;è€ƒç ”\u0026#34;, \u0026#34;SAT\u0026#34; ], \u0026#34;us-phonetic\u0026#34;: \u0026#34;ËˆÊƒÊŠÉ¡É™r\u0026#34;, \u0026#34;phonetic\u0026#34;: \u0026#34;ËˆÊƒÊŠÉ¡É™(r)\u0026#34;, \u0026#34;uk-phonetic\u0026#34;: \u0026#34;ËˆÊƒÊŠÉ¡É™(r)\u0026#34;, \u0026#34;wfs\u0026#34;: [ { \u0026#34;wf\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;å¤æ•°\u0026#34;, \u0026#34;value\u0026#34;: \u0026#34;sugars\u0026#34; } }, { \u0026#34;wf\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;è¿‡å»å¼\u0026#34;, \u0026#34;value\u0026#34;: \u0026#34;sugared\u0026#34; } }, { \u0026#34;wf\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;è¿‡å»åˆ†è¯\u0026#34;, \u0026#34;value\u0026#34;: \u0026#34;sugared\u0026#34; } }, { \u0026#34;wf\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;ç°åœ¨åˆ†è¯\u0026#34;, \u0026#34;value\u0026#34;: \u0026#34;sugaring\u0026#34; } }, { \u0026#34;wf\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;ç¬¬ä¸‰äººç§°å•æ•°\u0026#34;, \u0026#34;value\u0026#34;: \u0026#34;sugars\u0026#34; } } ], \u0026#34;uk-speech\u0026#34;: \u0026#34;http://openapi.youdao.com/ttsapi?q=sugar%0A\u0026amp;langType=en\u0026amp;sign=C668ACDF9C58F3D76BADC5B54F1BDEE7\u0026amp;salt=1612384414308\u0026amp;voice=5\u0026amp;format=mp3\u0026amp;appKey=2423360539ba5632\u0026amp;ttsVoiceStrict=false\u0026#34;, \u0026#34;explains\u0026#34;: [ \u0026#34;n. ç³–ï¼›é£Ÿç³–ï¼›ç”œè¨€èœœè¯­\u0026#34;, \u0026#34;vt. åŠ ç³–äºï¼›ç²‰é¥°\u0026#34;, \u0026#34;vi. å½¢æˆç³–\u0026#34;, \u0026#34;n. (Sugar)äººåï¼›(è‹±)ä¼‘æ ¼\u0026#34; ], \u0026#34;us-speech\u0026#34;: \u0026#34;http://openapi.youdao.com/ttsapi?q=sugar%0A\u0026amp;langType=en\u0026amp;sign=C668ACDF9C58F3D76BADC5B54F1BDEE7\u0026amp;salt=1612384414308\u0026amp;voice=6\u0026amp;format=mp3\u0026amp;appKey=2423360539ba5632\u0026amp;ttsVoiceStrict=false\u0026#34; }, \u0026#34;isWord\u0026#34;: true, \u0026#34;speakUrl\u0026#34;: \u0026#34;http://openapi.youdao.com/ttsapi?q=sugar%0A\u0026amp;langType=en\u0026amp;sign=C668ACDF9C58F3D76BADC5B54F1BDEE7\u0026amp;salt=1612384414308\u0026amp;voice=4\u0026amp;format=mp3\u0026amp;appKey=2423360539ba5632\u0026amp;ttsVoiceStrict=false\u0026#34; } æ˜¯ä¸æ˜¯å·²ç»æœ‰äº›æ„Ÿåˆ°å…´å¥‹äº†å‘¢? ç°åœ¨, å¼€å§‹æ­£å¼Codingå§!\nå…ˆæ˜¯ä»¥è‡ªåŠ¨è¯†åˆ«è¯­è¨€å¼€å§‹å§. é‚£ä¹ˆ, é¦–å…ˆæ˜¯æœ€åŸºæœ¬çš„å¯¼åº“ä¸å®šä¹‰:\n1 2 3 4 5 6 7 8 9 10 11 12 import requests import json url = \u0026#39;https://aidemo.youdao.com/trans\u0026#39; \u0026#39;\u0026#39;\u0026#39; æœ‰é“ç¿»è¯‘API, æ”¯æŒgetä¸post å‚æ•°: q:ç¿»è¯‘æ–‡æœ¬ from:ä»è¯­è¨€ to:è‡³è¯­è¨€ è¯­è¨€æ”¯æŒçš„å€¼: ä¸­æ–‡:zh-CHS, è‹±è¯­:en, æ—¥è¯­:ja, éŸ©è¯­:ko, æ³•è¯­:fr, ä¿„è¯­:ru, è¥¿ç­ç‰™è¯­:es, è‘¡è„ç‰™è¯­:pt, è¶Šå—è¯­:vi, å¾·è¯­:de, å°å°¼è¯­:id é˜¿æ‹‰ä¼¯è¯­:ar é”™è¯¯ç : 411:è¿‡äºé¢‘ç¹ 413:è®¿é—®ä¸Šé™ 103:å­—ç¬¦å¤ªé•¿ 410:è¿‡äºé¢‘ç¹ \u0026#39;\u0026#39;\u0026#39; ç„¶åæ˜¯è¯·æ±‚\n1 2 3 4 5 6 7 def translate(text): try: data = {\u0026#34;q\u0026#34;: text, \u0026#34;from\u0026#34;: \u0026#34;auto\u0026#34;, \u0026#34;to\u0026#34;: \u0026#34;auto\u0026#34;} resp = requests.post(url, data) except: return None return resp ç„¶åæ˜¯æ‰“å°ç¿»è¯‘ç»“æœ:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 advancedmode = False # é»˜è®¤çŠ¶æ€ä¸‹, ä¸å±•ç¤ºæ‰€æœ‰ä¿¡æ¯, å½“advancedModeä¸ºTrueæ—¶, å±•ç¤ºæ›´å¤šå†…å®¹ def listPrint(obj, iden, ps = \u0026#39;\u0026#39;): print(\u0026#34;\\n\u0026#34;.join(\u0026#39; \u0026#39; * iden + ps + str(i) for i in obj)) def printrst(resp): if resp is not None and resp.status_code == 200: respJson = json.loads(resp.text) if advancedmode: print(\u0026#34; \u0026lt;0\u0026gt; Result:\u0026#34;) if \u0026#34;translation\u0026#34; in respJson: print(\u0026#34; Normal:\u0026#34;) listPrint(respJson[\u0026#34;translation\u0026#34;], 9) if \u0026#34;basic\u0026#34; in respJson and \u0026#34;explains\u0026#34; in respJson[\u0026#34;basic\u0026#34;]: print(\u0026#34; Basic:\u0026#34;) listPrint(respJson[\u0026#34;basic\u0026#34;][\u0026#34;explains\u0026#34;], 9) if \u0026#34;web\u0026#34; in respJson: print(\u0026#34; From web:\u0026#34;) index = 1 for i in respJson[\u0026#34;web\u0026#34;]: print(\u0026#34; %d. %s:\u0026#34; % (index, i[\u0026#34;key\u0026#34;])) listPrint(i[\u0026#34;value\u0026#34;], 14) index += 1 # print else: print(\u0026#34; \u0026lt;0\u0026gt; Result:\u0026#34;) listPrint(respJson[\u0026#34;translation\u0026#34;], 7) else: print(\u0026#34;Request error, status code: %s\u0026#34; % (resp.status_code if resp != None else \u0026#34;???\u0026#34;)) æ—¢ç„¶éƒ½æœ‰advancedModeäº†, æ‰€ä»¥å¾—è®©ç”¨æˆ·æœ‰åŠæ³•æ‰“å¼€å…³é—­å®ƒ, æ¨¡æ‹Ÿç®€å•çš„å‘½ä»¤è¡Œå§, å¦‚æœè¾“å…¥çš„å†…å®¹æ˜¯ä»¥ $ å¼€å¤´çš„, åˆ™åˆ¤å®šä¸ºå‘½ä»¤, å¹¶è¿è¡Œè¿™ä¸ªå‘½ä»¤\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 def runcmd(cmd): cmdline = cmd.split(\u0026#39; \u0026#39;) cmdname = cmdline[0].lower() if cmdname == \u0026#39;$\u0026#39;: global advancedmode advancedmode = not advancedmode print(\u0026#34; \u0026lt;$\u0026gt; AdvancedMode: %s\u0026#34; % advancedmode) elif cmdname == \u0026#39;$help\u0026#39;: if len(cmdline) == 1: print(\u0026#34; \u0026lt;$\u0026gt; Help document, type \u0026#39;$help command\u0026#39; for more information.\u0026#34;) listPrint(( \u0026#34;$ : Switch Advanced Mode.\u0026#34;, \u0026#34;$help : Display help document.\u0026#34; \u0026#34;\u0026#34; ), 7) elif len(cmdline) == 2: if cmdline[1] == \u0026#39;$\u0026#39;: print(\u0026#34; \u0026lt;$\u0026gt; Switch Advanced Mode.\u0026#34;) listPrint(( \u0026#34;Advanced Mode: %s\u0026#34; % advancedmode, \u0026#34;If advanced mode is enabled, more information will be shown. default value is disabled.\u0026#34; ), 7) else: print(\u0026#34; \u0026lt;$\u0026gt; Help document: unknown command.\u0026#34;) else: print(\u0026#34; \u0026lt;$\u0026gt; Help document: unknown usage.\u0026#34;) else: print(\u0026#34; \u0026lt;$\u0026gt; Unknown command.\u0026#34;) # æ›´å¤šæŒ‡ä»¤, ä½ æ¥æ·»åŠ å§, ä¾‹å¦‚åˆ‡æ¢è¯­è¨€ æœ€åæ˜¯ä¸»ç¨‹åº\n1 2 3 4 5 6 7 8 9 10 11 12 if __name__ == \u0026#34;__main__\u0026#34;: print(\u0026#34;Null.Translator, by Null, type \u0026#39;$help\u0026#39; for help. ref: Youdao AI translation api.\u0026#34;) while True: text = input(\u0026#34;\\n\u0026gt;\u0026gt;\u0026gt; \u0026#34;) # æ¨¡æ‹ŸåƒPythoné‚£æ ·çš„æç¤ºç¬¦, å¾ˆé…·ç‚«çš„æœ‰æœ¨æœ‰ if text != \u0026#39;\u0026#39;: if text.startswith(\u0026#39;$\u0026#39;): runcmd(text) else: resp = translate(text) printrst(resp) else: exit() # å¦‚æœè¾“å…¥ä¸ºç©º, åˆ™é€€å‡º, æ–¹ä¾¿é€€å‡ºç¨‹åº. (è¡¨ç¤ºæ‡’å¾—æŒªé¼ æ ‡ æ»‘ç¨½) (æœ€å, ä¸Šé¢æ‰€æœ‰çš„ä»£ç ç‰‡, æ‹¼åœ¨ä¸€èµ·, å°±èƒ½è¿è¡Œ, æ‡’å¾—æ‹¼çš„è¯, å°±ç‚¹å‡»ä¸‹é¢çš„ä¸‹è½½é“¾æ¥ä¸‹è½½å§)\nå†å¤šè¯´ä¸€å¥, é‚£ä¸ªAPIè¿”å›çš„æ•°æ®è¾£ä¹ˆå¤š, æƒ³å®ç°ä»€ä¹ˆåŠŸèƒ½è‡ªå·±éšä¾¿å®ç°å•¦~\nä¸‹è½½é“¾æ¥: CSDNç«™å†…ä¸‹è½½: Null.Translator\né¢„å‘Š: è¿™å¯ä¸å°±æ˜¯ä¸€ä¸ªæ–‡æœ¬è½¬è¯­éŸ³APIå˜›! è–…æœ‰é“ç¾Šæ¯›çœŸä¸æˆ³ ","date":"2021-02-04T05:02:41+08:00","permalink":"https://slimenull.com/p/20210204050241/","title":"[é¡¹ç›®å®ä¾‹] æ‰‹æŠŠæ‰‹æ•™ä½ ä½¿ç”¨Pythonå†™ä¸€ä¸ªåŠŸèƒ½éå¸¸å¼ºå¤§çš„ç¿»è¯‘ç¨‹åº"},{"content":"1.æ‰“å¼€ NuGet åŒ…ç®¡ç†å™¨ ä½äº å·¥å…· -\u0026gt; NuGet åŒ…ç®¡ç†å™¨ -\u0026gt; ç®¡ç†è§£å†³æ–¹æ¡ˆçš„ NuGet ç¨‹åºåŒ…\n2. å®‰è£… æœç´¢ Costura.Fody å¹¶å°†å…¶å®‰è£…åˆ°ä½ çš„é¡¹ç›® 3. èµ·é£ ç„¶å, è¿›è¡Œç¼–è¯‘, ä½ å°±ä¼šå‘ç°! æ‰€æœ‰çš„dllå…¨éƒ¨è¢«æ‰“åŒ…è¿›exeä¸­å•¦~~~ ","date":"2021-02-03T06:56:00+08:00","permalink":"https://slimenull.com/p/20210203065600/","title":"[C#] å•æ–‡ä»¶ç¼–è¯‘ - ç¼–è¯‘æ—¶åµŒå…¥dll"},{"content":"æ­¥éª¤ : æ‰“å¼€ nuget åŒ…ç®¡ç†å™¨, å·¥å…· -\u0026gt; NuGet åŒ…ç®¡ç†å™¨ -\u0026gt; ç®¡ç†è§£å†³æ–¹æ¡ˆçš„ NuGet ç¨‹åºåŒ…. åœ¨ nuget åŒ…ç®¡ç†å™¨ä¸­æ‰¾åˆ° IronPython, å®‰è£…åˆ°ä½ çš„é¡¹ç›®. 3. using æ‰€éœ€çš„å‘½åç©ºé—´, Microsoft.Scripting, Microsoft.Scripting.Hosting, Microsoft.Win32, IronPython.Hosting. 4. åˆ›å»º Python å¼•æ“: csharp ScriptEngine engine = Python.CreateEngine(); 5. åˆ›å»ºå®šä¹‰åŸŸ(Scope), å®ƒç”¨æ¥å­˜å‚¨å˜é‡: csharp ScriptScope scope = engine.CreateScope(); 6. åœ¨ Scope ä¸­è®¾ç½®ä¸è·å–å˜é‡å€¼: csharp scope.SetVariable(\u0026quot;name\u0026quot;, \u0026quot;value\u0026quot;); // å…¶ä¸­, nameæ˜¯å˜é‡å, \u0026quot;value\u0026quot;å¯ä»¥æ˜¯ä»»æ„ç±»å‹, è¡¨ç¤ºå˜é‡å€¼ è·å–å˜é‡ä¹Ÿå·®ä¸å¤š, æ˜¯GetVariable. 7. è®¾ç½®å¼•æ“çš„æ ‡å‡†è¾“å‡ºæµä»¥æ•è·å†…å®¹: csharp TriggerStream stream = new TriggerStream(); // TriggerStreamæ˜¯ä¸€ä¸ªèƒ½å¤Ÿåœ¨å†™å…¥æ—¶è§¦å‘äº‹ä»¶çš„, ç»§æ‰¿äº†Streamçš„ç±». engine.Runtime.IO.SetOutput(stream, Encoding.Default); // è¿™æ ·, æˆ‘ä»¬å¯ä»¥é€šè¿‡TriggerStreamçš„å†™å…¥äº‹ä»¶æ¥è·å–å†™å…¥çš„å†…å®¹ æç¤º: äº†è§£ TriggerStream, è¯·æŸ¥çœ‹è¿™ç¯‡æ–‡ç« : æ”¯æŒäº‹ä»¶çš„Stream, å…³äºä¸ºä»€ä¹ˆä½¿ç”¨ Encoding.Default è€Œä¸ä½¿ç”¨ UTF-8, æ˜¯å› ä¸ºåœ¨ Windows é‡Œé¢, éƒ½æ˜¯ç”¨çš„ ANSI. è€Œ Default å°±æ˜¯è·å– ANSI çš„ç¼–ç (åœ¨ä¸­å›½æ˜¯GBK) 8. æ‰§è¡Œ Python ä»£ç : csharp ScriptSource thisSrc = engine.CreateScriptSourceFromString(\u0026quot;print('hello world')\u0026quot;, SourceCodeKind.File) thisSrc.Execute(scope); // ä»£ç åœ¨è¿™ä¸ªå®šä¹‰åŸŸç§æ‰§è¡Œ SourceCodeKind.FileæŒ‡è¿™ä¸ªå­—ç¬¦ä¸²æ˜¯æ¥è‡ªæ–‡ä»¶çš„ä»£ç , ä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥åœ¨é‡Œé¢åŠ æ¢è¡ŒåŠ ç¼©è¿›ä»¥å®šä¹‰ä¸€ä¸ªè¯­å¥å—ä¹‹ç±»çš„. è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯SourceCodeKind.Expression, æŒ‡ä¸€ä¸ªè¡¨è¾¾å¼.\né¡¹ç›® : é¡¹ç›®å·²ç»åœ¨ GitHub å¼€æº, åœ°å€: SlimeNull/Null.TextEditor æƒ³ç›´æ¥ä¸‹è½½æˆå“? å¸Œæœ›ä½ èƒ½ä¸‹è½½æˆåŠŸ: Release/Null.TextEditor.exe\n","date":"2021-02-03T06:43:09+08:00","permalink":"https://slimenull.com/p/20210203064309/","title":"[é¡¹ç›®å®ä¾‹] ä½¿ç”¨ IronPython åº“æ¥åˆ›å»ºä¸€ä¸ªæ”¯æŒä½¿ç”¨Pythonè„šæœ¬æ“ä½œçš„ç®€æ˜“æ–‡æœ¬ç¼–è¾‘å™¨"},{"content":"[C#] Stream æ”¯æŒå†™å…¥è¯»å–è§¦å‘äº‹ä»¶çš„ç±»åº“ å®ç°äº† : ä½ å¯ä»¥å°†è¿™ä¸ªæµç±»çš„å®ä¾‹æä¾›ç»™æŸäº›ä¸œè¥¿, åœ¨å®ƒæ“ä½œè¿™ä¸ªæµæ—¶, ä½ å¯ä»¥é€šè¿‡äº‹ä»¶æ¥æ¥æ”¶åˆ°æ¶ˆæ¯, å¹¶åŠ ä»¥å¤„ç†, ä¾‹å¦‚æ‹’ç»å†™å…¥, æˆ–åœ¨å†™å…¥å‰åˆ¤æ–­å†™å…¥çš„å†…å®¹. ä½ å¯ä»¥ç¨å¾®æ”¹åŠ¨ä¸€ä¸‹è¿™ä¸ªç±»ä»¥é€‚åº”ä½ çš„éœ€æ±‚. åº”ç”¨åœºæ™¯: ä¾‹å¦‚ä½ ä½¿ç”¨äº† IronPython åº“, å¹¶ä½¿ç”¨å®ƒæ‰§è¡Œäº†ä¸€äº›æ“ä½œ, ä½ å¸Œæœ› IronPython æ¯æ¬¡ print æ—¶, ä½ éƒ½èƒ½è·å–åˆ°å†…å®¹, åˆ™, ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªè§¦å‘æµ(TriggerStream)ç±», å°† IronPython å¼•æ“çš„æ ‡å‡†è¾“å‡ºæµè®¾ç½®ä¸ºè§¦å‘æµçš„å®ä¾‹, è¿™æ ·, æ¯å½“ IronPython æœ‰å†…å®¹è¾“å‡ºæ—¶, ä½ éƒ½èƒ½è·å–åˆ°å†…å®¹. ä¾‹å¦‚è¿™ä¸ªé¡¹ç›®: ä½¿ç”¨IronPythonæ¥åˆ¶ä½œä¸€ä¸ªæ”¯æŒpyè„šæœ¬æ“ä½œå†…å®¹çš„ç®€æ˜“æ–‡æœ¬ç¼–è¾‘å™¨ åº”ç”¨åœºæ™¯: ä¾‹å¦‚, ä½ è¿è¡Œäº†ä¸€ä¸ª Process, å¹¶ä¸”å¸Œæœ›å®æ—¶è·å–å®ƒçš„è¾“å‡ºå†…å®¹, è€Œä¸æ˜¯è¿è¡Œå®Œä¹‹åä¸€æ¬¡æ€§è·å–æ‰€æœ‰å†…å®¹, åŒç†, ä½ å¯ä»¥è®¾ç½®å®ƒçš„æ ‡å‡†è¾“å‡ºæµä¸ºè§¦å‘æµå®ä¾‹, ç„¶åæ¯æ¬¡å®ƒè¾“å‡ºå†…å®¹ä½ éƒ½èƒ½æ¥æ”¶åˆ°. æºä»£ç  : 1. é¦–å…ˆæ˜¯ä»…ä»…åŒ…å«è§¦å‘å™¨, è€Œä¸ä¼šæœ‰ä»»ä½•å­˜å‚¨è¡Œä¸ºçš„ç±»\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 using System; using System.IO; namespace Null.Library.TriggerStream { class WriteStreamEventArgs : EventArgs { public byte[] Buffer; public int Offset, Count; public bool Denied = false; } class TriggerStream : Stream { public override bool CanRead =\u0026gt; false; public override bool CanSeek =\u0026gt; false; public override bool CanWrite =\u0026gt; true; public override long Length =\u0026gt; 0; public override long Position { get =\u0026gt; 0; set { } } public override void Flush() { } public override int Read(byte[] buffer, int offset, int count) { return 0; } public override long Seek(long offset, SeekOrigin origin) { return 0; } public override void SetLength(long value) { } public override void Write(byte[] buffer, int offset, int count) { if (PreviewWrite != null) PreviewWrite.Invoke(this, new WriteStreamEventArgs() { Buffer = buffer, Offset = offset, Count = count, }); } public event EventHandler\u0026lt;WriteStreamEventArgs\u0026gt; PreviewWrite; } } å¾ˆæ˜æ˜¾èƒ½å¤Ÿçœ‹å‡º, ä¸Šé¢çš„è¿™ä¸ª, ä»…æœ‰äº‹ä»¶è§¦å‘, è€ŒSeek, Read, Positionç­‰æ–¹æ³•åŠå±æ€§, éƒ½æ˜¯ç›´æ¥ä½¿ç”¨çš„ç©ºæˆ–è€…è¿”å›åˆé€‚çš„å›ºå®šå€¼.\n2. ç„¶åæ˜¯å¸¦æœ‰å­˜å‚¨åŠŸèƒ½çš„(ä½¿ç”¨MemoryStream)ç±»\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 using System; using System.IO; namespace Null.Library.EventedStream { class ReadStreamEventArgs : EventArgs { public byte[] Buffer; public int Offset, Count; public bool Denied = false; } class WriteStreamEventArgs : EventArgs { public byte[] Buffer; public int Offset, Count; public bool Denied = false; } public class FlushStreamEventArgs : EventArgs { public bool Denied = false; } public class SetStreamLengthEventArgs : EventArgs { public long Value; public bool Denied = false; } public class SeekStreamEventArgs : EventArgs { public long Offset; public SeekOrigin SeekOrigin; public bool Denied = false; } class EventedStream : Stream, IDisposable { MemoryStream baseMemory = new MemoryStream(); public override bool CanRead =\u0026gt; baseMemory.CanRead; public override bool CanSeek =\u0026gt; baseMemory.CanSeek; public override bool CanWrite =\u0026gt; baseMemory.CanWrite; public override long Length =\u0026gt; baseMemory.Length; public override long Position { get =\u0026gt; baseMemory.Position; set =\u0026gt; baseMemory.Position = value; } public override void Flush() { if (PreviewFlush != null) { FlushStreamEventArgs args = new FlushStreamEventArgs(); PreviewFlush.Invoke(this, args); if (args.Denied) return; } baseMemory.Flush(); } public override int Read(byte[] buffer, int offset, int count) { if (PreviewRead != null) { ReadStreamEventArgs args = new ReadStreamEventArgs() { Buffer = buffer, Offset = offset, Count = count }; PreviewRead.Invoke(this, args); if (args.Denied) return 0; } return baseMemory.Read(buffer, offset, count); } public override long Seek(long offset, SeekOrigin origin) { if (PreviewSeek != null) { SeekStreamEventArgs args = new SeekStreamEventArgs() { Offset = offset, SeekOrigin = origin }; PreviewSeek.Invoke(this, args); if (args.Denied) return Position; } return baseMemory.Seek(offset, origin); } public override void SetLength(long value) { if (PreviewSetLength != null) { SetStreamLengthEventArgs args = new SetStreamLengthEventArgs() { Value = value }; PreviewSetLength.Invoke(this, args); if (args.Denied) return; } baseMemory.SetLength(value); } public override void Write(byte[] buffer, int offset, int count) { if (PreviewWrite != null) { WriteStreamEventArgs args = new WriteStreamEventArgs() { Buffer = buffer, Offset = offset, Count = count }; PreviewWrite.Invoke(this, args); if (args.Denied) return; } baseMemory.Write(buffer, offset, count); } public new void Dispose() { baseMemory.Dispose(); } public event EventHandler\u0026lt;FlushStreamEventArgs\u0026gt; PreviewFlush; public event EventHandler\u0026lt;SetStreamLengthEventArgs\u0026gt; PreviewSetLength; public event EventHandler\u0026lt;SeekStreamEventArgs\u0026gt; PreviewSeek; public event EventHandler\u0026lt;WriteStreamEventArgs\u0026gt; PreviewWrite; public event EventHandler\u0026lt;ReadStreamEventArgs\u0026gt; PreviewRead; } } åŸç† : å€’ä¹Ÿç®€å•, ç›´æ¥ç»§æ‰¿åŸºç±», ç„¶åå®ç°æ–¹æ³•å³å¯.\næç¤º : å¦‚æœä½ è¦åŒæ—¶ä½¿ç”¨è¿™ä¸¤ä¸ª,,, åˆ«å¿˜è®°ç¨å¾®ç§»åŠ¨ä¸‹äº‹ä»¶å‚æ•°ä½¿å®ƒä»¬åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­, å¹¶ä½¿ä¸¤ä¸ªäº‹ä»¶æµç±»usingäº‹ä»¶å‚æ•°çš„å‘½åç©ºé—´, å¦åˆ™, åœ¨ä¸å®Œå…¨æŒ‡å®šå‘½åç©ºé—´çš„çŠ¶å†µä¸‹, ä¼šå‡ºç°ä¸æ˜ç¡®å¼•ç”¨çš„é”™è¯¯.\n","date":"2021-02-03T03:02:37+08:00","permalink":"https://slimenull.com/p/20210203030237/","title":"[C#] Stream æ”¯æŒå†™å…¥è¯»å–è§¦å‘äº‹ä»¶çš„ç±»åº“ ç»§æ‰¿StreamåŸºç±»"},{"content":"é—®é¢˜æ˜¯å‡ºåœ¨è¿™é‡Œçš„: 1 2 3 4 5 6 7 8 9 10 11 12 13 SoftwareInfo result = new SoftwareInfo( reader.GetString(1), // reader æ˜¯ MySqlDataReader å®ä¾‹ reader.GetString(7)) { ID = reader.GetInt32(0), Label = reader.GetString(2), Coder = reader.GetString(3), DownloadCount = reader.GetInt32(4), Stars = reader.GetFloat(5), Introduction = reader.GetString(6) }; return result; è§£å†³æ–¹æ¡ˆ: ç¬¬ä¸€ç§: æ·»åŠ  Null æ£€æŸ¥, åœ¨è°ƒç”¨ GetString, GetInt32, GetFloat è¿™ç±»åŒ…å«å…·ä½“çš„ç±»å‹è½¬æ¢çš„å‡½æ•°å‰, å…ˆè°ƒç”¨ IsDBNull æ£€æŸ¥è¿™æ¡æ•°æ®æ˜¯ä¸æ˜¯ Null.\n1 2 3 4 5 6 7 8 9 10 11 12 13 SoftwareInfo currentInfo = new SoftwareInfo( reader.GetString(1), reader.GetString(7)) { ID = reader.GetInt32(0), Label = reader.IsDBNull(2) ? null : reader.GetString(2), Coder = reader.IsDBNull(3) ? null : reader.GetString(3), DownloadCount = reader.IsDBNull(4) ? 0 : reader.GetInt32(4), Stars = reader.IsDBNull(5) ? 0 : reader.IsDBNull(5) ? 0 : reader.GetFloat(5), Introduction = reader.IsDBNull(6) ? null : reader.GetString(6) }; return currentInfo; ç¬¬äºŒç§: ç›´æ¥æŒ‡å®šæ•°æ®åº“çš„å­—æ®µä¸å¯ä¸º Null, ä»æ ¹æœ¬ä¸Šæœç»ç©ºå€¼\n1 alter table tablename modify columnname not null; åŸå› : å¦‚æœæ•°æ®æ˜¯ Null, å°±æ— æ³•è°ƒç”¨åŒ…å«å…·ä½“ç±»å‹çš„æ–¹æ³•, å› ä¸ºå®ƒä»¬å†…éƒ¨æ¶‰åŠåˆ°ç±»å‹è½¬æ¢.\n","date":"2021-01-29T05:07:08+08:00","permalink":"https://slimenull.com/p/20210129050708/","title":"[è¸©å‘è®°å½•] ASP.NET Core System.Data.SqlTypes.SqlNullValueException: æ•°æ®ä¸ºç©ºã€‚ä¸èƒ½å¯¹ç©ºå€¼è°ƒç”¨æ­¤æ–¹æ³•"},{"content":"Android å…¥é—¨: æˆ‘ä¹Ÿæ˜¯åˆå­¦ Android Studio (ç”šè‡³ä¸åˆ°ä¸€ä¸ªæ˜ŸæœŸ), ä¹Ÿå¯Ÿè§‰åˆ°äº†\u0026hellip; å…³äºè¿™æ–¹é¢çš„å›¾æ–‡èµ„æ–™å±…ç„¶é‚£ä¹ˆå°‘, å…¨éƒ½æ˜¯è§†é¢‘æ•™ç¨‹, ä¸ºäº†æƒ³è¦èŠ‚çœæ—¶é—´çš„åŒå­¦ç€æƒ³, æˆ‘æŒºèº«è€Œå‡ºäº†. ä¸æ˜¯é€‚åˆæ‰€æœ‰äººå“¦~ ä½ å¾—æ‡‚ä¸€äº›è‹±æ–‡, ä½ éœ€è¦æœ‰JavaåŸºç¡€, ä¸éœ€è¦æŠ€æœ¯å¤šå‰å®³, ä¼šå†™Hello worldå°±è¡Œ.ä½†æ˜¯å¦‚æœä½ ä¸æ»¡è¶³æ¡ä»¶, æ¨èä½ å»Bç«™æ‰¾è§†é¢‘æ•™ç¨‹. ä¸‹è½½IDE ä¸‹è½½è‚¯å®šç®€å•å’¯, ç›´æ¥å»å®˜ç½‘å§: é“¾æ¥åœ°å€, ç„¶å, é¢, æˆ‘ç›¸ä¿¡ä½ çš„è‹±æ–‡æ°´å¹³è¶³ä»¥æ”¯æŒä½ æ‰¾åˆ°ä¸‹è½½æŒ‰é’®çš„, å®‰è£…IDE å®‰è£…ä¹Ÿå·®ä¸å¤šæ˜¯å‚»ç“œå¼å®‰è£…äº†, å› ä¸ºæœ¬äººä¹Ÿæ˜¯åˆšå…¥é—¨, æ‰€ä»¥, å·®ä¸å¤šæ˜¯ä¸€è·¯åŒæ„æ¥å—ç¡®è®¤. å™¢éœ€è¦æåˆ°çš„æ˜¯, Android Studio æ”¯æŒä½¿ç”¨ Java æˆ–è€… Kotlin æ¥ç¼–å†™ç¨‹åº, Kotlin æ˜¯ç¼–ç¨‹è¯­è¨€å“¦, è¿™ä¸ªçŸ¥é“å°±å¥½. åˆ›å»ºé¡¹ç›® æ‰“å¼€Androidå, ç‚¹å‡»Create a project, ç„¶åä½ çœ‹åˆ°çš„æ˜¯è¿™ä¸ª: çœ‹åˆ°äº†å—? è¿™æ˜¯æ¨¡æ¿, ä¹Ÿå°±æ˜¯ç»™ä½ çš„å®‰å“ç¨‹åºåˆ›å»ºæœ€å¼€å§‹çš„ä¸€ä¸ªé¡µé¢, ä¸è¿‡ä½œä¸ºæˆ‘ä»¬åˆå­¦è€…, ä½¿ç”¨ Empty Activity å°±å¥½äº†~ Activity çš„è¯, å…¶å®å°±æ˜¯ç›¸å½“äº Android ç¨‹åºä¸­çš„ä¸€ä¸ªé¡µé¢å’¯, é‚£ä¹ˆæˆ‘ä»¬ç»§ç»­(Next), ä½ ä¼šçœ‹åˆ°é¡¹ç›®é…ç½®: èƒ½çœ‹æ‡‚å§, åå­—, åŒ…å, ä¿å­˜è·¯å¾„, è¯­è¨€, æ˜¯çš„, åœ¨ Language é‚£é‡Œéœ€è¦é€‰æ‹©ä½ è¦ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€, ä¾‹å¦‚æˆ‘è¿™é‡Œä½¿ç”¨Java. ç„¶å, åŒ…åçš„å‘½å, ä½ å¯ä»¥è¿™ä¹ˆå‘½å: \u0026ldquo;åŸŸå.ä½ çš„åå­—.é¡¹ç›®å\u0026rdquo;, ç„¶å Minimum SDK, æœ€ä½ç‰ˆæœ¬çš„SDK, è¿™ä¸ªå†³å®šäº†ä½ èƒ½å¤Ÿä½¿ç”¨çš„åŠŸèƒ½(å› ä¸ºä¸åŒç‰ˆæœ¬çš„SDKåŠŸèƒ½ä¼šæœ‰å·®å¼‚)ä»¥åŠç¨‹åºçš„å…¼å®¹æ€§(ä¾‹å¦‚ä½¿ç”¨äº†é«˜ç‰ˆæœ¬SDKçš„ç¨‹åºæ— æ³•åœ¨Androidç‰ˆæœ¬è¾ƒä½çš„æ‰‹æœºä¸Šè¿è¡Œ), å…¶ä»–å†…å®¹çš„è¯, æˆ‘ç›¸ä¿¡ä½ èƒ½çœ‹æ‡‚. é”µé”µ~ æ–°é¡¹ç›®åˆ›å»ºå®Œæˆäº†~ èœå•æ  é¢, è®²åˆ°è¿™é‡Œ, ç”¨è¿‡IDEAçš„ç«¥é‹è‚¯å®šä¼šç›´æ¥èŠœæ¹–èµ·é£çš„, å› ä¸º, Android Studioæœ‰JetBrainså†…å‘³å„¿, è¯´ä¸ç†Ÿæ‚‰æ˜¯å‡çš„, ä¸è¿‡,,, æ—¢ç„¶éƒ½æœ‰JavaåŸºç¡€äº†, è¿™ç‚¹è‹±æ–‡åº”è¯¥å½³äºå£å·´? å¸¸ç”¨çš„ä¹Ÿå°±é‚£ä¹ˆç‚¹äº†, åƒæ˜¯æ¢é…è‰², æ›´æ¢å¿«æ·é”®, ä½ å¯ä»¥åœ¨ç½‘ä¸Šæœç´¢, ç„¶åæ…¢æ…¢çš„, ä½ å°±ä¼šç”¨äº†. é¡¹ç›®ç»“æ„ å‘, è¿™æ˜¯æœ€åˆçš„é¡¹ç›®äº†, å…ˆè«å¾—æ…Œå¼ , æˆ‘ä»¬å¾—å…ˆçŸ¥é“å·¦ä¾§é‚£ä¸€å †ä¸œè¥¿æ˜¯å¹²å•¥ç”¨çš„. é¦–å…ˆçœ‹åˆ°çš„å°±æ˜¯ MainActivity, å¯¹å§, å‰é¢è¯´äº† Activity æ˜¯ä¸€ä¸ªç•Œé¢, è¿™ä¸ª, å°±æ˜¯ä¸»ç•Œé¢äº†. æ¥ä¸‹æ¥, æˆ‘ä»¬å±•å¼€è¿™äº›ç›®å½•, ç„¶åçœ‹çœ‹æ‰€æœ‰çš„ä¸œè¥¿ å¤§æ¦‚å°±æ˜¯è¿™äº›å†…å®¹äº†, å¯¹äºå…¥é—¨æ•™ç¨‹, ä½ åªéœ€è¦å…³å¿ƒlayoutæ–‡ä»¶å¤¹(å­˜æ”¾å¸ƒå±€æ–‡ä»¶)ä»¥åŠjavaæºä»£ç æ–‡ä»¶å¤¹. ç¼–è¾‘ç•Œé¢ é¦–å…ˆå°±æ˜¯æ‰“å¼€æˆ‘ä»¬ä¸»é¡µé¢(MainActivity)çš„å¸ƒå±€æ–‡ä»¶, MainActivity.xml å¯è§†åŒ–ç¼–è¾‘é¡µé¢å‡ºç°äº† ç„¶å, ç‚¹å‡»å³ä¸Šè§’çš„Split(è¢«æˆ‘ç”¨çº¢è‰²çº¿æ¡†æ ‡æ³¨äº†çš„æŒ‰é’®), åˆ‡æ¢åˆ°æ‹†åˆ†è®¾è®¡æ¨¡å¼, ç„¶å, å·¦ä¾§ä»£ç , å³ä¾§æ˜¯å¸ƒå±€é¢„è§ˆ, å¯ä»¥è¾¹å†™ä»£ç è¾¹æŸ¥çœ‹æ•ˆæœ. ä¸€èˆ¬çš„, æˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨ä»£ç æ¥ç¼–è¾‘ç•Œé¢çš„, å…·ä½“è¿™äº›å†…å®¹æ˜¯ä»€ä¹ˆæ„æ€, æˆ‘ä»¬ä¸‹ç¯‡æ–‡ç« å†è®² (å’•å’•å’•?) ç•Œé¢ä»£ç  æ‰“å¼€ MainActivity.java, é¢, å¦‚å›¾æ‰€ç¤º å–, ç„¶åå°±æ˜¯æœ€åŸºæœ¬çš„è§£é‡Šäº†. åˆ›å»ºAVD AVD, å³Android virtual device, ç±»ä¼¼äºè™šæ‹Ÿæœºçš„ç©æ„å„¿, è™šæ‹Ÿçš„å®‰å“æœº, å¯ä»¥ç”¨æ¥è¿è¡Œä½ çš„ç¨‹åº, æ‰€ä»¥åœ¨è¿è¡Œæˆ‘ä»¬çš„ç¨‹åºä¹‹å‰, å¿…é¡»å¾—åˆ›å»ºä¸€ä¸ªAVD, ç‚¹å‡»AVDç®¡ç†å™¨ è¿™å°±æ˜¯AVDç®¡ç†å™¨äº†, é‚£ä¹ˆåˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªè™šæ‹Ÿè®¾å¤‡å§~ åœ¨è¿™é‡Œé€‰æ‹©ä½ æƒ³è¦ä½¿ç”¨çš„è®¾å¤‡é…ç½®, ç„¶åç»§ç»­ æ¥ä¸‹æ¥å°±æ˜¯é€‰æ‹©ç³»ç»Ÿé•œåƒäº†, é»˜è®¤æ˜¯æ²¡æœ‰ä¸‹è½½çš„, ä½ éœ€è¦ä¸‹è½½ä¸€ä¸ªä½ æƒ³è¦ä½¿ç”¨çš„ç³»ç»Ÿé•œåƒ, ç‚¹å‡»ç³»ç»Ÿé•œåƒåç§°åçš„ä¸‹è½½æŒ‰é’®ä»¥ä¸‹è½½å®ƒ ç­‰å¾…ä»–ä¸‹è½½å§, 1GBä¹Ÿä¸æ˜¯å¾ˆå¤§. ä¸‹è½½å®Œæˆå, é€‰æ‹©ä½ æƒ³è¦ä½¿ç”¨çš„ç³»ç»Ÿé•œåƒ, ç„¶åç»§ç»­ æœ€åæ˜¯éªŒè¯é…ç½®ä¿¡æ¯ å“¦å¯¹äº†, æœ‰ä¸€æ¡éœ€è¦æ³¨æ„, å±•å¼€é«˜çº§é…ç½®, ç„¶åæ‰¾åˆ° Performance, Boot option, çœ‹åˆ°äº†å—? Cold boot å’Œ Quick boot, è¿™ä¿©ç±»ä¼¼äºç”µè„‘çš„å¿«é€Ÿå¯åŠ¨, å¦‚æœä½¿ç”¨ Cold boot, æ¯ä¸€æ¬¡å¯åŠ¨è¿™ä¸ªè™šæ‹Ÿè®¾å¤‡, éƒ½è·Ÿæ‰‹æœºå¼€æœºä¸€æ ·, å¦‚æœä½¿ç”¨Quick boot, é‚£å¯åŠ¨è¿™ä¸ªè™šæ‹Ÿè®¾å¤‡, å°±æ˜¯ä»ä¸Šæ¬¡é€€å‡ºæ—¶ä¿å­˜çš„çŠ¶æ€å¯åŠ¨, å®›å¦‚ç”µè„‘ä»ä¼‘çœ çŠ¶æ€å¯åŠ¨. (å¦‚æœä½ è¿˜æ˜¯ä¸æ‡‚, å°±å»æœç´¢ä¸€ä¸‹ä»€ä¹ˆæ˜¯ä¼‘çœ ). ä¹‹è¯´æ³¨æ„è¿™ä¸€ç‚¹, æ˜¯å› ä¸º, å¦‚æœä½ è¿™ä¸ªè®¾å¤‡æ­»æœºäº†, å¹¶ä¸”ä½ ä½¿ç”¨çš„æ˜¯Quick boot, é‚£ä½ å…³é—­è™šæ‹Ÿè®¾å¤‡å†æ‰“å¼€è™šæ‹Ÿè®¾å¤‡, è¿˜æ˜¯æ­»æœºçš„çŠ¶æ€\u0026hellip; æ‰€åŠå»ºè®®æ”¹ä¸ºCold boot. ä¸‡äº‹å…·å¤‡å, å°±ç‚¹Finishå§. å“¦å¯¹äº†, åŸç”Ÿå®‰å“ç©èµ·æ¥çœŸçš„è¶…çº§èˆ’æœå“¦~ è¿è¡Œç¨‹åº ç‚¹å‡»è¿è¡ŒæŒ‰é’®å³å¯ç¼–è¯‘é¡¹ç›®å¹¶åœ¨æŒ‡å®šçš„è®¾å¤‡ä¸Šè¿è¡Œç¨‹åº éœ€è¦çŸ¥é“çš„æ˜¯, è¿è¡Œäº†çš„è™šæ‹Ÿè®¾å¤‡æ˜¯å·²ç»å¼€å¯äº†è°ƒè¯•åŠŸèƒ½çš„, åœ¨ä½ æŸ¥çœ‹å®Œè¿è¡Œç»“æœå, ä¸å¿…å…³é—­è™šæ‹Ÿè®¾å¤‡, è™šæ‹Ÿè®¾å¤‡éšæ—¶ä¸ºä½ çš„è°ƒè¯•å·¥ä½œå¾…å‘½! åŒæ—¶, ä½ ä¹Ÿå¯ä»¥ç”¨ä½ çš„æ‰‹æœºè¿›è¡Œè°ƒè¯•, ä½¿ç”¨æ•°æ®çº¿è¿æ¥æ‰‹æœºå’Œç”µè„‘, ç„¶åæ‰“å¼€æ‰‹æœºçš„è°ƒè¯•åŠŸèƒ½, åœ¨ Android Studio ä¸­, è¿è¡ŒæŒ‰é’®å·¦ä¾§çš„é€‰æ‹©è®¾å¤‡ä¸­, èƒ½å¤Ÿæ‰¾åˆ°ä½ çš„æ‰‹æœº. åŸç”Ÿå®‰å“ åŸç”Ÿå®‰å“, å¯èƒ½æœ‰äº›äººä¸å¤§ä¼šç”¨å§(ä¾‹å¦‚ç¬”è€…), è¿™é‡Œå°±è¯´ä¸€ç‚¹å§, æŸ¥çœ‹æ‰€æœ‰å·²å®‰è£…çš„ç¨‹åº, åªéœ€è¦åœ¨ä¸»å±å¹•ä»å¯¼èˆªé”®æˆ–ä»»æ„ç©ºç™½å¤„å‘ä¸Šæ»‘åŠ¨, å°±èƒ½å½³äºäº† ç»“æŸäº† å“ˆ, å½³äºäº†å£å·´, é€šè¿‡è¿™ç¯‡æ–‡ç« , ç»å¯¹èƒ½æ¶ˆé™¤ä½ å¯¹Android Studioçš„ææƒ§äº†, å…³äºæ›´å¤šæ•™ç¨‹, ä¼šç»§ç»­æ›´æ–°çš„, æ•¬è¯·å…³æ³¨~ æœ‰ä»€ä¹ˆå»ºè®®, æˆ–è€…éœ€è¦æ”¹æ­£çš„åœ°æ–¹, å¯ä»¥é€šè¿‡è¯„è®ºæˆ–ç§ä¿¡æŒ‡å‡ºå“¦, åˆ«å¿˜äº†ç‚¹ä¸ªèµ~ ","date":"2021-01-20T04:52:13+08:00","permalink":"https://slimenull.com/p/20210120045213/","title":"[Android] Android Studioå…¥é—¨ - 1.åˆè¯†IDE"},{"content":"Get ä¸ Post è¯·æ±‚ HTTPè¯·æ±‚: å‰ç«¯ä¸åç«¯çš„æ•°æ®ä¼ é€’æ˜¯é€šè¿‡ HTTP è¯·æ±‚å®ç°çš„, æµè§ˆå™¨(å‰ç«¯)å‘æœåŠ¡å™¨(åç«¯)å‘é€ä¸€ä¸ª HTTP è¯·æ±‚, åç«¯å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†, ç„¶åå†ç»™æµè§ˆå™¨å‘ä¸€ä¸ªå“åº”, è¿™å°±æ˜¯ HTTP çš„åŸºæœ¬æ¦‚å¿µ.\nget å’Œ post æ˜¯HTTPè¯·æ±‚çš„ä¸¤ç§æ–¹å¼, æœ€æ˜æ˜¾çš„åŒºåˆ«æ˜¯ä¼ é€’å‚æ•°.\nå¦‚æœä½ ä¸å¤§äº†è§£ HTTP è¯·æ±‚, å¯ä»¥å…ˆæŸ¥çœ‹æ–‡ç« æœ«å¯¹ HTTP çš„ç®€è¿°.\nGet: å…³äº Get è¯·æ±‚\nget ä¸€èˆ¬ç”¨æ¥è·å–æ•°æ®, å› ä¸ºå…¶æœ¬æ„å°±æ˜¯è·å–. æµè§ˆå™¨è®¿é—®ä¸€ä¸ªé¡µé¢æ—¶, å‘é€çš„ç¬¬ä¸€ä¸ªè¯·æ±‚å°±æ˜¯ Get.\nget çš„å‚æ•°å°†ç›´æ¥å†™æ˜åœ¨è¯·æ±‚ url ä¸­, è¿™æ„å‘³ç€, ä»»ä½•äººå¯ä»¥ç›´æ¥é€šè¿‡æµè§ˆå™¨ä¸Šæ–¹çš„åœ°å€æ¥æ¸…é™¤çš„çœ‹åˆ°, ä¾‹å¦‚ä½ è¦ä¸‹è½½ä¸€ä¸ªä¸œè¥¿, æ–‡ä»¶åå« \u0026lsquo;idea\u0026rsquo;, å°†æ–‡ä»¶åä½œä¸ºfilenameå‚æ•°ä¼ é€’è¿‡å», é‚£ä¹ˆè¿™ä¸ªè¯·æ±‚ç±»ä¼¼äºè¿™æ ·:\n1 https://xxx.com/download/?filename=idea åœ¨urlä¸­, å†™ä¸€ä¸ª\u0026rsquo;\u0026rsquo;?\u0026lsquo;è¡¨ç¤ºåé¢çš„å†…å®¹æ˜¯å‚æ•°, ç„¶åä»¥ å‚æ•°å=å‚æ•°å€¼ çš„æ ¼å¼è¡¨ç¤ºå‚æ•°, å¦‚æœè¦ä¼ å¤šä¸ªå‚æ•°, åˆ™ä½¿ç”¨ \u0026lsquo;\u0026amp;\u0026rsquo; è¿æ¥å®ƒä»¬\næœåŠ¡ç«¯æ¥æ”¶åˆ°ä½ çš„è¯·æ±‚å, å¯ä»¥æ ¹æ®å‚æ•°æ¥åšå‡ºå¯¹åº”å¤„ç†, ç„¶åå‘é€åˆé€‚çš„å“åº”.\nä¸€ä¸ªä¾‹å­:\nåœ¨æµè§ˆå™¨æ–°å»ºé€‰é¡¹å¡, åœ¨urlä¸­è¾“å…¥ä¸€ä¸ªåœ°å€, å‘é€çš„æ˜¯ä¸€ä¸ªgetè¯·æ±‚, æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡è¿™ä¸ªæ¥æµ‹è¯•.\nhitokoto æ˜¯ä¸€ä¸ªæä¾›\u0026rsquo;ä¸€å¥è¯\u0026rsquo;çš„ç½‘ç«™, æä¾›äº†æ¥å£ä»¥ä¾›å¼€å‘è¿™è°ƒç”¨, å…¶ä¸­ä¸€ä¸ªæ˜¯:\nåœ°å€ åè®® æ–¹æ³• v1.hitokoto.cn HTTPS ANY å…¶ä¸­ä¸€ä¸ªå‚æ•°æ˜¯:\nå‚æ•° å€¼ å¯é€‰ è¯´æ˜ encode text / json / js æ˜¯ è¿”å›çš„ç¼–ç  æ–¹æ³•æ˜¯Any, å³, åŒæ—¶æ”¯æŒ get ä¸ post, é‚£ä¹ˆæˆ‘ä»¬å°è¯•ä½¿å®ƒè¿”å›ä¸€ä¸ªæ ¼å¼ä¸ºæ–‡æœ¬çš„ç»“æœ, å¯¹åº”çš„ url æ˜¯:\n1 https://v1.hitokoto.cn/?encode=text hitokoto æœåŠ¡å™¨è¿”å›äº†æˆ‘ä»¬æ‰€éœ€è¦çš„å€¼:\né‚£ä¹ˆ, å¦‚æœæ˜¯jsonå‘¢? è¯•è¯•çœ‹å§: ``` https://v1.hitokoto.cn/?encode=json ``` hitokoto æœåŠ¡å™¨åˆè¿”å›äº†æˆ‘ä»¬æ‰€éœ€è¦çš„å€¼: Post: å…³äº Post è¯·æ±‚\nPost æœ‰ \u0026lsquo;é‚®é€’,å¸ƒç½®\u0026rsquo; çš„æ„æ€, ä¸€èˆ¬ç”¨æ¥å°†æ•°æ®æäº¤ç»™æœåŠ¡ç«¯. çœ‹å®Œ Get, ä½ ä¹ŸçŸ¥é“äº† Get çš„ä¸€ä¸ªç‰¹ç‚¹: å‚æ•°ç›´æ¥æš´éœ²åœ¨ url ä¸­, ç›´æ¥è¢«åˆ«äººçœ‹åˆ°, è‚¯å®šæ˜¯ä¸å¤§å¦¥å½“çš„, å‡å¦‚ä½ è¦å‘æœåŠ¡å™¨æäº¤ä½ çš„å¯†ç , è®©åˆ«äººçœ‹åˆ°, é‚£å°±ä¸å¥½äº†, è€Œ Post ç›¸å¯¹ Get æ¥è¯´, å°±ç¨å¾®å®‰å…¨ç‚¹äº†, å› ä¸ºå‚æ•°åœ¨è¿™ä¸ªHTTPè¯·æ±‚ä½“ä¸­. ä¸€ä¸ªPOSTè¯·æ±‚çš„æ¦‚è¿°:\nå®ƒçš„å“åº”å†…å®¹: ç”±æ­¤å¯çŸ¥, POSTå¯ä»¥å¤§è‡´è®¤ä¸º, åªæ˜¯å°†å‚æ•°æ”¾åˆ°äº†è¯·æ±‚ä½“ä¸­, ç›¸å¯¹æ¥è¯´, ä¸¥è°¨ä¸€äº›.\nä¸€ä¸ªä¾‹å­:\nå› ä¸ºå¤§å¤šæ•°æµè§ˆå™¨ä¸èƒ½ç›´æ¥å‘é€ post è¯·æ±‚, æ‰€ä»¥æˆ‘ä»¬é€šè¿‡ python ä¸ä¸€ä¸ªæµ‹è¯•ç½‘é¡µæ¥æµ‹è¯•:\næœ‰é“æœ‰ä¸€ä¸ªç¿»è¯‘æ¥å£ç¤ºä¾‹, æ”¯æŒ post è¯·æ±‚\nåœ°å€: \u0026lsquo;https://aidemo.youdao.com/trans'\nå‚æ•° ä»‹ç» å€¼ q ç¿»è¯‘æ–‡æœ¬ è¦è¿›è¡Œç¿»è¯‘çš„æ–‡æœ¬ from ä»å“ªç§è¯­è¨€ç¿»è¯‘ auto / zh-CHS / en / å…¶ä»– to ç¿»è¯‘åˆ°å“ªç§è¯­è¨€ auto / zh-CHS / en / å…¶ä»– Python: Python å¯ä»¥é€šè¿‡ requests åŒ…æ¥å‘é€ post è¯·æ±‚.\nç¼–å†™ä»£ç :\n1 2 3 4 5 6 7 import requests url = \u0026#34;https://aidemo.youdao.com/trans\u0026#34; args = {\u0026#34;q\u0026#34;: \u0026#34;ç¿»è¯‘è¿™æ®µè¯\u0026#34;, \u0026#34;from\u0026#34;: \u0026#34;auto\u0026#34;, \u0026#34;to\u0026#34;: \u0026#34;auto\u0026#34;} resp = requests.post(url, args) # å‘é€è¯·æ±‚, å¹¶å°†å“åº”èµ‹å€¼åˆ°resp print(resp.text) # æ‰“å°å“åº”è§£ç åçš„æ–‡æœ¬ è¿è¡Œå, å¯ä»¥çœ‹åˆ°, è¿”å›äº†æˆ‘ä»¬éœ€è¦çš„æ•°æ®:\nç¼–å†™ä¸€ä¸ªç®€å•çš„ç½‘é¡µæ¥æµ‹è¯•: åœ¨HTMLä¸­, å¯ä»¥é€šè¿‡ form è¡¨å•, å¯ä»¥å‘é€ get å’Œ post è¯·æ±‚.\nç¼–å†™ä»£ç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;Post Request Demo\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;form action=\u0026#34;https://aidemo.youdao.com/trans\u0026#34; method=\u0026#34;post\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;kwd\u0026#34;\u0026gt;å…³é”®å­—:\u0026lt;/label\u0026gt; \u0026lt;input id=\u0026#34;kwd\u0026#34; type=\u0026#34;text\u0026#34; name=\u0026#34;q\u0026#34; placeholder=\u0026#34;è¾“å…¥å…³é”®è¯\u0026#34;/\u0026gt; \u0026lt;input type=\u0026#34;hidden\u0026#34; name=\u0026#34;from\u0026#34; value=\u0026#34;auto\u0026#34;/\u0026gt; \u0026lt;input type=\u0026#34;hidden\u0026#34; name=\u0026#34;to\u0026#34; value=\u0026#34;auto\u0026#34;/\u0026gt; \u0026lt;input type=\u0026#34;submit\u0026#34; value=\u0026#34;è¯·æ±‚\u0026#34;/\u0026gt; \u0026lt;/form\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; æ•ˆæœ:\n4. è¾“å…¥ \u0026quot;ç™½å«–æœ‰é“ç¿»è¯‘APIçœŸæ£’\u0026quot; å¹¶æŒ‰ä¸‹è¯·æ±‚æŒ‰é’®: è¿”å›äº†æˆ‘ä»¬æ‰€éœ€è¦çš„æ•°æ®: æŒ‡æ­£: å¯èƒ½ä¼šæœ‰äººå‘Šè¯‰ä½ , get æ¯” post å®‰å…¨, ä½†äº‹å®ä¸Š, è¿™ä»…ä»…æ˜¯é’ˆå¯¹é—¨å¤–æ±‰, ä½ åªéœ€è¦æ‰“å¼€æµè§ˆå™¨è°ƒè¯•åŠŸèƒ½, å°±å¯ä»¥çœ‹åˆ°è¿™ä¸ªé¡µé¢çš„ä¸€åˆ‡è¯·æ±‚ä»¥åŠè¯·æ±‚çš„å„ç§è¯¦ç»†å†…å®¹, post çš„å‚æ•°ä¹Ÿèƒ½çœ‹åˆ°. æ‰€ä»¥è¯´, è¯´ post å®‰å…¨, åªæ˜¯æŒ‡å®ƒçš„å‚æ•°ä¸èƒ½ç›´æ¥åœ¨ url ä¸­çœ‹åˆ°, ä½†åªè¦ä½ æƒ³çœ‹, åªéœ€è¦æ‰“å¼€è°ƒè¯•\u0026hellip;\nHTTP æ¦‚è¿°: ä¸€ä¸ªHTTPæ•°æ®åŒ…æœ‰å¤´å’Œä½“ä¸¤éƒ¨åˆ†, å¤´ä¸­åŒ…å«äº†ä¸€äº›æ‘˜è¦æ•°æ®, è¿™äº›æ•°æ®ä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜æ”¾, ä¾‹å¦‚æŒ‡å®šå¯æ¥æ”¶çš„æ•°æ®ç±»å‹, æŒ‡å®šç¼–ç , å‹ç¼©ç®—æ³•, æ•°æ®é•¿åº¦ç­‰. ä½“ä¸­æ˜¯è¿™ä¸ªåŒ…çš„ä¸»è¦å†…å®¹, ä¾‹å¦‚ä¼ è¾“æ–‡ä»¶æ—¶, æ–‡ä»¶å†…å®¹å°±ä½äºä½“ä¸­. å¦‚æœæƒ³è¦è¯¦ç»†çš„äº†è§£HTTPæ•°æ®çš„å†…å®¹, ä¸å¦¨åœ¨æµè§ˆå™¨ä¸­æŒ‰ä¸‹F12, æ‰“å¼€è°ƒè¯•, è¿›å…¥ \u0026lsquo;ç½‘ç»œ(Network)\u0026rsquo; é€‰é¡¹å¡, åˆ·æ–°é¡µé¢, ç„¶åè§‚å¯Ÿä¸€ä¸ªä¸ªçš„æ•°æ®åŒ….\n","date":"2021-01-05T17:32:52+08:00","permalink":"https://slimenull.com/p/20210105173252/","title":"[Web] æµ…è°ˆ Get ä¸ Post è¯·æ±‚"},{"content":"ç®€ä»‹: ä¹‹å‰å¼€äº†ä¸€ä¸ªå¤§å‘, é¢, å…¶å®å°±æ˜¯å¸¦æœ‰æ³¨å†Œç™»å½•, ç„¶åå®Œç¾è§£å†³ç²˜åŒ…, å¿ƒè·³åŒ…, è¿˜æœ‰å¹¶å‘é‡ç­‰é—®é¢˜çš„å‘, ä½†æ˜¯å¤ªéš¾å¡«äº†(æˆ‘å¤ªèœäº†), äºæ˜¯æˆ‘å°±å¼€äº†ä¸€ä¸ªæ–°é¡¹ç›®, ç æ‰ç™»é™†æ³¨å†ŒåŠŸèƒ½, ç›´æ¥ä½œä¸ºèŠå¤©å®¤å¼€æ”¾\u0026hellip; é¢„è§ˆ: éš¾é¢˜æ˜¯å¦‚ä½•è§£å†³çš„:\né¦–å…ˆæ˜¯ä¼ è¾“åè®®, æˆ‘è¿™é‡Œçš„æ•°æ®ä¼ è¾“, æ— è®ºæ˜¯ä»€ä¹ˆæ•°æ®, éƒ½æ˜¯ä¸€ä¸ªTransPackageå®ä¾‹, é‡Œé¢æœ‰åŸºæœ¬çš„ç»“æ„, å°±æ˜¯Name, Content, ClientGuid, PackageTypeè¿™å››ä¸ªå­—æ®µ(é™¤æ­¤ä¹‹å¤–å°±æ²¡äº†). ç„¶åæŠŠå®ƒä»¬å¼„æˆå­—ç¬¦ä¸², ç„¶åå¼„æˆå­—ç¬¦æ•°ç»„, ç„¶åå‘é€. å…³äºç²˜åŒ…, ä¹Ÿå°±æ˜¯ä¸¤ä¸ªåŒ…é»åœ¨ä¸€èµ·, æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯è‡ªå·±å°è£…å¥½çš„äº‹ä»¶é©±åŠ¨çš„å¥—æ¥å­—, ç²˜åŒ…é—®é¢˜å‘ç”Ÿæ—¶, å°±æ˜¯åœ¨ä¸€æ¬¡æ”¶åˆ°æ¶ˆæ¯æ—¶, æ”¶åˆ°äº†ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„åŒ…, è€Œæ¯ä¸ªåŒ…éƒ½æ˜¯ä¸€ä¸ªJsonæ•°æ®, Jsonæ•°æ®çš„ç‰¹ç‚¹å‘¢, å°±æ˜¯å¾ˆå®¹æ˜“èƒ½åˆ†å¼€, ä¾‹å¦‚ä½ Objectå¹¶åˆ—, æ²¡æœ‰åˆ†éš”ç¬¦, ä¹Ÿèƒ½æ˜ç¡®çš„çŸ¥é“è¿™æ˜¯ä¸¤ä¸ªObject, äºæ˜¯æˆ‘åˆä¸ºæˆ‘è‡ªå·±é€ çš„è½®å­ CHO.Json ä¼˜åŒ–äº†ä¸€æ³¢, ä½¿å®ƒæ”¯æŒè¿™ä¸ªåŠŸèƒ½ å…³äºå¹¶å‘, å…¶å®è¿™ä¸ªé—®é¢˜åœ¨ä½ å‘ç°TCPæ—¶å…¨åŒå·¥çš„æ—¶å€™å°±ä¸éœ€è¦è€ƒè™‘äº†, å› ä¸ºæ˜¯èŠå¤©å®¤, æ‰€ä»¥ä¹Ÿä¸å¿…æ‹…å¿ƒä»€ä¹ˆ. ä¹‹æ‰€ä»¥æˆ‘è€ƒè™‘è¿™ä¸ª, æ˜¯å› ä¸ºæˆ‘åœ¨å¾ˆä¹…ä¹‹å‰å†™çš„èŠå¤©å°ç¨‹åº, ç”±äºæˆ‘æŠŠTCPå½“æˆåŠåŒå·¥ç”¨, å¯¼è‡´ä¸èƒ½å¤ªè¿‡é¢‘ç¹çš„å¤„ç†æ¶ˆæ¯, å¦åˆ™å°±å¯èƒ½ä¼šå—å±, ä½†è¿™æ¬¡æœ‰æˆ‘å°è£…å¥½çš„äº‹ä»¶å¥—æ¥å­—, å°±æ–¹ä¾¿å¤šäº† æ›´æ–°è®°å½•: æœ€æ–°ç‰ˆå·²ç»æ”¯æŒå‘é€å›¾ç‰‡, ä»¥åŠå¯¹å›¾ç‰‡çš„æŸ¥çœ‹(æ—‹è½¬ç¼©æ”¾ç§»åŠ¨)\nä¸‹è½½é“¾æ¥ï¼š CSDNä¸‹è½½ ","date":"2020-12-31T01:08:08+08:00","permalink":"https://slimenull.com/p/20201231010808/","title":"[C#] TOC Tiny - åŸºäºTCPå¥—æ¥å­—ç®€æ˜“ç½‘ç»œèŠå¤©å®¤"},{"content":"ç®€ä»‹ï¼š è¿™æ˜¯ä¸€ä¸ªç±»åº“ï¼Œæ­£å¦‚æ ‡é¢˜æ‰€è¯´ï¼Œå®ƒå…·æœ‰è¿™ä¸¤ä¸ªæœ€åŸºæœ¬è€Œåˆå¼ºå¤§çš„åŠŸèƒ½ï¼Œæœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šéœ€è¦åœ¨ReadLineçš„è¿‡ç¨‹ä¸­å°±è®¿é—®å·²ç»è¾“å…¥äº†çš„å†…å®¹ï¼Œä½†.NETåˆæ²¡æœ‰æä¾›è¿™æ ·çš„åŠŸèƒ½ã€‚ å…¶å®åœ¨ä¹‹å‰å·²ç»å†™è¿‡ä¸€ä¸ªæ–‡ç« ï¼Œä¹Ÿæ˜¯åŠ¨æ€è¾“å…¥ï¼Œä½†æ˜¯å¤ªçƒ‚äº†åœ°å€ï¼šæ—§çš„åŠ¨æ€è¾“å…¥\nåŠŸèƒ½ï¼š åœ¨ReadLineçš„æ—¶å€™å°±è¯»å–å·²ç»è¾“å…¥äº†çš„å†…å®¹ï¼Œæä¾›äº†å®Œæ•´çš„å°è£… ç§»åŠ¨å·²ç»è¾“å…¥äº†çš„å†…å®¹ï¼Œä½ å¯ä»¥åœ¨è¾“å…¥æ—¶å°±å°†è¾“å…¥å†…å®¹ç§»åŠ¨åˆ°æ§åˆ¶å°çš„ä»»æ„ä½ç½® å…‰æ ‡ç§»åŠ¨ï¼Œæ’å…¥å’Œè¦†ç›–æ¨¡å¼ï¼ŒHOMEå’ŒENDé”®çš„å¤„ç†ã€‚ å­—ç¬¦è¾“å…¥äº‹ä»¶ï¼Œåœ¨ç”¨æˆ·æŒ‰ä¸‹åï¼Œä¼šæœ‰ä¸¤ä¸ªäº‹ä»¶è§¦å‘ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸¤ä¸ªäº‹ä»¶æ¥è¿‡æ»¤ç”¨æˆ·è¾“å…¥å†…å®¹ï¼Œä¾‹å¦‚ï¼Œä»…å…è®¸è¾“å…¥æ•°å­—ï¼Œåªéœ€è¦åˆ¤æ–­äº‹ä»¶å‚æ•°å³å¯ã€‚ å¯†ç è¾“å…¥æ¨¡å¼ï¼Œä¸Linuxçš„å¯†ç è¾“å…¥ä¸€è‡´ï¼Œä¸ä¼šæ˜¾ç¤ºä»»ä½•å†…å®¹ï¼Œä½†åŠŸèƒ½æŒ‰é”®ä»¥åŠè¾“å…¥äº‹ä»¶ä»ç„¶å¯ç”¨ å†å²è®°å½•åŠŸèƒ½ï¼Œå®ƒæ¨¡æ‹Ÿçš„æ˜¯Linuxç³»ç»Ÿçš„å‘½ä»¤è¡Œè¾“å…¥å†å²è®°å½•åŠŸèƒ½ï¼Œæ¯”Windowsçš„å†å²è®°å½•åŠŸèƒ½å¥½é‚£ä¹ˆä¸€ä¸¢ä¸¢ã€‚ ï¼ˆåç»­ä¼šå¢åŠ æ›´å¤šåŠŸèƒ½ï¼Œå¦‚æœæˆ‘éœ€è¦æˆ–è€…ä½ éœ€è¦çš„è¯ã€‚ åŸç†ï¼š å…¶å®å°±æ˜¯å¯¹ Console.ReadKey() çš„å¦™ç”¨ ä½¿ç”¨æ–¹å¼ï¼š å®ä¾‹åŒ–ä¸€ä¸ªDynamicScannerå¯¹è±¡ã€‚ è°ƒç”¨DynamicScannerçš„ReadLine()æ–¹æ³•æˆ–è€…QuietReadLine()æ–¹æ³• è¯»å–æ­£åœ¨è¾“å…¥çš„å†…å®¹ï¼Œè¯·ä½¿ç”¨ç±»å®ä¾‹çš„InputtingStringå±æ€§ è·å–å·²è¾“å…¥å†…å®¹çš„èµ·å§‹ä½ç½®ä»¥åŠæœ«ç«¯ä½ç½®, å¯ä½¿ç”¨StartLeft, StartTop, EndLeft, EndTopå±æ€§ CharInputäº‹ä»¶æ˜¯å½“å­—ç¬¦è¾“å…¥å¹¶ä¸”å·²ç»å½•å…¥åè§¦å‘çš„ï¼ŒPreviewCharInputæ˜¯å­—ç¬¦å·²ç»è¾“å…¥ï¼Œä½†æ˜¯å¹¶æœªå½•å…¥çš„äº‹ä»¶ï¼ŒCharInputè¦æ±‚è¿”å›å€¼æŒ‡å®šæ˜¯å¦åœæ­¢è¾“å…¥ï¼ŒPreviewCharInputè¦æ±‚è¿”å›å€¼æŒ‡å®šæ˜¯å¦å–æ¶ˆå½•å…¥ å¦‚æœä»£ç æœ‰éƒ¨åˆ†å¯ä»¥ä¼˜åŒ–çš„éƒ¨åˆ†ï¼Œæˆ–è€…ä½ æœ‰å¥½çš„ç‚¹å­ï¼Œæ¬¢è¿ç§ä¿¡æˆ‘å“¦~ 2021 / 1 / 5: æ›´æ–°äº†æºä»£ç , ä¼˜åŒ–äº†ä¸€ä¸ªå°ç»†èŠ‚: å½“æ­¤æ¬¡è¾“å…¥ä¸ºç©ºæ—¶, ä¸ä¿å­˜å†å²è®°å½•\næºä»£ç ï¼š åˆ›å»ºä¸€ä¸ªåä¸ºNull.DynamicScanner.csçš„æ–‡ä»¶ï¼Œç²˜è´´ä»¥ä¸‹å†…å®¹ï¼Œæ·»åŠ åˆ°ä½ çš„é¡¹ç›®ä¸­ï¼Œå³å¯ä½¿ç”¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 using System; using System.Collections.Generic; using System.Linq; using System.Text; namespace Null.Library { public class DynamicScanner { int startTop, startLeft, endTop, endLeft, currentTop, currentLeft, tempEndTop, tempEndLeft; int inputIndex, historyIndex; bool insertMode = true, inputting = false, cursorVisible; private readonly object printting = false; // ç”¨äºäº’æ–¥é” ConsoleKeyInfo readedKey; private readonly List\u0026lt;List\u0026lt;char\u0026gt;\u0026gt; inputHistory; private List\u0026lt;char\u0026gt; inputtingChars; private string promptText = string.Empty; public delegate bool CharInputEventHandler(DynamicScanner sender, ConsoleKeyInfo c); public delegate bool PreviewCharInputEventHandler(DynamicScanner sender, ConsoleKeyInfo c); public event CharInputEventHandler CharInput; public event PreviewCharInputEventHandler PreviewCharInput; public DynamicScanner() { inputHistory = new List\u0026lt;List\u0026lt;char\u0026gt;\u0026gt;(); } public string InputtingString { get { return inputtingChars == null ? string.Empty : new string(inputtingChars.ToArray()); } } public int StartTop { get =\u0026gt; startTop; } public int StartLeft { get =\u0026gt; startLeft; } public int EndTop { get =\u0026gt; endTop; } public int EndLeft { get =\u0026gt; endLeft; } public int CurrentTop { get =\u0026gt; currentTop; } public int CurrentLeft { get =\u0026gt; currentLeft; } public bool IsInputting { get =\u0026gt; inputting; } public string PromptText { get =\u0026gt; promptText; set =\u0026gt; promptText = value; } public static bool IsControlKey(ConsoleKey k) { return k == ConsoleKey.Enter || k == ConsoleKey.UpArrow || k == ConsoleKey.DownArrow || k == ConsoleKey.LeftArrow || k == ConsoleKey.RightArrow || k == ConsoleKey.Insert || k == ConsoleKey.Backspace || k == ConsoleKey.Delete || k == ConsoleKey.Home || k == ConsoleKey.End; } private void InitReadLine() { startTop = Console.CursorTop; startLeft = Console.CursorLeft; inputIndex = 0; if (inputHistory.Count == 0 || inputHistory[inputHistory.Count - 1].Count != 0) { historyIndex = inputHistory.Count; inputHistory.Add(new List\u0026lt;char\u0026gt;()); } else { historyIndex = inputHistory.Count - 1; } inputtingChars = inputHistory[historyIndex]; inputting = true; } private bool DealInputChar() { switch (readedKey.Key) { case ConsoleKey.Enter: Console.WriteLine(); return true; case ConsoleKey.UpArrow: if (historyIndex \u0026gt; 0) { historyIndex--; UpdateInputState(); } break; case ConsoleKey.DownArrow: if (historyIndex \u0026lt; inputHistory.Count - 1) { historyIndex++; UpdateInputState(); } break; case ConsoleKey.LeftArrow: if (inputIndex \u0026gt; 0) { inputIndex--; } break; case ConsoleKey.RightArrow: if (inputIndex \u0026lt; inputtingChars.Count) { inputIndex++; } break; case ConsoleKey.Insert: insertMode = !insertMode; break; case ConsoleKey.Backspace: if (inputIndex \u0026gt; 0) { inputtingChars.RemoveAt(inputIndex - 1); inputIndex--; } break; case ConsoleKey.Delete: if (inputIndex \u0026lt; inputtingChars.Count) { inputtingChars.RemoveAt(inputIndex); } break; case ConsoleKey.Home: inputIndex = 0; break; case ConsoleKey.End: inputIndex = inputtingChars.Count; break; default: if (inputIndex == inputtingChars.Count) { inputtingChars.Add(readedKey.KeyChar); } else { if (insertMode) { inputtingChars.Insert(inputIndex, readedKey.KeyChar); } else { inputtingChars[inputIndex] = readedKey.KeyChar; } } inputIndex++; break; } return false; } private void PrintInputString() { lock(printting) { cursorVisible = Console.CursorVisible; Console.CursorVisible = false; Console.SetCursorPosition(startLeft, startTop); Console.Write(promptText); if (inputIndex == inputtingChars.Count) { for (int i = 0; i \u0026lt; inputtingChars.Count; i++) { Console.Write(inputtingChars[i]); } currentLeft = Console.CursorLeft; currentTop = Console.CursorTop; } else { for (int i = 0; i \u0026lt; inputtingChars.Count; i++) { if (inputIndex == i) { currentLeft = Console.CursorLeft; currentTop = Console.CursorTop; } Console.Write(inputtingChars[i]); } } tempEndLeft = Console.CursorLeft; tempEndTop = Console.CursorTop; while (Console.CursorTop \u0026lt; endTop || Console.CursorLeft \u0026lt; endLeft) { Console.Write(\u0026#39; \u0026#39;); } endLeft = tempEndLeft; endTop = tempEndTop; Console.SetCursorPosition(currentLeft, currentTop); Console.CursorVisible = cursorVisible; } } private void UpdateInputState() { inputtingChars = inputHistory[historyIndex]; inputIndex = inputtingChars.Count; } public void ClearDisplayBuffer() { lock(printting) { cursorVisible = Console.CursorVisible; Console.CursorVisible = false; Console.SetCursorPosition(startLeft, startTop); while (Console.CursorTop \u0026lt; endTop || Console.CursorLeft \u0026lt; endLeft) { Console.Write(\u0026#39; \u0026#39;); } Console.SetCursorPosition(startLeft, startTop); Console.CursorVisible = cursorVisible; } } public void DisplayTo(int cursorLeft, int cursorTop) { lock(printting) { cursorVisible = Console.CursorVisible; Console.CursorVisible = false; Console.SetCursorPosition(cursorLeft, cursorTop); startLeft = cursorLeft; startTop = cursorTop; Console.Write(promptText); if (inputIndex == inputtingChars.Count) { for (int i = 0; i \u0026lt; inputtingChars.Count; i++) { Console.Write(inputtingChars[i]); } currentLeft = Console.CursorLeft; currentTop = Console.CursorTop; } else { for (int i = 0; i \u0026lt; inputtingChars.Count; i++) { if (inputIndex == i) { currentLeft = Console.CursorLeft; currentTop = Console.CursorTop; } Console.Write(inputtingChars[i]); } } endLeft = Console.CursorLeft; endTop = Console.CursorTop; Console.CursorVisible = cursorVisible; } } public void SetInputStart(int cursorLeft, int cursorTop) { lock(printting) { cursorVisible = Console.CursorVisible; Console.CursorVisible = false; Console.SetCursorPosition(startLeft, startTop); while (Console.CursorTop \u0026lt; endTop || Console.CursorLeft \u0026lt; endLeft) { Console.Write(\u0026#39; \u0026#39;); } Console.SetCursorPosition(cursorLeft, cursorTop); startLeft = cursorLeft; startTop = cursorTop; Console.Write(promptText); if (inputIndex == inputtingChars.Count) { for (int i = 0; i \u0026lt; inputtingChars.Count; i++) { Console.Write(inputtingChars[i]); } currentLeft = Console.CursorLeft; currentTop = Console.CursorTop; } else { for (int i = 0; i \u0026lt; inputtingChars.Count; i++) { if (inputIndex == i) { currentLeft = Console.CursorLeft; currentTop = Console.CursorTop; } Console.Write(inputtingChars[i]); } } endLeft = Console.CursorLeft; endTop = Console.CursorTop; Console.CursorVisible = cursorVisible; } } public string ReadLine() { InitReadLine(); PrintInputString(); while (true) { readedKey = Console.ReadKey(true); if (PreviewCharInput != null \u0026amp;\u0026amp; PreviewCharInput.Invoke(this, readedKey)) { continue; } if (DealInputChar()) { inputting = false; return InputtingString; } PrintInputString(); if (CharInput != null \u0026amp;\u0026amp; CharInput.Invoke(this, readedKey)) { inputting = false; return InputtingString; } } } public string QuietReadLine() { InitReadLine(); PrintInputString(); while (true) { readedKey = Console.ReadKey(true); if (PreviewCharInput != null \u0026amp;\u0026amp; PreviewCharInput.Invoke(this, readedKey)) { continue; } if (DealInputChar()) { inputting = false; return InputtingString; } if (CharInput != null \u0026amp;\u0026amp; CharInput.Invoke(this, readedKey)) { inputting = false; return InputtingString; } } } } } ä½¿ç”¨å®ä¾‹ï¼š è¿™æ˜¯ä¸€ä¸ªå¯ä»¥è¿‡æ»¤è¾“å…¥çš„ä½¿ç”¨å®ä¾‹, å®ƒä»…å…è®¸ç”¨æˆ·è¾“å…¥æ•°å­—, å¹¶ä¸”æ”¯æŒä½¿ç”¨WSADæŒ‰é”®æ§åˆ¶å·²è¾“å…¥å†…å®¹åœ¨æ§åˆ¶å°ä¸­çš„ç§»åŠ¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 using System; using Null.Library; namespace LibraryTest { class Program { static void Main(string[] args) { DynamicScanner scanner = new DynamicScanner(); scanner.PreviewCharInput += Scanner_PreviewCharInput; scanner.CharInput += Scanner_CharInput; while(true) { string temp = scanner.ReadLine(); } } private static bool Scanner_CharInput(DynamicScanner sender, ConsoleKeyInfo c) { Console.Title = $\u0026#34;Length: {sender.InputtingString.Length}, Inputed: {sender.InputtingString}\u0026#34;; return false; } private static bool Scanner_PreviewCharInput(DynamicScanner sender, ConsoleKeyInfo c) { if (c.KeyChar \u0026gt;= \u0026#39;0\u0026#39; \u0026amp;\u0026amp; c.KeyChar \u0026lt;= \u0026#39;9\u0026#39; || DynamicScanner.IsControlKey(c.Key)) { return false; // è¡¨ç¤ºä¸å–æ¶ˆ, å³:å½•å…¥è¿™ä¸ªå­—ç¬¦ } else { switch (c.Key) // é€šè¿‡WSADæŒ‰é”®å¯ä»¥æ§åˆ¶è¾“å…¥å†…å®¹ç§»åŠ¨ { case ConsoleKey.W: sender.SetInputStart(sender.StartLeft, sender.StartTop - 1); break; case ConsoleKey.S: sender.SetInputStart(sender.StartLeft, sender.StartTop + 1); break; case ConsoleKey.A: sender.SetInputStart(sender.StartLeft - 1, sender.StartTop); break; case ConsoleKey.D: sender.SetInputStart(sender.StartLeft + 1, sender.StartTop); break; } return true; } } } } å¦‚æœä½ è§‰å¾—è¿™äº›å†…å®¹å¯¹ä½ æœ‰å¸®åŠ©ï¼Œ è¯·ä¸€å®šè¦ç‚¹ä¸ªèµï¼Œæˆ–è€…æ”¶è—å®ƒï¼Œè¿™æ˜¯å¯¹æˆ‘è«å¤§çš„é¼“åŠ± ä¹Ÿæ¬¢è¿ç§ä¿¡æˆ‘ï¼Œäº¤ä¸ªæœ‹å‹ä¹Ÿæ˜¯éå¸¸æ£’çš„~\n","date":"2020-12-30T22:33:07+08:00","permalink":"https://slimenull.com/p/20201230223307/","title":"[C#] æ§åˆ¶å°åŠ¨æ€è¾“å…¥ - å¢å¼ºç‰ˆConsole.ReadLine(), åœ¨ReadLineçš„è¿‡ç¨‹ä¸­è·å–ç”¨æˆ·å·²ç»è¾“å…¥çš„å†…å®¹æˆ–ç§»åŠ¨å·²ç»è¾“å…¥å†…å®¹çš„ä½ç½®"},{"content":"1. ä½¿ç”¨ \u0026lsquo;\u0026amp;\u0026rsquo; ç¬¦å·ï¼š ä¾‹å¦‚å¯åŠ¨ä¸€ä¸ªè„šæœ¬ï¼Œæ‰§è¡Œ \u0026lsquo;./idea.sh\u0026rsquo; ä»¥å¯åŠ¨ideaï¼Œä½†ç»ˆç«¯ä¼šè¢«é˜»å¡ï¼Œè‹¥ç»ˆç«¯è¢«å…³é—­ï¼Œideaä¹Ÿå°±è¢«å…³é—­ã€‚ æ­¤æ—¶ï¼Œæ‰§è¡Œ \u0026lsquo;./idea.sh \u0026amp;\u0026rsquo; å¯ä»¥ä½¿ idea è„±ç¦»å½“å‰ç»ˆç«¯è¿è¡Œï¼Œå³ä¾¿å½“å‰ç»ˆç«¯è¢«å…³é—­ï¼Œideaä¹Ÿä¸ä¼šå—å½±å“ã€‚ 1 2 ./idea.sh # ä¼šé˜»å¡å½“å‰ç»ˆç«¯è¿›ç¨‹ ./idea.sh \u0026amp; # ä¸ä¼šé˜»å¡ 2. ä½¿ç”¨ \u0026rsquo;nohup\u0026rsquo; æŒ‡ä»¤ï¼š å‚è€ƒ èœé¸Ÿæ•™ç¨‹ - nohupæŒ‡ä»¤ å‚è€ƒæ–‡ç« ï¼šLinuxåå°æ‰§è¡Œå‘½ä»¤(éé˜»å¡å¼)\n","date":"2020-12-18T01:16:10+08:00","permalink":"https://slimenull.com/p/20201218011610/","title":"[Linux] æ‰§è¡Œä½†ä¸é˜»å¡ ä»¥â€˜åå°â€˜æ¨¡å¼å¯åŠ¨ç¨‹åºæˆ–è„šæœ¬"},{"content":"é€‰æ‹©è¾“å…¥æ³•æ¡†æ¶ï¼š Linuxä¸­ï¼Œæœ‰å¤šä¸ªè¾“å…¥æ³•æ¡†æ¶å¯ä¾›ä½¿ç”¨ï¼Œåœ¨ Ubuntu ä¸­ï¼Œé»˜è®¤é¢„è£…äº† ibus è¿™æ¬¾è¾“å…¥æ³•å¼•æ“ï¼Œå¸¸ç”¨çš„ä¸­æ–‡è¾“å…¥æ³•å¼•æ“æœ‰ä¸¤ç§ï¼Œibus ä¸ fcitxã€‚ä¸¤è€…éƒ½è¿˜å½³äºï¼Œæ‡’å¾—ä¸‹è½½çš„è¯ï¼Œå°±ç›´æ¥ç”¨ibuså§ã€‚ é…ç½®ä½¿ç”¨çš„è¾“å…¥æ³•æ¡†æ¶ï¼šæ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œ \u0026lsquo;im-config\u0026rsquo;ï¼Œåœ¨å¼¹å‡ºçš„çª—å£ä¸­ï¼Œé€‰æ‹©okï¼Œyesï¼Œç„¶åé€‰æ‹© ibusï¼Œäºæ˜¯ï¼Œä½ å°±æˆåŠŸä½¿ç”¨äº†ibusæ¡†æ¶ã€‚åŒç†ï¼Œé€‰æ‹© fcitx åˆ™æ˜¯ä½¿ç”¨ fcitx æ¡†æ¶ï¼Œè‡³äºå®‰è£… fcitxï¼Œè§æ–‡ç« æœ«ã€‚ é€‰æ‹©è¾“å…¥æ³•å¼•æ“ï¼š å…³é”®çš„æ—¶åˆ»åˆ°å’¯ï¼Œé‚£ä¹ˆå¯¹äºibusï¼Œå¸¸ç”¨çš„è¾“å…¥æ³•æœ‰ï¼šrimeï¼Œsunpinyinï¼Œgooglepinyin(è°·æ­Œæ‹¼éŸ³)ï¼Œæˆ‘çš„è¯ï¼Œæ¨èrimeå’Œsunpinyinã€‚ å¯¹äºfcitxå˜›ï¼Œå¸¸ç”¨çš„æœ‰sogoupinyin(æœç‹—æ‹¼éŸ³)ï¼Œrimeï¼Œsunpinyinï¼Œgooglepinyinï¼Œæœç‹—çš„è¯ï¼Œå…¶å®è¿˜æ˜¯å¾ˆæ£’çš„(æ²¡æœ‰å¹¿å‘Šï¼Œæ¯•ç«Ÿè°ä¼šå¾€Linuxç³»ç»Ÿè½¯ä»¶ä¸­æŠ•æ”¾å¹¿å‘Šå‘¢,,,)ï¼Œç„¶årimeå’Œsunpinyinï¼Œä¹Ÿéƒ½è›®æ£’å’¯ã€‚ è‡³äºå®‰è£…ï¼Œè§æ–‡ç« æœ«ã€‚ æ·»åŠ è¾“å…¥æ³•å¼•æ“ï¼š ibusçš„è¯ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œ \u0026lsquo;ibus-setup\u0026rsquo;ï¼Œç„¶ååœ¨ \u0026lsquo;Input method\u0026rsquo; é€‰é¡¹å¡ä¸­å°±å¯ä»¥æ·»åŠ äº†ã€‚ï¼ˆä»€ä¹ˆï¼Ÿä¸ä¼šæ“ä½œï¼Ÿå»ºè®®é‡ä¿®è‹±æ–‡ï¼‰ fcitxçš„è¯ï¼Œæ›´ç®€å•äº†ï¼Œæ‰“å¼€ Ubuntu åº”ç”¨åˆ—è¡¨(æˆ‘æŒ‡å±å¹•å·¦ä¸‹è§’çš„æŒ‰é’®)ï¼Œæœç´¢fcitxï¼Œæ‰“å¼€fcitx configurationï¼Œç„¶åï¼Œä½ æ‡‚å¾—ï¼Œæ·»åŠ è¾“å…¥æ³•å°±å¥½ã€‚å®åœ¨ä¸ä¼šï¼Œå‚è€ƒè¿™ç¯‡æ–‡ç« å§ åœ¨Kaliä¸­é…ç½®ä¸­æ–‡è¾“å…¥æ³• æœ€åä¸€ç‚¹ï¼Œå¦‚æœä½ åœ¨æ·»åŠ è¾“å…¥æ³•å¼•æ“çš„æ—¶å€™ï¼Œæ‰¾ä¸åˆ°è‡ªå·±å®‰è£…çš„è¾“å…¥æ³•ï¼Œå…ˆç¡®è®¤è‡ªå·±çš„è¾“å…¥æ³•æ¡†æ¶æ˜¯å¦é€‰æ‹©æ­£ç¡®äº†ï¼Œä¹Ÿå°±æ˜¯åœ¨ \u0026lsquo;im-config\u0026rsquo; ä¸­æŸ¥çœ‹ï¼ŒäºŒå°±æ˜¯å°è¯•é‡å¯ã€‚ æ·»åŠ è¾“å…¥æ³•æºï¼š é‡å¯è®¡ç®—æœºä»¥ä¿è¯ä¸Šé¢çš„æ›´æ”¹ç”Ÿæ•ˆï¼Œå¦åˆ™æ— æ³•æ·»åŠ è¾“å…¥æ³•æºã€‚ æ‰“å¼€Settingsï¼ˆè®¾ç½®ï¼‰ æ‰¾åˆ° Region \u0026amp; Language (åœ°åŒºå’Œè¯­è¨€)ã€‚ åœ¨ Input Source (è¾“å…¥æº) ä¸­ç‚¹å‡» \u0026lsquo;+\u0026rsquo; æ·»åŠ è¾“å…¥æºï¼Œé€‰æ‹©è‡ªå·±å®‰è£…çš„è¾“å…¥æ³•ã€‚å®ƒä¸€èˆ¬ä½äº Chinese (æ±‰è¯­) ç»„ä¸­ï¼Œä¾‹å¦‚ \u0026lsquo;Chinese (SunPinyin)\u0026rsquo; å†æ¬¡å¼ºè°ƒï¼Œå¦‚æœä½ æ‰¾ä¸åˆ°ï¼Œå°±å°è¯•é‡å¯\näº«å—æ‰“å­—ï¼š å¦‚æœä½ èµ°çš„æ˜¯ ibus çº¿ï¼Œé‚£ä¹ˆç°åœ¨ï¼Œä½ ç°åœ¨å¯ä»¥é€šè¿‡ Super + Space(ç©ºæ ¼) æ¥åˆ‡æ¢è¾“å…¥æ–¹å¼äº†ã€‚ å¦‚æœä½ èµ°çš„æ˜¯ fcitx çº¿ï¼Œåˆ™æ˜¯é€šè¿‡ Ctrl + Space(ç©ºæ ¼) æ¥åˆ‡æ¢è¾“å…¥æ³•ï¼Œå¹¶ä¸”ä½ å¯ä»¥åœ¨ fcitx configuration ä¸­è®¾ç½®ç”šè‡³æ·»åŠ æ›´æ¢è¾“å…¥æ³•çš„å¿«æ·é”®ã€‚ åœ¨ Ubuntu ä¸­ï¼Œ Super é”®å¯¹åº”ç€ Windows å¾½æ ‡é”®\nå®‰è£…è¾“å…¥æ³•æ¡†æ¶ï¼š å“¦ï¼Ÿä¸ä¼šå®‰è£…äº†å—ï¼Ÿè®©æˆ‘æ¥å¸®åŠ©ä½ å§ã€‚ å®‰è£… ibus ä½¿ç”¨ \u0026lsquo;sudo apt install ibus\u0026rsquo; æŒ‡ä»¤å³å¯ã€‚ å®‰è£… fcitx ä½¿ç”¨ \u0026lsquo;sudo apt install fcitx\u0026rsquo; å³å¯ã€‚ ä¸‹è½½é€Ÿåº¦æ…¢ï¼Ÿ å¦‚æœä¸æ˜¯ç½‘ç»œé—®é¢˜çš„è¯ï¼Œå°±å°è¯•æ›´æ¢è½¯ä»¶å®‰è£…æºå§ã€‚è¿™ä¸ªåœ¨ç½‘ç»œä¸Šå¯ä»¥å¾ˆå®¹æ˜“çš„æœç´¢åˆ°ã€‚ä¸ªäººå»ºè®® é˜¿é‡Œäº‘é•œåƒ ä»¥åŠ åä¸ºäº‘é•œåƒã€‚\nå®‰è£…è¾“å…¥æ³•å¼•æ“ï¼š å…¶å®è¿™ä»¶äº‹æƒ…ä¹Ÿè›®ç®€å•çš„ï¼Œå› ä¸º apt å¯ä»¥æœç´¢è½¯ä»¶ï¼Œé€šè¿‡ \u0026lsquo;apt search ibus\u0026rsquo; å°±å¯ä»¥æœç´¢åˆ°å…³äº ibus çš„è½¯ä»¶ï¼Œå…¶ä¸­ä¸ä¹æœ‰è®¸å¤š ibus çš„è¾“å…¥æ³•å¼•æ“ è¾“å…¥æ³•å¼•æ“çš„å‘½åæ–¹å¼å¾ˆç®€å•ï¼Œå°±æ˜¯ æ¡†æ¶å-å¼•æ“åï¼Œä¾‹å¦‚ ibus-rimeï¼Œç›´æ¥ \u0026lsquo;sudo apt install ibus-rime\u0026rsquo; å³å¯å®‰è£…é€‚ç”¨äº ibus çš„ rime è¾“å…¥æ³•ã€‚æœ¬æ–‡ç« æåˆ°çš„å…¶ä»–è¾“å…¥æ³•å¼•æ“ä¹Ÿæ˜¯å¦‚æ­¤(åªæœ‰sogoupinyinéœ€è¦åœ¨SogouPinyinå®˜ç½‘ä¸‹è½½) å…¶ä»–å°é—®é¢˜ï¼š ä¸çŸ¥ä¸ºä½•ï¼ŒUbuntuä¸­ ibus æœ‰ç‚¹é—®é¢˜ï¼Œå®ƒæ— æ³•è®¾ç½®ä¸ºå€™é€‰è¯æ°´å¹³æ˜¾ç¤ºï¼Œç½‘ç»œä¸Šä¹Ÿæ‰¾ä¸åˆ°è§£å†³æ–¹å¼ï¼Œå¦‚æœä½ ä»‹æ„è¿™ä¸€ç‚¹ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨fcitxæ¡†æ¶å§ã€‚ ä½œè€…è¯´: å¦‚æœå¯ä»¥çš„è¯ï¼Œä¸ºæ­¤æ–‡ç« ç‚¹èµï¼Œå¹¶ä¸”åŠ å…¥åˆ°å†™æ–‡ç« çš„è¡Œåˆ—ï¼Œå›½å†…ITåœˆç¯å¢ƒéœ€è¦æˆ‘ä»¬åšå‡ºè´¡çŒ®ï¼ ","date":"2020-12-17T23:39:37+08:00","permalink":"https://slimenull.com/p/20201217233937/","title":"Ubuntu æ–°æ‰‹å¼•å¯¼ - ä¸­æ–‡è¾“å…¥æ³•é…ç½®"},{"content":"Windows ä¸ Linux é€šç”¨è£…æœºæ–¹æ³• æ­¥éª¤æ¦‚è¿°ï¼š å‡†å¤‡å®‰è£…ä»‹è´¨ ä»ä½ å–œæ¬¢çš„æ¸ é“ä¸‹è½½ISOé•œåƒ å°†ISOå†™å…¥åˆ°å®‰è£…ä»‹è´¨ æ­¥éª¤ï¼š 1. å‡†å¤‡å®‰è£…ä»‹è´¨ æ—§æ—¶çš„å®‰è£…ä»‹è´¨æŒ‡å…‰ç›˜ï¼Œä½†ç°åœ¨ï¼Œä¸€èˆ¬çš„ï¼Œå®‰è£…ä»‹è´¨éƒ½æŒ‡Uç›˜ã€‚ä½ éœ€è¦å‡†å¤‡ä¸€ä¸ªUç›˜ï¼Œè¿™ä¸ªUç›˜çš„æ•°æ®å°†è¢«å®Œå…¨æ“¦é™¤ç„¶åå†™å…¥å®‰è£…ç¨‹åºï¼Œæ‰€ä»¥ï¼Œæ¨èä½¿ç”¨ç©ºé—²Uç›˜ï¼Œå¹¶ä¸”ç©ºé—´å¤§å°æ¨è8Gå·¦å³ï¼Œä¸è¦å°äº4Gï¼Œå¯ä»¥å¤§äº8G(åªä¸è¿‡æœ‰äº›æµªè´¹ç©ºé—´å°±æ˜¯äº†)\nWindows10çš„é•œåƒä¸€èˆ¬ä¸º4Gå·¦å³ï¼Œå†™å…¥åˆ°Uç›˜åå¤§äº4G Linuxé•œåƒä¸€èˆ¬è¾ƒå°ï¼Œå¤§å¤š4Gä»¥ä¸‹ï¼Œä½†æ˜¯Kali Linuxçš„é•œåƒè¦å¤§äº4G è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ¨è8G Uç›˜\n2. ä»ä½ å–œæ¬¢çš„æ¸ é“ä¸‹è½½ISOé•œåƒ å¦‚æœä½ å¸Œæœ›ä½ å®‰è£…çš„ç³»ç»Ÿæ˜¯å¹²å‡€çš„ï¼Œé‚£ä¹ˆï¼Œä½ éœ€è¦ä½¿ç”¨æ­£ç¡®çš„æ¸ é“æ¥ä¸‹è½½ç³»ç»Ÿé•œåƒã€‚\nå®‰è£… Windows ç³»ç»Ÿï¼š å¦‚æœä½ æœ‰æ¿€æ´»å¯†é’¥æˆ–å¯ä»¥ä½¿ç”¨æ•°å­—æ¿€æ´»ï¼Œå»ºè®®ä½ å» Next, I tell you ä¸‹è½½é•œåƒï¼Œä½ éœ€è¦ç™»å½•(è¿™ä¸ä¼šèŠ±è´¹å¤ªé•¿æ—¶é—´)ï¼Œå®ƒä¹Ÿæ˜¯æ”¯æŒQQç™»å½•çš„ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ ä¸æƒ³æ³¨å†Œè´¦æˆ·ï¼Œä¹Ÿå¯ä»¥å»æ—§çš„ç½‘ç«™ MSDN I tell you ï¼Œ ä½†åœ¨æ—§çš„ç½‘ç«™ï¼Œä½ æ— æ³•ä¸‹è½½Windows10çš„æœ€æ–°ç‰ˆæœ¬ 2004 å¦‚æœä½ æ²¡æœ‰æ¿€æ´»å¯†é’¥, ä½ å¯ä»¥é€‰æ‹©è´­ä¹° Windows æ¿€æ´»ç , åœ¨ Microsoft å•†åŸ æˆ– äº¬ä¸œ, æ·˜å® ç­‰ç”µå­å•†åŸä¸­å¯ä»¥è´­ä¹°åˆ°, è´­ä¹°å, æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤, ä¸‹è½½ Windows ç³»ç»Ÿé•œåƒ. æˆ–è€…ä½ å¯ä»¥å…ˆè¿›è¡Œä¸Šé¢çš„æ­¥éª¤, åœ¨æåˆ°çš„ç½‘ç«™ä¸­ä¸‹è½½é•œåƒ, ç„¶åè¯•ç”¨ Windows. å¦‚æœä½ æƒ³è¦ä½¿ç”¨ç³»ç»Ÿæ¿€æ´»å·¥å…·, ä¸€å®šè¦çŸ¥é“, è¿™æ˜¯ä¸åˆæ³•çš„, å¹¶ä¸”æ¿€æ´»å·¥å…·å¸¸å¸¸ä¼´éšç€ç—…æ¯’, è¿™äº›ç—…æ¯’å¾ˆéš¾è¢«å¤„ç†æ‰. 360æˆ–è®¸å¯ä»¥æå®šå®ƒä»¬. å¦‚æœä½ æƒ³è¦ä½¿ç”¨ç›—ç‰ˆè½¯ä»¶(ä¸éœ€è¦ä½ ä¸ºå…¶æ”¯ä»˜è´¹ç”¨), è¯·å‚é˜…æ–‡ç« å°¾ ç¡¬ç›˜å®‰è£… å®‰è£… Linux ç³»ç»Ÿï¼š ä¸ç”¨è®²äº†ï¼ŒLinux çš„å¤§éƒ¨åˆ†å‘è¡Œç‰ˆéƒ½æ˜¯å…è´¹ä¸”å¼€æºï¼Œç›´æ¥åœ¨å®˜æ–¹ç½‘ç«™å³å¯ä¸‹è½½åˆ°ã€‚Ubuntuï¼Œ Debianï¼ŒDeepinï¼ŒKaliï¼ŒArchï¼ŒCentOSï¼ŒMintï¼ŒRed Hat æç¤ºï¼šI tell youç½‘ç«™å†…çš„ed2kæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ä¸‹è½½åœ°å€ï¼Œå¯è§†ä½œp2pä¸‹è½½é“¾æ¥ï¼Œæ¨èä½¿ç”¨è¿…é›·(åˆ«çš„è½¯ä»¶å¯èƒ½å¯¹éæŠ€æœ¯äººå‘˜ä¸å‹å¥½) æ³¨æ„ï¼Œå¤§å¤šæ•°å›½å†…æµè¡Œçš„ISOæˆ–GHOé•œåƒä¸‹è½½ç½‘ç«™éƒ½æ˜¯åŒ…å«æ†ç»‘è½¯ä»¶çš„éå®˜æ–¹åŸè£…ç³»ç»Ÿï¼å¦‚æœä½ è¦ä½¿ç”¨çº¯å‡€ç³»ç»Ÿï¼Œåˆ‡è®°è¦ä»”ç»†é€‰æ‹©ï¼\n3. å°†ISOå†™å…¥åˆ°ä»‹è´¨ å†™å…¥åˆ°ä»‹è´¨å¯ä¸å•å•æ˜¯å°†ISOä½œä¸ºå‹ç¼©åŒ…æ‰“å¼€å¹¶å†…å®¹æ‹·è´åˆ°Uç›˜ï¼Œè¿™æ ·æ˜¯é”™è¯¯çš„æ“ä½œï¼ä½†æ˜¯ä¸å¿…æ‹…å¿ƒï¼ŒåŒæ ·ï¼Œå®ƒä¹Ÿä¸æ˜¯ä»€ä¹ˆå¤æ‚çš„æ“ä½œ\nåœ¨ Windows ç³»ç»Ÿä¸­ï¼Œä½ éœ€è¦ä¸€ä¸ªå°å·¥å…·æ¥åˆ¶ä½œå®‰è£…ä»‹è´¨ï¼Œå®ƒå°±æ˜¯Rufusï¼ï¼Œ ä¸€ä¸ªä»…æœ‰ä¸åˆ°5MBçš„å°å·¥å…·ï¼Œå¹¶ä¸”èƒ½å¤Ÿè‡ªåŠ¨å¸®ä½ æ£€æµ‹å¯èƒ½ç¼ºå¤±çš„å†…å®¹ï¼Rufusçš„ä½¿ç”¨ä¹Ÿéå¸¸ç®€ä¾¿ï¼Œåªéœ€è¦é€‰æ‹©è®¾å¤‡ï¼Œé€‰æ‹©ISOé•œåƒï¼Œç‚¹å‡»å¼€å§‹å³å¯(æˆ‘æ˜¯æŒ‡, å…¶ä»–é…ç½®å†…å®¹é»˜è®¤ä¸éœ€è¦æ›´æ”¹)ã€‚è¿›å…¥Rufuså®˜ç½‘ï¼Œä¸‹è½½Rufus 3.13ä¾¿æºç‰ˆ åœ¨Linuxä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦å€ŸåŠ©ä¸€ä¸ªâ€˜ddâ€™æŒ‡ä»¤å³å¯å°†ISOé•œåƒå†™å…¥åˆ°Uç›˜ï¼Œç”¨æ³•æ˜¯ï¼š 1 2 3 dd if=â€˜è¾“å…¥æ–‡ä»¶â€™ of=â€˜è¾“å‡ºè®¾å¤‡â€™ # ä½¿ç”¨lsblkæŒ‡ä»¤å¯ä»¥æŸ¥çœ‹è‡ªå·±å½“å‰çš„æ¥å…¥çš„å­˜å‚¨è®¾å¤‡ # ddæŒ‡ä»¤ç¤ºä¾‹ä½¿ç”¨ç¤ºä¾‹ï¼š dd if=\u0026#39;/home/username/ubuntu20.04lts.iso\u0026#39; of=\u0026#39;/dev/sda\u0026#39; åœ¨è¿™é‡Œä¸å¾—ä¸æåˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨ Linux ä¸­ä½¿ç”¨ dd æŒ‡ä»¤å†™å…¥ Windows é•œåƒåˆ°Uç›˜ï¼Œä¼šå‡ºç°æ— æ³•å®‰è£…çš„é—®é¢˜ï¼Œä½†æ˜¯ä½¿ç”¨ Rufus å†™å…¥å°±æ²¡é—®é¢˜ã€‚ï¼ˆå¯èƒ½æ˜¯æ ¼å¼é—®é¢˜ï¼‰\nç¤ºä¾‹å›¾åƒ ç®€ä»‹ | Rufus çš„ç•Œé¢éå¸¸ç®€æ´, ä»…æœ‰å¿…è¦çš„é€‰é¡¹ï¼Œæ— ä»»ä½•é™„åŠ åŠŸèƒ½ï¼Œæ— è®ºå°ç™½è¿˜æ˜¯å¤§ç¥ï¼Œéƒ½å¾ˆé€‚åˆä½¿ç”¨\n| è¿™æ˜¯Ubuntuç³»ç»Ÿä¸­ï¼ŒddæŒ‡ä»¤çš„å¸®åŠ©æ‰‹å†Œï¼Œä¸è¿‡å¯¹äºåªéœ€è¦å°†ISOå†™å…¥åˆ°Uç›˜çš„æˆ‘ä»¬ï¼Œä¸éœ€è¦çœ‹é‚£ä¹ˆå¤šå†…å®¹ï¼Œåªéœ€è¦çŸ¥é“ifå’Œofå‚æ•°å³å¯\n4. å¼€å§‹å®‰è£… å¾…å†™å…¥å®Œæ¯•ï¼Œå®‰è£…å‡†å¤‡å·²ç»å®Œå…¨å°±ç»ªäº†ï¼é‚£ä¹ˆï¼Œä¸‹ä¸€æ­¥å°±æ˜¯å®‰è£…æ­¥éª¤äº†ï¼\nå…³é—­è®¡ç®—æœº\næ’å…¥å‡†å¤‡å¥½çš„å®‰è£…ä»‹è´¨ï¼Œå¯åŠ¨è®¡ç®—æœº\nä»Uç›˜å¯åŠ¨ï¼ˆæœ‰ä¸¤ç§æ–¹å¼ï¼‰ï¼š\nç¬¬ä¸€ç§ï¼šæŒ‰ä¸‹ é€‰æ‹©å¼•å¯¼ çš„æŒ‰é”®ï¼Œå®ƒå¯èƒ½æ˜¯ F12ï¼Œä½†ä¸åŒä¸»æ¿æœ‰ä¸åŒçš„æŒ‰é”®ï¼ŒDellç”µè„‘çš„æŒ‰é”®å³æ˜¯ F12ã€‚ ç¬¬äºŒç§ï¼šæŒ‰ä¸‹è¿›å…¥ å¯åŠ¨é…ç½® çš„æŒ‰é”® ï¼Œåœ¨ å¯åŠ¨é…ç½® ä¸­è°ƒæ•´å¼•å¯¼é¡ºåºè‡³USBè®¾å¤‡æœ€é¡¶çº§ï¼Œé‡å¯ç”µè„‘å³å¯è¿›å…¥å®‰è£…ç•Œé¢ è‹¥æœ‰ç–‘é—®ï¼Œå¯å‚é˜…è¿™ç¯‡æ–‡ç« ï¼š è¿›å…¥BIOS/UEFIé…ç½®é¡µé¢\næˆåŠŸä»Uç›˜å¯åŠ¨åï¼Œå°±å·²ç»è¿›å…¥åˆ°ç³»ç»Ÿå®‰è£…ç•Œé¢äº†ã€‚æ¥ä¸‹æ¥ï¼ŒæŒ‰ç…§å®‰è£…ç¨‹åºçš„æç¤ºè¿›è¡Œå³å¯ã€‚ä¸€èˆ¬çš„ï¼ŒLinuxç³»ç»Ÿçš„å¯å®šåˆ¶æ€§è¦æ¯”Windowsé«˜å¾ˆå¤šï¼Œè€ŒWindowsçš„å®‰è£…å°±ç®€å•äº†å¾ˆå¤šã€‚\näº«å—æ–°ç³»ç»Ÿï¼\nç¡¬ç›˜å®‰è£…ï¼š æŸäº›ISOé•œåƒï¼Œä¾‹å¦‚å›½å†…è¾ƒä¸ºæµè¡Œçš„é•œåƒä¸‹è½½ç½‘ç«™æä¾›çš„ISOï¼Œå°†å…¶ä¸­çš„å†…å®¹ç›´æ¥è§£å‹åˆ°æŸå¤„ï¼Œå¯åŠ¨ setup.exe å³å¯å®‰è£…ï¼Œè¿™ç§å®‰è£…æ–¹å¼è¢«ç§°ä¸º ç¡¬ç›˜å®‰è£… ï¼Œå¹¶ä¸”ä¸€èˆ¬çš„ï¼Œè¿™ç§å®‰è£…æ–¹å¼éƒ½æ˜¯ä¸€é”®å‚»ç“œå¼å®‰è£…ï¼Œä¸­é€”å®Œå…¨ä¸éœ€è¦ç”¨æˆ·è¿›è¡Œä»»ä½•å¹²æ¶‰ã€‚ ä¸‹é¢åˆ—ä¸¾ä¸€äº›å›½å†…çš„éå®˜æ–¹é•œåƒä¸‹è½½æºï¼š æ·±åº¦æŠ€æœ¯ï¼Œ é›¨æ—æœ¨é£ï¼Œèåœå®¶å›­ï¼Œç”µè„‘å…¬å¸ï¼Œç³»ç»Ÿä¹‹å®¶ï¼Œç•ªèŒ„èŠ±å›­ æ³¨æ„ï¼Œä½ å‡ ä¹æ— æ³•åœ¨å›½å†…æµè¡Œé•œåƒä¸‹è½½ç«™è·å–åŸç‰ˆé•œåƒï¼è¿™äº›éƒ½æ˜¯åŒ…å«æ†ç»‘çš„éåŸç‰ˆé•œåƒï¼å¹¶ä¸”ææœ‰å¯èƒ½ä¾µçŠ¯äº†å¾®è½¯(Microsoft)çš„ç‰ˆæƒï¼Œåœ¨ä½¿ç”¨ä¹‹å‰ï¼Œæ…é‡è€ƒè™‘ï¼\nåœ¨ä¸‹è½½åˆ°æ”¯æŒç¡¬ç›˜å®‰è£…çš„ISOé•œåƒåï¼Œä½¿ç”¨ä»»æ„å‹ç¼©åŒ…ç®¡ç†è½¯ä»¶(ä¾‹å¦‚7zip)æ‰“å¼€ï¼Œè§£å‹å…¶ä¸­çš„å†…å®¹åˆ°ä»»æ„æ–‡ä»¶å¤¹ï¼Œä½†è¦æ±‚ä¸å¯ä»¥åœ¨ä½ è¦å®‰è£…ç³»ç»Ÿçš„åˆ†åŒºï¼Œä¾‹å¦‚ä½ è¦å°†ç³»ç»Ÿå®‰è£…åˆ°Cç›˜ï¼Œé‚£å°±ä¸å¯ä»¥å°†ISOæ–‡ä»¶è§£å‹åˆ°Cç›˜ã€‚ è§£å‹åï¼ŒåŒå‡» setup.exe æŒ‰ç…§è‡ªå·±çš„éœ€è¦é…ç½®ä¸€ä¸‹ï¼Œå¦‚æœçœ‹ä¸æ‡‚ï¼Œå°±ç›´æ¥ç‚¹ä¸‹ä¸€æ­¥ï¼Œç„¶åå‚»ç“œå¼ç³»ç»Ÿå®‰è£…å°±å¼€å§‹äº†ï¼Œè§£å‹æ¥ä½ éœ€è¦åšçš„å°±æ˜¯ç­‰å¾…å®‰è£…äº†ï¼ˆå–æ¯Javaææç¥ï¼Ÿ å®‰è£…å®Œæˆåï¼Œäº«å—æ–°ç³»ç»Ÿå§ï¼ï¼ˆè®°å¾—å°†æ‰€æœ‰æ†ç»‘çš„ä¸œè¥¿å…¨éƒ¨å¸è½½ ","date":"2020-12-13T00:11:56+08:00","permalink":"https://slimenull.com/p/20201213001156/","title":"ã€Œå¹²è´§ã€ è£…æœºå¦‚æ­¤ç®€å•ï¼Windows ä¸ Linux é€šç”¨è£…æœºæ–¹æ³•ã€‚(æ— éœ€VMè™šæ‹Ÿæœº)"},{"content":" ç”µè„‘å¯åŠ¨æ—¶ï¼Œéœ€è¦è¯»å–æœ€åŸºæœ¬çš„é…ç½®ï¼Œç„¶åæ‰è¿›å…¥ç³»ç»Ÿï¼Œè¿™ä¸ªé…ç½®å°±æ˜¯ å¯åŠ¨é…ç½® ã€‚æ—§æ—¶çš„å¯åŠ¨é…ç½®å³BIOSé…ç½®ï¼Œä½†å¦‚ä»ŠUEFIå³å°†å–ä»£BIOSé…ç½®ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ å¯åŠ¨é…ç½® è¿™ä¸ªåç§°ï¼Œå¦åˆ™å°±å¯èƒ½é—¹å‡ºå°†UEFIç§°ä¸ºBIOSçš„å°´å°¬åœºé¢ã€‚ è¿™ä¸ªå¯åŠ¨é…ç½®ï¼Œæ˜¯å¯ä»¥è¢«æˆ‘ä»¬è°ƒæ•´çš„ï¼Œåœ¨å¯åŠ¨é…ç½®é¡µé¢ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒæ•´é£æ‰‡è½¬é€Ÿï¼Œç³»ç»Ÿæ—¶é—´ï¼Œè®¾å¤‡ç”µå‹ï¼Œä»¥åŠå…¶ä»–æ›´é«˜æ·±çš„ä¸œè¥¿ï¼Œä¸è¿‡æœ€å¸¸ç”¨çš„ï¼Œè¿˜æ˜¯å¼•å¯¼ä¼˜å…ˆçº§ã€‚å› ä¸ºä¸€ä¸ªç”µè„‘ï¼Œå¯ä»¥æœ‰å¤šä¸ªæ“ä½œç³»ç»Ÿï¼Œå¼•å¯¼ä¼˜å…ˆçº§åˆ™æ˜¯æ§åˆ¶å¯åŠ¨ç³»ç»Ÿçš„é…ç½®é¡¹ã€‚ ä¸åŒçš„ä¸»æ¿ï¼Œæ˜¯æœ‰ä¸åŒçš„è¿›å…¥æŒ‰é”®çš„ï¼Œä¾‹å¦‚Dellç”µè„‘ï¼Œæ˜¯F2è¿›å…¥å¯åŠ¨é…ç½®ã€‚ é‚£ä¹ˆï¼Œ ä¸‹ä¸€æ­¥å°±æ˜¯åœ¨ç½‘ä¸ŠæŸ¥æ‰¾ä½ çš„è®¾å¤‡å¯¹åº”çš„æŒ‰é”®äº†, æœç´¢è¿‘ä¼¼äº â€˜è®¾å¤‡å BIOS/UEFI æŒ‰é”®â€™ çš„å†…å®¹ä»¥å°è¯•æ£€ç´¢å‡ºä½ æ‰€éœ€è¦çš„æŒ‰é”®ã€‚ä¸‹é¢çš„æ­¥éª¤ä»¥ F2ä½œä¸ºç¤ºä¾‹ã€‚\næŒ‰ä¸‹å¼€æœºé”®åï¼Œç‹‚æŒ‰F2, ç›´åˆ°è¿›å…¥é…ç½®é¡µé¢ã€‚ï¼ˆå®ƒå¯èƒ½æ˜¯çº¯è‹±æ–‡ç•Œé¢ å¦‚æœæ˜¯å›½å†…ä¸»æ¿ï¼Œæˆ–è€…è¯´æ”¯æŒå¤šè¯­è¨€çš„é…ç½®é¡µï¼Œä½ å¯ä»¥å°è¯•æ‰¾ä¸‹ â€˜Languageâ€™ é…ç½®ä»¥è°ƒæ•´æ˜¾ç¤ºè¯­è¨€ å¯åŠ¨æ—¶ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„æŒ‰é”®ï¼Œä¾‹å¦‚ Windowså¯åŠ¨é«˜çº§é€‰é¡¹ çš„æŒ‰é”®æ˜¯F8ï¼ŒDellç”µè„‘çš„å¼•å¯¼é€‰æ‹©çš„å¿«æ·é”®æ˜¯F12, å¦‚æœä½ åªæ˜¯å¸Œæœ›åœ¨æœ¬æ¬¡è¿›å…¥ç³»ç»Ÿæ—¶ä»å…¶ä»–è®¾å¤‡è¿›å…¥ï¼Œä½¿ç”¨F12æ›´ç®€ä¾¿äº›ã€‚å½“ç„¶ï¼Œå³ä¾¿æ˜¯è¿™ä¸ªï¼Œåœ¨ä¸åŒä¸»æ¿ä¸­ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œä¾‹å¦‚æˆ‘é‚£ä¸ªå°å¼æœºå°±æ˜¯F11ã€‚\nå¯¹äºæƒ³è¦é€šè¿‡ä»‹è´¨å®‰è£…ç³»ç»Ÿçš„æœ‹å‹å‘¢ï¼Œåœ¨å¼€æœºæ—¶ç‹‚æŒ‰F12è¿›å…¥å¼•å¯¼é€‰æ‹©é¡µé¢ï¼Œé€‰æ‹©å¸¦æœ‰USBå­—æ ·çš„é€‰é¡¹å¹¶æŒ‰Enterå³å¯è¿›å…¥å®‰è£…ç¨‹åºã€‚\n","date":"2020-12-12T23:33:09+08:00","permalink":"https://slimenull.com/p/20201212233309/","title":"[ç”µè„‘å°ç™½å…¥é—¨] å¦‚ä½•è¿›å…¥å¯åŠ¨é…ç½® (BIOS/UEFIé…ç½®)"},{"content":"å…³äºæˆ‘çš„Kaliç³»ç»Ÿï¼š æ“ä½œç³»ç»Ÿï¼šLinux NullKali 5.9.0-kali2-amd64 #1 SMP Debian 5.9.6-1kali1 (2020-11-11) x86_64 GNU/Linux æ¡Œé¢ç¯å¢ƒï¼šXfce Desktop Environment Version 4.14, destributed by Debian\næ‰“å¼€æ—¶é—´é…ç½®ï¼š ä½äºå›ºå®š\u0026rsquo;ä»»åŠ¡æ \u0026rsquo;çš„å³ä¾§ï¼Œ å³å‡»æ—¶é—´ï¼Œé€‰æ‹©Properties(å±æ€§) è¿›è¡Œè°ƒæ•´ï¼š äº¦è§ï¼š Kali Linux æ–°æ‰‹å¼•å¯¼ - åŒºåŸŸä¸è¯­è¨€é…ç½®\n","date":"2020-12-09T12:23:11+08:00","permalink":"https://slimenull.com/p/20201209122311/","title":"Kali Linux æ–°æ‰‹å¼•å¯¼ - Xfceæ¡Œé¢æ—¶é—´é…ç½®"},{"content":"æ¦‚è¿°: åœ¨ä½¿ç”¨aptæˆ–dpkgå®‰è£…debåŒ…æ—¶ï¼Œ å‡ºç°äº†no such file or directoryçš„é”™è¯¯ è¦ç‚¹: åœ¨dpkgæ—¶æ˜¯å¦æŒ‡å®šäº†é”™è¯¯çš„è·¯å¾„ åŒ…å¯¹äºç³»ç»Ÿæ¥è¯´æ˜¯å¦è¿‡æ—§ æˆ‘çš„è§£å†³è¿‡ç¨‹: æˆ‘é‡åˆ°çš„é—®é¢˜å±äºè¦ç‚¹ä¸­çš„åè€…ï¼Œ libpng12å¯¹äºæˆ‘çš„ç³»ç»Ÿæ¥è¯´å¤ªæ—§äº†ã€‚ å…·ä½“æƒ…å†µæ˜¯è¿™æ ·çš„ï¼Œ æˆ‘åœ¨ä½¿ç”¨aptå®‰è£…ä¸€äº›è½¯ä»¶æ—¶ï¼Œ å‘ç°ï¼Œ ä¸€ç›´æŠ¥ä¾èµ–é—®é¢˜ï¼Œ è®©æˆ‘æ‰§è¡Œâ€˜apt \u0026ndash;fix-broken installâ€™(å³â€˜apt -f installâ€™)ï¼Œ ä½†å½“æˆ‘æ‰§è¡Œæ—¶ï¼Œ å®ƒå°è¯•å®‰è£…çš„libpng12-0å§‹ç»ˆè£…ä¸ä¸Š(éƒ½å¿«æŠŠå­©å­æ€¥å“­äº†qaq)ï¼ ä»æŠ¥é”™ä¿¡æ¯ä¸Šçœ‹ï¼Œ libpng12-0ä¼¼ä¹æ˜¯libpng12.so.0çš„æ–°ç‰ˆæœ¬ï¼Œ åœ¨å®‰è£…æ—¶æ€»æ˜¯æç¤ºno such file or directoryã€‚\né¦–å…ˆï¼Œ æˆ‘åœ¨ç½‘ä¸Šæœç´¢äº†ä¸€æ³¢ï¼Œ ä½†æ˜¯ä¾ç…§å›½å†…ITåœˆå­è½¬è½½æ»¡å¤©é£çš„å°¿æ€§ï¼Œ æˆ‘è¿˜æ˜¯ä»¥å¤±è´¥å‘Šç»ˆ â€”â€” æ‰¾äº†å‡ åç¯‡æ–‡ç« ä¹Ÿæ²¡çœ‹åˆ°æœ‰ç”¨çš„ åæ¥æˆ‘å‘ç°ï¼Œ å¦‚æœæˆ‘ä¸å¤„ç†è¿™ä¸ªé”™è¯¯ï¼Œ æˆ‘ä¸èƒ½è¿›è¡Œä»»ä½•apt installï¼Œ upgradeï¼Œ removeæ“ä½œï¼ æˆ‘æ…Œäº†ï¼Œ äºæ˜¯æˆ‘å°è¯•æ‰§è¡Œapt remove libpng12.so.0ï¼Œ ä½†æ˜¯æç¤ºå®ƒè¢«libwebkitgtkä»€ä¹ˆçš„ä¸€ä¸ªæˆ‘ä¸è®¤è¯†çš„ä¸œè¥¿åŒ…æ‰€ä¾èµ–ï¼Œ ç„¶åï¼Œ ä¸èƒ½ç§»é™¤ã€‚ã€‚ã€‚ ç„¶åæˆ‘åˆå°è¯•ç§»é™¤è¿™ä¸ªä¾èµ–äºlibpngçš„libwebkitgtkçš„ä»€ä¹ˆåŒ…ï¼Œ ç„¶åæˆ‘å‘ç°å®ƒåˆè¢«sunloginclient(åº”è¯¥æ˜¯å‘æ—¥è‘µè¿œç¨‹æ§åˆ¶è½¯ä»¶å®¢æˆ·ç«¯)æ‰€ä¾èµ–ï¼Œï¼Œï¼Œ ç§»é™¤å¤±è´¥ï¼Œï¼Œï¼Œ äºæ˜¯æˆ‘å°è¯•ç§»é™¤sunloginclientè¿™ä¸ªåŒ…ï¼ˆåæ­£æˆ‘ç›®å‰ä¸å¤§ç”¨å¾—åˆ°å‘æ—¥è‘µï¼‰ï¼Œ ä½†æ˜¯ï¼Œï¼Œï¼Œæ­£å¦‚æˆ‘å‰é¢æ‰€è¯´çš„ï¼Œ è™½ç„¶sunloginclientä¸è¢«ä»€ä¹ˆåŒ…æ‰€ä¾èµ–ï¼Œ ä½†æ˜¯å› ä¸ºæˆ‘ä»¬libpng12-0çš„ä¾èµ–é—®é¢˜æ²¡è§£å†³ï¼Œ æ‰€ä»¥ï¼Œï¼Œï¼Œ ç§»é™¤å¤±è´¥ã€‚ã€‚ã€‚ äºæ˜¯ï¼Œ æˆ‘ä¼¼ä¹é™·å…¥äº†ä¸€ä¸ªé€»è¾‘é—®é¢˜ï¼Œ æƒ³è¦å¤„ç†è¿™ä¸ªä¾èµ–é—®é¢˜ï¼Œ æˆ‘å°±å¾—ç§»é™¤æ‰æ—§çš„libpng12.so.0ï¼Œ æƒ³è¦ç§»é™¤å®ƒæˆ‘å°±å¾—ç§»é™¤sunloginclientç„¶åæœ€åç§»é™¤å®ƒï¼Œ è€Œåªæœ‰æˆ‘å¤„ç†å®Œä¾èµ–é—®é¢˜åï¼Œ æ‰èƒ½å¤Ÿä½¿ç”¨aptæ¥è¿›è¡Œå®‰è£…ä¸ç§»é™¤æ“ä½œï¼ ç»äº† æŸ¥èµ„æ–™ï¼Œ æŸ¥èµ„æ–™ï¼Œ æŸ¥èµ„æ–™ï¼Œ ç»è¿‡ä¸€æ®µæ—¶é—´çš„å‘¨æ—‹ï¼Œ æˆ‘é¡¿æ‚Ÿäº†ï¼Œ å¾ˆå¿«å•Šï¼Œ æˆ‘æ‰“å¼€ç»ˆç«¯ï¼Œ ç”¨dpkgæŠŠsunloginclientç»™ç§»é™¤äº†ï¼Œ ç„¶åé¡ºç†æˆç« çš„æŠŠlibwebkitgtkï¼Œ libpng12.so.0ç»™ç§»é™¤äº† å®Œç¾è§£å†³\n","date":"2020-12-08T19:54:44+08:00","permalink":"https://slimenull.com/p/20201208195444/","title":"Kali Linux è®°å½• - æ­»é”ï¼Œä¾èµ– â€˜Unable to install new version of ...libpng12.so.0 no such file or directoryâ€˜"},{"content":"å…³äºæˆ‘çš„Kaliç³»ç»Ÿï¼š æ“ä½œç³»ç»Ÿï¼šLinux NullKali 5.9.0-kali2-amd64 #1 SMP Debian 5.9.6-1kali1 (2020-11-11) x86_64 GNU/Linux æ¡Œé¢ç¯å¢ƒï¼šXfce Desktop Environment Version 4.14, destributed by Debian\nå®‰è£…è¾“å…¥æ³•æ¡†æ¶Fcitx 1 2 sudo apt install fcitx # è¿™é‡Œæ¨èçš„æ˜¯Fcitxï¼Œ kalié»˜è®¤æ˜¯è£…äº†fcitxçš„ï¼Œ å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œ å°±æ‰§è¡Œä¸Šè¾¹çš„æŒ‡ä»¤å®‰è£…å§ å®‰è£…å¥½ç”¨çš„è¾“å…¥æ³• è®¿é—® â€˜æœç‹—è¾“å…¥æ³• for Linuxâ€™ å®˜ç½‘å¹¶ä¸‹è½½debåŒ…ã€‚ç‚¹æ­¤å¤„è·³è½¬\n1 2 sudo dpkg -i sogoupinyin_ç‰ˆæœ¬å·_amd64.deb # è‹¥å‡ºç°ä¾èµ–é—®é¢˜ï¼Œ åˆ™æ‰§è¡ŒæŒ‡ä»¤ä»¥å°è¯•ä¿®å¤: sudo apt -f install é…ç½®è¾“å…¥æ³• å¯åŠ¨ Fcitx Configuration ï¼Œ ç‚¹å‡»å·¦ä¸‹è§’åŠ å·ä»¥æ·»åŠ è¾“å…¥æ³•ï¼Œ å–æ¶ˆå‹¾é€‰â€˜Only Show Current Languageâ€™ï¼Œ æ‰¾åˆ°sogoupinyiin ï¼ˆæ²¡é”™ï¼Œ ä¸æ˜¯sougouè€Œæ˜¯sogouï¼‰ ç°åœ¨ï¼Œ ä¸€åˆ‡å°±ç»ªï¼Œ ä½ å¯ä»¥ä½¿ç”¨è¾“å…¥æ³•äº†ã€‚ é»˜è®¤çš„è¾“å…¥æ³•åˆ‡æ¢å¿«æ·é”®æ˜¯ â€˜Ctrl + Spaceâ€™ ï¼Œ å¯åœ¨Fcitx Configurationçš„Global Configä¸­è°ƒæ•´ã€‚åˆ‡æ¢è‡³â€˜æœç‹—æ‹¼éŸ³â€™æ—¶ï¼Œ åœ¨å±å¹•ä¸Šä¼šå‡ºç°åœ¨æœç‹—æ‹¼éŸ³çš„è¯­è¨€æ ï¼Œ å¦‚ä¸‹ï¼š æ­¤æ—¶ï¼Œ ä½ å¯ä»¥æ­£å¸¸ä½¿ç”¨è¾“å…¥æ³•ã€‚è‹¥æœ‰å…¶ä»–é—®é¢˜ï¼Œ å¯ç»§ç»­é˜…è¯»ä¸‹é¢çš„å†…å®¹ã€‚ ä¸‹å›¾å³é…ç½®å¥½çš„Fcitx ç„å­¦é—®é¢˜ï¼š Fcitx Configuration å¯åŠ¨åï¼Œ çª—å£ä¸­æ²¡æœ‰ä»»ä½•å†…å®¹ï¼ˆæ­£å¸¸æƒ…å†µä¸‹åº”è¯¥æœ‰ä¸€ä¸ªKeyboard - è¯­è¨€ï¼‰ å°è¯•é‡å¯ï¼Œ é‡æ–°å®‰è£…Fcitxï¼Œ æ›´æ¢åŒºåŸŸä¸è¯­è¨€ï¼ˆå‚é˜…ï¼šKali Linux æ–°æ‰‹å¼•å¯¼ - åŒºåŸŸä¸è¯­è¨€é…ç½®ï¼‰\nåœ¨Fcitx Configuration ä¸­æ·»åŠ è¾“å…¥æ³•æ—¶ï¼Œ æ— æ³•æ‰¾åˆ°sogoupinyin æ£€æŸ¥è¾“å…¥æ³•æ˜¯å¦æ­£ç¡®å®‰è£…äº†ï¼Œ å°è¯•æ‰§è¡Œapt updateï¼Œ apt upgradeï¼Œ apt -f install\n","date":"2020-12-07T20:35:24+08:00","permalink":"https://slimenull.com/p/20201207203524/","title":"Kali Linux æ–°æ‰‹å¼•å¯¼ - é…ç½®ä¸­æ–‡è¾“å…¥æ³•"},{"content":"å…³äºæˆ‘çš„Kaliç³»ç»Ÿï¼š æ“ä½œç³»ç»Ÿï¼šLinux NullKali 5.9.0-kali2-amd64 #1 SMP Debian 5.9.6-1kali1 (2020-11-11) x86_64 GNU/Linux æ¡Œé¢ç¯å¢ƒï¼šXfce Desktop Environment Version 4.14, destributed by Debian\né…ç½®åŒºåŸŸ 1 2 tzselect # åœ¨Shellä¸­æ‰§è¡Œå³å¯ï¼Œ å†…å®¹æ¥è‡ªç½‘ç»œ é…ç½®è¯­è¨€ 1 2 3 4 sudo dpkg-reconfigure locales # é…ç½®å®Œåè®°å¾—é‡å¯(reboot) # è¿™æ¡æŒ‡ä»¤çš„æ„æ€åº”è¯¥æ˜¯è°ƒæ•´è¯­è¨€å¹¶å®‰è£…ç›¸å…³åŒ… # é…ç½®å®Œè¯­è¨€åï¼Œåœ¨ç™»å½•é¡µé¢çš„å³ä¸Šè§’å¯ä»¥å¿«æ·åˆ‡æ¢è¯­è¨€ ","date":"2020-12-07T16:50:05+08:00","permalink":"https://slimenull.com/p/20201207165005/","title":"Kali Linux æ–°æ‰‹å¼•å¯¼ - åŒºåŸŸä¸è¯­è¨€é…ç½®"},{"content":" èµ„æ–™æ¥è‡ªç½‘ç»œ, åœ¨æ­¤æ•´ç†åˆ°ä¸€èµ·\nAè¡¨ç¤ºä½¿ç”¨ANSIç¼–ç ä½œä¸ºæ ‡å‡†è¾“å…¥ä¸è¾“å‡ºæµçš„æ–‡æœ¬ç¼–ç  Wè¡¨ç¤ºä½¿ç”¨Unicodeä½œä¸ºç¼–ç  Exè¡¨ç¤ºæ‹“å±•, æ ‡æ³¨äº†Exçš„winapiå‡½æ•°ä¼šæ¯”æ²¡æœ‰æ ‡Exçš„å‡½æ•°å¤šä¸€äº›å‚æ•°ä»€ä¹ˆçš„, å¯ä»¥è¯´æ‹“å±•äº†ä¸€äº›åŠŸèƒ½ ExA ä¸ ExW å°±æ˜¯ A,Wä¸Exçš„ç»“åˆäº† ","date":"2020-11-20T03:32:37+08:00","permalink":"https://slimenull.com/p/20201120033237/","title":"[Win32] Windows API å‡½æ•°åç¼€(A,W,ExA,ExW)çš„ä½œç”¨"},{"content":"[C#] åœ¨æ§åˆ¶å°ç»˜å›¾ åŸç†: é€šè¿‡Graphicsè¿›è¡Œç»˜å›¾ è·å–æ§åˆ¶å°çš„çª—å£å¥æŸ„ 1 2 [DllImport(\u0026#34;kernel32.dll\u0026#34;)] static extern IntPtr GetConsoleWindow(); è·å–Graphicså¯¹è±¡ 1 Graphics g = Graphics.FromHwnd(GetConsoleWindow()); äºæ˜¯ä¹, ä½ å°±å¯ä»¥é€šè¿‡è·å–çš„Graphicså¯¹è±¡éšä¾¿è¿›è¡Œç»˜å›¾äº†!\nä½†æ˜¯, æ³¨æ„, å½“æ§åˆ¶æ¡åˆ·æ–°çš„æ—¶å€™, æ¯”å¦‚Console.Clear(), æˆ–è€…æ§åˆ¶å°å…‰æ ‡ç»è¿‡ç»˜å›¾åŒºåŸŸ, ç»˜åˆ¶çš„å†…å®¹å°±ä¼šå¤±æ•ˆ, è¿™æ—¶ä½ éœ€è¦é‡æ–°ç»˜åˆ¶. (å¦‚æœæœ‰æ§åˆ¶å°åˆ·æ–°çš„äº‹ä»¶å°±å¥½äº†)\n","date":"2020-11-15T21:59:01+08:00","permalink":"https://slimenull.com/p/20201115215901/","title":"[C#] åœ¨æ§åˆ¶å°ç»˜å›¾, å¦‚:æ”¾ç½®å›¾åƒ, ç»˜åˆ¶çº¿æ¡"},{"content":"å…³äº: åŸç†è®²è§£ ä»£ç ç¤ºä¾‹ å®Œæ•´ç¨‹åºæºç ä¸‹è½½ é€‚ç”¨äº: å®ä¾‹ä»£ç é€‚ç”¨äº: .NET Framework \u0026amp; .NET Core ç®—æ³•é€šç”¨. åªè¦ä½ èƒ½å¤Ÿæ‰¾åˆ°ä¸ç®—æ³•å¯¹åº”çš„å®ç°æ–¹å¼. å°†è¦å®ç°: åˆ†æè¡¨è¾¾å¼ å®ç°æ‰€æœ‰çš„é€šç”¨è¿ç®—ç¬¦ å®ç°ä¸‰å…ƒè¿ç®—ç¬¦ æ”¯æŒåµŒå¥—çš„æ‹¬å· åŸç†: ä½¿ç”¨\u0026quot;çŠ¶æ€æœº\u0026quot;ç®—æ³•åˆ†æè¡¨è¾¾å¼ æ ¹æ®è¿ç®—ç¬¦ä¼˜å…ˆçº§, ä¸æ–­å°è¯•è¿ç®—, æœ€ç»ˆå¾—åˆ°ç»“æœ è¯¦è§£: ç¬¬ä¸€æ­¥, æˆ‘ä»¬éœ€è¦å°†è¿ç®—è¡¨è¾¾å¼åˆ†æˆä¸€ä¸ªä¸ªèŠ‚ç‚¹(token), è¿™ä¸ªèŠ‚ç‚¹å¯èƒ½æ˜¯ä¸€ä¸ªæ•°å­—, å¯èƒ½æ˜¯ä¸€ä¸ªè¿ç®—ç¬¦, è‡³äºè¡¨è¾¾å¼é‡Œçš„æ‹¬å·, æˆ‘ä»¬ä¼šä½¿ç”¨é€’å½’æ¥è¿›è¡Œè¿ç®—. æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„classæ¥è¡¨ç¤ºè¿™ä¸ªtoken. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 enum CalcTokenType { // è§„å®šæšä¸¾æ‰€å¯¹åº”çš„intä¸º2çš„å€æ•°æ˜¯ä¸ºäº†åé¢æ–¹ä¾¿è¯†åˆ« None = 0, Number = 1, Operator = 2 } enum CalcOperator { None, Add = 1, // + Sub = 2, // - Mul = 4, // * Div = 8, // / Mod = 16, // % Pow = 32, // ** Lss = 64, // \u0026lt; Gtr = 128, // \u0026gt; Leq = 256, // \u0026lt;= Geq = 512, // \u0026gt;= Equ = 1024, // = Neq = 2048, // != Not = 4096, // ! And = 8192, // \u0026amp; Or = 16384, // | If = 32768, // ä¸‰å…ƒè¡¨è¾¾å¼ä¸­çš„ \u0026#39;?\u0026#39; ç¬¦å· Witch = 65536 // ä¸‰å…ƒè¡¨è¾¾å¼ä¸­çš„ \u0026#39;:\u0026#39; ç¬¦å· } class CalcToken { public CalcToken(CalcTokenType type, object content) { this.Type = type; this.Content = content; } CalcTokenType Type; object Content; // Content, å½“Typeæ˜¯Noneæ—¶, å€¼åº”è¯¥æ˜¯null // å½“Typeæ˜¯Numberæ—¶, å€¼åº”è¯¥æ˜¯double // å½“Typeæ˜¯Operatoræ—¶, å€¼åº”è¯¥æ˜¯CalcOperatoræšä¸¾å˜é‡ } ç»§ç»­, é‚£ä¹ˆ, å…ˆæ˜¯å¦‚ä½•åˆ†æä¸€ä¸ªç®€å•çš„è¡¨è¾¾å¼, ä¾‹å¦‚ä¸‹é¢çš„: 11+1\nåˆ†æè¿™ä¸ªè¡¨è¾¾å¼, æˆ‘ä»¬é¦–å…ˆå®šä¹‰ä¸€äº›å­—ç¬¦ä¸²å¸¸é‡, å¦‚ä¸‹: 1 2 3 char[] OperatorChars = \u0026#34;+-*/\u0026lt;\u0026gt;!=\u0026amp;|?:\u0026#34;.ToArray(); // è¡¨ç¤ºæ“ä½œç¬¦çš„å­—ç¬¦ char[] NumberChars = \u0026#34;0123456789.\u0026#34;.ToArray(); // è¡¨ç¤ºæ•°å­—çš„å­—ç¬¦ char[] EmptyChars = \u0026#34; \\t\u0026#34;.ToArray(); // è¡¨ç¤ºç©ºå­—ç¬¦ æˆ‘ä»¬å°†é€å­—ç¬¦å¯¹å…¶åˆ†æ(æœ‰é™çŠ¶æ€æœº): ä½¿ç”¨List\u0026lt;CalcToken\u0026gt; tokensæ¥ä¿å­˜åˆ†æå‡ºçš„token å½“å¼€å§‹æ—¶, æˆ‘ä»¬å–åˆ°ä¸€ä¸ªå­—ç¬¦'1\u0026rsquo;, ç°åœ¨æˆ‘ä»¬è¿˜ä¸æ˜¯åœ¨åˆ†æä»»ä½•ç±»å‹, ä½†æ˜¯ç»è¿‡å®šä¹‰çš„å­—ç¬¦é›†å¸¸é‡çš„Containsåˆ¤æ–­, æˆ‘ä»¬å‘ç°å®ƒæ˜¯å±äºæ•°å­—çš„, é‚£ä¹ˆæˆ‘ä»¬çŸ¥é“, ç°åœ¨æˆ‘ä»¬æ­£åœ¨åˆ†ææ•°å­—. å­˜å‚¨ä¸‹æ¥è¿™ä¸ªå­—ç¬¦'1\u0026rsquo;, ç”¨ä»€ä¹ˆ, ä½ åº”è¯¥çŸ¥é“å§? è¦ä¹ˆæ˜¯List, è¦ä¹ˆæ˜¯StringBuilder. å¹¶ä¸”, è®°å½•ä¸‹æˆ‘ä»¬ç°åœ¨çš„çŠ¶æ€, æˆ‘ä»¬åˆ†æåˆ°äº†æ•°å­— åˆ°åˆ†æåˆ°ç¬¬äºŒä¸ªæ•°å­—æ—¶, æˆ‘ä»¬å½“å‰çš„çŠ¶æ€æ˜¯æ­£åœ¨åˆ†ææ•°å­—, é‚£ä¹ˆåœ¨è¿™ä¸ªçŠ¶æ€ä¸‹, å¦‚æœæˆ‘ä»¬åˆå–åˆ°ä¸€ä¸ªæ•°å­—, é‚£ä¹ˆæˆ‘ä»¬éœ€è¦å­˜å‚¨ä¸‹è¿™ä¸ªæ•°å­—, å¹¶ä¸”å½“å‰çŠ¶æ€ä¸å˜, å¦‚æœæˆ‘ä»¬å–åˆ°ä¸€ä¸ªæ“ä½œç¬¦å­—ç¬¦, é‚£ä¹ˆä»£è¡¨ç°åœ¨è¿™ä¸ªæ•°å­—ç»“æŸäº†, ä½¿ç”¨double.Parseå°†å·²ä¿å­˜çš„å­—ç¬¦ä¸²(ä¸€ä¸ªæˆ–å¤šä¸ªç”±æ•°å­—å­—ç¬¦ç»„æˆçš„), è½¬æ¢ä¸ºdoubleç±»å‹, ç„¶åå­˜å‚¨ä¸‹è¿™ä¸ªtoken, å¹¶ä¸”æ¸…ç©ºå­˜å‚¨çš„å­—ç¬¦, å°†å½“å‰å–åˆ°çš„å­—ç¬¦å­˜è¿›å», ç„¶åæ”¹å˜å½“å‰çŠ¶æ€åˆ°\u0026quot;æ­£åœ¨åˆ†ææ“ä½œç¬¦\u0026quot;. æˆ‘ä»¬çš„è¡¨è¾¾å¼æ˜¯\u0026quot;11+1\u0026quot;, ç¬¬äºŒä¸ªå­—ç¬¦æ˜¯ä¸€ä¸ªæ•°å­—å­—ç¬¦, ä¹Ÿå°±æ˜¯è¯´, æˆ‘ä»¬åº”å­˜ä¸‹è¿™ä¸ªå­—ç¬¦, ä¸”çŠ¶æ€ä¸å˜. äºæ˜¯, æˆ‘ä»¬å·²ç»å­˜å‚¨ä¸‹äº†ä¸¤ä¸ªå­—ç¬¦{\u0026lsquo;1\u0026rsquo;, \u0026lsquo;1\u0026rsquo;}, å½“å‰çŠ¶æ€æ˜¯æ•°å­— åˆ°ç¬¬ä¸‰ä¸ªå­—ç¬¦äº†, æˆ‘ä»¬å‘ç°å®ƒä¸æ˜¯ä¸€ä¸ªæ•°å­—å­—ç¬¦, è€Œæ˜¯ä¸€ä¸ªæ“ä½œç¬¦å­—ç¬¦, äºæ˜¯, å°†å·²ä¿å­˜çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºdouble, å¹¶æ·»åŠ åˆ°tokens, å½“å‰çŠ¶æ€æ˜¯:æ­£åœ¨åˆ†ææ“ä½œç¬¦ åˆ°ç¬¬å››ä¸ªå­—ç¬¦, å®ƒåˆä¸æ˜¯ä¸€ä¸ªæ“ä½œç¬¦å­—ç¬¦äº†, å®ƒç°åœ¨æ˜¯ä¸€ä¸ªæ•°å­—, æ‰€ä»¥, å°†å·²å­˜å‚¨çš„æ“ä½œç¬¦å­—ç¬¦ä¿å­˜ åˆ°æœ€å, åˆ†æç»“æŸ, ä½†ä¸´æ—¶å­˜å‚¨çš„éƒ¨åˆ†è¿˜æœ‰ä¸€ä¸ªå­—ç¬¦'1\u0026rsquo;, å°†å…¶è½¬æ¢ä¸ºdouble, ç„¶åå­˜å‚¨åˆ°tokens, äºæ˜¯, æˆ‘ä»¬æˆåŠŸå®Œæˆäº†å¯¹è¡¨è¾¾å¼çš„åˆ†è¯, è‡³æ­¤, åŸºæœ¬åŸç†å·²ç»è®²æ¸…, å°è¯•ç†è§£ä¸‹é¢çš„å‡½æ•° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 // ä¸‹é¢æ˜¯åˆ†è¯æ ¸å¿ƒ, è¿™é‡Œé¢åŒ…å«å¯¹æ‹¬å·çš„åˆ†æ // bool innerè¡¨ç¤ºè¿™ä¸ªå‡½æ•°æ˜¯å¦æ˜¯è¢«å¦ä¸€ä¸ªåˆ†è¯å‡½æ•°è°ƒç”¨çš„, ä¹Ÿå°±æ˜¯è¯´æ˜¯å¦åœ¨é€’å½’çŠ¶æ€, å¦‚æœæ˜¯, åˆ™è¡¨ç¤ºåœ¨åˆ†æä¸€ä¸ªæ‹¬å·å†…çš„è¡¨è¾¾å¼, ç¢°åˆ°\u0026#39;)\u0026#39;çš„æ—¶å€™ç«‹å³return; bool TryParseCalcTokens(ref char[] source, ref int offset, out List\u0026lt;CalcToken\u0026gt; result, bool inner = false, int level = 0) { result = new List\u0026lt;CalcToken\u0026gt;(); for (; offset \u0026lt; source.Length; offset++) { if (EmptyChars.Contains(source[offset])) { continue; } else if (source[offset] == \u0026#39;(\u0026#39;) { offset++; if (TryParseCalcTokens(ref source, ref offset, out List\u0026lt;CalcToken\u0026gt; newrst, true, level + 1)) { result.Add(new CalcToken(CalcTokenType.Expression, newrst)); } else { errors.Add($\u0026#34;Error when parsing inner expression. Level:{level};\u0026#34;); return false; } } else if (source[offset] == \u0026#39;)\u0026#39;) { return true; } else { if (TryParseToken(ref source, ref offset, out CalcToken newcctk)) { result.Add(newcctk); // è¿™é‡Œæ˜¯å°†åˆ†æå¥½çš„tokenæ·»åŠ åˆ°tokens } else { errors.Add($\u0026#34;Error when parsing expression token. Level:{level};\u0026#34;); return false; } } } return true; } å¼€å§‹è¿ç®—è¡¨è¾¾å¼: (æœ€ç®€å•çš„æ–¹æ³•) éå†æˆ‘ä»¬çš„tokens, ç¬¬ä¸€æ¬¡éå†, æŸ¥æ‰¾ä¼˜å…ˆçº§æœ€é«˜çš„æ“ä½œç¬¦å¹¶è¿ç®—ç»“æœ, ç¬¬äºŒæ¬¡éå†æŸ¥æ‰¾ä¼˜å…ˆçº§ç•¥æ¬¡çš„æ“ä½œç¬¦å¹¶è¿ç®—ç»“æœ, å¦‚æ­¤å¾€å¤, æŸ¥æ‰¾å®Œæ‰€æœ‰çš„è¡¨è¾¾å¼\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 // ä¸‹é¢æ˜¯è¿ç®—æ ¸å¿ƒ bool TryCalculateTokens(ref List\u0026lt;CalcToken\u0026gt; source, out double result, out List\u0026lt;string\u0026gt; errors) { errors = new List\u0026lt;string\u0026gt;(); result = 0; for (int i = 0; i \u0026lt; source.Count; i++) { if (source[i].Type == CalcTokenType.Operator \u0026amp;\u0026amp; CheckOperator(CalcOperator.Mul | CalcOperator.Div | CalcOperator.Mod | CalcOperator.Pow, (CalcOperator)source[i].Content) \u0026amp;\u0026amp; CheckType(ref source, CalcTokenType.Number | CalcTokenType.Expression, i, -1) \u0026amp;\u0026amp; CheckType(ref source, CalcTokenType.Number | CalcTokenType.Expression, i, 1)) { if (TryGetTokenValue(ref errors, source[i - 1], out double leftnum) \u0026amp;\u0026amp; TryGetTokenValue(ref errors, source[i + 1], out double rightnum)) { double tmpnum = 0; switch ((CalcOperator)source[i].Content) { case CalcOperator.Mul: tmpnum = leftnum * rightnum; break; case CalcOperator.Div: tmpnum = leftnum / rightnum; break; case CalcOperator.Mod: tmpnum = leftnum % rightnum; break; case CalcOperator.Pow: tmpnum = Math.Pow(leftnum, rightnum); break; default: throw new Exception(); } source[i - 1] = new CalcToken(CalcTokenType.Number, tmpnum); source.RemoveRange(i, 2); i--; } else { errors.Add($\u0026#34;Cannot get the value of token when calculate \u0026#39;{source[i].Content}\u0026#39;;\u0026#34;); return false; } } } // * / % ** for (int i = 0; i \u0026lt; source.Count; i++) { if (source[i].Type == CalcTokenType.Operator \u0026amp;\u0026amp; CheckOperator(CalcOperator.Add | CalcOperator.Sub, (CalcOperator)source[i].Content) \u0026amp;\u0026amp; CheckType(ref source, CalcTokenType.Number | CalcTokenType.Expression, i, 1)) { if (CheckType(ref source, CalcTokenType.Number | CalcTokenType.Expression, i, -1)) { if (TryGetTokenValue(ref errors, source[i - 1], out double leftnum) \u0026amp;\u0026amp; TryGetTokenValue(ref errors, source[i + 1], out double rightnum)) { double tmpnum = 0; switch ((CalcOperator)source[i].Content) { case CalcOperator.Add: tmpnum = leftnum + rightnum; break; case CalcOperator.Sub: tmpnum = leftnum - rightnum; break; default: throw new Exception(); } source[i - 1] = new CalcToken(CalcTokenType.Number, tmpnum); source.RemoveRange(i, 2); i--; } else { errors.Add($\u0026#34;Cannot get the value of token when calculate \u0026#39;{source[i].Content}\u0026#39;;\u0026#34;); return false; } } else { if (TryGetTokenValue(ref errors, source[i + 1], out double rightnum)) { double tmpnum = 0; switch ((CalcOperator)source[i].Content) { case CalcOperator.Add: tmpnum = rightnum; break; case CalcOperator.Sub: tmpnum = 0 - rightnum; break; default: throw new Exception(); } source[i] = new CalcToken(CalcTokenType.Number, tmpnum); source.RemoveRange(i + 1, 1); } else { errors.Add($\u0026#34;Cannot get the value of token when calculate \u0026#39;{source[i].Content}\u0026#39;;\u0026#34;); return false; } } } } // + - for (int i = 0; i \u0026lt; source.Count; i++) { if (source[i].Type == CalcTokenType.Operator \u0026amp;\u0026amp; CheckOperator(CalcOperator.Gtr | CalcOperator.Lss | CalcOperator.Geq | CalcOperator.Leq, (CalcOperator)source[i].Content) \u0026amp;\u0026amp; CheckType(ref source, CalcTokenType.Number | CalcTokenType.Expression, i, -1) \u0026amp;\u0026amp; CheckType(ref source, CalcTokenType.Number | CalcTokenType.Expression, i, 1)) { if (TryGetTokenValue(ref errors, source[i - 1], out double leftnum) \u0026amp;\u0026amp; TryGetTokenValue(ref errors, source[i + 1], out double rightnum)) { double tmpnum = 0; switch ((CalcOperator)source[i].Content) { case CalcOperator.Gtr: tmpnum = leftnum \u0026gt; rightnum ? 1 : 0; break; case CalcOperator.Lss: tmpnum = leftnum \u0026lt; rightnum ? 1 : 0; break; case CalcOperator.Geq: tmpnum = leftnum \u0026gt;= rightnum ? 1 : 0; break; case CalcOperator.Leq: tmpnum = leftnum \u0026lt;= rightnum ? 1 : 0; break; default: throw new Exception(); } source[i - 1] = new CalcToken(CalcTokenType.Number, tmpnum); source.RemoveRange(i, 2); i--; } else { errors.Add($\u0026#34;Cannot get the value of token when calculate \u0026#39;{source[i].Content}\u0026#39;;\u0026#34;); return false; } } } // \u0026gt; \u0026lt; \u0026gt;= \u0026lt;= for (int i = 0; i \u0026lt; source.Count; i++) { if (source[i].Type == CalcTokenType.Operator \u0026amp;\u0026amp; CheckOperator(CalcOperator.Equ | CalcOperator.Neq, (CalcOperator)source[i].Content) \u0026amp;\u0026amp; CheckType(ref source, CalcTokenType.Number | CalcTokenType.Expression, i, -1) \u0026amp;\u0026amp; CheckType(ref source, CalcTokenType.Number | CalcTokenType.Expression, i, 1)) { if (TryGetTokenValue(ref errors, source[i - 1], out double leftnum) \u0026amp;\u0026amp; TryGetTokenValue(ref errors, source[i + 1], out double rightnum)) { double tmpnum = 0; switch ((CalcOperator)source[i].Content) { case CalcOperator.Equ: tmpnum = leftnum == rightnum ? 1 : 0; break; case CalcOperator.Neq: tmpnum = leftnum != rightnum ? 1 : 0; break; default: throw new Exception(); } source[i - 1] = new CalcToken(CalcTokenType.Number, tmpnum); source.RemoveRange(i, 2); i--; } else { errors.Add($\u0026#34;Cannot get the value of token when calculate \u0026#39;{source[i].Content}\u0026#39;;\u0026#34;); return false; } } } // == != for (int i = 0; i \u0026lt; source.Count; i++) { if (source[i].Type == CalcTokenType.Operator \u0026amp;\u0026amp; CheckOperator(CalcOperator.Add | CalcOperator.Or, (CalcOperator)source[i].Content) \u0026amp;\u0026amp; CheckType(ref source, CalcTokenType.Number | CalcTokenType.Expression, i, -1) \u0026amp;\u0026amp; CheckType(ref source, CalcTokenType.Number | CalcTokenType.Expression, i, 1)) { if (TryGetTokenValue(ref errors, source[i - 1], out double leftnum) \u0026amp;\u0026amp; TryGetTokenValue(ref errors, source[i + 1], out double rightnum)) { double tmpnum = 0; switch ((CalcOperator)source[i].Content) { case CalcOperator.Add: tmpnum = leftnum != 0 \u0026amp;\u0026amp; rightnum != 0 ? 1 : 0; break; case CalcOperator.Or: tmpnum = leftnum != 0 || rightnum != 0 ? 1 : 0; break; default: throw new Exception(); } source[i - 1] = new CalcToken(CalcTokenType.Number, tmpnum); source.RemoveRange(i, 2); i--; } else { errors.Add($\u0026#34;Cannot get the value of token when calculate \u0026#39;{source[i].Content}\u0026#39;;\u0026#34;); return false; } } } // \u0026amp; | for (int i = 0; i \u0026lt; source.Count; i++) { if (source[i].Type == CalcTokenType.Operator \u0026amp;\u0026amp; CheckOperator(CalcOperator.If, (CalcOperator)source[i].Content) \u0026amp;\u0026amp; CheckType(ref source, CalcTokenType.Number | CalcTokenType.Expression, i, -1) \u0026amp;\u0026amp; CheckType(ref source, CalcTokenType.Number | CalcTokenType.Expression, i, 1) \u0026amp;\u0026amp; CheckType(ref source, CalcTokenType.Operator, i, 2) \u0026amp;\u0026amp; CheckType(ref source, CalcTokenType.Number | CalcTokenType.Expression, i, 3) \u0026amp;\u0026amp; CheckOperator(CalcOperator.Witch, (CalcOperator)source[i + 2].Content)) { if (TryGetTokenValue(ref errors, source[i - 1], out double basic)) { double tmpnum = 0; if (basic != 0) { if (TryGetTokenValue(ref errors, source[i + 1], out double leftnum)) { tmpnum = leftnum; } else { errors.Add($\u0026#34;Cannot get the value of token when calculate \u0026#39;{source[i].Content}\u0026#39;;\u0026#34;); return false; } } else { if (TryGetTokenValue(ref errors, source[i + 3], out double rightnum)) { tmpnum = rightnum; } else { errors.Add($\u0026#34;Cannot get the value of token when calculate \u0026#39;{source[i].Content}\u0026#39;;\u0026#34;); return false; } } source[i - 1] = new CalcToken(CalcTokenType.Number, tmpnum); source.RemoveRange(i, 4); i--; } else { errors.Add($\u0026#34;Cannot get the value of token when calculate \u0026#39;{source[i].Content}\u0026#39;;\u0026#34;); return false; } } } // ä¸‰å…ƒè¡¨è¾¾å¼ if (source.Count == 1 \u0026amp;\u0026amp; source[0].Type == CalcTokenType.Number) { result = (double)source[0].Content; return true; } else { errors.Add($\u0026#34;Final result after calculate is not a single number. \u0026#39;{string.Join(\u0026#34; \u0026#34;, source)}\u0026#39;;\u0026#34;); return false; } } å®Œæ•´æºä»£ç :Githubä»“åº“ æœ€æ–°ç‰ˆæœ¬å·²ç»ä½¿ç”¨äº†é€†æ³¢å…°è¡¨è¾¾å¼ ","date":"2020-10-29T11:41:22+08:00","permalink":"https://slimenull.com/p/20201029114122/","title":"[C#] è¿ç®—åŒ…å«æ•°å­¦è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²"},{"content":"CHO.Jsonï¼š ç°åœ¨ï¼ŒCHO.Jsonå·²ç»æˆä¸ºäº†ä¸€ä¸ªå¼ºå¤§çš„Jsonè§£æåº“ï¼Œé€Ÿåº¦å¾ˆå¿«ã€‚ æ”¯æŒå¼±ç±»å‹æ“ä½œ, JsonDataå®ç°äº†æ‰€æœ‰Jsonæ•°æ®ç±»å‹çš„åŸºæœ¬æ“ä½œ, æ”¯æŒåƒ Python é‚£æ ·çš„æ“ä½œæ–¹å¼ æ”¯æŒå¼ºç±»å‹æ“ä½œ, JsonDataå¯ä»¥ç›´æ¥é€šè¿‡ â€˜Getç±»å‹â€™ æ–¹æ³•æ¥è·å–å¯¹åº”æ•°æ®ç±»å‹æ•°æ®å¹¶è¿›è¡Œæ“ä½œ æ”¯æŒåºåˆ—åŒ–ï¼Œ ååºåˆ—åŒ–ï¼Œ ä¸€æ¬¡åˆ†æå¤šä¸ªJsonæ•°æ®ï¼š åºåˆ—åŒ–å’Œååºåˆ—åŒ–åˆ™æ˜¯æ‰€æœ‰åº“éƒ½æœ‰çš„åŠŸèƒ½ ä¸€æ¬¡æ€§åºåˆ—åŒ–å¤šä¸ªJsonæ•°æ®åˆ™æ˜¯ï¼Œå…è®¸ä¸€æ®µæ–‡æœ¬ä¸­å«æœ‰å¤šä¸ªJsonæ ¹æ•°æ®ï¼Œå®ƒå¯ä»¥ç”¨äºè§£å†³TCPå¥—æ¥å­—çš„ç²˜åŒ…é—®é¢˜ CHO.Json æ‹¥æœ‰æ•™å¿«çš„åˆ†æé€Ÿåº¦ï¼Œèƒ½å¤Ÿå®Œå…¨ä¸Json.Netä¸Text.JsonåŒ¹æ•Œï¼Œå¹¶ä¸”å®ƒçš„åŠ è½½é€Ÿåº¦æ—¶ä¸‰è€…ä¸­æœ€å¿«çš„ã€‚ è¿™æ˜¯å®ƒä¸Newtonsoft.Jsonçš„å·®åˆ«:\nCHO.Jsonå°‘äº†è®¸å¤šå†—ä½™çš„åŠŸèƒ½, ä¾‹å¦‚å°†å›¾ç‰‡åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸², å› æ­¤CHO.Jsonå¯èƒ½è¦æ¯”Newtonsoft.Jsonè½»é‡è®¸å¤šã€‚ CHO.Jsonçš„æºä»£ç æ¯”Newtonsoft.Jsonæ›´é€‚åˆåˆå­¦è€…é˜…è¯», åœ¨çœ‹æ‡‚å®ƒçš„ä»£ç å, ä½ ä¼šäº†è§£åˆ°æœ‰é™çŠ¶æ€æœºä»¥åŠåå°„ CHO.Jsonä»…ä½¿ç”¨ä¸€ä¸ªC#æºæ–‡ä»¶, è¿™æ˜¯å› ä¸ºå®ƒçš„æºä»£ç ä»…æœ‰1.5kè¡Œå·¦å³, è¿™å…¶ä¸­è¿˜åŒ…å«ç±»å‹è½¬æ¢ç­‰ç‰‡æ®µ æ›´è¯¦ç»†çš„ä»‹ç»ï¼š\né¦–å…ˆï¼Œ åœ¨ CHO.Json ä¸­, åŒ…å«ä¸€ä¸ª JsonData ç±», å®ƒå¯ä»¥ç”¨æ¥è¡¨ç¤ºä»»ä½• Json æ•°æ®, é€šè¿‡ JsonData ç±»çš„é™æ€æ–¹æ³•, å¯ä»¥ä»å­—ç¬¦ä¸²æˆ–å­—ç¬¦æ•°ç»„ä¸­åˆ†æå‡º Json æ•°æ®å¹¶å­˜å‚¨åˆ° JsonData å®ä¾‹ä¸­, æˆ–è€…å°† JsonData å®ä¾‹è½¬åŒ–ä¸º Json å­—ç¬¦ä¸².\nJsonData æ˜¯ä½ æœ€å¸¸ç”¨çš„ç±», æœ‰ä¸€ä¸ª DataType å±æ€§æŒ‡å®šäº†è¿™ä¸ªå®ä¾‹æ‰€è¡¨ç¤ºçš„ Json æ•°æ®ç±»å‹, ä¾‹å¦‚String, Boolean, Integer, é€šè¿‡ \u0026lsquo;Getç±»å‹\u0026rsquo; æ–¹æ³•å¯ä»¥ç›´æ¥è·å–å¯¹åº”æ•°æ®, ä¾‹å¦‚: GetString() æ–¹æ³•è¿”å›è¿™ä¸ªJsonå®ä¾‹ä¸­æ‰€åŒ…å«çš„å­—ç¬¦ä¸²ä¿¡æ¯. ä½†å¦‚æœä½ å¯¹ä¸€ä¸ªåŒ…å«äº†éå­—ç¬¦ä¸²ä¿¡æ¯çš„ JsonData å®ä¾‹ä½¿ç”¨è¿™ä¸ªæ–¹æ³•, åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸.\nåœ¨æœ€æ–°ç‰ˆæœ¬çš„ CHO.Json ä¸­, Serializie(åºåˆ—åŒ–)å’ŒDeserialize(ååºåˆ—åŒ–)ç”¨äºç›´æ¥è½¬æ¢å­—ç¬¦ä¸²å’ŒæŒ‡å®šçš„æ•°æ®. ä½†åœ¨æ—§ç‰ˆ, åˆ™æ˜¯è½¬æ¢ JsonData. æ–°ç‰ˆä¸­, æ¨èçš„æ–¹æ³•æ˜¯ä½¿ç”¨ JsonData çš„é™æ€æ–¹æ³•: Parse, Create, ConvertToInstance, ConvertToText.\nå¦‚æœä¸€ä¸ªå­—ç¬¦ä¸²é‡ŒåŒ…å«å¤šä¸ªJsonæ•°æ®, ä½†å¹¶æ²¡æœ‰åˆ†éš”ç¬¦, ä¾‹å¦‚åœ¨TCPå¥—æ¥å­—ä¸­ä¼ è¾“çš„å¤šä¸ªJsonæ–‡æœ¬, ä½ å¯ä»¥é€šè¿‡JsonDataçš„é™æ€æ–¹æ³• ParseStream æ¥åˆ†æå®ƒä»¬.\nJsonData çš„ Content å±æ€§æ˜¯ JsonData åŒ…å«çš„æ•°æ®åŸå‹, å¦‚æœæ˜¯Array, åˆ™å®ƒçš„ç±»å‹æ˜¯List\u0026lt;JsonData\u0026gt;, å¦‚æœæ˜¯Object, åˆ™å®ƒçš„ç±»å‹æ˜¯ Dictionary\u0026lt;JsonData, JsonData\u0026gt;\nä¸‹é¢æ˜¯ä½¿ç”¨CHO.Jsonçš„ä¾‹å­: é¡¹ç›®å®Œæ•´æºä»£ç : Githubä»“åº“\n","date":"2020-10-28T23:52:44+08:00","permalink":"https://slimenull.com/p/20201028235244/","title":"[C#] CHO.Jsonæ“ä½œJsonæ•°æ®"},{"content":" é€šè¿‡è¿ç®—, è·å–å­—ç¬¦ä¸²åœ¨æ§åˆ¶å°ä¸Šç°å®çš„å®½åº¦(å•ä½ä¸ºä¸€ä¸ªè‹±æ–‡å­—æ¯çš„å®½åº¦, é«˜åº¦ä¸ºæ§åˆ¶å°ä¸­ä¸€è¡Œçš„é«˜åº¦) åœ¨ç½‘ä¸Šæ‰¾äº†åŠå¤©, å”¯ä¸€ä¸€ä¸ªæ­£å„¿å…«ç»çš„, å°±æ˜¯é€šè¿‡GBKç¼–ç çš„å­—èŠ‚æ•°æ¥æ¨æµ‹æ‰€å å®½åº¦, ä½†æˆ‘è®¤ä¸ºè¿™ä¸ªæœ‰ç‚¹ä¸å¤§å¦¥å½“, ä¾‹å¦‚æŸäº›ç‰¹æ®Šå­—ç¬¦, å¯èƒ½å°±ä¸è¢«GBKç¼–ç åŒ…å«. æ‰€ä»¥, æˆ‘è¿™é‡Œæä¾›äº†ä¸€ä¸ªå¯è·å–å­—ç¬¦ä¸²æ˜¾ç¤ºå®½åº¦çš„å¯è¡Œæ–¹æ³•. Github ä»“åº“åœ°å€: Null.ConsoleEx ==é‡ç‚¹== å®ç°è¿‡ç¨‹: é¦–å…ˆ, æˆ‘é€šè¿‡å¾ªç¯C#ä¸­æ‰€æœ‰çš„å­—ç¬¦, å¹¶å°†å…¶æ‰“å°åˆ°æ§åˆ¶å°ä¸Š, è¿ç®—å•ä¸ªå­—ç¬¦æ‰€å å®½åº¦, æœ€ç»ˆå¾—å‡ºäº†ä¸€ä¸ªList\u0026lt;int\u0026gt;, é€šè¿‡è¿™ä¸ªåˆ—è¡¨, åªéœ€è¦ä»¥å­—ç¬¦å¼ºåˆ¶è½¬æ¢ä¸ºintçš„å€¼ä½œä¸ºç´¢å¼•, è®¿é—®å¯¹åº”çš„å…ƒç´ , å³å¯å¾—å‡ºå­—ç¬¦å¯¹åº”å®½åº¦ 1 2 3 4 5 6 7 int GetCharLen(char c) { Console.CursorLeft = Console.BufferWidth / 2 - 1; int start = Console.CursorLeft; Console.Write(c); return Console.CursorLeft - start; } ä¹‹å, å†è·å–åŒºé—´, ç¨åŠ å¤„ç†, å³å¾—åˆ°å¯è·å–charæ‰€æœ‰å­—ç¬¦åœ¨æ§åˆ¶å°ä¸­æ˜¾ç¤ºçš„å®½åº¦. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 451 452 453 454 455 456 457 458 459 460 461 462 463 public static int GetCharDisplayLength(char c) { if (index \u0026lt; 7) return 1; else if (index \u0026lt; 9) return 0; else if (index \u0026lt; 10) return 8; else if (index \u0026lt; 11) return 0; else if (index \u0026lt; 13) return 1; else if (index \u0026lt; 14) return 0; else if (index \u0026lt; 162) return 1; else if (index \u0026lt; 166) return 2; else if (index \u0026lt; 167) return 1; else if (index \u0026lt; 169) return 2; else if (index \u0026lt; 175) return 1; else if (index \u0026lt; 178) return 2; else if (index \u0026lt; 180) return 1; else if (index \u0026lt; 182) return 2; else if (index \u0026lt; 183) return 1; else if (index \u0026lt; 184) return 2; else if (index \u0026lt; 215) return 1; else if (index \u0026lt; 216) return 2; else if (index \u0026lt; 247) return 1; else if (index \u0026lt; 248) return 2; else if (index \u0026lt; 449) return 1; else if (index \u0026lt; 450) return 2; else if (index \u0026lt; 711) return 1; else if (index \u0026lt; 712) return 2; else if (index \u0026lt; 713) return 1; else if (index \u0026lt; 716) return 2; else if (index \u0026lt; 729) return 1; else if (index \u0026lt; 730) return 2; else if (index \u0026lt; 913) return 1; else if (index \u0026lt; 930) return 2; else if (index \u0026lt; 931) return 1; else if (index \u0026lt; 938) return 2; else if (index \u0026lt; 945) return 1; else if (index \u0026lt; 962) return 2; else if (index \u0026lt; 963) return 1; else if (index \u0026lt; 970) return 2; else if (index \u0026lt; 1025) return 1; else if (index \u0026lt; 1026) return 2; else if (index \u0026lt; 1040) return 1; else if (index \u0026lt; 1104) return 2; else if (index \u0026lt; 1105) return 1; else if (index \u0026lt; 1106) return 2; else if (index \u0026lt; 8208) return 1; else if (index \u0026lt; 8209) return 2; else if (index \u0026lt; 8211) return 1; else if (index \u0026lt; 8215) return 2; else if (index \u0026lt; 8216) return 1; else if (index \u0026lt; 8218) return 2; else if (index \u0026lt; 8220) return 1; else if (index \u0026lt; 8222) return 2; else if (index \u0026lt; 8229) return 1; else if (index \u0026lt; 8231) return 2; else if (index \u0026lt; 8240) return 1; else if (index \u0026lt; 8241) return 2; else if (index \u0026lt; 8242) return 1; else if (index \u0026lt; 8244) return 2; else if (index \u0026lt; 8245) return 1; else if (index \u0026lt; 8246) return 2; else if (index \u0026lt; 8251) return 1; else if (index \u0026lt; 8252) return 2; else if (index \u0026lt; 8254) return 1; else if (index \u0026lt; 8255) return 2; else if (index \u0026lt; 8364) return 1; else if (index \u0026lt; 8365) return 2; else if (index \u0026lt; 8451) return 1; else if (index \u0026lt; 8452) return 2; else if (index \u0026lt; 8453) return 1; else if (index \u0026lt; 8454) return 2; else if (index \u0026lt; 8457) return 1; else if (index \u0026lt; 8458) return 2; else if (index \u0026lt; 8470) return 1; else if (index \u0026lt; 8471) return 2; else if (index \u0026lt; 8481) return 1; else if (index \u0026lt; 8482) return 2; else if (index \u0026lt; 8544) return 1; else if (index \u0026lt; 8556) return 2; else if (index \u0026lt; 8560) return 1; else if (index \u0026lt; 8570) return 2; else if (index \u0026lt; 8592) return 1; else if (index \u0026lt; 8596) return 2; else if (index \u0026lt; 8598) return 1; else if (index \u0026lt; 8602) return 2; else if (index \u0026lt; 8712) return 1; else if (index \u0026lt; 8713) return 2; else if (index \u0026lt; 8719) return 1; else if (index \u0026lt; 8720) return 2; else if (index \u0026lt; 8721) return 1; else if (index \u0026lt; 8722) return 2; else if (index \u0026lt; 8725) return 1; else if (index \u0026lt; 8726) return 2; else if (index \u0026lt; 8728) return 1; else if (index \u0026lt; 8729) return 2; else if (index \u0026lt; 8730) return 1; else if (index \u0026lt; 8731) return 2; else if (index \u0026lt; 8733) return 1; else if (index \u0026lt; 8737) return 2; else if (index \u0026lt; 8739) return 1; else if (index \u0026lt; 8740) return 2; else if (index \u0026lt; 8741) return 1; else if (index \u0026lt; 8742) return 2; else if (index \u0026lt; 8743) return 1; else if (index \u0026lt; 8748) return 2; else if (index \u0026lt; 8750) return 1; else if (index \u0026lt; 8751) return 2; else if (index \u0026lt; 8756) return 1; else if (index \u0026lt; 8760) return 2; else if (index \u0026lt; 8764) return 1; else if (index \u0026lt; 8766) return 2; else if (index \u0026lt; 8776) return 1; else if (index \u0026lt; 8777) return 2; else if (index \u0026lt; 8780) return 1; else if (index \u0026lt; 8781) return 2; else if (index \u0026lt; 8786) return 1; else if (index \u0026lt; 8787) return 2; else if (index \u0026lt; 8800) return 1; else if (index \u0026lt; 8802) return 2; else if (index \u0026lt; 8804) return 1; else if (index \u0026lt; 8808) return 2; else if (index \u0026lt; 8814) return 1; else if (index \u0026lt; 8816) return 2; else if (index \u0026lt; 8853) return 1; else if (index \u0026lt; 8854) return 2; else if (index \u0026lt; 8857) return 1; else if (index \u0026lt; 8858) return 2; else if (index \u0026lt; 8869) return 1; else if (index \u0026lt; 8870) return 2; else if (index \u0026lt; 8895) return 1; else if (index \u0026lt; 8896) return 2; else if (index \u0026lt; 8978) return 1; else if (index \u0026lt; 8979) return 2; else if (index \u0026lt; 9312) return 1; else if (index \u0026lt; 9322) return 2; else if (index \u0026lt; 9332) return 1; else if (index \u0026lt; 9372) return 2; else if (index \u0026lt; 9632) return 1; else if (index \u0026lt; 9634) return 2; else if (index \u0026lt; 9650) return 1; else if (index \u0026lt; 9652) return 2; else if (index \u0026lt; 9660) return 1; else if (index \u0026lt; 9662) return 2; else if (index \u0026lt; 9670) return 1; else if (index \u0026lt; 9672) return 2; else if (index \u0026lt; 9675) return 1; else if (index \u0026lt; 9676) return 2; else if (index \u0026lt; 9678) return 1; else if (index \u0026lt; 9680) return 2; else if (index \u0026lt; 9698) return 1; else if (index \u0026lt; 9702) return 2; else if (index \u0026lt; 9733) return 1; else if (index \u0026lt; 9735) return 2; else if (index \u0026lt; 9737) return 1; else if (index \u0026lt; 9738) return 2; else if (index \u0026lt; 9792) return 1; else if (index \u0026lt; 9793) return 2; else if (index \u0026lt; 9794) return 1; else if (index \u0026lt; 9795) return 2; else if (index \u0026lt; 12288) return 1; else if (index \u0026lt; 12292) return 2; else if (index \u0026lt; 12293) return 1; else if (index \u0026lt; 12312) return 2; else if (index \u0026lt; 12317) return 1; else if (index \u0026lt; 12319) return 2; else if (index \u0026lt; 12321) return 1; else if (index \u0026lt; 12330) return 2; else if (index \u0026lt; 12353) return 1; else if (index \u0026lt; 12436) return 2; else if (index \u0026lt; 12443) return 1; else if (index \u0026lt; 12447) return 2; else if (index \u0026lt; 12449) return 1; else if (index \u0026lt; 12535) return 2; else if (index \u0026lt; 12540) return 1; else if (index \u0026lt; 12543) return 2; else if (index \u0026lt; 12549) return 1; else if (index \u0026lt; 12586) return 2; else if (index \u0026lt; 12690) return 1; else if (index \u0026lt; 12704) return 2; else if (index \u0026lt; 12832) return 1; else if (index \u0026lt; 12868) return 2; else if (index \u0026lt; 12928) return 1; else if (index \u0026lt; 12958) return 2; else if (index \u0026lt; 12959) return 1; else if (index \u0026lt; 12964) return 2; else if (index \u0026lt; 12969) return 1; else if (index \u0026lt; 12977) return 2; else if (index \u0026lt; 13198) return 1; else if (index \u0026lt; 13200) return 2; else if (index \u0026lt; 13212) return 1; else if (index \u0026lt; 13215) return 2; else if (index \u0026lt; 13217) return 1; else if (index \u0026lt; 13218) return 2; else if (index \u0026lt; 13252) return 1; else if (index \u0026lt; 13253) return 2; else if (index \u0026lt; 13262) return 1; else if (index \u0026lt; 13263) return 2; else if (index \u0026lt; 13265) return 1; else if (index \u0026lt; 13267) return 2; else if (index \u0026lt; 13269) return 1; else if (index \u0026lt; 13270) return 2; else if (index \u0026lt; 19968) return 1; else if (index \u0026lt; 40870) return 2; else if (index \u0026lt; 55296) return 1; else if (index \u0026lt; 55297) return 0; else if (index \u0026lt; 56320) return 1; else if (index \u0026lt; 56321) return 2; else if (index \u0026lt; 57344) return 1; else if (index \u0026lt; 59335) return 2; else if (index \u0026lt; 59337) return 1; else if (index \u0026lt; 59493) return 2; else if (index \u0026lt; 63733) return 1; else if (index \u0026lt; 63734) return 2; else if (index \u0026lt; 63744) return 1; else if (index \u0026lt; 64046) return 2; else if (index \u0026lt; 65072) return 1; else if (index \u0026lt; 65074) return 2; else if (index \u0026lt; 65075) return 1; else if (index \u0026lt; 65093) return 2; else if (index \u0026lt; 65097) return 1; else if (index \u0026lt; 65107) return 2; else if (index \u0026lt; 65108) return 1; else if (index \u0026lt; 65112) return 2; else if (index \u0026lt; 65113) return 1; else if (index \u0026lt; 65127) return 2; else if (index \u0026lt; 65128) return 1; else if (index \u0026lt; 65132) return 2; else if (index \u0026lt; 65281) return 1; else if (index \u0026lt; 65375) return 2; else if (index \u0026lt; 65504) return 1; else if (index \u0026lt; 65510) return 2; else if (index \u0026lt; 65536) return 1; else return 0; } å†ç¨åŠ å¤„ç†, ä½¿å¾—æ¯ä¸€ä¸ªå­—ç¬¦æ‰€éœ€è¿›è¡Œçš„åˆ¤æ–­æ¬¡æ•°å·®å¼‚å‡å°‘. (ç±»ä¼¼äºäºŒå‰æ ‘), ä¸‹é¢è¿™ä¸ªä»£ç ç›´æ¥å°±èƒ½ç”¨å“¦~ è€Œä¸”æ˜¯åŒ…å«Charèƒ½è¡¨ç¤ºçš„æ‰€æœ‰å­—ç¬¦çš„.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 523 524 525 526 527 528 529 530 531 532 533 534 535 536 537 538 539 540 541 542 543 544 545 546 547 548 549 550 551 552 553 554 555 556 557 558 559 560 561 562 563 564 565 566 567 568 569 570 571 572 573 574 575 576 577 578 579 580 581 582 583 584 585 586 587 588 589 590 591 592 593 594 595 596 597 598 599 600 601 602 603 604 605 606 607 608 609 610 611 612 613 614 615 616 617 618 619 620 621 622 623 624 625 626 627 628 629 630 631 632 633 634 635 636 637 638 639 640 641 642 643 644 645 646 647 648 649 650 651 652 653 654 655 656 657 658 659 660 661 662 663 664 665 666 667 668 669 670 671 672 673 674 675 676 677 678 679 680 681 682 683 684 685 686 687 688 689 690 691 692 693 694 695 696 697 698 699 700 701 702 703 704 705 706 707 708 709 710 711 712 713 714 715 716 717 718 719 720 721 722 723 724 725 726 727 728 729 730 731 732 733 734 735 736 737 738 739 740 741 742 743 744 745 746 747 748 749 750 751 752 753 754 755 756 757 758 759 760 761 762 763 764 765 766 767 768 769 770 771 772 773 774 775 776 777 778 779 780 781 782 783 784 785 786 787 788 789 790 791 792 793 794 795 796 797 798 799 800 801 802 803 804 805 806 807 808 809 810 811 812 813 814 815 816 817 818 819 820 821 822 823 824 825 826 827 828 829 830 831 832 833 834 835 836 837 838 839 840 841 842 843 844 845 846 847 848 849 850 851 852 853 854 855 856 857 858 859 860 861 862 863 864 865 866 867 868 869 870 871 872 873 874 875 876 877 878 879 880 881 882 883 884 885 886 887 888 889 890 891 892 893 894 895 896 897 898 899 900 901 902 903 904 905 906 907 908 909 910 911 912 913 914 915 916 917 918 919 920 921 922 923 924 925 926 927 928 929 930 931 932 933 934 935 936 937 938 939 940 941 942 943 944 945 946 947 948 949 950 951 952 953 954 955 956 957 958 959 960 961 962 963 964 965 966 967 968 969 970 971 972 973 974 975 976 977 978 979 980 981 982 983 984 985 986 987 988 989 990 991 992 993 994 995 996 997 998 999 1000 1001 1002 1003 1004 1005 1006 1007 1008 1009 1010 1011 1012 1013 1014 1015 1016 1017 1018 1019 1020 1021 1022 1023 1024 1025 1026 1027 1028 1029 1030 1031 1032 1033 1034 1035 1036 1037 1038 1039 1040 1041 1042 1043 1044 1045 1046 1047 1048 1049 1050 1051 1052 1053 1054 1055 1056 1057 1058 1059 1060 1061 1062 1063 1064 1065 1066 1067 1068 1069 1070 1071 1072 1073 1074 1075 1076 1077 1078 1079 1080 1081 1082 1083 1084 1085 1086 1087 1088 1089 1090 1091 1092 1093 1094 1095 1096 1097 1098 1099 1100 1101 1102 1103 1104 1105 1106 1107 1108 1109 1110 1111 1112 1113 1114 1115 1116 1117 1118 1119 1120 1121 1122 1123 1124 1125 1126 1127 1128 1129 1130 1131 1132 1133 1134 1135 1136 1137 1138 1139 1140 1141 1142 1143 1144 1145 1146 1147 1148 1149 1150 1151 1152 1153 1154 1155 1156 1157 1158 1159 1160 1161 1162 1163 1164 1165 1166 1167 1168 1169 1170 1171 1172 1173 1174 1175 1176 1177 1178 1179 1180 1181 1182 1183 1184 1185 1186 1187 1188 1189 1190 1191 1192 1193 1194 1195 1196 1197 1198 1199 1200 public static int GetCharDisplayLength(char c) { int index = c; if (index \u0026lt; 8800) { if (index \u0026lt; 8246) { if (index \u0026lt; 913) { if (index \u0026lt; 183) { if (index \u0026lt; 166) { if (index \u0026lt; 11) { if (index \u0026lt; 9) { if (index \u0026lt; 7) return 1; else return 0; } else { if (index \u0026lt; 10) return 8; else return 0; } } else { if (index \u0026lt; 14) { if (index \u0026lt; 13) return 1; else return 0; } else { if (index \u0026lt; 162) return 1; else return 2; } } } else { if (index \u0026lt; 178) { if (index \u0026lt; 169) { if (index \u0026lt; 167) return 1; else return 2; } else { if (index \u0026lt; 175) return 1; else return 2; } } else { if (index \u0026lt; 182) { if (index \u0026lt; 180) return 1; else return 2; } else { return 1; } } } } else { if (index \u0026lt; 450) { if (index \u0026lt; 247) { if (index \u0026lt; 215) { if (index \u0026lt; 184) return 2; else return 1; } else { if (index \u0026lt; 216) return 2; else return 1; } } else { if (index \u0026lt; 449) { if (index \u0026lt; 248) return 2; else return 1; } else { return 2; } } } else { if (index \u0026lt; 716) { if (index \u0026lt; 712) { if (index \u0026lt; 711) return 1; else return 2; } else { if (index \u0026lt; 713) return 1; else return 2; } } else { if (index \u0026lt; 730) { if (index \u0026lt; 729) return 1; else return 2; } else { return 1; } } } } } else { if (index \u0026lt; 8209) { if (index \u0026lt; 1025) { if (index \u0026lt; 945) { if (index \u0026lt; 931) { if (index \u0026lt; 930) return 2; else return 1; } else { if (index \u0026lt; 938) return 2; else return 1; } } else { if (index \u0026lt; 963) { if (index \u0026lt; 962) return 2; else return 1; } else { if (index \u0026lt; 970) return 2; else return 1; } } } else { if (index \u0026lt; 1105) { if (index \u0026lt; 1040) { if (index \u0026lt; 1026) return 2; else return 1; } else { if (index \u0026lt; 1104) return 2; else return 1; } } else { if (index \u0026lt; 8208) { if (index \u0026lt; 1106) return 2; else return 1; } else { return 2; } } } } else { if (index \u0026lt; 8229) { if (index \u0026lt; 8218) { if (index \u0026lt; 8215) { if (index \u0026lt; 8211) return 1; else return 2; } else { if (index \u0026lt; 8216) return 1; else return 2; } } else { if (index \u0026lt; 8222) { if (index \u0026lt; 8220) return 1; else return 2; } else { return 1; } } } else { if (index \u0026lt; 8242) { if (index \u0026lt; 8240) { if (index \u0026lt; 8231) return 2; else return 1; } else { if (index \u0026lt; 8241) return 2; else return 1; } } else { if (index \u0026lt; 8245) { if (index \u0026lt; 8244) return 2; else return 1; } else { return 2; } } } } } } else { if (index \u0026lt; 8721) { if (index \u0026lt; 8481) { if (index \u0026lt; 8452) { if (index \u0026lt; 8255) { if (index \u0026lt; 8252) { if (index \u0026lt; 8251) return 1; else return 2; } else { if (index \u0026lt; 8254) return 1; else return 2; } } else { if (index \u0026lt; 8365) { if (index \u0026lt; 8364) return 1; else return 2; } else { if (index \u0026lt; 8451) return 1; else return 2; } } } else { if (index \u0026lt; 8458) { if (index \u0026lt; 8454) { if (index \u0026lt; 8453) return 1; else return 2; } else { if (index \u0026lt; 8457) return 1; else return 2; } } else { if (index \u0026lt; 8471) { if (index \u0026lt; 8470) return 1; else return 2; } else { return 1; } } } } else { if (index \u0026lt; 8596) { if (index \u0026lt; 8560) { if (index \u0026lt; 8544) { if (index \u0026lt; 8482) return 2; else return 1; } else { if (index \u0026lt; 8556) return 2; else return 1; } } else { if (index \u0026lt; 8592) { if (index \u0026lt; 8570) return 2; else return 1; } else { return 2; } } } else { if (index \u0026lt; 8713) { if (index \u0026lt; 8602) { if (index \u0026lt; 8598) return 1; else return 2; } else { if (index \u0026lt; 8712) return 1; else return 2; } } else { if (index \u0026lt; 8720) { if (index \u0026lt; 8719) return 1; else return 2; } else { return 1; } } } } } else { if (index \u0026lt; 8743) { if (index \u0026lt; 8731) { if (index \u0026lt; 8728) { if (index \u0026lt; 8725) { if (index \u0026lt; 8722) return 2; else return 1; } else { if (index \u0026lt; 8726) return 2; else return 1; } } else { if (index \u0026lt; 8730) { if (index \u0026lt; 8729) return 2; else return 1; } else { return 2; } } } else { if (index \u0026lt; 8740) { if (index \u0026lt; 8737) { if (index \u0026lt; 8733) return 1; else return 2; } else { if (index \u0026lt; 8739) return 1; else return 2; } } else { if (index \u0026lt; 8742) { if (index \u0026lt; 8741) return 1; else return 2; } else { return 1; } } } } else { if (index \u0026lt; 8766) { if (index \u0026lt; 8756) { if (index \u0026lt; 8750) { if (index \u0026lt; 8748) return 2; else return 1; } else { if (index \u0026lt; 8751) return 2; else return 1; } } else { if (index \u0026lt; 8764) { if (index \u0026lt; 8760) return 2; else return 1; } else { return 2; } } } else { if (index \u0026lt; 8781) { if (index \u0026lt; 8777) { if (index \u0026lt; 8776) return 1; else return 2; } else { if (index \u0026lt; 8780) return 1; else return 2; } } else { if (index \u0026lt; 8787) { if (index \u0026lt; 8786) return 1; else return 2; } else { return 1; } } } } } } } else { if (index \u0026lt; 12549) { if (index \u0026lt; 9676) { if (index \u0026lt; 8979) { if (index \u0026lt; 8857) { if (index \u0026lt; 8814) { if (index \u0026lt; 8804) { if (index \u0026lt; 8802) return 2; else return 1; } else { if (index \u0026lt; 8808) return 2; else return 1; } } else { if (index \u0026lt; 8853) { if (index \u0026lt; 8816) return 2; else return 1; } else { if (index \u0026lt; 8854) return 2; else return 1; } } } else { if (index \u0026lt; 8895) { if (index \u0026lt; 8869) { if (index \u0026lt; 8858) return 2; else return 1; } else { if (index \u0026lt; 8870) return 2; else return 1; } } else { if (index \u0026lt; 8978) { if (index \u0026lt; 8896) return 2; else return 1; } else { return 2; } } } } else { if (index \u0026lt; 9650) { if (index \u0026lt; 9372) { if (index \u0026lt; 9322) { if (index \u0026lt; 9312) return 1; else return 2; } else { if (index \u0026lt; 9332) return 1; else return 2; } } else { if (index \u0026lt; 9634) { if (index \u0026lt; 9632) return 1; else return 2; } else { return 1; } } } else { if (index \u0026lt; 9670) { if (index \u0026lt; 9660) { if (index \u0026lt; 9652) return 2; else return 1; } else { if (index \u0026lt; 9662) return 2; else return 1; } } else { if (index \u0026lt; 9675) { if (index \u0026lt; 9672) return 2; else return 1; } else { return 2; } } } } } else { if (index \u0026lt; 12293) { if (index \u0026lt; 9738) { if (index \u0026lt; 9702) { if (index \u0026lt; 9680) { if (index \u0026lt; 9678) return 1; else return 2; } else { if (index \u0026lt; 9698) return 1; else return 2; } } else { if (index \u0026lt; 9735) { if (index \u0026lt; 9733) return 1; else return 2; } else { if (index \u0026lt; 9737) return 1; else return 2; } } } else { if (index \u0026lt; 9795) { if (index \u0026lt; 9793) { if (index \u0026lt; 9792) return 1; else return 2; } else { if (index \u0026lt; 9794) return 1; else return 2; } } else { if (index \u0026lt; 12292) { if (index \u0026lt; 12288) return 1; else return 2; } else { return 1; } } } } else { if (index \u0026lt; 12436) { if (index \u0026lt; 12321) { if (index \u0026lt; 12317) { if (index \u0026lt; 12312) return 2; else return 1; } else { if (index \u0026lt; 12319) return 2; else return 1; } } else { if (index \u0026lt; 12353) { if (index \u0026lt; 12330) return 2; else return 1; } else { return 2; } } } else { if (index \u0026lt; 12535) { if (index \u0026lt; 12447) { if (index \u0026lt; 12443) return 1; else return 2; } else { if (index \u0026lt; 12449) return 1; else return 2; } } else { if (index \u0026lt; 12543) { if (index \u0026lt; 12540) return 1; else return 2; } else { return 1; } } } } } } else { if (index \u0026lt; 55297) { if (index \u0026lt; 13215) { if (index \u0026lt; 12959) { if (index \u0026lt; 12832) { if (index \u0026lt; 12690) { if (index \u0026lt; 12586) return 2; else return 1; } else { if (index \u0026lt; 12704) return 2; else return 1; } } else { if (index \u0026lt; 12928) { if (index \u0026lt; 12868) return 2; else return 1; } else { if (index \u0026lt; 12958) return 2; else return 1; } } } else { if (index \u0026lt; 13198) { if (index \u0026lt; 12969) { if (index \u0026lt; 12964) return 2; else return 1; } else { if (index \u0026lt; 12977) return 2; else return 1; } } else { if (index \u0026lt; 13212) { if (index \u0026lt; 13200) return 2; else return 1; } else { return 2; } } } } else { if (index \u0026lt; 13265) { if (index \u0026lt; 13253) { if (index \u0026lt; 13218) { if (index \u0026lt; 13217) return 1; else return 2; } else { if (index \u0026lt; 13252) return 1; else return 2; } } else { if (index \u0026lt; 13263) { if (index \u0026lt; 13262) return 1; else return 2; } else { return 1; } } } else { if (index \u0026lt; 19968) { if (index \u0026lt; 13269) { if (index \u0026lt; 13267) return 2; else return 1; } else { if (index \u0026lt; 13270) return 2; else return 1; } } else { if (index \u0026lt; 55296) { if (index \u0026lt; 40870) return 2; else return 1; } else { return 0; } } } } } else { if (index \u0026lt; 65093) { if (index \u0026lt; 63733) { if (index \u0026lt; 59335) { if (index \u0026lt; 56321) { if (index \u0026lt; 56320) return 1; else return 2; } else { if (index \u0026lt; 57344) return 1; else return 2; } } else { if (index \u0026lt; 59493) { if (index \u0026lt; 59337) return 1; else return 2; } else { return 1; } } } else { if (index \u0026lt; 65072) { if (index \u0026lt; 63744) { if (index \u0026lt; 63734) return 2; else return 1; } else { if (index \u0026lt; 64046) return 2; else return 1; } } else { if (index \u0026lt; 65075) { if (index \u0026lt; 65074) return 2; else return 1; } else { return 2; } } } } else { if (index \u0026lt; 65128) { if (index \u0026lt; 65112) { if (index \u0026lt; 65107) { if (index \u0026lt; 65097) return 1; else return 2; } else { if (index \u0026lt; 65108) return 1; else return 2; } } else { if (index \u0026lt; 65127) { if (index \u0026lt; 65113) return 1; else return 2; } else { return 1; } } } else { if (index \u0026lt; 65504) { if (index \u0026lt; 65281) { if (index \u0026lt; 65132) return 2; else return 1; } else { if (index \u0026lt; 65375) return 2; else return 1; } } else { if (index \u0026lt; 65536) { if (index \u0026lt; 65510) return 2; else return 1; } else { return 0; } } } } } } } } æˆ–è€…, æˆ‘ä»¬å°†è¿™ä¸ªåˆ—è¡¨, å†™å…¥åˆ°byte[], æ¯ä¸€ä¸ªå­—ç¬¦å 1bit, å¦‚æœå¯¹åº”bitæ˜¯1, åˆ™è¡¨ç¤ºå­—ç¬¦å®½åº¦ä¸º2, å¦‚æœå¯¹åº”ä½æ˜¯0, åˆ™è¡¨ç¤ºå­—ç¬¦å®½åº¦ä¸º1. è¿™æ ·, é€Ÿåº¦æ˜¯æ›´å¿«çš„, åªä¸è¿‡è¦ç‰ºç‰²8kbçš„ç©ºé—´äº†.\nå› ä¸ºæ§åˆ¶å°ä¸­, å­—ç¬¦å®½åº¦åªæœ‰4ä¸­å¯èƒ½, 0, 1, 2, 8, å…¶ä¸­0æ˜¯\\r\\n\\0è¿™ç±»æ— å®½åº¦çš„, æ˜¾ç„¶å®ƒä»¬ä¹Ÿæ— æ³•å‚ä¸å­—ç¬¦ä¸²å®½åº¦åˆ¤æ–­, 1å°±æ˜¯æ™®é€šåŠè§’å­—ç¬¦, 2å°±æ˜¯ä¸­æ–‡ä»¥åŠå…¨è§’å­—ç¬¦, 8æ˜¾ç„¶æ˜¯\\t, æ•…, æˆ‘ä»¬åªéœ€è¦èƒ½å¤Ÿè¡¨ç¤º1å’Œ2å³å¯, ä¹Ÿå°±æ˜¯1bitçš„ç©ºé—´.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 int[] lens = new int[char.MaxValue + 1] void WriteData() // å°†å·²ç»ç”Ÿæˆå¥½çš„å®½åº¦æ•°æ®å†™å…¥åˆ°æ–‡ä»¶ { FileStream fs = File.OpenWrite(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), \u0026#34;Lengths.bin\u0026#34;)); byte[] write = new byte[1]; for (int i = 0; i \u0026lt; lens.Length;) { for (int j = 0; j \u0026lt; 8 \u0026amp;\u0026amp; i \u0026lt; lens.Length; i++, j++) { if (lens[i] == 2) write[0] |= (byte)(1 \u0026lt;\u0026lt; j); } fs.Write(write, 0, 1); } fs.Flush(); fs.Close(); } char.MaxValue / 8 = 8k, 8kbå³å¯è£…ä¸‹æ‰€æœ‰å­—ç¬¦çš„å®½åº¦ä¿¡æ¯.\nç„¶åç»“åˆä½è¿ç®—, å°±èƒ½å¾—å‡ºä¸€ä¸ªç®€å•çš„å‡½æ•°. ä¾‹å¦‚ Lengths æ˜¯æˆ‘ä»¬çš„byteæ•°ç»„.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 static byte[] Lengths = Resources.Lengths; public static bool IsWideDisplayCharEx(char c) { int index = c; return (Lengths[index / 8] \u0026amp; (1 \u0026lt;\u0026lt; (index % 8))) != 0; } public static int GetCharDisplayLengthEx(char c) { return IsWideDisplayCharEx(c) ? 2 : 1; } public static int GetStringDisplayLengthEx(string str) { int total = 0; foreach (char c in str) total += GetCharDisplayLengthEx(c); return total; } å…³äºä½¿ç”¨: ç›´æ¥å»cloneå¼€å¤´æ‰€å†™æ˜çš„ä»£ç ä»“åº“å³å¯, ä¼šä¸å®šæ—¶æ›´æ–°çš„.æˆ–è€…, ç›´æ¥å¤åˆ¶ä¸Šé¢çš„ä»£ç (æœ€é•¿çš„é‚£ä¸€æ®µ).\nä¸Šé¢çš„ä»£ç å¤§éƒ¨åˆ†æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„å“¦~ å…³äºå›¾ä¸­ä½¿ç”¨åˆ°çš„Null.TextEditor, åœ¨è¿™é‡Œ:\nåšå®¢é“¾æ¥: ä½¿ç”¨IronPythonæ¥åˆ›å»ºæ”¯æŒè„šæœ¬ç¼–è¾‘æ–‡æœ¬å†…å®¹çš„æ–‡æœ¬ç¼–è¾‘å™¨ Github ä»“åº“åœ°å€: SlimeNull/Null.TextEditor ç‚¹ä¸ªèµ, ç•™ä¸ªè¯„è®ºå†èµ°å§QAQ\n","date":"2020-10-28T23:27:11+08:00","permalink":"https://slimenull.com/p/20201028232711/","title":"[C#] è®¡ç®—å­—ç¬¦ä¸²åœ¨æ§åˆ¶å°ä¸Šæ˜¾ç¤ºçš„å®½åº¦, åŒ…å«æ‰€æœ‰Charèƒ½è¡¨ç¤ºçš„å­—ç¬¦!"},{"content":" é€šè¿‡ char.MaxValue æ¥ä½œä¸ºå¾ªç¯ç»“å°¾, å°†intå¼ºåˆ¶è½¬æ¢ä¸ºchar, å³å¯ ä¹‹å‰è‡ªå·±æœç´¢è¿™ä¸ªå†…å®¹, å‘ç°å›½å†…æ²¡æœ‰, æ‰€ä»¥å†™äº†è¿™ä¸ªæ–‡ç« ä¾›å‚è€ƒ\n1 2 3 4 for (int i = 0; i \u0026lt;= char.MaxValue; i++) { // æ­¤å¤„æ”¾å¤„ç†è¯­å¥, (char)i å³ä¸ºå½“å‰å­—ç¬¦ } ","date":"2020-10-26T15:59:44+08:00","permalink":"https://slimenull.com/p/20201026155944/","title":"C# å¾ªç¯æ‰€æœ‰å¯èƒ½çš„å­—ç¬¦"},{"content":"ç›´åˆ‡å…¥æ­£é¢˜ æœ¬æ–‡ç« æ˜¯é¢å‘åˆå­¦è€…çš„ä¸€äº›èµ„æ–™ æ³¨æ„: å­˜åœ¨å³åˆç†, å¯èƒ½æŸäº›åˆå­¦è€…è®¤ä¸ºè¿™äº›ä¸œè¥¿å¹¶æ— å¿…è¦, ä½†å®é™…ä¸Šå®ƒä»¬æœ‰å¾ˆå¤§çš„ç”¨å¤„\nè·å–ç±»å‹(Type)å¯¹è±¡ 1 2 object obj; Type objType = obj.GetType(); åˆ¤æ–­ç±»å‹æ˜¯å¦å¯ä»¥è½¬æ¢ è¿™ä¸ªæ–¹æ³•åŒæ ·å¯ä»¥åˆ¤æ–­Bæ˜¯å¦ç»§æ‰¿äºA(å¯ä»¥æ˜¯ç±»å’Œæ¥å£), ä½†æ˜¯å¦‚æœä½ è¦åˆ¤æ–­ä¸€ä¸ªç±»æ˜¯å¦ç»§æ‰¿äº†ä¸€ä¸ªæ³›å‹æ¥å£, ä¸æŒ‡å®šç›¸åŒçš„æ³›å‹å‚æ•°, æ˜¯æ— æ³•åˆ¤æ–­æˆåŠŸçš„, æ¯”å¦‚ä¸€ä¸ªç»§æ‰¿äº†Demo\u0026lt;string, string\u0026gt;æ¥å£çš„ç±»åœ¨ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•æ¥åˆ¤æ–­æ˜¯å¦ç»§æ‰¿Demo\u0026lt;\u0026gt;æ¥å£æ—¶, å°±æ— æ³•è·å¾—æ­£ç¡®çš„ç»“æœ. è¿™ç§æ–¹æ³•æ˜¯ä¸¥è°¨çš„.\nä¾‹å­è¡¨ç¤ºäº†Aæ˜¯å¦æ´¾ç”ŸB, ä¹Ÿå°±æ˜¯Bæ˜¯å¦ç»§æ‰¿äºA, æˆ–è€…è¯´Bæ˜¯å¦å¯ä»¥å¼ºåˆ¶è½¬æ¢ä¸ºA\n1 bool result = typeof(B).IsAssignableFrom(typeof(B)); è·å–ç±»å‹ç»§æ‰¿çš„çš„æ¥å£ (åŒ…å«æ³›å‹æ¥å£) è·å–çš„æ¥å£, éƒ½æ˜¯æ¥å£åŸå‹, æ¯”å¦‚è·å–åˆ°çš„ä¼šæ˜¯IDicrionary\u0026lt;,\u0026gt;, è€Œä¸æ˜¯IDictionary\u0026lt;TKey, TValue\u0026gt;. åˆ©ç”¨è¿™ä¸ªç‰¹æ€§, æˆ‘ä»¬å¯ä»¥åˆ¤æ–­ä¸€ä¸ªç±»å‹æ˜¯å¦ç»§æ‰¿æŸä¸ªæ³›å‹æ¥å£, è€Œä¸éœ€è¦æŒ‡å®šè¯¦ç»†çš„æ³›å‹å‚æ•°. ä¸‹é¢çš„åŸå§‹æ¥å£æŒ‡IDictionary\u0026lt;string,string\u0026gt;ä¸IDictionary\u0026lt;,\u0026gt;ä¹‹é—´çš„å…³ç³», IDictionaryå³åŸå§‹æ¥å£ (è¿™ä¸ªæ¦‚å¿µå¹¶ä¸æ˜¯å…¬è®¤æ¦‚å¿µ, ä½†æ˜¯æ²¡æœ‰å·²ç»è§„å®šçš„æ¦‚å¿µæ¥æè¿°\u0026quot;åŸå§‹æ¥å£\u0026quot;, æ‰€ä»¥åœ¨è¿™é‡Œæå‡ºäº†è¿™ä¸ªæ¦‚å¿µ) 1 Type[] interfaces = typeof(A).GetInterfaces(); å‚è€ƒ: åˆ¤æ–­æ˜¯å¦ç»§æ‰¿æŸä¸ªæ³›å‹æ¥å£å¹¶è·å–æ³›å‹å‚æ•°:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 // åœ¨è¿™ä¸ªæ–¹æ³•ä¸­, ä¼šæ¯”å¯¹targetTypeçš„åŸå§‹æ¥å£æ˜¯å¦ä¸interfaceTypeä¸€è‡´ private static bool CheckInterface(Type targetType, Type interfaceType, out Type[] geneticTypes) { foreach(Type i in targetType.GetInterfaces()) { if (i.GetGenericTypeDefinition().Equals(interfaceType)) // GetGenericTypeDefinition() å³è·å–åŸå§‹æ¥å£ç±»å‹. å¦‚æœå»é™¤è¿™ä¸ªæ–¹æ³•, åˆ™æ˜¯ä¸¥è°¨çš„æ¯”è¾ƒç±»å‹ { geneticTypes = i.GetGenericArguments(); return true; } } geneticTypes = null; return false; } ç±»çš„å­—æ®µè·å–ä¸è®¾ç½® ä»¥ç±»å‹Aä¸ºä¾‹:\n1 2 3 4 5 A obj = new A(); Type objType = typeof(A); FieldInfo[] fieldInfos = objType.GetFields(); // è·å–å­—æ®µä¿¡æ¯ object fieldValue = fieldInfos[0].GetValue(obj); // è·å–å­—æ®µå€¼ fieldInfos[0].SetValue(obj, \u0026#34;è¿™æ˜¯ä¸€ä¸ªå€¼\u0026#34;); // è®¾ç½®å­—æ®µçš„å€¼ æ ¹æ®Typeå¯¹è±¡è¿›è¡Œç±»å‹è½¬æ¢ ä¾‹å¦‚, å°†Aè½¬æ¢ä¸ºB\n1 2 A objA = new A(); object objB = Convert.ChangeType(objA, typeof(B)); // è¿”å›äº†è½¬æ¢ä¸ºBç±»å‹çš„å¯¹è±¡çš„å¼•ç”¨ ","date":"2020-10-19T21:16:01+08:00","permalink":"https://slimenull.com/p/20201019211601/","title":"[C#] å„ç§å…³äºç±»å‹ä¸åå°„çš„å¸¸ç”¨æ“ä½œ. ç±»å‹æ“ä½œ, æ ¹æ®Typeè¿›è¡Œç±»å‹è½¬æ¢, æ¥å£è·å–ä¸æ¯”è¾ƒ, æ³›å‹æ¥å£è·å–ä¸æ¯”è¾ƒ, ç±»çš„å­—æ®µè·å–ä¸è®¾ç½®."},{"content":"è¦ç‚¹: å…ˆçœ‹è‡ªå·±è·¯å¾„æ˜¯ä¸æ˜¯é”™äº† ç„¶åçœ‹è‡ªå·±çš„è·¯å¾„è¡¨è¾¾æ˜¯ä¸æ˜¯ä¸ç¬¦åˆæ ‡å‡†, ä¾‹å¦‚è¿™æ ·çš„\u0026quot;/ewq_00010.png\u0026quot;, å®ƒæŒ‡å‘C:\\æ ¹ç›®å½•ä¸‹çš„ä¸€ä¸ªæ–‡ä»¶! è€Œ.NETä¸­ä¸€èˆ¬ä¸å…è®¸å¯¹é‚£é‡Œè¿›è¡Œå†™æ“ä½œ ç„¶å, æˆ‘å°±æ˜¯åœ¨ä¸Šè¿°å†…å®¹çš„æƒ…å†µä¸ŠçŠ¯äº†é”™\u0026hellip; \u0026ldquo;/ewq_00010.png\u0026quot;åº”è¯¥æ˜¯\u0026rdquo;./ewq_00010.png\u0026quot;, ä½¿ç”¨è¿™ä¸ªç‚¹æ¥è¡¨ç¤º, å®ƒæ˜¯ä¸€ä¸ªç›¸å¯¹è·¯å¾„ æˆ‘çš„è§£å†³è¿‡ç¨‹ Image ä¿å­˜çš„Pathæ˜¯\u0026quot;/ewq_00010.png\u0026quot; åœ¨å‘ç°è¿™ä¸ªé—®é¢˜å, æˆ‘é¦–å…ˆæ˜¯æ£€æŸ¥äº†ä¸€ä¸‹, æˆ‘å†™çš„è·¯å¾„æ˜¯å¦æ˜¯æ­£ç¡®çš„, æ¯”å¦‚, ç›®å½•æ˜¯å¦å­˜åœ¨, æˆ‘ä½¿ç”¨VSçš„è°ƒè¯•åŠŸèƒ½, æµ‹è¯•äº†ä¸€ä¸‹, Directory.Exists(Path.GetDirectoryName(\u0026quot;/ewq_00010.png\u0026quot;)) ç»“æœæ˜¯true, åˆæ­¥åˆ¤æ–­ä¸æ˜¯è·¯å¾„é—®é¢˜ åæ¥æŸ¥èµ„æ–™, å‘ç°å¯èƒ½æ˜¯è¿™ä¸ªImageæ˜¯FromFileç”Ÿæˆçš„è€ŒæŠ¥é”™, ä½†æˆ‘çš„ä¸æ˜¯, å®ƒå®Œå®Œå…¨å…¨æ˜¯ä¸€ä¸ªnewå‡ºæ¥çš„, æˆ‘åˆå°è¯•æ€§åœ°æŒ‡å®šImageFormat.Png, æœç„¶, é—®é¢˜æ²¡æœ‰è§£å†³ ç»§ç»­æŸ¥èµ„æ–™, å‘ç°æœ‰äººä½¿ç”¨FileStreamè§£å†³äº†é—®é¢˜, æˆ‘ä¹Ÿå°è¯•, ç„¶åå¤±è´¥äº†\u0026hellip; å†™å…¥è¢«æ‹’ç», æŸ¥äº†æŸ¥èµ„æ–™, ä¸ºä»€ä¹ˆFileStreamå†™å…¥è¢«æ‹’ç», ä¸€å †ä¹±ä¸ƒå…«ç³Ÿçš„ä¸œè¥¿, çœ‹éƒ½çœ‹ä¸æ‡‚, å¤§æ¦‚å°±æ˜¯è®²ASP.NETä¸èƒ½åœ¨C:\\å†™å…¥, ä½†æ˜¯æˆ‘åˆä¸æ˜¯ASP.NET ç„¶åæˆ‘å°è¯•è½¬ä¸ªå¼¯å­, ç”¨MemoryStream, ç„¶åæœ€åç”¨File.WriteAllByteså†™å…¥è¯•è¯•, æœ€å, æˆ‘çªç„¶å‘ç°, å®ƒæç¤ºæˆ‘, å¯¹C:/çš„å†™å…¥è¢«æ‹’ç», è›¤??? æˆ‘çš„è·¯å¾„ä¸æ˜¯\u0026quot;/ewq_0010.png\u0026quot;å—??? æˆ‘è„‘å­è·ŸLinuxè”æƒ³äº†èµ·æ¥, æ€»ä¸ä¼š\u0026hellip; å•ä¸ªæ–œæ æŒ‡C:/å§? è¿™ä¸ªè¾“å‡ºè·¯å¾„, å…¶å®æ˜¯ç»è¿‡æˆ‘çš„ä¸€ä¸ªPathCombineå‡½æ•°æ‹¼åˆè€Œæˆçš„è·¯å¾„, å®ƒå¾ˆç®€å•, ä½†ä¹Ÿå› ä¸ºå®ƒçš„åˆ¤æ–­å¾ˆç®€å•è€Œå—å±äº†\n1 2 3 4 5 6 7 8 public static string CombinePath(string path1, string path2) // ç®€å•ç²—æš´è·¯å¾„æ‹¼åˆ { if (path2.Contains(\u0026#39;:\u0026#39;)) { throw new ArgumentException(\u0026#34;ç¬¬äºŒä¸ªè·¯å¾„ä¸å¯æ˜¯ç»å¯¹è·¯å¾„\u0026#34;); } return path1.TrimEnd(new char[] { \u0026#39;/\u0026#39;, \u0026#39;\\\\\u0026#39; }).Replace(\u0026#39;\\\\\u0026#39;, \u0026#39;/\u0026#39;) + \u0026#34;/\u0026#34; + path2.TrimStart(new char[] { \u0026#39;/\u0026#39;, \u0026#39;\\\\\u0026#39; }).Replace(\u0026#39;\\\\\u0026#39;, \u0026#39;/\u0026#39;); } ç„¶åæˆ‘æŠŠè¿™ä¸ªå‡½æ•°æ”¹æˆäº†è¿™æ ·: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 public static string CombinePath(string path1, string path2) { if (path2.Contains(\u0026#39;:\u0026#39;)) { throw new ArgumentException(\u0026#34;ç¬¬äºŒä¸ªè·¯å¾„ä¸å¯æ˜¯ç»å¯¹è·¯å¾„\u0026#34;); } string result = path1.TrimEnd(new char[] { \u0026#39;/\u0026#39;, \u0026#39;\\\\\u0026#39; }).Replace(\u0026#39;\\\\\u0026#39;, \u0026#39;/\u0026#39;) + \u0026#34;/\u0026#34; + path2.TrimStart(new char[] { \u0026#39;/\u0026#39;, \u0026#39;\\\\\u0026#39; }).Replace(\u0026#39;\\\\\u0026#39;, \u0026#39;/\u0026#39;); if (result.Contains(\u0026#39;:\u0026#39;)) // ç®€å•ç²—æš´åˆ¤æ–­ä½ æ˜¯å¦æ˜¯ç»å¯¹è·¯å¾„ { return result; // å¦‚æœæ˜¯ç»å¯¹è·¯å¾„å°±ç›´æ¥è¿”å›, ä¹Ÿä¸ç®¡ä»–æ˜¯å¦æ˜¯å¯¹çš„ } else { return \u0026#34;./\u0026#34; + result.Trim(\u0026#39;/\u0026#39;); // å¦‚æœä¸æ˜¯, åˆ™åŠ ä¸€ä¸ª\u0026#34;./\u0026#34;æ¥å¼ºè°ƒ, \u0026#39;æˆ‘è¿™æ˜¯ç›¸å¯¹è·¯å¾„\u0026#39; } } ç„¶å\u0026hellip; ç¨‹åºæˆåŠŸè·‘èµ·æ¥äº†\u0026hellip; æœ€å, è¿™ä¸ªç¨‹åºæ˜¯ç”¨äºæ ¹æ®atlaså›¾åƒç´¢å¼•è¡¨åˆ†è§£å›¾åƒçš„, å¦‚æœä½ è§‰å¾—æœ‰å‚è€ƒä»·å€¼, å¯ä»¥ç§ä¿¡æˆ‘ ","date":"2020-08-26T21:59:19+08:00","permalink":"https://slimenull.com/p/20200826215919/","title":"è®°å½•ä¸€æ¬¡ç»éªŒ:Image.Saveé‡åˆ°A generic error occurred in GDI+å¼‚å¸¸"},{"content":"\næœ€è¿‘é—²æ¥æ— äº‹, å€’æ˜¯å€ŸåŠ©WebAPIå®ç°ç¿»è¯‘å™¨, æœ¬æƒ³è®¾è®¡ä¸€ä¸ªç‚«é…·çš„ç•Œé¢(æ¨¡ä»¿VS), å´æ²¡æƒ³åˆ°, éš¾åº¦å¤§å¤§è¶…å‡ºæˆ‘çš„æƒ³è±¡, æ‹–æ‹½, è°ƒæ•´å¤§å°, å¦‚æœè¦å®ç°VSçš„è¾¹æ¡†, è¿˜éœ€è¦æƒ³åŠæ³•åšåˆ°è¿‡æ¸¡é€æ˜! è¿™å¯¹äºWinFormæ¥è¯´å®åœ¨æ˜¯å¤ªéš¾äº†, å¦‚æœä¸è¿‡æ¸¡é€æ˜, å°±æ˜¯å…¨é€æ˜, é‚£é¼ æ ‡å°±ç›´æ¥ç©¿çª—ä½“äº†! ä¸è¿‡è¿˜æ˜¯æœ‰äº›æˆæœçš„, æ¯”å¦‚, é€ äº†ä¸¤ä¸ªè½®å­ (æˆ‘çœŸæ˜¯ä¸€ä¸ªçƒ­è¡·äºé€ è½®å­çš„å‚»å­)\næ‰€è¯´çš„è½®å­å°±æ˜¯æ–‡ç« æ ‡é¢˜å’¯, å› ä¸ºä¹‹å‰æˆ‘è¿˜åšäº†ä¸€ä¸ªç±»æ¥å®ç°æ‹–æ‹½ç§»åŠ¨æ§ä»¶æˆ–çª—ä½“å˜›, æ‰€ä»¥æˆ‘å°±ç›´æ¥æŠŠè¿™ä¸ªè°ƒæ•´å¤§å°çš„è·Ÿä¹‹å‰çš„åŠŸèƒ½æ•´åˆåˆ°äº†ä¸€èµ·. (å¯ä»¥æåˆ°çš„æ˜¯, æœŸé—´å› ä¸ºç‰¹æ®Šéœ€æ±‚, è¿˜åšäº†ä¸€ä¸ªæ˜ å°„æ‹–æ‹½ç§»åŠ¨æ§ä»¶çª—ä½“, å°±æ˜¯æ‹–æ‹½æ§ä»¶1, ç§»åŠ¨æ§ä»¶2)\nä¸‹é¢çš„ä»£ç å°±æ˜¯ç¨‹åºä¸»ä½“äº†, å®ƒæ˜¯åº”è¯¥è¢«å°è£…åˆ°ä¸€ä¸ªç±»åº“é‡Œçš„, æ‰€ä»¥, ä¸è¦ç›´æ¥æŠŠè¿™äº›ä»£ç æ·»åŠ åˆ°ä½ çš„æ–‡ä»¶ä¸­, è€Œæ˜¯æ–°å»ºä¸€ä¸ªç±»åº“(ä¸æ˜¯æ–°å»ºé¡¹ç›®, è€Œæ˜¯æ·»åŠ åˆ°ä½ çš„é¡¹ç›®ä¸­), ç„¶åæŠŠè¿™äº›ä»£ç è¦†ç›–åˆ°æ–°çš„æ–‡ä»¶ä¸­, åœ¨ä½ çš„ç¨‹åºä¸­using CHO.DragOperationå³å¯ä½¿ç”¨ä»£ç æ‰€åŒ…å«çš„3ä¸ªåŠŸèƒ½( DragMove,MapDragMove,DragResize )\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 487 488 489 490 491 492 493 494 495 using System; using System.Collections.Generic; using System.Drawing; using System.Windows.Forms; namespace CHO { namespace DragOperation { public class DragMove { public DragMove(MouseButtons MouseButton, DragMoveMode FollowMode = DragMoveMode.All, bool OutParent = false) { this.MouseButton = MouseButton; this.FollowMode = FollowMode; this.OutParent = OutParent; } public DragMove(DragMoveMode FollowMode = DragMoveMode.All, bool OutParent = false) { AllMouseButton = true; this.FollowMode = FollowMode; this.OutParent = OutParent; } object AboutControl; // è¡¨ç¤ºå½“å‰ç§»åŠ¨æ§ä»¶æ“ä½œæ˜¯é’ˆå¯¹å“ªä¸ªæ§ä»¶çš„ bool Moving = false; // è¡¨ç¤ºæ˜¯å¦æ­£åœ¨ç§»åŠ¨æ§ä»¶ bool AllMouseButton = false; // è¡¨ç¤ºæ˜¯å¦å¤„ç†æ‰€æœ‰æŒ‰é’® bool OutParent; // è¡¨ç¤ºæ˜¯å¦å…è®¸è„±ç¦»çˆ¶å®¹å™¨çš„æ˜¾ç¤ºåŒºåŸŸ Point ControlStartLocation; // è¡¨ç¤ºç§»åŠ¨æ“ä½œæ—¶, æ§ä»¶çš„åˆå§‹ä½ç½® Point MouseFirstLocationAboutParent; // è¡¨ç¤ºç§»åŠ¨æ“ä½œæ—¶, é¼ æ ‡çš„åˆå§‹ä½ç½® DragMoveMode FollowMode; // è·Ÿéšæ¨¡å¼ MouseButtons MouseButton; // åˆ¤å®šæŒ‰é’® List\u0026lt;Control\u0026gt; AddedControls = new List\u0026lt;Control\u0026gt;(); // å·²æ·»åŠ æ§ä»¶ void MouseDownEvent(object sender, MouseEventArgs e) { if ((e.Button == MouseButton) || AllMouseButton) { AboutControl = sender; Moving = true; ControlStartLocation = (sender as Control).Location; if (sender is Form) { MouseFirstLocationAboutParent = Control.MousePosition; } else { MouseFirstLocationAboutParent = (sender as Control).Parent.PointToClient(Control.MousePosition); } } } void MouseMoveEvent(object sender, MouseEventArgs e) { if (sender == AboutControl) { if (Moving) { Point MouseLocationNow; if (sender is Form) { MouseLocationNow = Control.MousePosition; } else { MouseLocationNow = (sender as Control).Parent.PointToClient(Control.MousePosition); } int NewX = MouseLocationNow.X - MouseFirstLocationAboutParent.X + ControlStartLocation.X; int NewY = MouseLocationNow.Y - MouseFirstLocationAboutParent.Y + ControlStartLocation.Y; if (!OutParent) { if (!(sender is Form)) { if (NewX \u0026lt; 0) { NewX = 0; } else if (NewX + (sender as Control).Width \u0026gt; (sender as Control).Parent.Width) { NewX = (sender as Control).Parent.Width - (sender as Control).Width; } if (NewY \u0026lt; 0) { NewY = 0; } else if (NewY + (sender as Control).Height \u0026gt; (sender as Control).Parent.Height) { NewY = (sender as Control).Parent.Height - (sender as Control).Height; } } } if (FollowMode == DragMoveMode.X) { NewY = ControlStartLocation.Y; } if (FollowMode == DragMoveMode.Y) { NewX = ControlStartLocation.X; } (sender as Control).Location = new Point(NewX, NewY); } } else { if (Moving) { Moving = false; (AboutControl as Control).Location = ControlStartLocation; } } } void MouseUpEvent(object sender, MouseEventArgs e) { if (sender != AboutControl) { if (Moving) { (AboutControl as Control).Location = ControlStartLocation; } } Moving = false; } public bool AddControl(Control control) { if (AddedControls.Contains(control)) { return false; } else { control.MouseDown += MouseDownEvent; control.MouseMove += MouseMoveEvent; control.MouseUp += MouseUpEvent; AddedControls.Add(control); return true; } } public bool RemoveControl(Control control) { if (AddedControls.Contains(control)) { control.MouseDown -= MouseDownEvent; control.MouseMove -= MouseMoveEvent; control.MouseUp -= MouseUpEvent; AddedControls.Remove(control); return true; } else { return false; } } } public class MapDragMove { public MapDragMove(MouseButtons MouseButton, DragMoveMode FollowMode = DragMoveMode.All) { this.MouseButton = MouseButton; this.FollowMode = FollowMode; } public MapDragMove(DragMoveMode FollowMode = DragMoveMode.All) { AllMouseButton = true; this.FollowMode = FollowMode; } object AboutControl; // è¡¨ç¤ºå½“å‰ç§»åŠ¨æ§ä»¶æ“ä½œæ˜¯é’ˆå¯¹å“ªä¸ªæ§ä»¶çš„ bool Moving = false; // è¡¨ç¤ºæ˜¯å¦æ­£åœ¨ç§»åŠ¨æ§ä»¶ bool AllMouseButton = false; // è¡¨ç¤ºæ˜¯å¦å¤„ç†æ‰€æœ‰æŒ‰é’® Point ControlStartLocation; // è¡¨ç¤ºç§»åŠ¨æ“ä½œæ—¶, æ§ä»¶çš„åˆå§‹ä½ç½® Point MouseFirstLocation; // è¡¨ç¤ºç§»åŠ¨æ“ä½œæ—¶, é¼ æ ‡çš„åˆå§‹ä½ç½® DragMoveMode FollowMode; // è·Ÿéšæ¨¡å¼ MouseButtons MouseButton; // åˆ¤å®šæŒ‰é’® Dictionary\u0026lt;Control, Control\u0026gt; AddedControls = new Dictionary\u0026lt;Control, Control\u0026gt;(); // å·²æ·»åŠ æ§ä»¶ void MouseDownEvent(object sender, MouseEventArgs e) { if ((e.Button == MouseButton) || AllMouseButton) { AboutControl = sender; Moving = true; ControlStartLocation = (sender as Control).Location; MouseFirstLocation = Control.MousePosition; } } void MouseMoveEvent(object sender, MouseEventArgs e) { if (sender == AboutControl) { if (Moving) { Point MouseLocationNow = Control.MousePosition; if (FollowMode == DragMoveMode.X) { AddedControls[sender as Control].Left += MouseLocationNow.X - MouseFirstLocation.X; } else if (FollowMode == DragMoveMode.Y) { AddedControls[sender as Control].Top += MouseLocationNow.Y - MouseFirstLocation.Y; } else { AddedControls[sender as Control].Location = new Point(AddedControls[sender as Control].Location.X + (MouseLocationNow.X - MouseFirstLocation.X), AddedControls[sender as Control].Location.Y + (MouseLocationNow.Y - MouseFirstLocation.Y)); } MouseFirstLocation = MouseLocationNow; } } else { if (Moving) { Moving = false; (AboutControl as Control).Location = ControlStartLocation; } } } void MouseUpEvent(object sender, MouseEventArgs e) { if (sender != AboutControl) { if (Moving) { (AboutControl as Control).Location = ControlStartLocation; } } Moving = false; } public bool AddControl(Control dragControl, Control moveControl) { if (AddedControls.ContainsKey(dragControl)) { return false; } else { dragControl.MouseDown += MouseDownEvent; dragControl.MouseMove += MouseMoveEvent; dragControl.MouseUp += MouseUpEvent; AddedControls.Add(dragControl, moveControl); return true; } } public bool RemoveControl(Control control) { if (AddedControls.ContainsKey(control)) { control.MouseDown -= MouseDownEvent; control.MouseMove -= MouseMoveEvent; control.MouseUp -= MouseUpEvent; AddedControls.Remove(control); return true; } else { return false; } } } /// \u0026lt;summary\u0026gt; /// æ§ä»¶è·Ÿéšé¼ æ ‡çš„ç§»åŠ¨æ¨¡å¼ /// \u0026lt;/summary\u0026gt; public enum DragMoveMode { /// \u0026lt;summary\u0026gt; /// è¡¨ç¤ºåªè·Ÿéšæ¨ªåæ ‡ /// \u0026lt;/summary\u0026gt; X, /// \u0026lt;summary\u0026gt; /// è¡¨ç¤ºåªè·Ÿéšçºµåæ ‡ /// \u0026lt;/summary\u0026gt; Y, /// \u0026lt;summary\u0026gt; /// è·Ÿéšæ¨ªåæ ‡ä¸çºµåæ ‡ /// \u0026lt;/summary\u0026gt; All } public class DragResize { public DragResize(MouseButtons MouseButton, int BorderSize = 5) { this.MouseButton = MouseButton; this.BorderSize = BorderSize; } public DragResize(int BorderSize = 5) { this.AllMouseButton = true; this.BorderSize = BorderSize; } int BorderSize = 10; // è¾¹æ¡†åˆ¤æ–­å¤§å° object AboutControl; // è¡¨ç¤ºå½“å‰è°ƒæ•´æ§ä»¶æ“ä½œæ˜¯é’ˆå¯¹å“ªä¸ªæ§ä»¶çš„ bool Resizing = false; // è¡¨ç¤ºæ˜¯å¦æ­£åœ¨è°ƒæ•´æ§ä»¶ bool AllMouseButton = false; // è¡¨ç¤ºæ˜¯å¦å¤„ç†æ‰€æœ‰æŒ‰é’® bool MouseDownING = false; bool LeftResize; bool RightResize; bool TopResize; bool BottomResize; private Point MouseFirstLocation; // è¡¨ç¤ºè°ƒæ•´æ“ä½œæ—¶, é¼ æ ‡çš„åˆå§‹ä½ç½® MouseButtons MouseButton; // åˆ¤å®šæŒ‰é’® List\u0026lt;Control\u0026gt; AddedControls = new List\u0026lt;Control\u0026gt;(); // å·²æ·»åŠ æ§ä»¶ void CheckMouse(object sender) { Point mousePosition; if (sender is Form) { mousePosition = Control.MousePosition; } else { mousePosition = (sender as Control).Parent.PointToClient(Control.MousePosition); } if (mousePosition.X \u0026gt;= (sender as Form).Left \u0026amp;\u0026amp; mousePosition.X \u0026lt;= (sender as Form).Left + BorderSize) { LeftResize = true; } else if (mousePosition.X \u0026gt;= (sender as Form).Left + (sender as Form).Width - BorderSize \u0026amp;\u0026amp; mousePosition.X \u0026lt;= (sender as Form).Left + (sender as Form).Width) { RightResize = true; } else { LeftResize = false; RightResize = false; } if (mousePosition.Y \u0026lt;= (sender as Form).Top + BorderSize \u0026amp;\u0026amp; mousePosition.Y \u0026gt;= (sender as Form).Top) { TopResize = true; } else if (mousePosition.Y \u0026gt;= (sender as Form).Top + (sender as Form).Height - BorderSize \u0026amp;\u0026amp; mousePosition.Y \u0026lt;= (sender as Form).Top + (sender as Form).Height) { BottomResize = true; } else { TopResize = false; BottomResize = false; } if ((LeftResize || RightResize || TopResize || BottomResize) \u0026amp;\u0026amp; MouseDownING) { Resizing = true; AboutControl = sender; } else { Resizing = false; } } void MouseDownEvent(object sender, MouseEventArgs e) { if (AllMouseButton || e.Button == MouseButton) { MouseDownING = true; CheckMouse(sender); if (Resizing) { MouseFirstLocation = Control.MousePosition; } } } void MouseMoveEvent(object sender, MouseEventArgs e) { if (Resizing \u0026amp;\u0026amp; sender == AboutControl) { Point mousePosition = Control.MousePosition; (sender as Control).Invalidate(false); if (LeftResize) { (sender as Control).Width += MouseFirstLocation.X - mousePosition.X; (sender as Control).Left -= MouseFirstLocation.X - mousePosition.X; } else if (RightResize) { (sender as Control).Width += mousePosition.X - MouseFirstLocation.X; } if (TopResize) { (sender as Control).Height += MouseFirstLocation.Y - mousePosition.Y; (sender as Control).Top -= MouseFirstLocation.Y - mousePosition.Y; } else if (BottomResize) { (sender as Control).Height += mousePosition.Y - MouseFirstLocation.Y; } (sender as Control).Invalidate(true); MouseFirstLocation = mousePosition; } else { CheckMouse(sender); if (TopResize) { if (LeftResize) { (sender as Control).Cursor = Cursors.SizeNWSE; } else if (RightResize) { (sender as Control).Cursor = Cursors.SizeNESW; } else { (sender as Control).Cursor = Cursors.SizeNS; } } else if (BottomResize) { if (LeftResize) { (sender as Control).Cursor = Cursors.SizeNESW; } else if (RightResize) { (sender as Control).Cursor = Cursors.SizeNWSE; } else { (sender as Control).Cursor = Cursors.SizeNS; } } else if (LeftResize) { (sender as Control).Cursor = Cursors.SizeWE; } else if (RightResize) { (sender as Control).Cursor = Cursors.SizeWE; } else { (sender as Control).Cursor = Cursors.Default; } } } void MouseUpEvent(object sender, MouseEventArgs e) { MouseDownING = false; if (Resizing) { Resizing = false; } } void MouseLeaveEvent(object sender, EventArgs e) { (sender as Control).Cursor = Cursors.Default; } public bool AddControl(Control control) { if (AddedControls.Contains(control)) { return false; } else { control.MouseLeave += MouseLeaveEvent; control.MouseDown += MouseDownEvent; control.MouseMove += MouseMoveEvent; control.MouseUp += MouseUpEvent; AddedControls.Add(control); return true; } } public bool RemoveControl(Control control) { if (AddedControls.Contains(control)) { control.MouseDown -= MouseDownEvent; control.MouseMove -= MouseMoveEvent; control.MouseUp -= MouseUpEvent; AddedControls.Remove(control); return true; } else { return false; } } } } } ","date":"2020-07-10T03:11:28+08:00","permalink":"https://slimenull.com/p/20200710031128/","title":"[C#] ä¸€ä¸ªç±»å®ç°æ‹–æ‹½è°ƒæ•´çª—ä½“æˆ–æ§ä»¶å¤§å°"},{"content":"å…³äºæ–‡ç« : æ–‡ç« åŒ…å«ä»¥ä¸‹éƒ¨åˆ†: å¯¹é¼ æ ‡æ‹–åŠ¨å®ç°æ§ä»¶ç§»åŠ¨çš„åŸç†è¯¦è§£ ä½¿ç”¨ç±»å°†åŠŸèƒ½å°è£… é€‚ç”¨äº: C# WinForm æ›´æ–°æ—¥å¿—: 2020-07-07 9:05AM æ›´æ”¹äº†å¤šæ§ä»¶å®ç°çš„ç®—æ³•, ä½¿å…¶èƒ½å¤Ÿæ”¯æŒç§»åŠ¨çª—ä½“\nåŸç†: æ¯å½“é¼ æ ‡ç§»åŠ¨æ—¶, æ ¹æ®é¼ æ ‡åæ ‡è®¡ç®—å‡ºæ§ä»¶åº”å¤„äºçš„ä½ç½®å¹¶å°†æ§ä»¶ç§»åŠ¨åˆ°è®¡ç®—å‡ºçš„ä½ç½®, å¦å¤–, ä¸ºäº†æ ‡è¯†æ˜¯å¦æ­£åœ¨æ‹–åŠ¨æ§ä»¶, è¿˜éœ€è¦è®¢é˜…æ§ä»¶çš„MouseDownå’ŒMouseUpäº‹ä»¶. å½“MouseDownäº‹ä»¶è§¦å‘æ—¶, æ ‡è¯†æ˜¯å¦æ­£åœ¨æ‹–åŠ¨æ§ä»¶çš„å¸ƒå°”å˜é‡è®¾ç½®ä¸ºtrue, å½“MouseUpäº‹ä»¶è§¦å‘æ—¶, æ ‡è¯†æ˜¯å¦æ­£åœ¨æ‹–åŠ¨æ§ä»¶çš„å¸ƒå°”å˜é‡è®¾ç½®ä¸ºfalse; åœ¨é¼ æ ‡ç§»åŠ¨æ—¶, ä¼šåˆ¤æ–­è¿™ä¸ªå˜é‡çš„å€¼ä»¥å†³å®šæ˜¯å¦åº”è¯¥ç§»åŠ¨æ§ä»¶. ä¸ºäº†ä¿è¯é¼ æ ‡ç›¸å¯¹æ§ä»¶çš„ä½ç½®æ˜¯ä¸å˜çš„, æ‰€ä»¥è¿˜éœ€è¦ä¸€ä¸ªPointç±»å‹çš„å˜é‡æ¥æ ‡è¯†é¼ æ ‡æŒ‰ä¸‹æ§ä»¶æ—¶, é¼ æ ‡ç›¸å¯¹æ§ä»¶çš„ç›¸å¯¹ä½ç½®. ä¸€äº›èµ„æ–™: è·å–é¼ æ ‡ç›¸å¯¹å±å¹•çš„åæ ‡ : Control.MousePosition; è·å–ä¸€ä¸ª ç›¸å¯¹äºå±å¹•çš„åæ ‡ ç›¸å¯¹æŸä¸ªæ§ä»¶çš„ç›¸å¯¹åæ ‡ : æ§ä»¶.PointToClient(ä¸€ä¸ªç›¸å¯¹äºå±å¹•çš„åæ ‡); ä¸‹é¢æ˜¯æ–¹ä¾¿åˆå­¦è€…çš„: asè¿ç®—ç¬¦, å°†æŸä¸ªå®ä¾‹ä½œä¸ºæŸç§ç±»å‹ä½¿ç”¨, ä¾‹å¦‚: 1 2 3 4 // objæ˜¯ä¸€ä¸ªButtonè½¬æ¢ä¸ºobjectç±»å‹çš„æŒ‰é’® // é‚£ä¹ˆ, (obj as Button).Text = \u0026#34;æ–°çš„æ–‡æœ¬\u0026#34;; æ˜¯å¯ç”¨çš„, å®ƒå°†ä¸ºæ§ä»¶æŒ‡å®šä¸€ä¸ªæ–°çš„æ–‡æœ¬ (obj as Button).Text = \u0026#34;æ–°çš„æ–‡æœ¬\u0026#34;; // æ³¨æ„, asè¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ä½äº.è¿ç®—ç¬¦, æ‰€ä»¥æ‹¬å·ä¸å¯ä»¥çœå» å•æ§ä»¶å®ç°: æ–°å»ºé¡¹ç›®, é¡¹ç›®ç±»å‹æ˜¯WinForm. æ·»åŠ æ§ä»¶ (æˆ‘è¿™é‡Œå°†æ§ä»¶çš„Nameè®¾ç½®ä¸ºäº†ExempleButton) æµ“æµ“çš„Chinglishå‘³é“, å“ˆå“ˆå“ˆ\n3. æ·»åŠ ç›¸å…³äº‹ä»¶(MouseDown, MouseMove, MouseUp):\n4. è½¬åˆ°ä»£ç , æ·»åŠ ç›¸å…³å˜é‡.\n5. æ·»åŠ å…³é”®ä»£ç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 bool Moving = false; // æ ‡è¯†æ˜¯å¦åœ¨æ‹–åŠ¨æ§ä»¶ Point MouseFirstLocation; // é¼ æ ‡æŒ‰ä¸‹æ—¶, ç›¸å¯¹äºæ§ä»¶çš„åæ ‡ private void ExempleButton_MouseDown(object sender, MouseEventArgs e) { Moving = true; // è¡¨ç¤ºè¿›å…¥æ‹–åŠ¨æ§ä»¶çš„çŠ¶æ€ Point MousePoint = Control.MousePosition; // è·å–é¼ æ ‡ç›¸å¯¹å±å¹•çš„åæ ‡ MouseFirstLocation = ExempleButton.PointToClient(MousePoint); // è·å–åæ ‡ç›¸å¯¹äºæ§ä»¶çš„ç›¸å¯¹åæ ‡å¹¶èµ‹å€¼ç»™MouseFirstLocation } private void ExempleButton_MouseMove(object sender, MouseEventArgs e) { if (Moving) { Point MousePoint = Control.MousePosition; // è·å–é¼ æ ‡ç›¸å¯¹å±å¹•çš„åæ ‡ Point MousePointToContainer = ExempleButton.Parent.PointToClient(MousePoint); // è·å–é¼ æ ‡ç›¸å¯¹æ§ä»¶çˆ¶å®¹å™¨çš„åæ ‡ Point ControlNewLocation = new Point(MousePointToContainer.X - MouseFirstLocation.X, MousePointToContainer.Y - MouseFirstLocation.Y); // è®¡ç®—æ§ä»¶åº”å¤„äºçš„, æ–°çš„åæ ‡ ExempleButton.Location = ControlNewLocation; // ç§»åŠ¨æ§ä»¶ } } private void ExempleButton_MouseUp(object sender, MouseEventArgs e) { Moving = false; // è„±ç¦»æ‹–åŠ¨æ§ä»¶çš„çŠ¶æ€ } å¯ä»¥ä½¿ç”¨äº†~ å¤šæ§ä»¶å®ç°: ä½¿ç”¨ç±»å°è£…åŠŸèƒ½, ç±»çš„AddControl(Control control)æ–¹æ³•æ¥å¿«æ·ä½¿æŸä¸ªæ§ä»¶æ”¯æŒé¼ æ ‡æ‹–åŠ¨ç§»åŠ¨ä½ç½®. è¿™é‡Œçš„åŸç†ä¸å‰é¢çš„å•æ§ä»¶å®ç°æœ‰äº›å‡ºå…¥, ä½†ä¹Ÿæ˜¯é€šè¿‡åˆå§‹é¼ æ ‡åæ ‡(è¿™é‡Œæ˜¯ç›¸å¯¹çˆ¶å®¹å™¨è€Œä¸æ˜¯ç§»åŠ¨çš„æ§ä»¶)ä¸åˆå§‹åæ ‡è®¡ç®—å‡ºçš„ è¿™ä¸ªç±»ä¸ä»…æ”¯æŒçª—ä½“å†…çš„æ§ä»¶, è€Œä¸”è¿˜æ”¯æŒçª—ä½“ (æ²¡æœ‰ç›´æ¥ä½¿ç”¨WindowsAPI) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 class DragMove { public DragMove(MouseButtons MouseButton) { this.MouseButton = MouseButton; } public DragMove() { AllMouseButton = true; } object AboutControl; // è¡¨ç¤ºå½“å‰ç§»åŠ¨æ§ä»¶æ“ä½œæ˜¯é’ˆå¯¹å“ªä¸ªæ§ä»¶çš„ bool Moving = false; // è¡¨ç¤ºæ˜¯å¦æ­£åœ¨ç§»åŠ¨æ§ä»¶ bool AllMouseButton = false; // è¡¨ç¤ºæ˜¯å¦å¤„ç†æ‰€æœ‰æŒ‰é’® Point ControlStartLocation; // è¡¨ç¤ºç§»åŠ¨æ“ä½œæ—¶, æ§ä»¶çš„åˆå§‹ä½ç½® Point MouseFirstLocationAboutParent; // è¡¨ç¤ºç§»åŠ¨æ“ä½œæ—¶, é¼ æ ‡çš„åˆå§‹ä½ç½® MouseButtons MouseButton; List\u0026lt;Control\u0026gt; AddedControls = new List\u0026lt;Control\u0026gt;(); void MouseDownEvent(object sender, MouseEventArgs e) { if ((e.Button == MouseButton) || AllMouseButton) { AboutControl = sender; Moving = true; ControlStartLocation = (sender as Control).Location; if (sender is Form) { MouseFirstLocationAboutParent = Control.MousePosition; } else { MouseFirstLocationAboutParent = (sender as Control).Parent.PointToClient(Control.MousePosition); } } } void MouseMoveEvent(object sender, MouseEventArgs e) { if (sender == AboutControl) { if (Moving) { Point MouseLocationNow; if (sender is Form) { MouseLocationNow = Control.MousePosition; } else { MouseLocationNow = (sender as Control).Parent.PointToClient(Control.MousePosition); } Point ControlNewLocation = new Point(MouseLocationNow.X - MouseFirstLocationAboutParent.X + ControlStartLocation.X, MouseLocationNow.Y - MouseFirstLocationAboutParent.Y + ControlStartLocation.Y); (sender as Control).Location = ControlNewLocation; } } else { if (Moving) { Moving = false; (AboutControl as Control).Location = ControlStartLocation; } } } void MouseUpEvent(object sender, MouseEventArgs e) { if (sender != AboutControl) { if (Moving) { (AboutControl as Control).Location = ControlStartLocation; } } Moving = false; } public bool AddControl(Control control) { if (AddedControls.Contains(control)) { return false; } else { control.MouseDown += MouseDownEvent; control.MouseMove += MouseMoveEvent; control.MouseUp += MouseUpEvent; AddedControls.Add(control); return true; } } public bool RemoveControl(Control control) { if (AddedControls.Contains(control)) { control.MouseDown -= MouseDownEvent; control.MouseMove -= MouseMoveEvent; control.MouseUp -= MouseUpEvent; AddedControls.Remove(control); return true; } else { return false; } } } è¿™ä¸ªç±»åŒ…å«äº†åˆ¤æ–­é¼ æ ‡æŒ‰é”®çš„åŠŸèƒ½, æ¯”å¦‚åªå…è®¸å³é”®æ‹–åŠ¨æ§ä»¶, ä¹Ÿæœ‰ä¸€äº›é¢„é˜²æªæ–½, ä¿è¯ç±»èƒ½å¤Ÿæ­£å¸¸å·¥ä½œçš„ä¸€äº›æªæ–½(åˆ¤æ–­æ§ä»¶), ä¹Ÿæ”¯æŒæ·»åŠ ä¸ç§»é™¤æ§ä»¶ ","date":"2020-07-06T06:52:50+08:00","permalink":"https://slimenull.com/p/20200706065250/","title":"[C#] é¼ æ ‡æ‹–åŠ¨å®ç°æ§ä»¶ç§»åŠ¨ - ä¸€ä¸ªç±»å®ç°å¯¹å¤šä¸ªæ§ä»¶ä¸çª—ä½“çš„é¼ æ ‡æ‹–åŠ¨ç§»åŠ¨æ“ä½œ"},{"content":"æ³¨æ„: æ–‡ç« é€‚åˆåˆå­¦è€…, è®²çš„è¾ƒä¸ºè¯¦ç»†, å¤§ä½¬å¯ä»¥ç»•é“ ä½œè€…ä¹Ÿæ˜¯è‡ªå­¦C#çš„, æ‰€ä»¥æœ‰äº›ä¸œè¥¿å¯èƒ½è®²çš„ä¹Ÿæœ‰äº›ä¸å¥½, è¯·è§è°… å…³äºDLL: åœ¨C#ä¸­, DLLå¯ä»¥è¯´æ˜¯ç±»åº“, åˆ›å»ºä¸€ä¸ªç±»åº“ç±»å‹çš„é¡¹ç›®å, ç”Ÿæˆæ—¶ç”Ÿæˆçš„æ–‡ä»¶æ—¶ä¸€ä¸ªDLLæ–‡ä»¶ ä¸€ä¸ªç±»åº“ä¸­, åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªç±», è¿™äº›ç±»å¤„äºæŸä¸ªå‘½åç©ºé—´ä¸‹, å½“å¼•ç”¨è¿™ä¸ªDLLæ–‡ä»¶å, using ç›¸åº”çš„å‘½åç©ºé—´åå³å¯ç›´æ¥ä½¿ç”¨ç±»åº“ä¸­æ‰€åŒ…å«çš„ç±» ä¸€èˆ¬çš„, åˆ›å»ºDLLæ–‡ä»¶ä¸ºçš„æ˜¯å°†è‡ªå·±å®šä¹‰çš„ä¸€ä¸ªç±», ç›´æ¥åˆ¶ä½œæˆDLLæ–‡ä»¶ä»¥æ–¹ä¾¿åˆ«äººä½¿ç”¨, è¿™æ ·ä¸éœ€è¦å¤åˆ¶ä»£ç ä¹Ÿå¯ä»¥ä½¿ç”¨ä½ å®šä¹‰çš„ç±». (å¯¹äºä¸äº†è§£å¼•ç”¨æ˜¯ä»€ä¹ˆçš„åˆå­¦è€…, ä½ éœ€è¦çŸ¥é“, ä¸€ä¸ªC#ç¨‹åº, ä¼šä½¿ç”¨ä¸å°‘çš„ç±»åº“, æ¯”å¦‚System.dll, System.Windows.Forms.dll, ä½†æ˜¯è¿™äº›.NETæ¡†æ¶å«æœ‰çš„ç±»åº“, C#ç¨‹åºå¯ä»¥ç›´æ¥ä½¿ç”¨, è€Œä¸éœ€è¦å°†DLLæ–‡ä»¶ç½®äºç¨‹åºæ‰€åœ¨ç›®å½•ä¸‹, é¡¹ç›®çš„\u0026rsquo;å¼•ç”¨\u0026rsquo;è¯´æ˜äº†è¿™ä¸ªç¨‹åºä½¿ç”¨äº†ä»€ä¹ˆç±»åº“, è€Œä¸”åœ¨ä½ ç¼–ç¨‹çš„æ—¶å€™, VSä¹Ÿä¼šæ ¹æ®ä½ å¼•ç”¨çš„ç±»åº“æ¥ç»™ä½ ä»£ç æç¤º) åˆ›å»ºDLLæ–‡ä»¶: åˆ›å»ºä¸€ä¸ª ç±»åº“(.NET Framework) é¡¹ç›®, å¦‚ä¸‹å›¾, ä¸è¿‡, å› ä¸ºæˆ‘å·²ç»æœ‰åˆ›å»ºè¿‡äº†, æ‰€ä»¥æˆ‘å°±ç›´æ¥ä½¿ç”¨ä¹‹å‰åˆ›å»ºçš„é¡¹ç›®äº†. åˆ›å»ºå®Œæˆå, ä½ å°±å¯ä»¥å†™ä»£ç äº†, è¦æ¸…æ¥š, C#çš„ç±»åº“åŒ…å«çš„å…¶å®å°±æ˜¯ä¸€ä¸ªä¸ªçš„ç±», æˆ–è€…å…¶ä»–æˆå‘˜(ä¸èƒ½æ˜¯å­—æ®µ). ä¸‹å›¾, å°±æ˜¯æˆ‘ä¹‹å‰çš„é¡¹ç›®, æ³¨æ„, è¿™äº›ä¾›ä½¿ç”¨è€…è®¿é—®çš„æˆå‘˜åˆ«å¿˜äº†ä½¿ç”¨publicä¿®é¥°. æˆ‘çš„è¿™ä¸ªé¡¹ç›®, æ˜¯ä¸€ä¸ªç”¨æ¥æ“ä½œJsonçš„ç±»åº“, ä¹‹åå°†ä½¿ç”¨å®ƒæ¥å°è¯•æ“ä½œDLL ç”Ÿæˆé¡¹ç›®, å¹¶æ‰¾åˆ°ç”Ÿæˆçš„DLLæ–‡ä»¶. å¼•ç”¨ç”Ÿæˆçš„DLL: é¦–å…ˆ, è½¬åˆ°å¦å¤–ä¸€ä¸ªé¡¹ç›®, æˆ‘ä»¬å°†åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨ä¹‹å‰ç”Ÿæˆçš„DLL. æ·»åŠ å¼•ç”¨, åœ¨è§£å†³æ–¹æ¡ˆç®¡ç†å™¨ä¸­å³å‡»é¡¹ç›®, æ·»åŠ , å¼•ç”¨,\næ·»åŠ å¼•ç”¨, åœ¨å¼¹å‡ºçš„çª—å£ä¸­ç‚¹å‡»æµè§ˆ, ç„¶ååœ¨é€‰æ‹©æ–‡ä»¶çª—å£ä¸­é€‰æ‹©ä¹‹å‰ç”Ÿæˆçš„DLLæ–‡ä»¶, ç‚¹å‡»æ·»åŠ , æœ€ååœ¨å¼•ç”¨ç®¡ç†å™¨ä¸­ç‚¹å‡»ç¡®å®š. 3. äºæ˜¯, æˆ‘ä»¬å°±æˆåŠŸçš„å¼•ç”¨äº†ä¹‹å‰ç”Ÿæˆçš„DLLæ–‡ä»¶. ä½¿ç”¨DLLä¸­åŒ…å«çš„æˆå‘˜: åœ¨åˆ›å»ºDLLæ—¶, å¯ä»¥çœ‹åˆ°, æˆå‘˜å‡å¤„äº CHO.Json å‘½åç©ºé—´ä¸‹, æ‰€ä»¥æˆ‘ä»¬usingå®ƒ, å¦‚ä¸‹å›¾, å¹¶æ²¡æœ‰å‡ºç°é”™è¯¯. å‡†å¤‡ä¸€ä¸ªJsonæ–‡æœ¬æ¥ä½¿ç¨‹åºè¯»å–. { \u0026ldquo;å§“å\u0026rdquo;: \u0026ldquo;å°æ˜\u0026rdquo;, \u0026ldquo;æ€§åˆ«\u0026rdquo;: \u0026ldquo;ç”·\u0026rdquo;, \u0026ldquo;å¹´é¾„\u0026rdquo;: 16, \u0026ldquo;è‡ªè¿°\u0026rdquo;: null, \u0026ldquo;æ˜¯å¦æ‚£æ–°å† è‚ºç‚\u0026rdquo;: false, \u0026ldquo;å­¦ä¹ çš„ç¼–ç¨‹è¯­è¨€\u0026rdquo;: [\u0026ldquo;C#\u0026rdquo;, \u0026ldquo;Python\u0026rdquo;, \u0026ldquo;C\u0026rdquo;] }\nå°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²è¡¨è¾¾å¼. (è¿™é‡Œä½¿ç”¨äº†æˆ‘è‡ªå·±çš„å°ç¨‹åº, æ–‡ç« æœ«å°¾ä¼šé™„ä¸Šä¸‹è½½é“¾æ¥) å°†ä»£ç å†™å¥½. 4. è¿è¡Œç¨‹åº. 5. å¯ä»¥çœ‹åˆ°, æˆåŠŸä½¿ç”¨äº†ç±»åº“ä¸­çš„JsonDataç±»,å’ŒJsonDataTypeæšä¸¾ç±»å‹.\næ–‡ç« åˆ°æ­¤ç»“æŸ. å°†æ–‡æœ¬è½¬æ¢ä¸ºå­—ç¬¦ä¸²è¡¨è¾¾å¼çš„å°å·¥å…· (è“å¥äº‘ä¸‹è½½) å…³äºæˆ‘å†™çš„è¿™ä¸ªJsonæ“ä½œç±»åº“(æ–‡ç« ) å…³äºä½œè€…: ä¸€ä¸ªå–œæ¬¢ç¼–ç¨‹ä½†ä¸å–œæ¬¢åœ¨æ ¡å­¦ä¹ å¥‡æ€ªä¸œè¥¿çš„å¥‡æ€ªäººå£«. æ€§æ ¼æ²™é›•, ä½†å†™æ–‡ç« çš„æ—¶å€™å°±è«åå…¶å¦™çš„è®¤çœŸèµ·æ¥ å–œæ¬¢ç©MC, è¿˜æœ‰ç±»ä¼¼çš„æ²™ç›’æ¸¸æˆ, ä¾‹å¦‚åºŸå“å·¥ç¨‹å¸ˆ è”ç³»æˆ‘: å‘é€ç§ä¿¡. ç”µå­é‚®ä»¶ : creepslime@foxmail.com ç§äººQQ : 2056818509 æ¬¢è¿ä¸æˆ‘äº¤æµå– Îµ=Îµ=Îµ=(~ ï¿£â–½ï¿£)~\n","date":"2020-07-05T01:05:33+08:00","permalink":"https://slimenull.com/p/20200705010533/","title":"[C#] å¦‚ä½•åˆ›å»ºDLLå¹¶åœ¨é¡¹ç›®ä¸­ä½¿ç”¨"},{"content":"1. å…³äº: è¿™æ˜¯æˆ‘è‡ªå·±å†™çš„ä¸€ä¸ªç±»åº“, å·²ç»å°è£…åˆ°äº†ä¸€ä¸ªdllä¸­, æš‚ä¸”å‘½åä¸ºCHO.Json, å®ƒèƒ½å¤Ÿä½¿ä½ åƒPythoné‚£æ ·æ“ä½œJsonæ•°æ®, éå¸¸é€‚åˆæ–°æ‰‹ è™½ç„¶åœ¨æ“ä½œè¾ƒå¤§çš„Jsonæ•°æ®æ—¶, éœ€è¦å®ä½“ç±»ä¼šæ›´æ–¹ä¾¿, ä½†æ˜¯è¿™ä¸ªç±»åº“, å¯ä»¥è®©ä½ å®æ—¶åˆ¤æ–­Jsonæ•°æ®çš„ç±»å‹. å½“ç„¶, ä»¥åä¹Ÿä¼šè€ƒè™‘åŠ å…¥éœ€å®ä½“ç±»çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–. å®ƒå…·æœ‰è¾ƒå¤§çš„å®¹å·®å€¼, æ‰€ä»¥å…è®¸ä¸€äº›Jsonä¸å…è®¸çš„æ“ä½œ, ä¾‹å¦‚å°†Boolå€¼ä½œä¸ºObjectä¸­çš„é”®, CHO.Jsonæ”¯æŒè¿™æ ·, ç”±CHO.Jsonç”Ÿæˆçš„Jsonæ–‡æœ¬, CHO.Jsonå®Œå…¨å¯ä»¥è¯»å–. å› ä¸ºå…¶ç‰¹æ®Šæ€§, æ‰€ä»¥å¯èƒ½åˆ«çš„Jsonè¯»å†™æ¨¡å—æ— æ³•è¯†åˆ«, æ‰€ä»¥, ä¸ºäº†ä¿è¯æ­£å¸¸ä½¿ç”¨, å³ä¾¿CHO.Jsonæ”¯æŒè¿™äº›æ“ä½œ, ä½†åŠ¡å¿…éµå®ˆæ ‡å‡†Jsonçš„è§„åˆ™. æœ€æ–°ç‰ˆçš„æŸäº›å‡½æ•°å·²ç»ä¸ä»‹ç»æœ‰äº›å‡ºå…¥, è¯·æŸ¥çœ‹æ–°æ–‡ç«  CHO.Jsonæ“ä½œ å·²ç»æ·»åŠ äº†å…³äºå®ä½“ç±»çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–åŠŸèƒ½, è¯¦è§ Githubä»“åº“\n2. åŸç†: ç”±ä¸€ä¸ªJsonDataç±»æ¥è¡¨ç¤ºä»»ä½•Jsonæ•°æ®, åŒ…æ‹¬Object, Array, String, ==Integer, Float, Double, Boolean==, Null, å…¶ä¸­ç”±æšä¸¾å±æ€§DataTypeæ¥è¡¨ç¤ºè¯¥JsonDataå±äºä½•ç§æ•°æ®ç±»å‹. åˆ†æJsonæ–‡æœ¬, è¿™ä¸ªå°±æ— éœ€å¤šè¨€äº†, å¦‚æœæ„Ÿå…´è¶£, å¯ä»¥è”ç³»æˆ‘, è·å–å®ƒçš„æºä»£ç . å½“ç„¶, ä½ ä¹Ÿå¯ä»¥ç›´æ¥å°†dllåç¼–è¯‘. 3. å‘½åç©ºé—´: è¯¥Jsonè§£ææ–¹å¼æ‰€éœ€çš„æˆå‘˜ä½äºdllä¸­ CHO.Json å‘½åç©ºé—´ä¸‹ å‘½åç©ºé—´ä¸‹åŒ…å«äº†ä¸€äº›å¼‚å¸¸ç±»å‹: JsonDataTypeException, InvalidCharParseException, NotClosedParseException, ParseCallError, ParseUnknownError, JsonFormatParseExceptionè¿™äº›ç»§æ‰¿äºExceptionçš„ç±», å®ƒä»¬åˆ†åˆ«è¡¨ç¤ºäº† Jsonæ•°æ®ç±»å‹å¼‚å¸¸, åˆ†æJsonæ–‡æœ¬æ—¶çš„éæ³•å­—ç¬¦å¼‚å¸¸, åˆ†æJsonæ–‡æœ¬æ—¶çš„æ•°æ®æœªç»“æŸå¼‚å¸¸, åˆ†æJsonæ–‡æœ¬æ—¶çš„è°ƒç”¨é”™è¯¯, åˆ†æJsonæ–‡æœ¬æ—¶çš„æœªçŸ¥é”™è¯¯(è¯¥é”™è¯¯åœ¨æ­£å¸¸ä½¿ç”¨æ—¶ä¸ä¼šå‡ºç°, é™¤éç”¨æˆ·è‡ªå®šä¹‰çš„ç±»ç»§æ‰¿JsonData, å¹¶å†™äº†ä¸€äº›å¥‡æ€ªçš„ä»£ç ), åˆ†æJsonæ–‡æœ¬æ—¶çš„Jsonæ•°æ®æ ¼å¼é”™è¯¯. å‘½åç©ºé—´ä¸‹åŒ…å«äº†æšä¸¾ç±»å‹ JsonDataType, å®ƒçš„æˆå‘˜æœ‰è¿™äº›: Object, Array, String, Number, Bool, Null. è¿™äº›è¡¨ç¤ºäº†JsonDataä¸­æ‰€åŒ…å«çš„Jsonæ•°æ®çš„ç±»å‹. å‘½åç©ºé—´ä¸‹åŒ…å«çš„JsonDataæ˜¯CHO.Jsonçš„æ ¸å¿ƒ, å®ƒæä¾›äº†å¯¹æ‰€æœ‰Jsonæ•°æ®çš„æ“ä½œæ–¹æ³•, ä¾‹å¦‚Arrayçš„Addæ–¹æ³•, æä¾›äº†åˆ†æJsonæ–‡æœ¬çš„Parseæ–¹æ³•, å°†JsonDataç¤ºä¾‹è½¬æ¢ä¸ºJsonæ–‡æœ¬çš„ToJsonTestæ–¹æ³•, æ³¨æ„, åœ¨ä½¿ç”¨ä¸€ç§æ“ä½œJsonæ•°æ®çš„æ–¹æ³•å‰, è¯·ç¡®ä¿, å®ä¾‹æ‰€åŒ…å«çš„Jsonæ•°æ®æ˜¯æ–¹æ³•æ”¯æŒçš„, å¦åˆ™å°†æŠ›å‡ºJsonDataTypeExceptionå¼‚å¸¸. 4. ä½¿ç”¨: CHO.Jsonçš„ä½¿ç”¨åŸºæœ¬ä¸Šæ˜¯å¯¹JsonDataçš„æ“ä½œ, ä¸‹é¢ç»™å‡ºä¸€ä¸ªå®ä¾‹, ä»¥äº†è§£CHO.Jsonçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•.\nè¿™æ˜¯ä¸€ä¸ªJsonæ–‡æœ¬, æ¥ä¸‹æ¥å°†ä½¿ç”¨ç¨‹åºæ¥è¯»å–å®ƒå¹¶è¾“å‡ºä¸€äº›å€¼\n{ \u0026ldquo;å§“å\u0026rdquo;: \u0026ldquo;å°æ˜\u0026rdquo;, \u0026ldquo;æ€§åˆ«\u0026rdquo;: \u0026ldquo;ç”·\u0026rdquo;, \u0026ldquo;å¹´é¾„\u0026rdquo;: 16, \u0026ldquo;å¢ƒå†…\u0026rdquo;: true, \u0026ldquo;è‡ªè¿°\u0026rdquo;: null, \u0026ldquo;å­¦ä¹ ç§‘ç›®\u0026rdquo;: [ \u0026ldquo;è¯­æ–‡\u0026rdquo;, \u0026ldquo;æ•°å­¦\u0026rdquo;, \u0026ldquo;è‹±è¯­\u0026rdquo;, \u0026ldquo;ä¿¡æ¯æŠ€æœ¯\u0026rdquo; ] }\nå°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²è¡¨è¾¾å¼å: ==æ³¨æ„, åœ¨æ–°ç‰ˆæœ¬ä¸­, å°†JsonDataå®ä¾‹è½¬æ¢ä¸ºJsonæ–‡æœ¬ä½ éœ€è¦ä½¿ç”¨JsonDataçš„é™æ€æ–¹æ³•: ConvertToText== \u0026ldquo;{\\n \u0026quot;å§“å\u0026quot;: \u0026quot;å°æ˜\u0026quot;,\\n \u0026quot;æ€§åˆ«\u0026quot;: \u0026quot;ç”·\u0026quot;,\\n \u0026quot;å¹´é¾„\u0026quot;: 16,\\n \u0026quot;å¢ƒå†…\u0026quot;: true,\\n \u0026quot;è‡ªè¿°\u0026quot;: null,\\n \u0026quot;å­¦ä¹ ç§‘ç›®\u0026quot;: [\\n \u0026quot;è¯­æ–‡\u0026quot;,\\n \u0026quot;æ•°å­¦\u0026quot;,\\n \u0026quot;è‹±è¯­\u0026quot;,\\n \u0026quot;ä¿¡æ¯æŠ€æœ¯\u0026quot;\\n ]\\n}\u0026rdquo;\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 using System; using CHO.Json; namespace CSharpJson { class Program { static void Main(string[] args) { JsonData json = JsonData.Parse(\u0026#34;{\\n \\\u0026#34;å§“å\\\u0026#34;: \\\u0026#34;å°æ˜\\\u0026#34;,\\n \\\u0026#34;æ€§åˆ«\\\u0026#34;: \\\u0026#34;ç”·\\\u0026#34;,\\n \\\u0026#34;å¹´é¾„\\\u0026#34;: 16,\\n \\\u0026#34;å¢ƒå†…\\\u0026#34;: true,\\n \\\u0026#34;è‡ªè¿°\\\u0026#34;: null,\\n \\\u0026#34;å­¦ä¹ ç§‘ç›®\\\u0026#34;: [\\n \\\u0026#34;è¯­æ–‡\\\u0026#34;,\\n \\\u0026#34;æ•°å­¦\\\u0026#34;,\\n \\\u0026#34;è‹±è¯­\\\u0026#34;,\\n \\\u0026#34;ä¿¡æ¯æŠ€æœ¯\\\u0026#34;\\n ]\\n}\u0026#34;); if (json.DataType == JsonDataType.Object) { foreach(JsonData key in json.GetKeys()) { Console.WriteLine(string.Format(\u0026#34;{0}: {1}\u0026#34;, key.ToJsonText(), json[key].ToJsonText())); } } else { Console.WriteLine(\u0026#34;è¯»å–å‡ºç°äº†é”™è¯¯\u0026#34;); } Console.ReadKey(); } } } è¾“å‡ºç»“æœæ˜¯: \u0026ldquo;å§“å\u0026rdquo;: \u0026ldquo;å°æ˜\u0026rdquo; \u0026ldquo;æ€§åˆ«\u0026rdquo;: \u0026ldquo;ç”·\u0026rdquo; \u0026ldquo;å¹´é¾„\u0026rdquo;: 16 \u0026ldquo;å¢ƒå†…\u0026rdquo;: true \u0026ldquo;è‡ªè¿°\u0026rdquo;: null \u0026ldquo;å­¦ä¹ ç§‘ç›®\u0026rdquo;: [\u0026ldquo;è¯­æ–‡\u0026rdquo;, \u0026ldquo;æ•°å­¦\u0026rdquo;, \u0026ldquo;è‹±è¯­\u0026rdquo;, \u0026ldquo;ä¿¡æ¯æŠ€æœ¯\u0026rdquo;]\nä»ç»“æœæ¥çœ‹, æ­£å¸¸åˆ†æäº†Jsonæ–‡æœ¬å¹¶ä¸”æˆåŠŸå°†Jsonæ•°æ®è½¬æ¢ä¸ºäº†Jsonæ–‡æœ¬. ä¸‹è½½: Github: Githubä»“åº“ . . . . .\nè¡¥å……: . . .æŸ¥çœ‹å…ƒæ•°æ®æ—¶å¹¶ä¸èƒ½çœ‹åˆ°æ–¹æ³•æ³¨é‡Š, æ‰€ä»¥, æ¨èæŸ¥çœ‹æºä»£ç , é‚£é‡Œæœ‰å®Œæ•´çš„æ³¨é‡Š. . . .è‡ªè¿° : è‡ªå­¦C#çš„ä¸€åªå°è¾£é¸¡~ (æ¬¢è¿ä¸æˆ‘äº¤æµ~ []~ (ï¿£â–½ï¿£)~*)\n","date":"2020-07-02T23:24:19+08:00","permalink":"https://slimenull.com/p/20200702232419/","title":"[C#] æ— éœ€å®ä½“ç±», è§£æè¯»å†™Json, ç®€å•æ“ä½œã€‚"},{"content":"1. ä½ éœ€è¦çŸ¥é“è¿™äº› ä»£ç é€‚ç”¨äº: å°†å­—ç¬¦ä¸²æ•°ç»„ä¸­çš„é‡å¤å…ƒç´ å»é™¤, ä»…ç•™ä¸‹ä¸€ä¸ª åº”ç”¨åœºæ™¯: ä½ æœ‰ä¸€ä¸ªè¶…çº§é•¿çš„æ–‡æœ¬æ–‡ä»¶, è¿™é‡Œé¢æ¯ä¸€è¡Œéƒ½æ˜¯ä¸€æ¡æ•°æ®, ä¾‹å¦‚è¿™äº›æ•°æ®æ˜¯ç”¨çˆ¬è™«è·å–çš„æœç´¢å…³é”®å­—, ä½†å¯èƒ½å«æœ‰é‡å¤, ä½ ç°åœ¨éœ€è¦å°†å®ƒä»¬å»é‡. è¿™ä¸ªç®—æ³•å¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿå®Œæˆå»é‡çš„å·¥ä½œ å±€é™æ€§: ä¸‹é¢å°†ä»‹ç»ä¸¤ç§ç®—æ³• ä¸€ç§æ˜¯å…ˆè¿›è¡Œæ’åº, è¿™æ—¶, ç›¸åŒçš„å…ƒç´ éƒ½åœ¨ä¸€èµ·äº†, ç„¶åå†è¿›è¡Œä¸€æ¬¡éå†å»é‡, é‚£ä¹ˆé™¤äº†æ’åºçš„æ—¶é—´, ä»…è¿›è¡Œä¸€æ¬¡éå†å°±å¯ä»¥å»é‡, é€Ÿåº¦å¾ˆå¿«, ä½†åŸæœ‰é¡ºåºæ”¹å˜äº†. ç¬¬äºŒç§ç®—æ³•æ˜¯è¾ƒä¸ºç‰¹æ®Šçš„ç®—æ³•, å€ŸåŠ©äº†å¼•ç”¨ç±»å‹è¿™ä¸ªç‰¹æ€§, å¯ä»¥ä¿è¯åŸæœ‰é¡ºåºä¸å˜, ä½†éœ€è¦å®šä¹‰å­—å…¸å’Œåˆ—è¡¨, ä¹Ÿå°±æ˜¯è¯´è¦å¤šéœ€è¦ä¸€äº›å†…å­˜. 2. ç®—æ³•çš„ä¸»è¦å†…å®¹ ä¸»è¦åŸç† é€šè¿‡æ’åº, å°†ç›¸åŒçš„å…ƒç´ å‡‘åˆ°ä¸€èµ·, é‚£ä¹ˆåªéœ€è¦æ¯”å¯¹å½“å‰å…ƒç´ å’Œä¸€ä¸ªç›¸é‚»å…ƒç´ å°±å¯ä»¥å¾—å‡ºè¯¥å…ƒç´ æ˜¯å¦æ˜¯é‡å¤çš„. é‚£ä¹ˆåªéœ€è¦éå†ä¸€æ¬¡å°±å¯ä»¥åšåˆ°å»é‡. åœ¨æ­¤åŸºç¡€ä¸Š, ç”¨Dictionaryçš„æ ¹æ®é”®å¯ä»¥å¿«é€Ÿè®¿é—®å€¼å¾—ç‰¹æ€§, å°†åŸå­—ç¬¦ä¸²æ•°ç»„çš„å…ƒç´ ç´¢å¼•ä¸å…ƒç´ å¼•ç”¨ä¿å­˜åˆ°Dictionaryä¸­, å°±å¯ä»¥é€šè¿‡ç´¢å¼•å°†å­—ç¬¦ä¸²æ•°ç»„è¿˜åŸåˆ°åŸæ¥çš„é¡ºåº, è¯¦ç»†è¿˜è¯·çœ‹ä»£ç  å®ä¾‹ä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 string[] RemoveSameElement(string[] source) { List\u0026lt;string\u0026gt; result = source.ToList(); result.Sort(); for(int i = 1; i \u0026lt; source.Length;) { if (result[i] == result[i - 1]) { result.RemoveAt(i); } else { i++; } } return result.ToArray(); } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 string[] RemoveSameElement(string[] source) { Dictionary\u0026lt;int, StringInfo\u0026gt; d = new Dictionary\u0026lt;int, StringInfo\u0026gt;(); List\u0026lt;StringInfo\u0026gt; temp = new List\u0026lt;StringInfo\u0026gt;(); List\u0026lt;string\u0026gt; result = new List\u0026lt;string\u0026gt;(); for (int i = 0; i \u0026lt; source.Length; i++) { d.Add(i, new StringInfo(source[i])); temp.Add(d[i]); } temp.Sort(); for (int i = 0; i \u0026lt; temp.Count;) { if (temp[i] != null) { temp.RemoveAt(i); } else { i++; } } foreach(StringInfo i in temp) { result.Add(i.Value); } return result.ToArray(); } // é€šè¿‡è¿™ä¸ªStringInfoç±»æ¥å®ç°å¯¹stringçš„å¼•ç”¨ class StringInfo : IComparable { public StringInfo(string value) { Value = value; } public string Value; public int CompareTo(object obj) { if (obj.GetType() == GetType()) { return Value.CompareTo((obj as StringInfo).Value); } else { throw new ArgumentException(\u0026#34;å‚æ•°å¿…é¡»ä¸ºStringInfoç±»å‹\u0026#34;); } } } End 1. è¿™ä¸ªç®—æ³•åªæ˜¯å¶ç„¶é—´æƒ³åˆ°çš„, ä¸å–œå‹¿å–·, ä¹Ÿè¯·å¤šå¤šæŒ‡æ•™. 2. ç®—æ³•ä½œä¸ºä¸€ä¸ªåŠŸèƒ½åµŒå…¥åˆ°æˆ‘çš„ä¸€ä¸ªæ–‡æœ¬å¤„ç†å°å·¥å…·ä¸­ (å¯¹æ–‡æœ¬æ–‡ä»¶çš„æ¯ä¸€è¡Œè¿›è¡Œç‰¹å®šå¤„ç†), è¿™ä¸ªå·¥å…·åŒ…å«ä»¥ä¸‹åŠŸèƒ½ \u0026lsquo;åœ¨è¡Œé¦–è¡Œæœ«éšæœºæ’å…¥ç‰¹å®šçš„å†…å®¹\u0026rsquo;, \u0026lsquo;åœ¨è¡Œé¦–è¡Œæœ«ä¾ç…§è‡ªå·±å®šä¹‰å¥½çš„ä¸€ä¸ªå­—ç¬¦ä¸²åºåˆ—,æŒ‰é¡ºåºä¸€ä¸ªä¸ªæ’å…¥åˆ°è¡Œé¦–æˆ–è¡Œæœ«\u0026rsquo;, \u0026lsquo;ä»¥ä¸€å®šåˆå€¼,ä¸€å®šå¢é‡, åœ¨è¡Œé¦–æˆ–è¡Œæœ«æ’å…¥æ•°å­—\u0026rsquo;, \u0026lsquo;æ ¹æ®æ¯ä¸€è¡Œçš„å­—ç¬¦ä¸²é•¿åº¦æ’åº\u0026rsquo; \u0026lsquo;æ ¹æ®æ¯ä¸€è¡Œçš„å­—ç¬¦ä¸²å†…å®¹æ’åº\u0026rsquo; \u0026lsquo;å»é™¤åŠŸèƒ½(å»é™¤ç©ºè¡Œ,å»é™¤é‡å¤è¡Œ, å»é™¤è¡Œé¦–è¡Œæœ«æŒ‡å®šå­—ç¬¦,å»é™¤åŒ…å«å…³é”®å­—çš„è¡Œ ç­‰ç­‰)\u0026rsquo; . . . . . . . . . . . æƒ³æ°é¥­ (;Â´à¼àº¶Ğ”à¼àº¶`) ä¸Šé¢æ‰€è¯´çš„å°å·¥å…·æ˜¯å¸®äººä»£å†™çš„, å¦‚æœä½ éœ€è¦å®ƒå¹¶ä¸”æ‡’å¾—å†™ä»£ç , æˆ‘å¾ˆä¹æ„å°†ä»–å‡ºå”®ç»™ä½ . ä¹‹å‰æ²¡æœ‰æ’åºåŠŸèƒ½çš„æ—¶å€™, åŸå”®ä»·æ˜¯50ï¿¥ (è€æ¿ç»™äº†è¿™ä¹ˆå¤š) æ¬²è´­ä¹°çš„è¯\u0026hellip; ç§èŠå°±å¥½ (è™½ç„¶è¿™çš„ç¡®æ˜¯ä¸€ä¸ªæ²¡æœ‰ä»€ä¹ˆæŠ€æœ¯å«é‡çš„ä¸œè¥¿) ","date":"2020-06-27T05:43:32+08:00","permalink":"https://slimenull.com/p/20200627054332/","title":"æ•°ç»„å»é‡: è¶…é«˜é€Ÿå­—ç¬¦ä¸²å»é‡ (å«ä¿ç•™åŸé¡ºåºçš„æ–¹æ³•)"},{"content":"1. ä½ éœ€è¦çŸ¥é“è¿™äº›: ä»£ç é€‚ç”¨äº: é€‚ç”¨äºå­—ç¬¦ä¸²æ•°ç»„çš„å…ƒç´ é•¿åº¦å˜åŒ–é‡è¾ƒå°çš„, æ¯”å¦‚å­—ç¬¦ä¸²çš„é•¿åº¦æ™®éåœ¨1~2000, é‚£ä¹ˆæ­¤æ—¶, è¿™ä¸ªç®—æ³•å°†æœ‰è¶…é«˜çš„æ€§èƒ½, æµ‹è¯•ç»“æœæ˜¯ 10ä¸‡æ¡æ•°æ®æ’åºæ‰€éœ€æ—¶é—´ä¸º91ms(ä½ æ²¡çœ‹é”™). åº”ç”¨åœºæ™¯: ä½ æœ‰ä¸€ä¸ªè¶…çº§é•¿çš„æ–‡æœ¬æ–‡ä»¶, è¿™é‡Œé¢æ¯ä¸€è¡Œéƒ½æ˜¯ä¸€æ¡æ•°æ®, ä¾‹å¦‚è¿™äº›æ•°æ®æ˜¯ç”¨çˆ¬è™«è·å–çš„æœç´¢å…³é”®å­—, ä½ ç°åœ¨éœ€è¦å°†å®ƒä»¬æ’åº, åˆ«çŠ¹è±«, æˆ‘è®¤ä¸ºè¿™ä¸ªç®—æ³•éå¸¸é€‚åˆä½ . å±€é™æ€§ å­—ç¬¦ä¸²æ•°ç»„çš„å…ƒç´ é•¿åº¦å˜åŒ–é‡è¶Šå¤§, è¯¥ç®—æ³•æ•ˆç‡å¯èƒ½ä¼šè¶Šä½,å› ä¸ºé‡Œé¢åŒ…å«äº†å¯¹å­—ç¬¦ä¸²é•¿åº¦å˜åŒ–é‡æ’åºçš„è¿‡ç¨‹,è¿™ä¸ªè¿‡ç¨‹æ˜¯ä½¿ç”¨çš„é€‰æ‹©æ’åºæ³•ã€‚ï¼ˆé€‰æ‹©æ’åºæ³•çš„æ‰€éœ€æ—¶é—´ä¸æ•°æ®é•¿åº¦ä¸æˆæ­£æ¯”,ä¸å¤šèµ˜è¿°ï¼‰ 2.ç®—æ³•çš„ä¸»è¦å†…å®¹ ä¸»è¦åŸç†: å®šä¹‰ä¸€ä¸ªå­—å…¸, é”®æ˜¯int, å€¼æ˜¯å¯å˜çš„å­—ç¬¦ä¸²åˆ—è¡¨, å®šä¹‰ä¸€ä¸ªå¯å˜çš„å­—ç¬¦ä¸²åˆ—è¡¨ä½œä¸ºå­˜å‚¨ç»“æœçš„å®¹å™¨ å¾ªç¯æºå­—ç¬¦ä¸²æ•°ç»„, å°†ä¸€åˆ‡å¯èƒ½çš„é•¿åº¦ä½œä¸ºint, ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²åˆ—è¡¨ä½œä¸ºå€¼, æ·»åŠ åˆ°ä¸Šé¢æ‰€è¯´çš„å­—å…¸é‡Œé¢ ç¬¬äºŒæ¬¡å¾ªç¯æºå­—ç¬¦ä¸²æ•°ç»„, å°†è¿­ä»£åˆ°çš„å­—ç¬¦ä¸²çš„é•¿åº¦ä½œä¸ºé”®, åœ¨å­—å…¸ä¸­é”®æ‰€å¯¹åº”çš„å­—ç¬¦ä¸²åˆ—è¡¨ä¸­æ·»åŠ è¿™ä¸ªå­—ç¬¦ä¸² æ’åºå­—å…¸çš„é”®, å¾ªç¯æ’åºåçš„æ‰€æœ‰é”®, å°†é”®å¯¹åº”çš„å­—ç¬¦ä¸²åˆ—è¡¨çš„æ¯ä¸€ä¸ªå­—ç¬¦ä¸²æ·»åŠ åˆ°ç»“æœä¸­ æ’åºç»“æŸ ç¤ºä¾‹ä»£ç : 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 // è¿™æ˜¯C#ä»£ç  // Dictionary ä¸ List ä½äº System.Collections.Generic å‘½åç©ºé—´ä¸‹ string[] StringSort(string[] source) { int[] sortKeys(int[] src) // è¿™é‡Œæ˜¯ç”¨äºæ’åºå­—å…¸çš„é”®çš„ { int most; int mostIndex = 0; int temp; if (src.Length \u0026gt; 1) { for (int i = 1; i \u0026lt; src.Length; i++) { most = src[i]; for (int j = i; j \u0026lt; src.Length; j++) { if (src[j] \u0026lt; most) { most = src[j]; mostIndex = j; } } if (most \u0026lt; src[i - 1]) { src[mostIndex] = src[i - 1]; src[i - 1] = most; } } } return src; } Dictionary\u0026lt;int, List\u0026lt;string\u0026gt;\u0026gt; firstSortedString = new Dictionary\u0026lt;int, List\u0026lt;string\u0026gt;\u0026gt;(); List\u0026lt;string\u0026gt; result = new List\u0026lt;string\u0026gt;(); foreach (string i in source) { if (!firstSortedString.ContainsKey(i.Length)) { firstSortedString.Add(i.Length, new List\u0026lt;string\u0026gt;()); } } foreach (string i in source) { firstSortedString[i.Length].Add(i); } foreach (int i in sortKeys(firstSortedString.Keys.ToArray())) { foreach (string j in firstSortedString[i]) { result.Add(j); } } return result.ToArray(); } } End 1. è¿™ä¸ªç®—æ³•åªæ˜¯å¶ç„¶é—´æƒ³åˆ°çš„, ä¸å–œå‹¿å–·, ä¹Ÿè¯·å¤šå¤šæŒ‡æ•™. 2. ç®—æ³•ä½œä¸ºä¸€ä¸ªåŠŸèƒ½åµŒå…¥åˆ°æˆ‘çš„ä¸€ä¸ªæ–‡æœ¬å¤„ç†å°å·¥å…·ä¸­ (å¯¹æ–‡æœ¬æ–‡ä»¶çš„æ¯ä¸€è¡Œè¿›è¡Œç‰¹å®šå¤„ç†), è¿™ä¸ªå·¥å…·åŒ…å«ä»¥ä¸‹åŠŸèƒ½ \u0026lsquo;åœ¨è¡Œé¦–è¡Œæœ«éšæœºæ’å…¥ç‰¹å®šçš„å†…å®¹\u0026rsquo;, \u0026lsquo;åœ¨è¡Œé¦–è¡Œæœ«ä¾ç…§è‡ªå·±å®šä¹‰å¥½çš„ä¸€ä¸ªå­—ç¬¦ä¸²åºåˆ—,æŒ‰é¡ºåºä¸€ä¸ªä¸ªæ’å…¥åˆ°è¡Œé¦–æˆ–è¡Œæœ«\u0026rsquo;, \u0026lsquo;ä»¥ä¸€å®šåˆå€¼,ä¸€å®šå¢é‡, åœ¨è¡Œé¦–æˆ–è¡Œæœ«æ’å…¥æ•°å­—\u0026rsquo;, \u0026lsquo;æ ¹æ®æ¯ä¸€è¡Œçš„å­—ç¬¦ä¸²é•¿åº¦æ’åº\u0026rsquo; \u0026lsquo;æ ¹æ®æ¯ä¸€è¡Œçš„å­—ç¬¦ä¸²å†…å®¹æ’åº\u0026rsquo; \u0026lsquo;å»é™¤åŠŸèƒ½(å»é™¤ç©ºè¡Œ,å»é™¤é‡å¤è¡Œ, å»é™¤è¡Œé¦–è¡Œæœ«æŒ‡å®šå­—ç¬¦,å»é™¤åŒ…å«å…³é”®å­—çš„è¡Œ ç­‰ç­‰)\u0026rsquo; . . . . . . . . . . . æƒ³æ°é¥­ (;Â´à¼àº¶Ğ”à¼àº¶`) ä¸Šé¢æ‰€è¯´çš„å°å·¥å…·æ˜¯å¸®äººä»£å†™çš„, å¦‚æœä½ éœ€è¦å®ƒå¹¶ä¸”æ‡’å¾—å†™ä»£ç , æˆ‘å¾ˆä¹æ„å°†ä»–å‡ºå”®ç»™ä½ . ä¹‹å‰æ²¡æœ‰æ’åºåŠŸèƒ½çš„æ—¶å€™, åŸå”®ä»·æ˜¯50ï¿¥ (è€æ¿ç»™äº†è¿™ä¹ˆå¤š) æ¬²è´­ä¹°çš„è¯\u0026hellip; ç§èŠå°±å¥½ (è™½ç„¶è¿™çš„ç¡®æ˜¯ä¸€ä¸ªæ²¡æœ‰ä»€ä¹ˆæŠ€æœ¯å«é‡çš„ä¸œè¥¿) ","date":"2020-06-26T02:04:05+08:00","permalink":"https://slimenull.com/p/20200626020405/","title":"æ’åºç®—æ³•: è¶…é«˜é€Ÿæ ¹æ®å­—ç¬¦ä¸²é•¿åº¦æ’åºçš„ç®—æ³•"},{"content":"ç»è¿‡æµ‹è¯•,Image.GetThumbnailImage æ–¹æ³•å¹¶ä¸åªæ˜¯è·å–ç¼©ç•¥å›¾,ä½ ç”šè‡³å¯ä»¥æ‹¿å®ƒæ¥æ”¾å¤§å›¾ç‰‡,ä»¥åŠæ›´å¤šéªšæ“ä½œ ç¨å¾®åŒ…è£…ä¸€ä¸‹,å°±å¾—åˆ°äº†ä¸‹é¢çš„å‡½æ•°,è¿™å¯çœŸæ˜¯ä»¤äººæ„‰æ‚¦å‘€ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 /// \u0026lt;summary\u0026gt; /// ç¼©æ”¾å›¾ç‰‡ /// \u0026lt;/summary\u0026gt; /// \u0026lt;param name=\u0026#34;source\u0026#34;\u0026gt;å¤„ç†æº\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;output\u0026#34;\u0026gt;è¾“å‡º\u0026lt;/param\u0026gt; /// \u0026lt;param name=\u0026#34;times\u0026#34;\u0026gt;å€æ•°\u0026lt;/param\u0026gt; /// \u0026lt;returns\u0026gt;è¡¨ç¤ºæ“ä½œæ˜¯å¦æˆåŠŸ\u0026lt;/returns\u0026gt; private bool GetMicroImage(Image source, out Image output, int times) { try { output = source.GetThumbnailImage(source.Width * times, source.Height * times , () =\u0026gt; false, IntPtr.Zero); return true; } catch { output = source; return false; } } éœ€è¦æ³¨æ„çš„æ˜¯(GetThumbnailImageæ–¹æ³•): 1.ç¼©æ”¾æ—¶,å¦‚æœæŒ‡å®šçš„å®½é«˜æ¯”ä¾‹ä¸åŸå›¾å®½é«˜æ¯”ä¾‹ä¸åŒ,åˆ™è¾“å‡ºçš„å›¾ç‰‡è¾ƒåŸå›¾è¿˜è¿›è¡Œäº†æ‹‰ä¼¸ ä¹Ÿå°±æ˜¯è¯´,GetThumbnailImage æ–¹æ³•å¯¹åŸå›¾å¤„ç†æ—¶,å¹¶ä¸æ˜¯ç­‰æ¯”ä¾‹ç¼©æ”¾\n","date":"2020-05-26T05:10:54+08:00","permalink":"https://slimenull.com/p/20200526051054/","title":"[C#] Imageçš„Image.GetThumbnailImage(è·å–ç¼©ç•¥å›¾)æ–¹æ³•å®é™…æ˜¯ç¼©æ”¾ä¸æ‹‰ä¼¸"},{"content":"æ•ˆæœå›¾ èƒ½æ»¡è¶³æˆ‘è‡ªå·±çš„éœ€æ±‚äº† ç›´æ¥çœ‹ä»£ç å§ çœŸçš„å¾ˆç®€å•\u0026hellip; è¿™æ˜¯ä¸€ä¸ªç±»,ç›´æ¥å¤åˆ¶ç²˜è´´è¿‡å»å°±å¥½,ä¸éœ€è¦ä»€ä¹ˆå¼•ç”¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 class ChatBubble { public ChatBubble(Panel panel, Font font) { if (panel.Controls.Count != 0) throw new Exception(\u0026#34;æŒ‡å®šPanelæ§ä»¶ä¸ä¸ºç©º!\u0026#34;); ChatPlace = panel; BubbleFont = font; MsgMaxLength = panel.Width - (6 * 4 + 35 * 2); // å…¶ä¸­, å››ä¸ª6ä¸º å›¾ç‰‡ä¸(å®¹å™¨ä»¥åŠæ¶ˆæ¯æ–‡æœ¬æ¡†)çš„è·ç¦» ,ä¸¤ä¸ª35ä¸ºä¸¤ä¾§å›¾ç‰‡çš„å¤§å°. } readonly Panel ChatPlace; readonly Font BubbleFont; int NowY = 7; readonly int MsgMaxLength; public enum MsgPlace { Left, Right } // æ°”æ³¡åˆ›å»ºçš„ä½ç½® public void AddMsg(Image Photo, string Text, MsgPlace Place, string Name) { if (ChatPlace.Controls.Count != 0) NowY = ChatPlace.Controls[ChatPlace.Controls.Count - 2].Location.Y + ChatPlace.Controls[ChatPlace.Controls.Count - 1].Height + 7; PictureBox photo = new PictureBox(); // å¤´åƒ Label nickname = new Label(); // æ˜µç§° Label msg = new Label(); // æ¶ˆæ¯å†…å®¹ photo.Size = new Size(35, 35); photo.SizeMode = PictureBoxSizeMode.StretchImage; photo.Image = Photo; nickname.AutoSize = true; nickname.MaximumSize = new Size(0, 0); nickname.Font = BubbleFont; nickname.Text = Name; msg.AutoSize = true; msg.Font = BubbleFont; msg.MaximumSize = new Size(MsgMaxLength, 0); msg.Text = Text; msg.BorderStyle = BorderStyle.FixedSingle; ChatPlace.Controls.Add(nickname); ChatPlace.Controls.Add(photo); ChatPlace.Controls.Add(msg); if (Place == MsgPlace.Left) { photo.Location = new Point(7, NowY); nickname.Location = new Point(photo.Location.X + photo.Width + 6, NowY); msg.Location = new Point(nickname.Location.X, NowY + nickname.Size.Height); } else { photo.Location = new Point(ChatPlace.Width - 7 - 35 - 17, NowY); nickname.Location = new Point(photo.Location.X - 7 - nickname.Width - 17, NowY); msg.Location = new Point(photo.Location.X - 7 - msg.Width - 17, NowY + nickname.Size.Height); // è¿™é‡Œçš„å‡å»17æ˜¯é™¤å»æ»šåŠ¨æ¡çš„å®½åº¦ } } } // ç®€æ˜“èŠå¤©æ°”æ³¡ ä½¿ç”¨è¿™ä¸ªç±»æ—¶,æ˜¯éœ€è¦æä¾›ä¸€ä¸ªPanelæ§ä»¶å¯¹è±¡ä½œä¸ºæ°”æ³¡åˆ›å»ºçš„ä½ç½®.\nå¯ä»¥æ·»åŠ ä¸¤ç§æ¶ˆæ¯,å·¦ä¾§æˆ–è€…å³ä¾§.\næœ€é‡è¦çš„åŸç†å°±æ˜¯Labelçš„AutoSize,é€šè¿‡è¿™ä¸ª,æˆ‘ä»¬å°±å¯ä»¥çœå»å¾ˆå¤šéº»çƒ¦,ç„¶åå†è®¡ç®—ä¸€ä¸ªæ°”æ³¡æœ€å¤§çš„å®½åº¦å¯ä»¥æ˜¯å¤šå°‘,è®¾ç½®Labelçš„æœ€å¤§å®½åº¦,äºæ˜¯åˆå®ç°äº†è‡ªåŠ¨æ¢è¡Œ.\nä½¿ç”¨æ–¹å¼: åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­æ·»åŠ è¿™ä¸ªç±»,ä¹‹åå®ä¾‹åŒ– å®ä¾‹åŒ–æ—¶éœ€è¦æä¾›ä¸€ä¸ªpanelæ§ä»¶å®ä¾‹æ¥ä½œä¸ºæ°”æ³¡åˆ›å»ºçš„å®¹å™¨ ä¹‹åè¦æ·»åŠ æ¶ˆæ¯çš„æ—¶å€™ç›´æ¥ä½¿ç”¨å®ä¾‹çš„æ–¹æ³• AddMsgå³å¯,å‚æ•°ä¸­å·²ç»åŒ…å«äº†ç”¨æˆ·å¤´åƒ(Photo),æ¶ˆæ¯å†…å®¹(Text),æ¶ˆæ¯ä½ç½®(Place),å‘æ¶ˆæ¯çš„ç”¨æˆ·(Name).\nä½ å¯èƒ½ä¹Ÿéœ€è¦è¿™ä¸ª . ä¸ä¸€å®šä¸ä¸Šé¢çš„ä»£ç æœ‰å…³,ä½†ä¸èŠå¤©æ°”æ³¡æœ‰å…³ 1 2 3 TestBox textBox1 = new TextBox(); int Lines = textBox1.GetLineFromCharIndex(textBox1.Text.Length) - 1; //Lineså³ä¸ºtextBox1ä¸­æ–‡æœ¬çš„è¡Œæ•°(åŒ…æ‹¬è‡ªåŠ¨æ¢è¡Œ) ","date":"2020-04-22T08:10:50+08:00","permalink":"https://slimenull.com/p/20200422081050/","title":"[C#] ç®€æ˜“çš„èŠå¤©æ°”æ³¡(å¾ˆç®€å•çš„å®ç°)"},{"content":"ä¹‹å‰ä¸€ç›´ä¸ç†è§£å¦‚ä½•æ˜¯ä»ç½‘ç»œä¸Šä¸‹è½½æ–‡ä»¶çš„\u0026hellip;è‡ªå·±è¯•äº†è¯•æ‡‚äº†\n1 2 3 4 5 FileStream file = File.CreatWrite(filePath); // åˆ›å»ºæ–‡ä»¶ WebRequest.Creat(url).GetResponse().GetResponseStream().CopyTo(file); // åˆ›å»ºWebRequestå¯¹è±¡,è·å–å“åº”,è·å–å“åº”æµ,å°†å“åº”æµå†™å…¥åˆ°æ–‡ä»¶æµ file.Close(); //å…³é—­æ–‡ä»¶ å—¯,è¿™ç§ç®€æ´çš„ä»£ç æœ€å–œæ¬¢äº† (è™½ç„¶ç®€æ´\u0026hellip;ä½†æ˜¯æ²¡äººæ„¿æ„çœ‹çš„hhh)\næˆ–è€…ä¹Ÿå¯ä»¥å†™æˆå‡½æ•°\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 bool DownloadFile(string url, string toDirectory, string fileName, int timeout = 2000) //è¿”å›å€¼æ˜¯æ˜¯å¦ä¸‹è½½æˆåŠŸ { string PathCombine(string path1,string path2) //åˆæˆè·¯å¾„ { if (path1.EndsWith(\u0026#34;\\\\\u0026#34;)) { path1 = path1.Substring(0, path1.Length - 1); } if (path2.StartsWith(\u0026#34;\\\\\u0026#34;)) { path2 = path2.Substring(1); } return path1 + \u0026#34;\\\\\u0026#34; + path2; } if(!Directory.Exists(toDirectory)) { Directory.CreatDirectory(toDirectory); } FileStream file = File.OpenWrite(fileName); WebRequest request = WebRequest.Creat(url); request.Timeout = timeout; //è®¾ç½®è¯·æ±‚è¶…æ—¶ä¸ºå‡½æ•°å‚æ•° try { request.GetResponse().GetResponseStream().CopyTo(file); } catch { return false; } file.Close(); return true; å—¯,è¿™æ ·å¥½äº†ä¸€äº›,å› ä¸ºè®¾ç½®äº†è¯·æ±‚è¶…æ—¶\n","date":"2020-04-16T03:23:54+08:00","permalink":"https://slimenull.com/p/20200416032354/","title":"C# ä»ç½‘ç»œä¸Šä¸‹è½½æ–‡ä»¶"},{"content":"C# åŠ¨æ€è¾“å…¥,åœ¨è¾“å…¥æ—¶ä½ ä¹Ÿå¯ä»¥è®¿é—®ä½ å†™å…¥çš„å†…å®¹) æ³¨æ„ï¼Œè¿™é‡Œæ˜¯åœ¨æˆ‘åˆšå­¦C#æ—¶å†™çš„ï¼Œä½†æˆ‘ä¸æƒ³åˆ é™¤ä»»ä½•æˆ‘çš„è¶³è¿¹. ==è¿™ä¸ªç±»åº“ä¸æ˜¯å®Œå–„çš„ï¼Œå¦‚æœéœ€è¦å®Œæ•´åŠŸèƒ½(çœŸçš„å¾ˆå¥½ç”¨)ï¼Œè¯·å»æˆ‘çš„æ–°æ–‡ç« ==: [C#] æ§åˆ¶å°åŠ¨æ€è¾“å…¥ - å¢å¼ºç‰ˆReadLine()\nä»£ç : ä¸»è¦å°±æ˜¯èƒ½å¤Ÿå®ç°åœ¨è¾“å…¥çš„åŒæ—¶,å­çº¿ç¨‹å¯ä»¥é€šè¿‡è¯¥å®ä¾‹çš„Textå±æ€§æ¥è®¿é—®å·²ç»è¾“å…¥äº†çš„å†…å®¹,åˆ«çš„å€’ä¹Ÿæ‡’å¾—å®ç°äº†awa\nåˆšå­¦ä¸ä¹…,ä¸å–œå‹¿å–·\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 //å…¶å®ä»£ç ä¸æ€ä¹ˆå¥½,åšåšå‚è€ƒå°±å¯ä»¥äº†,æ³¨æ„:æ²¡æœ‰æ™®é€šConsole.ReadLine()çš„ä¸Šä¸‹é”®åŠŸèƒ½ class DynamicInput { class CharInfo { public CharInfo(int position,char chr) { this.position = position; this.chr = chr; } int position; char chr; public int Position { get { return position; } } public char Char { get { return chr; } } } delegate void Add_historyEventHandler(object sender,EventArgs e); private int default_left; private string text = \u0026#34;\u0026#34;; private List\u0026lt;string\u0026gt; input_history = new List\u0026lt;string\u0026gt;(); private List\u0026lt;CharInfo\u0026gt; input_list = new List\u0026lt;CharInfo\u0026gt;(); public string Text { get { return text; } } public string Start() { default_left = Console.CursorLeft; ConsoleKeyInfo key; while (true) { key = Console.ReadKey(); if (key.Key.Equals(ConsoleKey.Enter)) { return text; } //å›è½¦ç¡®è®¤ if (key.Key.Equals(ConsoleKey.Backspace)) { Console.Write(\u0026#34; \u0026#34;); if (Console.CursorLeft \u0026gt; input_list.Count) { if (input_list.Count \u0026gt;1 ) { for (int i = 0; i \u0026lt;= Console.CursorLeft - input_list[input_list.Count-2].Position; i ++) { Console.Write(\u0026#34;\\b \\b\u0026#34;); } } else { for (int i = 0; i \u0026lt;= Console.CursorLeft - default_left; i++) { Console.Write(\u0026#34;\\b \\b\u0026#34;); } } } else { if (input_list.Count \u0026gt; 1) { for (int i = 0; i \u0026lt;= Console.CursorLeft + Console.WindowLeft - input_list[input_list.Count - 2].Position; i++) { Console.Write(\u0026#34;\\b \\b\u0026#34;); } } else { for (int i = 0; i \u0026lt;= Console.CursorLeft + Console.WindowLeft - default_left; i++) { Console.Write(\u0026#34;\\b \\b\u0026#34;); } } } if(input_list.Count \u0026gt; 0) { text = text.Substring(0, text.Length - 1); input_list.RemoveAt(input_list.Count - 1); } continue; } //BackSpaceé€€æ ¼ if (!key.Key.Equals(ConsoleKey.Spacebar) \u0026amp; (key.KeyChar == \u0026#39; \u0026#39;|key.KeyChar == \u0026#39;\\0\u0026#39;)) { Console.Write(\u0026#34;\\b\u0026#34;); continue; } text += key.KeyChar; //æ›´æ–°Text input_list.Add(new CharInfo(Console.CursorLeft, key.KeyChar)); //è®°å½•å­—ç¬¦ä¸ä½ç½® } } } ","date":"2020-04-06T03:48:49+08:00","permalink":"https://slimenull.com/p/20200406034849/","title":"C# åŠ¨æ€è¾“å…¥"}]